{"version":3,"file":"kendo.grid.js","names":["useLoaderContainer","$","kendo","window","ContextMenu","ui","extend","encode","htmlEncode","ACTION","GridContextMenu","init","element","options","that","this","fn","call","_overrideTemplates","_extendItems","bind","_onSelect","_onOpen","templates","sprite","icon","spriteCssClass","iconClass","defaultItems","separator","name","create","text","command","rules","edit","destroy","select","items","softRules","copySelection","copySelectionNoHeaders","paste","reorderRow","exportPDF","exportExcel","sortAsc","sortDesc","moveGroupPrevious","moveGroupNext","events","concat","ev","item","data","split","map","val","indexOf","key","reduce","acc","v","Object","assign","target","action","menu","sender","elTarget","event","isEmptyObject","closest","length","preventDefault","_toggleSeparatorVisibility","find","attr","each","i","enable","_validateSoftRules","filter","prev","next","hide","isPlainObject","keys","_append","_extendItem","messages","j","forEach","subItem","commands","uid","guid","_readState","_validateRules","tool","state","states","isFunction","append","args","trigger","grid","jQuery","Command","Class","MoveGroupCommand","exec","groupable","method","dir","_change","SortCommand","idx","dataSource","sort","field","_getCellField","multipleMode","sortable","mode","compare","splice","push","AddCommand","addRow","EditCommand","inCellMode","_editMode","editCell","editRow","DeleteCommand","removeRow","CopySelectionCommand","withHeaders","copySelectionToClipboard","SelectRowCommand","selectMode","Selectable","parseOptions","selectable","cell","SelectAllRowsCommand","rows","ClearSelectionCommand","clearSelection","ReorderRowCommand","newIndex","index","reorderRowTo","ExportPDFCommand","saveAsPDF","ExportExcelCommand","selection","exportSelectedToExcel","saveAsExcel","GridCommand","__meta__","id","category","description","depends","features","undefined$1","DataSource","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","getType","type","grep","isArray","Array","inArray","prototype","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","DATA_CELL_HIDDENINCLUDED","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","CARET_ALT_DOWN","CARET_ALT_RIGHT","CARET_ALT_RIGHT_CACHE","NS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGING","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","PASTE","SCROLL","SYNC","LOAD_START","LOAD_END","REQUESTEND","FOCUSED","HOVER","ACTIVE","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","SVG_ICON_CLASS","ORDER_CLASS","SORTED_CLASS","HEADER_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","GROUPING_ROW","RESIZE","ROWRESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","MOUSEDOWN","MOUSEUP","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","DUBLECLICK","HEIGHT","WIDTH","AUTO","TABINDEX","FUNCTION","STRING","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","PX","TR","DIV","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","whitespaceRegExp","nonDataCellsRegExp","RegExp","filterRowRegExp","COMMANDBUTTONTMPL","className","DEFAULTSELECTCOLUMNTMPL","size","ariaLabel","SELECTCOLUMNTMPL","SELECTCOLUMNHEADERTMPL","DRAGHANDLECOLUMNTMPL","DEFAULTHEADERTEMPLATE","isRtl","browser","GroupsPager","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","defaultBodyContextMenu","defaultHeadContextMenu","defaultGroupsContextMenu","Pager","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","global","allowSelection","start","e","capture","move","scrollTop","y","delta","scrollLeft","x","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","programmaticScrollPosition","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","_alwaysScrollTop","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","divElements","join","empty","cancel","page","_programmaticallyScrolling","resolve","attrEquals","attrName","attrValue","groupCells","count","stringifyAttributes","attributes","defaultCommands","save","themeColor","update","canceledit","excel","pdf","search","columns","fillMode","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","attachCustomCommandEvent","commandName","click","replace","normalizeColumns","encoded","locked","parentIds","column","hidden","Function","_attributesFunction","isVisible","addHiddenStyle","footerAttributes","headerAttributes","removeHiddenStyle","headers","columnParent","parents","columnParents","inserted","setColumnVisibility","visible","setVisibility","show","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","classList","visibleColumns","columnsWithMedia","minScreenWidth","Error","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","leafs","destination","groups","sourcesDepth","depth","targetDepth","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","decorateCellWithClass","html","classes","match","cssClasses","pop","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","removeAttributeProperty","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","title","childColumns","visibleChildColumns","getColumnsFields","editField","format","editor","editorOptions","label","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","appendContent","tbody","table","placeholder","tmp","$html","applyStylesFromKendoAttributes","_","appendChild","createElement","innerHTML","addClass","getValidCssClass","firstChild","replaceChild","kendoStyleAttrObject","normalizeCols","hasDetails","colgroup","draggable","is","prepend","convertToObject","array","formatGroupValue","columnValues","groupValue","usedValue","setCellVisibility","pad","hideColumnCells","columnIndex","groupRows","hasSubgroups","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_rowResizing","_groupable","_toolbar","columnsToolbarButton","_globalColumnsMenu","_pageable","_setContentHeight","_templates","_navigatable","_initSelectableAggregates","_selectable","_statusBar","_clipboard","_paste","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","contextMenu","_initContextMenu","_resizeHandler","resize","_initLoader","notify","_showWatermarkOverlay","scrollableContent","scrollable","leftMostPosition","virtualScrollable","navigatable","toolbar","filterable","allowCopy","allowPaste","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","statusBarTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","loader","loading","exporting","cancelDelete","confirmation","confirmDelete","selectRow","selectAllRows","reorderRowUp","reorderRowDown","reorderRowTop","reorderRowBottom","exportPdf","exportToExcelAll","exportToExcelSelection","exportToExcelSelectionNoHeaders","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","pasteHandler","pasteActionsDropDownList","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_selectableAggregatesOptions","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyRowResizing","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","scrollables","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","tbodyContextMenu","theadContextMenu","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","statusBar","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","loaderOverlay","wrapperClone","getOptions","deepExtend","initialData","_data","group","aggregate","transport","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","_ariaGridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","current","currentIndex","lockedParent","setAttribute","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","removeAttr","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","col","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","totalWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_adjustColWidths","colWidths","_resizable","columnStart","isMobile","Resizable","handle","hint","footerTable","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_addLockedRowResizing","_getMinRowHeight","minHeight","currentMinHeight","_cacheRowHeight","_cachedRowsHeight","_clearCachedRowsHeight","_mapCachedRowsHeight","input","ds","output","_rowResizerDblClick","newHeight","resizer","rowResizer","oldHeight","rowPair","pairMinHeight","_setupRowResizer","_attachRowResizerEvents","isIn","_getResizerTop","inner","paddingTop","getComputedStyle","_getResizerContainer","_createRowResizer","targetHeight","positionIntarget","offsetY","previousRow","_detachRowResizerEvents","_mapResizedRows","multiSelectionLocked","pairNew","pairMin","r","rowStart","rowResizing","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","dropFilter","dragOverContainers","lockable","inSameContainer","sourceParent","targetParent","_isLocked","change","oldIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_draggableRows","_checkBoxSelection","clickMoveClick","_hasDragHandleColumn","holdToDrag","showHintOnHold","preventOsHoldFeatures","clone","elm","innerText","cursorOffset","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","reorderRows","dataItem","pushMove","rowsLength","targetItem","_rowDropping","autoFitColumns","headerTable","leafCols","minWidth","contentDiv","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","getByUid","_calculateColumnIndex","virtualOffset","useDoubleTapEditing","userEventsPreventDefault","ios","_isEditableEnabled","readonly","_removeEditableClickHandlers","editContainer","_editContainer","_mousedownOnEditCell","supportDoubleTap","fastTap","isLockedCell","has","end","closeCell","_requestInProgress","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","handler","_editCommandClickHandler","_editCommandClick","_isVirtualInlineEditable","_removeCommandClickHandler","_removeCommandClick","_belongsToGrid","stopPropagation","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","new","adjustRowHeight","_relatedRow","_syncLockedScroll","enableEditing","addButton","getKendoButton","_createClickHandler","disableEditing","cancelRow","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","errors","validatable","dirtyFields","relatedTr","_displayCell","ns","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","schema","_removeGroupIfEmpty","_getSchemaIdField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","editMenuGuid","unescape","getCommand","renderButton","updateButton","_createButton","skipCommandClass","cancelButton","kendoWindow","modal","_footerTemplate","outerHTML","userTriggered","clearContainer","Form","buttonsTemplate","formData","buttonsHTML","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","related","newRow","nextRow","isSelected","isAlt","replaceWith","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_shouldMapHights","_isVirtualEditable","_virtualPageToTop","saveChanges","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_clickAdd","_clickCancel","_clickExcel","_isExport","_progress","always","_clickPdf","_pdfInitialized","_clickSave","_searchInput","_searchTimeOut","searchFields","expression","filters","logic","endless","_endlessPageSize","_pushExpression","_pasteToolbarDropDown","kendoDropDownList","dataTextField","dataValueField","_allowFilterPaste","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","_addClickHandler","_cancelClickHandler","_saveClickHandler","_excelClickHandler","_pdfClickHandler","_serachHandler","_attachToolbarClicks","prependTo","_processItems","kendoToolBar","navigateOnTab","tools","itemsCollectionHasSpacer","searchText","_processAttr","keyValue","replaceAll","attributeClassMatch","compiledAttributes","_hasFooters","groupRow","collapseGroup","expandGroup","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","enableContextMenu","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","hasSkeletonLoader","checkboxSelection","multiple","aria","toggleable","dragToSelect","changing","originalEvent","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","_calculateAggregatesForSelected","cellAggregates","_cellAggregates","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","_pasteReplaceHandler","plain","currentRowUid","currentField","uids","f","nextAll","_executePaste","_pasteInsertHandler","dataItemIndex","selectedUids","_getSelectedRowUids","selectedColumnFields","_getSelectedColumnFields","changedItems","startingIndex","c","set","dirty","_pasteKeyboardHandler","rowUid","clipBoardData","clipboardData","operation","getData","trimEnd","_currentRowIndex","_restoreCurrent","stopImmediatePropagation","tableClick","areaClipBoard","getTSV","includeHeaders","_createAreaClipBoard","execCommand","Event","metaKey","getSelection","toString","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","findIndex","cellText","rowsOffset","getTitle","headerIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","selectedSingleItems","_mapSelectionToData","getSelectedDataByKeys","selectedKeyNames","columnMapHandler","get","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","exporterInstance","_instance","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","ignoreOffset","curr","isRowSelection","nodeName","fieldAttr","indexOffset","_relatedCell","_parseSelectableAggregatesOptions","sum","average","earliest","latest","isTrue","isFalse","selectedData","cellsLength","columnFields","isCellSelection","numberAggregates","dateAggregates","booleanAggregates","$cell","hasCheckbox","hasWrappedCheckbox","Date","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","_findGroupedItem","idField","_findClosestGroupingRow","htmlRow","hiddenGroupingRows","targetRow","rowsToTarget","prevSibling","previousSibling","_checkItemAlreadyLoaded","ranges","_ranges","loadedItem","scrollToItem","rootGroupingRow","previouslyScrolledItems","_scrolledItems","groupingRowHeight","targetRowIsHidden","currentView","success","isNaN","itemLoaded","lastRowOffsetTop","scrollPosition","_scrollingUp","_scrollOffset","hiddenGroupingRowsOffset","wrapperPosition","scrollerPosition","prevScrollDown","scrollingDownOffset","prevScrollUp","scrollingUpOffset","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","currentTable","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","F10","_focusToolbar","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","focusable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","_prevVerticalCell","_verticalContainer","_nextVerticalCell","_findVisibleCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","aggregates","_canDrag","link","originalIndex","cellToFocus","_currentDataIndex","lockedColumnsCount","$newFocus","hiddenCount","prevUntil","nextCell","originalRow","up","step","back","switchRow","isEdited","isIE","focus","_initMobile","groupsContextMenu","head","mainOptions","_action","_buildStates","showOn","isEditable","isSelectable","isSortable","isRowReorderable","isGroupable","alwaysDisabled","hasSelection","isSorted","canMoveGroupPrev","canMoveGroupNext","commandOptions","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","defaultOptions","kendoLoader","_loaderContainer","_scrollable","asLowerString","parseVirtualSettings","insertBefore","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","calculateGroupWidth","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestEndHandler","_requestStart","_requestEnd","_error","relatedRow","selectableRow","childCells","originalCells","tmpResult","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","menuOptions","autoSize","clearAllFilters","columnsExpanderOptions","expanded","animation","hideExpanderIndicator","hideAutoSizeColumn","owner","closeCallback","componentType","kendoColumnMenu","_columnMenu","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","stickCallback","unstickCallback","filterHandler","forceUnique","checkSource","stick","unstick","filtering","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","paramName","rowTemplateFunc","getter","rowTemplateResult","dirtyCellTemplate","_dirtyCellTemplate","columnAttributes","colSpanAttributes","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","useWithBlock","fieldValue","_virtualCols","considerNext","widths","sumOfWidths","colsToRender","firstColspan","lastColspan","hiddenColumns","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","scrollableNoGridHeightStyles","resultTemplate","currentCustomTemplate","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","resultHtml","groupCellBuilder","groupCellLockedContentBuilder","stickyAttributes","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","currentTh","isGroupedBy","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_setRowCachedHeight","$row","cachedHeight","_rowsHtml","cachedHeights","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","message","progress","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","multiColumnHeaderIndex","partialUpdate","flatView","changedItem","_renderContent","_renderLockedContent","contentResized","resetTouchEvents","_restoreSelection","selectedRows","dataItemKey","vc","_cleanupDetailItems","endlessAppend","flatViewLength","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","collapsedClass","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","plugin","kendo$1"],"sources":["kendo.grid.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import './kendo.data.js';\nimport './kendo.columnsorter.js';\nimport './kendo.editable.js';\nimport './kendo.window.js';\nimport './kendo.filtermenu.js';\nimport './kendo.filtercell.js';\nimport './kendo.columnmenu.js';\nimport './kendo.groupable.js';\nimport './kendo.pager.js';\nimport './kendo.selectable.js';\nimport './kendo.sortable.js';\nimport './kendo.reorderable.js';\nimport './kendo.resizable.js';\nimport './kendo.ooxml.js';\nimport './kendo.excel.js';\nimport './kendo.pane.js';\nimport './kendo.pdf.js';\nimport './kendo.dialog.js';\nimport './kendo.switch.js';\nimport './kendo.html.button.js';\nimport './kendo.textbox.js';\nimport './kendo.form.js';\nimport './kendo.toolbar.js';\nimport './kendo.icons.js';\nimport './kendo.menu.js';\nimport './kendo.loader.js';\nimport './kendo.html.loadercontainer.js';\nimport { u as useLoaderContainer } from './kendo.loaderContainer.chunk.js';\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        ContextMenu = ui.ContextMenu,\n        extend = $.extend,\n        encode = kendo.htmlEncode;\n\n    var ACTION = \"action\";\n\n    var GridContextMenu = ContextMenu.extend({\n        init: function(element, options) {\n            var that = this;\n\n            ContextMenu.fn.init.call(that, element, options);\n\n            that._overrideTemplates();\n            that._extendItems();\n\n            that.bind(\"select\", that._onSelect.bind(that));\n            that.bind(\"open\", that._onOpen.bind(that));\n        },\n\n        _overrideTemplates: function() {\n            this.templates.sprite = ({ icon, spriteCssClass }) => `${(icon || spriteCssClass) ? kendo.ui.icon({ icon: encode(icon || \"\"), iconClass: encode(spriteCssClass || \"\") }) : ''}`;\n        },\n\n        defaultItems: {\n            \"separator\": { name: \"separator\", separator: true },\n            \"create\": { name: \"create\", text: \"Add\", icon: \"plus\", command: \"AddCommand\", rules: \"isEditable\" },\n            \"edit\": { name: \"edit\", text: \"Edit\", icon: \"pencil\", command: \"EditCommand\", rules: \"isEditable\" },\n            \"destroy\": { name: \"destroy\", text: \"Delete\", icon: \"trash\", command: \"DeleteCommand\", rules: \"isEditable\" },\n            \"select\": { name: \"select\", text: \"Select\", icon: \"table-body\", rules: \"isSelectable\", items: [\n                { name: \"selectRow\", text: \"Row\", icon: \"table-row-groups\", command: \"SelectRowCommand\" },\n                { name: \"selectAllRows\", text: \"All rows\", icon: \"grid\", command: \"SelectAllRowsCommand\" },\n                { name: \"clearSelection\", text: \"Clear selection\", icon: \"table-unmerge\", softRules: \"hasSelection\", command: \"ClearSelectionCommand\" },\n            ] },\n            \"copySelection\": { name: \"copySelection\", text: \"Copy selection\", icon: \"page-header-section\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\", options: \"withHeaders\" },\n            \"copySelectionNoHeaders\": { name: \"copySelectionNoHeaders\", text: \"Copy selection (No Headers)\", icon: \"file-txt\", rules: \"isSelectable\", softRules: \"hasSelection\", command: \"CopySelectionCommand\" },\n            \"paste\": { name: \"paste\", text: \"Paste (use CTRL/ + V)\", rules: \"allowPaste\", softRules: \"alwaysDisabled\", icon: \"clipboard\" },\n            \"reorderRow\": { name: \"reorderRow\", text: \"Reorder row\", icon: \"caret-alt-expand\", rules: \"isRowReorderable\", softRules: \"isSorted\", items: [\n                { name: \"reorderRowUp\", text: \"Up\", icon: \"caret-alt-up\", command: \"ReorderRowCommand\", options: \"dir:up\" },\n                { name: \"reorderRowDown\", text: \"Down\", icon: \"caret-alt-down\", command: \"ReorderRowCommand\", options: \"dir:down\" },\n                { name: \"reorderRowTop\", text: \"Top\", icon: \"caret-alt-to-top\", command: \"ReorderRowCommand\", options: \"dir:top\" },\n                { name: \"reorderRowBottom\", text: \"Bottom\", icon: \"caret-alt-to-bottom\", command: \"ReorderRowCommand\", options: \"dir:bottom\" }\n            ] },\n            \"exportPDF\": { name: \"exportPDF\", text: \"Export to PDF\", icon: \"file-pdf\", command: \"ExportPDFCommand\" },\n            \"exportExcel\": { name: \"exportExcel\", text: \"Export to Excel\", icon: \"file-excel\", items: [\n                { name: \"exportToExcelAll\", text: \"All\", command: \"ExportExcelCommand\" },\n                { name: \"exportToExcelSelection\", text: \"Selection\", command: \"ExportExcelCommand\", softRules: \"hasSelection\", options: \"selection,withHeaders\" },\n                { name: \"exportToExcelSelectionNoHeaders\", text: \"Selection (No Headers)\", softRules: \"hasSelection\", command: \"ExportExcelCommand\", options: \"selection\" }\n            ] },\n            \"sortAsc\": { name: \"sortAsc\", text: \"Sort Ascending\", icon: \"sort-asc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:asc\" },\n            \"sortDesc\": { name: \"sortDesc\", text: \"Sort Descending\", icon: \"sort-desc-small\", rules: \"isSortable\", command: \"SortCommand\", options: \"dir:desc\" },\n            \"moveGroupPrevious\": { name: \"moveGroupPrevious\", text: \"Move previous\", icon: \"arrow-left\", rules: \"isGroupable\", softRules: \"canMoveGroupPrev\", command: \"MoveGroupCommand\", options: \"dir:prev\" },\n            \"moveGroupNext\": { name: \"moveGroupNext\", text: \"Move next\", icon: \"arrow-right\", rules: \"isGroupable\", softRules: \"canMoveGroupNext\", command: \"MoveGroupCommand\", options: \"dir:next\" }\n            // \"filter\": { name: \"filter\", text: \"Filter\", icon: \"filter\", attr: { [kendo.attr(\"is-filter\")]: true }, items: [\n            //     { content: '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' }\n            // ] },\n        },\n\n        events: ContextMenu.fn.events.concat([\n            ACTION\n        ]),\n\n        _onSelect: function(ev) {\n            var command = $(ev.item).data(\"command\");\n            var options = $(ev.item).data(\"options\");\n                options = options ? options.split(\",\")\n                .map(val => {\n                    if (val.indexOf(\":\") > -1) {\n                        var [key, val] = val.split(\":\");\n                        return { [key || \"_\"]: val };\n                    }\n\n                    return { [val]: true };\n                })\n                .reduce((acc, v) => Object.assign(acc, v), {}) : {};\n\n            var target = $(ev.target);\n\n            if (!command) {\n                return;\n            }\n\n            this.action({\n                command: command,\n                options: Object.assign(options, { target: target })\n            });\n        },\n\n        _onOpen: function(ev) {\n            var menu = ev.sender,\n                items = menu.options.items,\n                elTarget = $(ev.event ? ev.event.target : null);\n\n            if ((!items && $.isEmptyObject(this.defaultItems)) || elTarget.closest(\".k-grid-column-menu\").length) {\n                ev.preventDefault();\n                return;\n            }\n\n            this._toggleSeparatorVisibility();\n\n            menu.element.find(`[${kendo.attr('soft-rules')}]`).each((i, item) => {\n                var rules = $(item).attr(kendo.attr('soft-rules')).split(\";\");\n                menu.enable(item, this._validateSoftRules(rules, elTarget));\n            });\n        },\n\n        _toggleSeparatorVisibility: function() {\n            var that = this,\n                items = that.element.find(\".k-item.k-separator\").filter((i, item) => {\n                    var prev = $(item).prev(\".k-item:not(.k-separator)\");\n                    var next = $(item).next(\".k-item:not(.k-separator)\");\n\n                    return !(prev.length && next.length);\n                });\n\n            items.hide();\n        },\n\n        _extendItems: function() {\n            var that = this,\n                items = that.options.items,\n                item, isBuiltInTool;\n\n            if (items && items.length) {\n                for (var i = 0; i < items.length; i++) {\n                    item = items[i];\n                    isBuiltInTool = $.isPlainObject(item) && Object.keys(item).length === 1 && item.name;\n\n                    if (isBuiltInTool) {\n                        item = item.name;\n                    }\n\n                    if ($.isPlainObject(item)) {\n                        that._append(item);\n                    } else if (that.defaultItems[item]) {\n                        item = that.defaultItems[item];\n                        that._append(item);\n                    } else if (typeof(item) === \"string\") {\n                        item = { name: item, text: item, spriteCssClass: item, command: item + \"Command\" };\n                        that._append(item);\n                    }\n                }\n            } else {\n                for (var key in that.defaultItems) {\n                    item = that.defaultItems[key];\n                    that._append(item);\n                }\n            }\n        },\n\n        _extendItem: function(item) {\n            var that = this,\n                messages = that.options.messages,\n                attr = item.attr || {};\n\n            if (item.command) {\n                attr[kendo.attr(\"command\")] = item.command;\n            }\n\n            if (item.options) {\n                attr[kendo.attr(\"options\")] = item.options;\n            }\n\n            if (item.softRules) {\n                attr[kendo.attr(\"soft-rules\")] = item.softRules;\n            }\n\n            if (item.items) {\n                for (var j = 0; j < item.items.length; j++) {\n                    item.items.forEach(subItem => {\n                        that._extendItem(subItem);\n                    });\n                }\n            }\n\n            extend(item, {\n                text: messages.commands[item.name],\n                icon: item.icon || \"\",\n                spriteCssClass: item.spriteCssClass || \"\",\n                attr: attr,\n                uid: kendo.guid()\n            });\n        },\n\n        _validateSoftRules: function(rules, target) {\n            var that = this;\n\n            if (!rules || !(rules && rules.length)) {\n                return true;\n            }\n\n            for (var i = 0; i < rules.length; i++) {\n                if (!this._readState(rules[i], target)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        _validateRules: function(tool) {\n            var that = this,\n                rules = tool.rules ? tool.rules.split(\";\") : [];\n\n            if (!rules.length) {\n                return true;\n            }\n\n            for (var i = 0; i < rules.length; i++) {\n                if (!this._readState(rules[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        _readState: function(state, target) {\n            var that = this,\n                states = that.options.states;\n\n            if (kendo.isFunction(states[state])) {\n                return states[state](target);\n            } else {\n                return states[state];\n            }\n        },\n\n        _append: function(item) {\n            var that = this;\n\n            that._extendItem(item);\n\n            if (that._validateRules(item)) {\n                that.append(item);\n            }\n        },\n\n        action: function(args) {\n            this.trigger(ACTION, args);\n        }\n    });\n\n    kendo.ui.grid = kendo.ui.grid || {};\n\n    extend(kendo.ui.grid, {\n        ContextMenu: GridContextMenu\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        Class = kendo.Class;\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.grid = options.grid;\n        }\n    });\n\n    var MoveGroupCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                groupable = grid.groupable,\n                options = that.options,\n                target = options.target.closest(\".k-chip\"),\n                method = options.dir === \"next\" ? \"after\" : \"before\",\n                position = options.dir === \"next\" ? target.next() : target.prev();\n\n            position[method](target);\n            groupable._change();\n        },\n    });\n\n    var SortCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                dataSource = grid.dataSource,\n                sort = dataSource.sort() || [],\n                options = that.options,\n                dir = options.dir,\n                field = grid._getCellField(options.target),\n                multipleMode = grid.options.sortable.mode && grid.options.sortable.mode === \"multiple\",\n                compare = grid.options.compare,\n                length, idx;\n\n            if (multipleMode) {\n                for (idx = 0, length = sort.length; idx < length; idx++) {\n                    if (sort[idx].field === field) {\n                        sort.splice(idx, 1);\n                        break;\n                    }\n                }\n                sort.push({ field: field, dir: dir, compare: compare });\n            } else {\n                sort = [{ field: field, dir: dir, compare: compare }];\n            }\n\n            dataSource.sort(sort);\n        },\n    });\n\n    var AddCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.addRow();\n        }\n    });\n\n    var EditCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                inCellMode = grid._editMode() === \"incell\",\n                target = inCellMode ? that.options.target : that.options.target.closest(\"tr\");\n\n            if (inCellMode) {\n                grid.editCell(target);\n            } else {\n                grid.editRow(target);\n            }\n        }\n    });\n\n    var DeleteCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                target = that.options.target.closest(\"tr\");\n\n            grid.removeRow(target);\n        }\n    });\n\n    var CopySelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                withHeaders = that.options.withHeaders;\n\n            grid.copySelectionToClipboard(withHeaders);\n        }\n    });\n\n    var SelectRowCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                target = that.options.target.closest(\"tr\");\n\n            grid.select(selectMode.cell ? target.find('td') : target);\n        }\n    });\n\n    var SelectAllRowsCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                selectMode = kendo.ui.Selectable.parseOptions(grid.options.selectable),\n                rows = grid.items();\n\n            grid.select(selectMode.cell ? rows.find('td') : rows);\n        }\n    });\n\n    var ClearSelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.clearSelection();\n        }\n    });\n\n    var ReorderRowCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid,\n                dir = that.options.dir,\n                target = that.options.target.closest(\"tr\"),\n                index = target.index(),\n                newIndex;\n\n            switch (dir) {\n                case \"up\":\n                    newIndex = index - 1;\n                    break;\n                case \"down\":\n                    newIndex = index + 2;\n                    break;\n                case \"top\":\n                    newIndex = 0;\n                    break;\n                case \"bottom\":\n                    newIndex = grid.items().length;\n                    break;\n            }\n\n            grid.reorderRowTo(target, newIndex);\n        }\n    });\n\n    var ExportPDFCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                grid = that.grid;\n\n            grid.saveAsPDF();\n        }\n    });\n\n    var ExportExcelCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                selection = that.options.selection,\n                withHeaders = that.options.withHeaders,\n                grid = that.grid;\n\n            if (selection) {\n                grid.exportSelectedToExcel(withHeaders);\n            } else {\n                grid.saveAsExcel();\n            }\n        }\n    });\n\n    kendo.ui.grid = kendo.ui.grid || {};\n\n    extend(kendo.ui.grid, {\n        GridCommand: Command,\n        commands: {\n            SortCommand: SortCommand,\n            AddCommand: AddCommand,\n            EditCommand: EditCommand,\n            DeleteCommand: DeleteCommand,\n            CopySelectionCommand: CopySelectionCommand,\n            SelectRowCommand: SelectRowCommand,\n            SelectAllRowsCommand: SelectAllRowsCommand,\n            ClearSelectionCommand: ClearSelectionCommand,\n            ReorderRowCommand: ReorderRowCommand,\n            ExportPDFCommand: ExportPDFCommand,\n            ExportExcelCommand: ExportExcelCommand,\n            MoveGroupCommand: MoveGroupCommand\n        }\n    });\n})(window.kendo.jQuery);\n\nconst __meta__ = {\n    id: \"grid\",\n    name: \"Grid\",\n    category: \"web\",\n    description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n    depends: [\"data\", \"columnsorter\", \"sortable\", \"toolbar\", \"html.button\", \"icons\", \"menu\", \"loader\", \"html.loadercontainer\", \"loaderContainer.chunk\"],\n    features: [ {\n        id: \"grid-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n    }, {\n        id: \"grid-filtering\",\n        name: \"Filtering\",\n        description: \"Support for record filtering\",\n        depends: [ \"filtermenu\" ]\n    }, {\n        id: \"grid-columnmenu\",\n        name: \"Column menu\",\n        description: \"Support for header column menu\",\n        depends: [ \"columnmenu\" ]\n    }, {\n        id: \"grid-grouping\",\n        name: \"Grouping\",\n        description: \"Support for grid grouping\",\n        depends: [ \"groupable\" ]\n    }, {\n        id: \"grid-filtercell\",\n        name: \"Row filter\",\n        description: \"Support for grid header filtering\",\n        depends: [ \"filtercell\" ]\n    }, {\n        id: \"grid-paging\",\n        name: \"Paging\",\n        description: \"Support for grid paging\",\n        depends: [ \"pager\" ]\n    }, {\n        id: \"grid-selection\",\n        name: \"Selection\",\n        description: \"Support for row selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"grid-column-reorder\",\n        name: \"Column reordering\",\n        description: \"Support for column reordering\",\n        depends: [ \"reorderable\" ]\n    }, {\n        id: \"grid-column-resize\",\n        name: \"Column resizing\",\n        description: \"Support for column resizing\",\n        depends: [ \"resizable\" ]\n    }, {\n        id: \"grid-mobile\",\n        name: \"Grid adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"grid-excel-export\",\n        name: \"Excel export\",\n        description: \"Export grid data as Excel spreadsheet\",\n        depends: [ \"excel\" ]\n    }, {\n        id: \"grid-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export grid data as PDF\",\n        depends: [ \"pdf\", \"drawing\" ]\n    } ]\n};\n\n(function($, undefined$1) {\n    let kendo = window.kendo,\n        ui = kendo.ui,\n        DataSource = kendo.data.DataSource,\n        ObservableObject = kendo.data.ObservableObject,\n        tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n        activeElement = kendo._activeElement,\n        Widget = ui.Widget,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        keys = kendo.keys,\n        getType = kendo.type,\n\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        map = $.map,\n        grep = $.grep,\n        isArray = Array.isArray,\n        inArray = $.inArray,\n        push = Array.prototype.push,\n        isFunction = kendo.isFunction,\n        encode = kendo.htmlEncode,\n        isEmptyObject = $.isEmptyObject,\n        contains = $.contains,\n        math = Math,\n\n        DOT = \".\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n        DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible\",\n        DATA_CELL_HIDDENINCLUDED = \":not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))\",\n        SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        NAVROW = \"tr:not(.k-footer-template):visible\",\n        NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n        ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n        COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n        HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        CARET_ALT_DOWN = \"a[class*='-i-caret-alt-down']\",\n        CARET_ALT_RIGHT = \"a[class*='-i-caret-alt-right']\",\n        CARET_ALT_RIGHT_CACHE = CARET_ALT_RIGHT,\n        CARET_ALT_LEFT = \"a[class*='-i-caret-alt-left']\",\n        WRAPPER = \".k-grid\",\n        NS = \".kendoGrid\",\n        CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n        GROUPCELLCLASS = \"k-group-cell\",\n        INPUT_SELECTORS = \":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-svg-icon>svg,span.k-svg-icon>svg>path,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\",\n\n        EDIT = \"edit\",\n        BEFOREEDIT = \"beforeEdit\",\n        SAVE = \"save\",\n        REMOVE = \"remove\",\n        DETAILINIT = \"detailInit\",\n        FILTERMENUINIT = \"filterMenuInit\",\n        COLUMNMENUINIT = \"columnMenuInit\",\n        FILTERMENUOPEN = \"filterMenuOpen\",\n        COLUMNMENUOPEN = \"columnMenuOpen\",\n        CELLCLOSE = \"cellClose\",\n        CHANGING = \"changing\",\n        CHANGE = \"change\",\n        COLUMNHIDE = \"columnHide\",\n        COLUMNSHOW = \"columnShow\",\n        SAVECHANGES = \"saveChanges\",\n        DATABOUND = \"dataBound\",\n        DETAILEXPAND = \"detailExpand\",\n        DETAILCOLLAPSE = \"detailCollapse\",\n        ITEM_CHANGE = \"itemchange\",\n        PAGE = \"page\",\n        PAGING = \"paging\",\n        PASTE = \"paste\",\n        SCROLL = \"scroll\",\n        SYNC = \"sync\",\n        LOAD_START = \"loadStart\",\n        LOAD_END = \"loadEnd\",\n        REQUESTEND = \"requestEnd\",\n\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        ACTIVE = \"k-active\",\n        FOCUSABLE = \":kendoFocusable\",\n        SELECTED = \"k-selected\",\n        CHECKBOX = \"k-checkbox\",\n        CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n        NORECORDSCLASS = \"k-grid-norecords\",\n        LINK_CLASS = \"k-link\",\n        ICON_CLASS = \"k-icon\",\n        SVG_ICON_CLASS = \"k-svg-icon\",\n        ORDER_CLASS = \"k-sort-order\",\n        SORTED_CLASS = \"k-sorted\",\n        HEADER_CLASS = \"k-header\",\n        HEADER_COLUMN_MENU_CLASS = \"k-grid-column-menu\",\n        FILTER_MENU_CLASS = \"k-grid-filter-menu\",\n        STICKY_CELL_CLASS = \"k-grid-content-sticky\",\n        STICKY_HEADER_CLASS = \"k-grid-header-sticky\",\n        STICKY_FOOTER_CLASS = \"k-grid-footer-sticky\",\n        STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n        ROW_RESIZER = \"k-row-resizer\",\n        ROW_RESIZER_WRAP = \"k-resizer-wrap\",\n        GROUPING_ROW = \"k-grouping-row\",\n        RESIZE = \"resize\",\n        ROWRESIZE = \"rowResize\",\n        COLUMNRESIZE = \"columnResize\",\n        COLUMNREORDER = \"columnReorder\",\n        COLUMNLOCK = \"columnLock\",\n        COLUMNUNLOCK = \"columnUnlock\",\n        COLUMNSTICK = \"columnStick\",\n        COLUMNUNSTICK = \"columnUnstick\",\n        ROWREORDER = \"rowReorder\",\n        NAVIGATE = \"navigate\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        MOUSEUP = \"mouseup\",\n        MOUSEENTER = \"mouseenter\",\n        MOUSELEAVE = \"mouseleave\",\n        MOUSEMOVE = \"mousemove\",\n        DUBLECLICK = \"dblclick\",\n        HEIGHT = \"height\",\n        WIDTH = \"width\",\n        AUTO = \"auto\",\n        TABINDEX = \"tabIndex\",\n        FUNCTION = \"function\",\n        STRING = \"string\",\n        NUMBER = \"number\",\n        BOTTOM = \"bottom\",\n        CONTAINER_FOR = \"container-for\",\n        FIELD = \"field\",\n        INPUT = \"input\",\n        INCELL = \"incell\",\n        INLINE = \"inline\",\n        UNIQUE_ID = \"uid\",\n        MINCOLSPANVALUE = 1,\n        COLSPAN = \"colSpan\",\n        OVERFLOW = \"overflow\",\n        HIDDEN = \"hidden\",\n        SORT = \"sort\",\n        GROUP_SORT = \"group-sort\",\n        DELETECONFIRM = \"Are you sure you want to delete this record?\",\n        NORECORDS = \"No records available.\",\n        CONFIRMDELETE = \"Delete\",\n        CANCELDELETE = \"Cancel\",\n        COLLAPSE = \"Collapse\",\n        EXPAND = \"Expand\",\n        ID = \"id\",\n        PX = \"px\",\n        TR = \"tr\",\n        TD = \"td\",\n        DIV = \"div\",\n\n        ARIA_LABEL = \"aria-label\",\n        ARIA_OWNS = \"aria-owns\",\n        ARIA_ROWCOUNT = \"aria-rowcount\",\n        ARIA_COLCOUNT = \"aria-colcount\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_COLINDEX = \"aria-colindex\",\n        ARIA_ROWINDEX = \"aria-rowindex\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_CHECKED = \"aria-checked\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ROLE = \"role\",\n        NONE = \"none\",\n        ROW = \"row\",\n        ROWGROUP = \"rowgroup\",\n        COLUMNHEADER = \"columnheader\",\n        GRIDCELL = \"gridcell\",\n\n        formatRegExp = /(\\}|\\#)/ig,\n        templateHashRegExp = /#/ig,\n        whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n        leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        COMMANDBUTTONTMPL = ({ className, attr, text }) => `<button type=\"button\" class=\"${className}\" ${attr}>${kendo.htmlEncode(text)}</button>`,\n        DEFAULTSELECTCOLUMNTMPL = (size, ariaLabel) => `<span class=\"k-checkbox-wrap\"><input tabindex=\"-1\" class=\"k-select-checkbox ${CHECKBOX} ${size} k-rounded-md\" data-role=\"checkbox\" aria-label=\"${ariaLabel}\" aria-checked=\"false\" type=\"checkbox\"></span>`,\n        SELECTCOLUMNTMPL = ({ size }) => DEFAULTSELECTCOLUMNTMPL(size, \"Select row\"),\n        SELECTCOLUMNHEADERTMPL = ({ size }) => DEFAULTSELECTCOLUMNTMPL(size, \"Select all rows\"),\n        DRAGHANDLECOLUMNTMPL = () => kendo.ui.icon(\"reorder\"),\n        DEFAULTHEADERTEMPLATE = ({ text }) => `<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">${text}</span></span></span>`,\n        isRtl = false,\n        browser = kendo.support.browser;\n\n    var isIE11 = browser.msie && browser.version === 11;\n    var isMac = /Mac OS/.test(navigator.userAgent);\n    var classNames = {\n        content: \"k-content\",\n        scrollContainer: \"k-scroll-container\",\n        headerCellInner: \"k-cell-inner\"\n    };\n    var GroupsPager;\n\n    var defaultBodyContextMenu = [\n        \"copySelection\",\n        \"copySelectionNoHeaders\",\n        \"paste\",\n        \"separator\",\n        \"create\",\n        \"edit\",\n        \"destroy\",\n        \"select\",\n        \"separator\",\n        \"reorderRow\",\n        \"exportPDF\",\n        \"exportExcel\",\n        \"separator\"\n    ];\n\n    var defaultHeadContextMenu = [\n        \"sortAsc\",\n        \"sortDesc\",\n        \"separator\"\n    ];\n\n    var defaultGroupsContextMenu = [\n        \"moveGroupPrevious\",\n        \"moveGroupNext\",\n        \"separator\"\n    ];\n\n    if (ui.Pager) {\n        GroupsPager = ui.Pager.extend({\n            init: function(element, options) {\n                ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                this.dataSource.options.useRanges = true;\n                this.dataSource._omitPrefetch = true;\n            },\n            options: {\n                name: \"GroupsPager\"\n            },\n\n            totalPages: function() {\n                var that = this;\n\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _collapsedTotal: function() {\n                var dataSource = this.dataSource;\n                return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n            }\n        });\n    }\n\n    var VirtualScrollable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            that._refreshHandler = that.refresh.bind(that);\n            that.setDataSource(options.dataSource);\n            that.wrap();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            }\n            that.dataSource = dataSource;\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n            that.dataSource.options.useRanges = true;\n            that.dataSource.options.virtual = true;\n        },\n\n        options: {\n            name: \"VirtualScrollable\",\n            itemHeight: $.noop,\n            prefetch: true,\n            maxScrollHeight: 250000\n        },\n\n        events: [\n            PAGING,\n            PAGE,\n            SCROLL,\n            LOAD_START,\n            LOAD_END\n        ],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler);\n            that.wrapper.add(that.verticalScrollbar).off(NS);\n\n            clearTimeout(that._timeout);\n            if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n            }\n\n            if (that.drag) {\n                that.drag.destroy();\n                that.drag = null;\n            }\n            that.wrapper = that.element = that.verticalScrollbar = null;\n            that._refreshHandler = null;\n        },\n\n        wrap: function() {\n            var that = this,\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                scrollbar = kendo.support.scrollbar() + 1,\n                element = that.element,\n                wrapper;\n\n            element.css( {\n                width: AUTO,\n                overflow: \"hidden\"\n            }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n            that.content = element.children().first();\n            wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                .parent()\n                                .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            that._wrapper();\n\n            if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                that.wrapper.css(\"touch-action\", NONE);\n                that.drag = new kendo.UserEvents(that.wrapper, {\n                    global: true,\n                    allowSelection: true,\n                    start: function(e) {\n                        e.sender.capture();\n                    },\n                    move: function(e) {\n                        that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                        kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" tabindex=\"-1\"/>')\n                                        .css({\n                                            width: scrollbar\n                                        }).appendTo(element)\n                                        .on(\"scroll\" + NS, that._scroll.bind(that));\n        },\n\n        _wrapper: function() {\n            var that = this;\n\n            if (isIE11) {\n                //scrolling the virtual scrollbar to the bottom and then\n                //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                //https://github.com/telerik/kendo-ui-core/issues/3779\n                that.wrapper.css({\n                    \"overflow-y\": SCROLL\n                });\n\n                //hide the wrapper behind the virtual scrollbar\n                that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var scrollbar = this.verticalScrollbar,\n                scrollTop = scrollbar.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                e.preventDefault();\n                this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _scroll: function(e) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                scrollTop = e.currentTarget.scrollTop,\n                dataSource = that.dataSource,\n                rowHeight = that.itemHeight,\n                skip = dataSource.skip() || 0,\n                start = that._rangeStart || skip,\n                height = that.element.innerHeight(),\n                isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n            if (that._preventScroll) {\n                that._preventScroll = false;\n                return;\n            }\n            that._prevScrollTop = that._scrollTop;\n            that._scrollTop = scrollTop - (start * rowHeight);\n            that._scrollbarTop = scrollTop;\n\n            that._scrolling = delayLoading;\n\n            if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                that.wrapper[0].scrollTop = that._scrollTop;\n            }\n            that.trigger(SCROLL);\n\n            if (delayLoading) {\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                that._scrollingTimeout = setTimeout(function() {\n                    that._scrolling = false;\n                    that._page(that._rangeStart, that.dataSource.take());\n                }, 100);\n            }\n        },\n\n        scrollToTop: function() {\n            this._scrollTo(0);\n        },\n\n        scrollToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n        },\n\n        _scrollWrapperToTop: function() {\n            this.wrapper.scrollTop(0);\n        },\n\n        _scrollWrapperToBottom: function() {\n            this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n        },\n\n        _scrollWrapperOnColumnResize: function() {\n            var that = this;\n            var wrapper = this.wrapper;\n            var initialScrollTop = wrapper.scrollTop();\n\n            if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                    that._wrapperScrolled = true;\n                }\n            } else if (that._wrapperScrolled) {\n                if (!that._isWrapperScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                }\n\n                that._wrapperScrolled = false;\n            }\n        },\n\n        _scrollTo: function(scrollTop, programmaticScrollPosition) {\n            var that = this;\n            var scrollbar = that.verticalScrollbar;\n\n            if (scrollbar.scrollTop() !== scrollTop) {\n                that._preventScroll = true;\n            }\n\n            that.wrapper.scrollTop(scrollTop);\n            that._scrollTop = that.wrapper.scrollTop();\n\n            scrollbar.scrollTop(programmaticScrollPosition ?? scrollTop);\n            that._scrollbarTop = scrollbar.scrollTop();\n        },\n\n        _isScrolledToTop: function() {\n            return this.verticalScrollbar.scrollTop() === 0;\n        },\n\n        _isScrolledToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            var scrollTop = scrollbar.scrollTop();\n\n            return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n        },\n\n        _isWrapperScrolledToBottom: function() {\n            var wrapper = this.wrapper;\n\n            return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n        },\n\n        itemIndex: function(rowIndex) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n            return rangeStart + rowIndex;\n        },\n\n        position: function(index) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n            var pageSize = this.dataSource.pageSize();\n            var result;\n\n            if (index > rangeStart) {\n                result = index - rangeStart;\n            } else {\n                result = rangeStart - index - 1;\n            }\n\n            return result > pageSize ? pageSize : result;\n        },\n\n        scrollIntoView: function(row) {\n            var container = this.wrapper[0];\n            var containerHeight = container.clientHeight;\n            var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n            var elementOffset = row[0].offsetTop;\n            var elementHeight = row[0].offsetHeight;\n\n            if (containerScroll > elementOffset) {\n                this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n            } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n            }\n        },\n\n        _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n            var that = this,\n                dataSource = that.dataSource,\n                itemHeight = that.itemHeight,\n                take = dataSource.take(),\n                rangeStart = that._rangeStart || dataSource.skip() || 0,\n                currentSkip = math.floor(firstItemIndex / take) * take,\n                fetching = false,\n                prefetchAt = 0.33;\n            var scrollbar = that.verticalScrollbar;\n            var webkitCorrection = browser.webkit ? 1 : 0;\n            var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n            if (firstItemIndex < rangeStart) {\n\n                fetching = true;\n                if (that._alwaysScrollTop) {\n                    rangeStart = math.min(firstItemIndex, total - take);\n                    that._scrollTop = 0;\n                } else {\n                    rangeStart = math.max(0, lastItemIndex - take);\n                    that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                }\n                that._page(rangeStart, take);\n\n            } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                fetching = true;\n                rangeStart = math.min(firstItemIndex, total - take);\n\n                //ensure the scrollbar can be scrolled to bottom with mouse drag\n                if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                } else if (that._alwaysScrollTop) {\n                    that._scrollTop = 0;\n                } else {\n                    that._scrollTop = itemHeight;\n                }\n\n\n                that._page(rangeStart, take);\n\n            } else if (!that._fetching && that.options.prefetch) {\n\n                if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                    dataSource.prefetch(currentSkip - take, take, $.noop);\n                }\n                if (lastItemIndex > currentSkip + take * prefetchAt) {\n                    dataSource.prefetch(currentSkip + take, take, $.noop);\n                }\n\n            }\n            return fetching;\n        },\n\n        fetching: function() {\n            return this._fetching;\n        },\n\n        _page: function(skip, take, callback) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                dataSource = that.dataSource,\n                isGroupPaged = dataSource._isGroupPaged();\n            callback = isFunction(callback) ? callback : $.noop;\n\n            if (that.trigger(PAGING, { skip: skip, take: take })) {\n                return;\n            }\n\n            clearTimeout(that._timeout);\n            that._fetching = true;\n            that._rangeStart = skip;\n\n            if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                that.trigger(LOAD_START);\n\n                dataSource.range(skip, take, function() {\n                    that.trigger(LOAD_END);\n                    callback();\n                    that.trigger(PAGE);\n                }, \"page\");\n            } else {\n                if (!delayLoading) {\n                    that.trigger(LOAD_START);\n                }\n\n                that._timeout = setTimeout(function() {\n                    if (!that._scrolling) {\n\n                        if (delayLoading) {\n                            that.trigger(LOAD_START);\n                        }\n\n                        dataSource.range(skip, take, function() {\n                            that.trigger(LOAD_END);\n                            callback();\n                            that.trigger(PAGE);\n                        });\n                    }\n                }, 100);\n            }\n        },\n\n        repaintScrollbar: function(shouldScrollWrapper) {\n            var that = this,\n                maxHeight = that.options.maxScrollHeight,\n                dataSource = that.dataSource,\n                scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                wrapperElement = that.wrapper[0],\n                totalHeight,\n                idx,\n                itemHeight;\n            var wasScrolledToBottom = that._isScrolledToBottom();\n\n            itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n            var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n            totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n            var divElements = $(new Array(math.floor(totalHeight / maxHeight) + 1).join('<div></div>'))\n                .css({\n                    width: \"1px\",\n                    height: `${maxHeight}px`\n                });\n\n            if (totalHeight % maxHeight) {\n                divElements = divElements.add($(\"<div></div>\").css({\n                    width: \"1px\",\n                    height: `${(totalHeight % maxHeight)}px`\n                }));\n            }\n\n            that.verticalScrollbar.empty().append(divElements);\n\n            if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                that.scrollToBottom();\n            }\n\n            if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                wrapperElement.scrollTop = that._scrollTop;\n                that._scrollWrapperOnColumnResize();\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                dataSource = that.dataSource,\n                rangeStart = that._rangeStart;\n            var action = (e || {}).action;\n            var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n            that.trigger(LOAD_END);\n            clearTimeout(that._timeout);\n\n            that.repaintScrollbar(shouldScrollWrapper);\n\n            if (that.drag) {\n                that.drag.cancel();\n            }\n\n            if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                    that._rangeStart = dataSource.skip();\n                }\n\n                if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                    // reset the scrollbar position if datasource is filtered\n                    that.verticalScrollbar[0].scrollTop = 0;\n                }\n            }\n\n            if (that._programmaticallyScrolling && that._programmaticallyScrolling.state() !== 'resolved') {\n                that._programmaticallyScrolling.resolve();\n            }\n\n            if (that._alwaysScrollTop) {\n                delete that._alwaysScrollTop;\n            }\n            that._fetching = false;\n        }\n    });\n\n    function attrEquals(attrName, attrValue) {\n        return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n    }\n\n    function groupCells(count) {\n        return new Array(count + 1).join('<td class=\"k-group-cell k-table-group-td k-table-td\">&nbsp;</td>');\n    }\n\n    function cellsExcludingSpecialColumns(cells) {\n        return cells.filter((i,cell) => {\n            const $cell = $(cell);\n            const hasCheckbox = $cell.children(\".k-select-checkbox\").length > 0;\n            const hasWrappedCheckbox = $cell.find(\"> .k-checkbox-wrap > .k-select-checkbox\").length > 0;\n            return !$cell.hasClass(\"k-drag-cell\") && !$cell.hasClass(\"k-command-cell\") && !hasCheckbox && !hasWrappedCheckbox;\n        });\n    }\n\n    function stringifyAttributes(attributes) {\n        var attr,\n            result = \" \";\n\n        if (attributes) {\n            if (typeof attributes === STRING) {\n                return attributes;\n            }\n\n            for (attr in attributes) {\n                if (attributes[attr] !== '') {\n                    result += attr + '=\"' + attributes[attr] + '\"';\n                }\n            }\n        }\n        return result;\n    }\n\n    var defaultCommands = {\n        create: {\n            text: \"Add new record\",\n            className: \"k-grid-add\",\n            iconClass: \"k-i-plus\"\n        },\n        cancel: {\n            text: \"Cancel changes\",\n            className: \"k-grid-cancel-changes\",\n            iconClass: \"k-i-cancel\"\n        },\n        save: {\n            text: \"Save changes\",\n            className: \"k-grid-save-changes\",\n            iconClass: \"k-i-check\"\n        },\n        destroy: {\n            text: \"Delete\",\n            className: \"k-grid-remove-command\",\n            iconClass: \"k-i-x\"\n        },\n        edit: {\n            text: \"Edit\",\n            className: \"k-grid-edit-command\",\n            iconClass: \"k-i-pencil\",\n            themeColor: \"primary\"\n        },\n        update: {\n            text: \"Save\",\n            className: \"k-grid-save-command\",\n            iconClass: \"k-i-save\",\n            themeColor: \"primary\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-grid-cancel-command\",\n            iconClass: \"k-i-cancel\"\n        },\n        excel: {\n            text: \"Export to Excel\",\n            className: \"k-grid-excel\",\n            iconClass: \"k-i-file-excel\"\n        },\n        pdf: {\n            text: \"Export to PDF\",\n            className: \"k-grid-pdf\",\n            iconClass: \"k-i-file-pdf\"\n        },\n        search: {\n            text: \"Search...\",\n            className: \"k-grid-search\"\n        },\n        columns: {\n            text: \"Columns\",\n            type: \"button\",\n            icon: \"columns\",\n            fillMode: \"flat\",\n            overflow: \"never\",\n            className: \"k-grid-column-menu\",\n            attr: {\n                \"aria-haspopup\": \"menu\"\n            }\n        }\n    };\n\n    function cursor(context, value) {\n        $('th, th .k-grid-filter-menu, th .k-link', context)\n            .add(document.body)\n            .css('cursor', value);\n    }\n\n    function reorder(selector, source, dest, before, count) {\n        var sourceIndex = source;\n        source = $();\n        count = count || 1;\n        for (var idx = 0; idx < count; idx++) {\n            source = source.add(selector.eq(sourceIndex + idx));\n        }\n\n        if (typeof dest == \"number\") {\n            source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n        } else {\n            source.appendTo(dest);\n        }\n    }\n\n    function elements(lockedContent, content, filter) {\n        return $(lockedContent).add(content).find(filter);\n    }\n\n    function attachCustomCommandEvent(context, container, commands) {\n        var idx,\n            length,\n            command,\n            commandName;\n\n        commands = !isArray(commands) ? [commands] : commands;\n\n        for (idx = 0, length = commands.length; idx < length; idx++) {\n            command = commands[idx];\n\n            if (isPlainObject(command) && command.click) {\n                commandName = command.name || command.text;\n                container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n            }\n        }\n    }\n\n    function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n        return map(columns, function(column) {\n            column = typeof column === STRING ? { field: column } : column;\n\n            var hidden;\n            column.parentIds = parentIds;\n\n            if (column.attributes instanceof Function) {\n                column._attributesFunction = column.attributes;\n            }\n\n            if (!isVisible(column) || hide) {\n                column.attributes = addHiddenStyle(column.attributes);\n                column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                hidden = true;\n            } else if (isVisible(column) || !hide) {\n                column.attributes = removeHiddenStyle(column.attributes);\n                column.footerAttributes = removeHiddenStyle(column.footerAttributes);\n                column.headerAttributes = removeHiddenStyle(column.headerAttributes);\n                hidden = undefined$1;\n            }\n\n            var uid = kendo.guid();\n            if (locked && !column.locked) {\n                column.locked = locked;\n            }\n\n            column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n            if (!column.headerAttributes.id) {\n                column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                column.uid = uid;\n            } else {\n                column.uid = uid = column.headerAttributes.id;\n            }\n\n            if (column.columns) {\n                column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n            }\n            return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n        });\n    }\n\n    function columnParent(column, columns) {\n        var parents = [];\n        columnParents(column, columns, parents);\n        return parents[parents.length - 1];\n    }\n\n    function columnParents(column, columns, parents) {\n        parents = parents || [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (column === columns[idx]) {\n                return true;\n            } else if (columns[idx].columns) {\n                var inserted = parents.length;\n                parents.push(columns[idx]);\n                if (!columnParents(column, columns[idx].columns, parents)) {\n                    parents.splice(inserted, parents.length - inserted);\n                } else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    function setColumnVisibility(column, visible) {\n        setVisibility(column, visible, visible);\n    }\n\n    function setVisibility(column, visible, show) {\n        var method = show ? removeHiddenStyle : addHiddenStyle;\n        column.hidden = !visible;\n        column.attributes = method(column.attributes);\n        column.footerAttributes = method(column.footerAttributes);\n        column.headerAttributes = method(column.headerAttributes);\n    }\n\n\n    function setColumnMediaVisibility(column, visible) {\n        setColumnMatchesMedia(column);\n        var hideByMedia = column._hideByMedia;\n        setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n    }\n\n    function setColumnMatchesMedia(column) {\n        column.matchesMedia = columnMatchesMedia(column);\n    }\n\n    function columnMatchesMedia(column) {\n        return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n    }\n\n    function isCellVisible() {\n        return this.style.display !== NONE && !this.classList.contains(\"k-hidden\");\n    }\n\n    function isElementVisible(element) {\n        return $(element)[0].style.display !== NONE && !$(element)[0].classList.contains(\"k-hidden\");\n    }\n\n    function isVisible(column) {\n        return visibleColumns([column]).length > 0;\n    }\n\n    function visibleColumns(columns) {\n        return grep(columns, function(column) {\n            var result = !column.hidden && column.matchesMedia !== false;\n\n            if (result && column.columns) {\n                result = visibleColumns(column.columns).length > 0;\n            }\n            return result;\n        });\n    }\n\n    function columnsWithMedia(columns) {\n        var result = [];\n        var column;\n\n        for (var i = 0; i < columns.length; i++) {\n            column = columns[i];\n\n            if (!isUndefined(column.media)) {\n                if (!isUndefined(column.minScreenWidth)) {\n                    throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                }\n\n                result.push(column);\n            }\n\n            if (column.columns) {\n                result = result.concat(columnsWithMedia(column.columns));\n            }\n        }\n\n        return result;\n    }\n\n    function isUndefined(value) {\n        return typeof value === \"undefined\";\n    }\n\n    function toJQuery(elements) {\n        return $(elements).map(function() { return this.toArray(); });\n    }\n\n    function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n        var lockedColumnDepth = depth(lockedColumns(columns));\n        var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n        var rowSpan = cell.rowSpan;\n        if (sourceLockedColumnsCount) {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n            } else {\n                cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n            }\n        } else {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n            } else {\n                cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n            }\n        }\n    }\n\n    function findColumnByField(columns, field) {\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field == field) {\n                return columns[i];\n            }\n        }\n    }\n\n    function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n        var sourcesDepth = depth(sources);\n        var targetDepth = depth([target]);\n\n        if (sourcesDepth > targetDepth) {\n            var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">&nbsp;</th>');\n            var rows = destination.children(\":not(.k-filter-row)\");\n            $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr class='k-table-row'>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n        }\n\n        addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n        moveCells(leafs, columns, container, destination, action);\n    }\n\n    function updateCellIndex(thead, columns, offset) {\n        offset = offset || 0;\n\n        var position;\n        var cell;\n        var allColumns = columns;\n        columns = leafColumns(columns);\n\n        var cells = {};\n        var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        for (var idx = 0, length = columns.length; idx < length; idx++) {\n            position = columnPosition(columns[idx], allColumns);\n\n            if (!cells[position.row]) {\n                cells[position.row] = rows.eq(position.row)\n                    .find(DOT + HEADER_CLASS)\n                    .filter(filter);\n            }\n\n            cell = cells[position.row].eq(position.cell);\n            cell.attr(kendo.attr(\"index\"), offset + idx);\n        }\n\n\n        return columns.length;\n    }\n\n    function depth(columns) {\n        var result = 1;\n        var max = 0;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                var temp = depth(columns[idx].columns);\n                if (temp > max) {\n                    max = temp;\n                }\n            }\n        }\n        return result + max;\n    }\n\n    function moveCells(leafs, columns, container, destination, action) {\n        var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n        var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header:not(.k-group-cell)\");\n\n        var t = $();\n        var sourceIndex = sourcePosition.cell;\n        var idx;\n\n        for (idx = 0; idx < leafs.length; idx++) {\n            t = t.add(ths.eq(sourceIndex + idx));\n        }\n\n        destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n        var children = [];\n        for (idx = 0; idx < leafs.length; idx++) {\n            if (leafs[idx].columns) {\n                children = children.concat(leafs[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            moveCells(children, columns, container, destination, action);\n        }\n    }\n\n    function columnPosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           cellCounts[row]++;\n        }\n        return result;\n    }\n    function findParentColumnWithChildren(columns, index, source, rtl) {\n        var target;\n        var locked = !!source.locked;\n        var targetLocked;\n\n        do {\n            target = columns[index];\n            index += rtl ? 1 : -1;\n            targetLocked = !!target.locked;\n        } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n        return target;\n    }\n\n    function decorateCellWithClass(html) {\n        let element = html;\n        let classes = element.match(/class=[\"][^\"]+/g);\n        if (classes) {\n            const cssClasses = classes[0].split('\\\"').pop();\n            element = element.replace(cssClasses, cssClasses + \" k-table-td\");\n        } else {\n            element = element.replace(\"<td\",\"<td class='k-table-td'\");\n        }\n\n        return element;\n    }\n\n    function findReorderTarget(columns, target, source, before, masterColumns) {\n        if (target.columns) {\n            target = target.columns;\n            return target[before ? 0 : target.length - 1];\n        } else {\n            var parent = columnParent(target, columns);\n            var parentColumns;\n\n            if (parent) {\n                parentColumns = parent.columns;\n            } else {\n                parentColumns = columns;\n            }\n\n            var index = inArray(target, parentColumns);\n            if (index === 0 && before) {\n                index++;\n            } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                index--;\n            } else if (index > 0 || (index === 0 && !before)) {\n                index++;\n            }\n\n            var sourceIndex = inArray(source, parentColumns);\n            target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n            var targetIndex = inArray(target, masterColumns);\n            if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                return null;\n            }\n\n            if (target && target != source && target.columns) {\n                return findReorderTarget(columns, target, source, before, masterColumns);\n            }\n        }\n        return null;\n    }\n\n    function columnVisiblePosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           if (!columns[idx].hidden) {\n               cellCounts[row]++;\n           }\n        }\n        return result;\n    }\n\n    function flatColumnsInDomOrder(columns) {\n        var result = flatColumns(lockedColumns(columns));\n        return result.concat(flatColumns(nonLockedColumns(columns)));\n    }\n\n    function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n        var column = flatColumns[sourceIndex];\n        var target = flatColumns[targetIndex];\n\n        var parent = columnParent(column, columns);\n        columns = parent ? parent.columns : columns;\n\n        return inArray(target, columns);\n    }\n\n    function flatColumns(columns) {\n        var result = [];\n        var children = [];\n        for (var idx = 0; idx < columns.length; idx++) {\n            result.push(columns[idx]);\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n\n        }\n        if (children.length) {\n            result = result.concat(flatColumns(children));\n        }\n        return result;\n    }\n\n    function hiddenLeafColumnsCount(columns) {\n        var counter = 0;\n        var column;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            column = columns[idx];\n\n            if (column.columns) {\n                counter += hiddenLeafColumnsCount(column.columns);\n            } else if (column.hidden) {\n                counter++;\n            }\n        }\n        return counter;\n    }\n\n    function sumWidths(cols) {\n        var width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            if (!cols[idx].hidden) {\n                width += parseInt(cols[idx].width, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function columnsWidth(cols) {\n        var colWidth, width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            colWidth = cols[idx].style.width;\n            if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                width += parseInt(colWidth, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function removeRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        var rowSpan;\n        for (var idx = 0; idx < cells.length; idx++) {\n            rowSpan = cells[idx].rowSpan;\n            if (rowSpan > 1) {\n                cells[idx].rowSpan = (rowSpan - count) || 1;\n            }\n        }\n    }\n\n    function addRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            cells[idx].rowSpan += count;\n        }\n    }\n\n    function removeEmptyRows(container) {\n        var rows = container.find(\"tr:not(.k-filter-row)\");\n\n        var emptyRowsCount = rows.filter(function() {\n            return !$(this).children().length;\n        }).remove().length;\n\n        var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            if (cells[idx].rowSpan > 1) {\n                cells[idx].rowSpan -= emptyRowsCount;\n            }\n        }\n        return rows.length - emptyRowsCount;\n    }\n\n    function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n        var idx, row, length, children = [];\n\n        for (idx = 0, length = columns.length; idx < length; idx++) {\n            row = rows[rowIndex] || [];\n            row.push(cells.eq(offset + idx));\n            rows[rowIndex] = row;\n\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n        }\n    }\n\n    function setLeftAndRightStyles(element, left, right) {\n        element.css({\n            \"left\": left,\n            \"right\": right\n        });\n    }\n\n    function createColumnAttribute(column, attribute, property) {\n        column[attribute] = column[attribute] || {};\n        column[attribute][property] = column[attribute][property] || \"\";\n    }\n\n    function addColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        if (column[attribute][property] !== \"\") {\n            column[attribute][property] += \" \" + value;\n        } else {\n            column[attribute][property] = value;\n        }\n    }\n\n    function removeColumnAttribute(column, attribute, property, value, removeAttributeProperty) {\n        createColumnAttribute(column, attribute, property);\n        if (removeAttributeProperty) {\n            delete column[attribute][property];\n        } else {\n            column[attribute][property] = column[attribute][property].replace(value, \"\");\n        }\n    }\n\n    function lockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked;\n        });\n    }\n\n    function nonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked;\n        });\n    }\n\n    function stickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked;\n        });\n    }\n\n    function visibleStickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleNonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLeafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push(columns[idx]);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleLeafExportColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push({\n                    field: columns[idx].field,\n                    width: columns[idx].width,\n                    values: columns[idx].values,\n                    title: columns[idx].title\n                });\n            }\n        }\n\n        return result;\n    }\n\n    function childColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                result = result.concat(columns[idx].columns);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleChildColumns(columns) {\n        var result = childColumns(columns);\n\n        result = result.filter(function(e) {\n            return !e.hidden;\n        });\n\n        return result;\n    }\n\n    function leafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (!columns[idx].columns) {\n                result.push(columns[idx]);\n                continue;\n            }\n            result = result.concat(leafColumns(columns[idx].columns));\n        }\n\n        return result;\n    }\n\n    function getColumnsFields(columns) {\n        var result = [];\n        columns = leafColumns(columns);\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (typeof columns[idx] === \"string\") {\n                result.push(columns[idx]);\n            } else if (columns[idx].field) {\n                result.push(columns[idx].field);\n            }\n        }\n        return result;\n    }\n\n    function editField(column) {\n        return {\n            field: column.field,\n            title: column.title,\n            format: column.format,\n            editor: column.editor,\n            values: column.values,\n            editorOptions: extend(true, { format: column.format }, column.editorOptions),\n            label: column.title || column.field || \"\"\n        };\n    }\n\n    function leafDataCells(container) {\n        var rows = container.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        var cells = $();\n        if (rows.length > 1) {\n            cells = rows.find(\"th\")\n                .filter(filter)\n                .filter(function() { return this.rowSpan > 1; });\n        }\n\n        cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n        var indexAttr = kendo.attr(\"index\");\n        return [].sort.call(cells, function(a, b) {\n            a = $(a);\n            b = $(b);\n\n            var indexA = a.attr(indexAttr);\n            var indexB = b.attr(indexAttr);\n\n            if (indexA === undefined$1) {\n                indexA = $(a).index();\n            }\n            if (indexB === undefined$1) {\n                indexB = $(b).index();\n            }\n\n            indexA = parseInt(indexA, 10);\n            indexB = parseInt(indexB, 10);\n            return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n        });\n    }\n\n    function parentColumnsCells(cell) {\n        var container = cell.closest(\"table\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row);\n        if (level > 0) {\n            var parent = headerRows.eq(level - 1);\n            var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return !$(this).attr(\"rowspan\");\n            });\n\n            var offset = 0;\n            var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return this.colSpan > 1;\n            });\n\n            for (var idx = 0; idx < prevCells.length; idx++) {\n                offset += prevCells[idx].colSpan || 1;\n            }\n\n            index += Math.max(offset - 1, 0);\n\n            offset = 0;\n            for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                var parentCell = parentCellsWithChildren.eq(idx);\n                if (parentCell.attr(\"data-colspan\")) {\n                    offset += parentCell[0].getAttribute(\"data-colspan\");\n                } else {\n                    offset += 1;\n                }\n                if (index >= idx && index < offset) {\n                    result = parentColumnsCells(parentCell).add(result);\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n\n    function childColumnsCells(cell) {\n        var container = cell.closest(\"thead\");\n        var result = $().add(cell);\n\n        var row = cell.closest(TR);\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row) + cell[0].rowSpan;\n        var colSpanAttr = kendo.attr(\"colspan\");\n\n        if (level <= headerRows.length - 1) {\n            var child = row.next();\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var idx;\n\n            prevCells = prevCells.filter(function() {\n                return !this.rowSpan || this.rowSpan === 1;\n            });\n\n            var offset = 0;\n\n            for (idx = 0; idx < prevCells.length; idx++) {\n                offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n            }\n\n            var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n            var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n            idx = 0;\n\n            while (idx < colSpan) {\n                child = cells.eq(idx + offset);\n                result = result.add(childColumnsCells(child));\n                var value = parseInt(child.attr(colSpanAttr), 10);\n                if (value > 1) {\n                    colSpan -= value - 1;\n                }\n                idx++;\n            }\n        }\n\n        return result;\n    }\n\n    function appendContent(tbody, table, html, size) {\n        var placeholder,\n            tmp = tbody;\n\n        if (tbodySupportsInnerHtml) {\n            let $html = $(html);\n            kendo.applyStylesFromKendoAttributes($html, [\"display\", \"left\", \"right\"]);\n            tbody.empty();\n            $html.each((_, el) => tbody[0].appendChild(el));\n        } else {\n            placeholder = document.createElement(DIV);\n            placeholder.innerHTML = \"<table class='k-grid-table k-table'><tbody class='k-table-tbody'>\" + html + \"</tbody></table>\";\n            $(placeholder).find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", size));\n            tbody = placeholder.firstChild.firstChild;\n            table[0].replaceChild(tbody, tmp[0]);\n            tbody = $(tbody);\n        }\n        return tbody;\n    }\n\n    function addHiddenStyle(attr) {\n        attr = attr || {};\n        let kendoStyleAttrObject = {};\n        kendoStyleAttrObject[kendo.attr(\"style-display\")] = \"none\";\n\n        return extend({}, attr, kendoStyleAttrObject);\n    }\n\n    function hasHiddenStyle(attr) {\n        attr = attr || {};\n\n        return !!attr[kendo.attr(\"style-display\")];\n    }\n\n    function removeHiddenStyle(attr) {\n        attr = attr || {};\n        delete attr[kendo.attr(\"style-display\")];\n\n        return attr;\n    }\n\n    function normalizeCols(table, visibleColumns, hasDetails, groups) {\n        var colgroup = table.find(\">colgroup\"),\n            width,\n            cols = map(visibleColumns, function(column) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format(`<col ${kendo.attr('style-width')}=\"{0}\" ${column.draggable ? 'class=k-drag-col' : '' } />`, typeof width === STRING ? width : width + PX);\n                    }\n\n                    if (column.draggable) {\n                        return \"<col class='k-drag-col' />\";\n                    }\n                    return \"<col />\";\n                });\n\n        if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n            cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n        }\n\n        if (colgroup.length) {\n            colgroup.remove();\n        }\n\n        colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n        kendo.applyStylesFromKendoAttributes(colgroup, [\"width\"]);\n\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        table.prepend(colgroup);\n    }\n\n    function normalizeHeaderCells(container, columns) {\n        var lastIndex = 0;\n        var idx , len;\n        var th = container.find(\"th:not(.k-group-cell)\");\n\n        for (idx = 0, len = columns.length; idx < len; idx ++) {\n            if (columns[idx].locked) {\n                th.eq(idx).insertBefore(th.eq(lastIndex));\n                th = container.find(\"th:not(.k-group-cell)\");\n                lastIndex ++;\n            }\n        }\n    }\n\n    function convertToObject(array) {\n        var result = {},\n            item,\n            idx,\n            length;\n\n        for (idx = 0, length = array.length; idx < length; idx++) {\n            item = array[idx];\n            result[item.value] = item.text;\n        }\n\n        return result;\n    }\n\n    function formatGroupValue(value, format, columnValues, encoded) {\n        let isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n            groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n        groupValue = groupValue != null ? groupValue : \"\";\n        let usedValue = encoded === false ? groupValue : kendo.htmlEncode(groupValue);\n\n        return format ? kendo.format(format, usedValue) : usedValue;\n    }\n\n    function setCellVisibility(cells, index, visible) {\n        var pad = 0,\n            state,\n            cell = cells[pad];\n\n        while (cell) {\n            state = visible ? true : cell.style.display !== NONE;\n\n            if (visible && cell.classList.contains(\"k-hidden\")) {\n                cell.classList.remove(\"k-hidden\");\n            }\n\n            if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                cell.style.display = visible ? \"\" : NONE;\n                break;\n            }\n\n            cell = cells[++pad];\n        }\n    }\n\n    function hideColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                    cell.find(\"col\").eq(columnIndex).remove();\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, false);\n            }\n        }\n    }\n\n    function groupRows(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            result.push(item);\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupRows(item.items));\n            }\n        }\n\n        return result;\n    }\n\n    function groupFooters(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupFooters(item.items));\n            }\n\n            result.push(item.aggregates);\n        }\n\n        return result;\n    }\n\n    function showColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row, columns;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                    normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                    row = cell.find(TR).first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, true);\n            }\n        }\n    }\n\n    function updateColspan(toAdd, toRemove, num) {\n        num = num || 1;\n\n        var item, idx, length;\n        for (idx = 0, length = toAdd.length; idx < length; idx++) {\n            item = toAdd.eq(idx).children(\":not([hidden])\").last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n            item = toRemove.eq(idx).children(\":not([hidden])\").last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n        }\n    }\n\n    function tableWidth(table) {\n        var idx, length, width = 0;\n        var cols = table.find(\">colgroup>col\");\n\n        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n            width += parseInt(cols[idx].style.width, 10);\n        }\n\n        return width;\n    }\n    var Grid = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options, events) {\n            var that = this;\n\n            options = isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (events) {\n                that._events = events;\n            }\n\n            isRtl = kendo.support.isRtl(element);\n            CARET_ALT_RIGHT = isRtl ? CARET_ALT_LEFT : CARET_ALT_RIGHT_CACHE;\n\n            that._element();\n\n            that._ariaId();\n\n            that._columns($.extend(true, [], that.options.columns));\n\n            if (that._foreignKeyPromises) {\n                $.when.apply(null, that._foreignKeyPromises)\n                    .then(function() {\n                        that._foreignKeyPromises = null;\n                        that._continueInit();\n                    });\n            } else {\n                that._continueInit();\n            }\n        },\n\n        _continueInit: function() {\n            var that = this;\n\n            that._dataSource();\n\n            that._stickyColumns();\n\n            that._tbody();\n\n            that._thead();\n\n            that._rowResizing();\n\n            that._groupable();\n\n            that._toolbar();\n\n            let columnsToolbarButton = that.wrapper.find(\".k-grid-toolbar .k-toolbar-button.k-grid-column-menu[ref-toolbar-tool]\");\n            if (columnsToolbarButton.length > 0) {\n                that._globalColumnsMenu(columnsToolbarButton);\n            }\n\n            that._pageable();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._initSelectableAggregates();\n\n            that._selectable();\n\n            that._statusBar();\n\n            that._clipboard();\n\n            that._paste();\n\n            that._details();\n\n            that._editable();\n\n            that._attachCustomCommandsEvent();\n\n            that._adaptiveColumns();\n\n            that._minScreenSupport();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._group = that._groups() > 0;\n                that._footer();\n            }\n\n            if (that.options.contextMenu) {\n                that._initContextMenu();\n            }\n\n            if (that.lockedContent) {\n                that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                that._resizeHandler = function() {\n                    that.resize();\n                };\n                $(window).on(\"resize\" + NS, that._resizeHandler);\n            }\n\n            that._initLoader();\n\n            kendo.notify(that);\n\n            if (that._showWatermarkOverlay) {\n                that._showWatermarkOverlay(that.wrapper[0]);\n            }\n        },\n\n        events: [\n           CHANGE,\n           CHANGING,\n           \"dataBinding\",\n           \"cancel\",\n           DATABOUND,\n           DETAILEXPAND,\n           DETAILCOLLAPSE,\n           DETAILINIT,\n           FILTERMENUINIT,\n           FILTERMENUOPEN,\n           COLUMNMENUINIT,\n           COLUMNMENUOPEN,\n           EDIT,\n           BEFOREEDIT,\n           SAVE,\n           REMOVE,\n           SAVECHANGES,\n           CELLCLOSE,\n           ROWRESIZE,\n           COLUMNRESIZE,\n           COLUMNREORDER,\n           COLUMNSHOW,\n           COLUMNHIDE,\n           COLUMNLOCK,\n           COLUMNUNLOCK,\n           COLUMNSTICK,\n           COLUMNUNSTICK,\n           ROWREORDER,\n           NAVIGATE,\n           PASTE,\n           \"page\",\n           \"sort\",\n           \"filter\",\n           \"group\",\n           \"groupExpand\",\n           \"groupCollapse\",\n           \"kendoKeydown\"\n        ],\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var scrollable = that.options.scrollable;\n            var scrollableContent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            that._pageable();\n\n            that._thead();\n\n            that._rowResizing();\n\n            if (scrollable) {\n                if (scrollable.virtual) {\n                    scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                    kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                } else {\n                    scrollableContent = that.tbody;\n                    kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                }\n            }\n\n            if (that.options.groupable) {\n                that._groupable();\n            }\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.setDataSource(that.options.dataSource);\n            }\n\n            if (that.options.navigatable) {\n                that._navigatable();\n            }\n\n            if (that.options.selectable) {\n                that._selectable();\n            }\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._footer();\n            }\n        },\n\n        options: {\n            name: \"Grid\",\n            columns: [],\n            toolbar: null,\n            autoBind: true,\n            filterable: false,\n            scrollable: true,\n            sortable: false,\n            selectable: false,\n            allowCopy: false,\n            allowPaste: false,\n            navigatable: false,\n            pageable: false,\n            persistSelection: false,\n            editable: false,\n            encodeTitles: false,\n            groupable: false,\n            rowTemplate: \"\",\n            altRowTemplate: \"\",\n            statusBarTemplate: null,\n            search: false,\n            noRecords: false,\n            dataSource: {},\n            height: null,\n            resizable: false,\n            reorderable: false,\n            columnMenu: false,\n            detailTemplate: null,\n            contextMenu: false,\n            columnResizeHandleWidth: 3,\n            size: \"medium\",\n            mobile: \"\",\n            loaderType: \"loadingPanel\",\n            messages: {\n                loader: {\n                    loading: \"Loading...\",\n                    exporting: \"Exporting...\",\n                },\n\n                editable: {\n                    cancelDelete: CANCELDELETE,\n                    confirmation: DELETECONFIRM,\n                    confirmDelete: CONFIRMDELETE\n                },\n                commands: {\n                    create: defaultCommands.create.text,\n                    cancel: defaultCommands.cancel.text,\n                    save: defaultCommands.save.text,\n                    destroy: defaultCommands.destroy.text,\n                    edit: defaultCommands.edit.text,\n                    update: defaultCommands.update.text,\n                    canceledit: defaultCommands.canceledit.text,\n                    excel: defaultCommands.excel.text,\n                    pdf: defaultCommands.pdf.text,\n                    search: defaultCommands.search.text,\n                    columns: defaultCommands.columns.text,\n                    select: \"Select\",\n                    selectRow: \"Select Row\",\n                    selectAllRows: \"All rows\",\n                    clearSelection: \"Clear selection\",\n                    copySelection: \"Copy selection\",\n                    copySelectionNoHeaders: \"Copy selection (No Headers)\",\n                    paste: \"Paste (use CTRL/ + V)\",\n                    reorderRow: \"Reorder row\",\n                    reorderRowUp: \"Up\",\n                    reorderRowDown: \"Down\",\n                    reorderRowTop: \"Top\",\n                    reorderRowBottom: \"Bottom\",\n                    exportPdf: \"Export to PDF\",\n                    exportExcel: \"Export to Excel\",\n                    exportToExcelAll: \"All\",\n                    exportToExcelSelection: \"Selection\",\n                    exportToExcelSelectionNoHeaders: \"Selection (No Headers)\",\n                    sortAsc: \"Sort Ascending\",\n                    sortDesc: \"Sort Descending\",\n                    moveGroupPrevious: \"Move previous\",\n                    moveGroupNext: \"Move next\",\n                },\n                noRecords: NORECORDS,\n                expandCollapseColumnHeader: \"\",\n                groupHeader: \"Press ctrl + space to group\",\n                ungroupHeader: \"Press ctrl + space to ungroup\",\n                itemsSelected: \"items selected\",\n                dragHandleLabel: \"Drag row\",\n                toolbarLabel: \"grid toolbar\",\n                groupingHeaderLabel: \"grid grouping header\",\n                filterCellTitle: \"filter cell\"\n            },\n            width: null\n        },\n\n        destroy: function() {\n            var that = this,\n                element,\n                reorderableInstance;\n\n            that._destroyColumnAttachments();\n\n            Widget.fn.destroy.call(that);\n\n            if (this._navigatableTables) {\n                this._navigatableTables.off(NS);\n                this._navigatableTables = null;\n                this._headertables = null;\n            }\n\n            if (that._resizeHandler) {\n                $(window).off(\"resize\" + NS, that._resizeHandler);\n            }\n\n            if (that.pager && that.pager.element) {\n                that.pager.destroy();\n            }\n\n            if (that.timer) {\n                clearTimeout(that.timer);\n            }\n\n            if (that._progressTimeOut) {\n                clearTimeout(that._progressTimeOut);\n            }\n\n            if (that._collapseGroupsTimeOut) {\n                clearTimeout(that._collapseGroupsTimeOut);\n            }\n\n            if (that._endlessFetchTimeOut) {\n                clearTimeout(that._endlessFetchTimeOut);\n            }\n\n            that.pager = null;\n\n            that._destroyGroupable();\n\n            reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            if (that.allowPaste) {\n                const container = that.content || that.table;\n                container.off(PASTE + NS, that.pasteHandler);\n                that.unbind(that.pasteHandler);\n            }\n\n            if (that.pasteActionsDropDownList) {\n                that.pasteActionsDropDownList.destroy();\n                that.pasteActionsDropDownList = null;\n            }\n\n            if (that.selectable && that.selectable.element) {\n                that.selectable.destroy();\n\n                that.clearArea();\n                that._selectedIds = null;\n\n                if (that.copyHandler) {\n                    that.wrapper.off(\"keydown\", that.copyHandler);\n                    that.unbind(that.copyHandler);\n                }\n                if (that.updateClipBoardState) {\n                    that.unbind(that.updateClipBoardState);\n                    that.updateClipBoardState = null;\n                }\n                if (that.clearAreaHandler) {\n                    that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                }\n            }\n\n            that.selectable = null;\n            that._selectableAggregatesOptions = null;\n\n            if (that.resizable) {\n                that.resizable.destroy();\n\n                if (that._resizeUserEvents) {\n                    if (that._resizeHandleDocumentClickHandler) {\n                        $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                    that._resizeUserEvents.destroy();\n                    that._resizeUserEvents = null;\n                }\n                that.resizable = null;\n            }\n\n            that._destroyRowResizing();\n\n            that._destroyVirtualScrollable();\n\n            if (that.editableUserEvents) {\n                that.editableUserEvents.destroy();\n                that.editableUserEvents = null;\n            }\n\n            if (that._lockedContentUserEvents) {\n                that._lockedContentUserEvents.destroy();\n                that._lockedContentUserEvents = null;\n            }\n\n            that._destroyEditable();\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                           .unbind(PROGRESS, that._progressHandler)\n                           .unbind(ERROR, that._errorHandler)\n                           .unbind(SORT, that._clearSortClasses);\n\n                that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.table)\n                .add(that.thead)\n                .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n            if (that.content) {\n                element = element\n                        .add(that.content)\n                        .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n            }\n\n            if (that.scrollables && that.scrollables.first()) {\n                element = element.add(that.scrollables.first());\n            }\n\n            if (that.lockedHeader) {\n                that._removeLockedContainers();\n            }\n\n            if (that.pane) {\n                that.pane.destroy();\n            }\n\n            if (that._isMobile) {\n                that.wrapper.off(\"transitionend\" + NS);\n                that.wrapper.off(\"contextmenu\" + NS);\n            }\n\n            if (that.minScreenResizeHandler) {\n                $(window).off(\"resize\", that.minScreenResizeHandler);\n            }\n\n            that._detachColumnMediaResizeHandler();\n\n            if (that._draggableInstance && that._draggableInstance.element) {\n                that._draggableInstance.destroy();\n            }\n\n            that._draggableInstance = null;\n\n            if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            if (that.tbodyContextMenu) {\n                that.tbodyContextMenu.destroy();\n            }\n\n            if (that.theadContextMenu) {\n                that.theadContextMenu.destroy();\n            }\n\n            if (that.loader) {\n                that.loader.destroy();\n            }\n\n            that._draggableRowsInstance = null;\n\n            element.off(NS);\n\n            kendo.destroy(that.wrapper);\n\n            that.rowTemplate =\n            that.altRowTemplate =\n            that.lockedRowTemplate =\n            that.lockedAltRowTemplate =\n            that.detailTemplate =\n            that.footerTemplate =\n            that.groupFooterTemplate =\n            that.lockedGroupFooterTemplate =\n            that.noRecordsTemplate = null;\n\n            that.scrollables =\n            that.thead =\n            that.tbody =\n            that.element =\n            that.table =\n            that.content =\n            that.statusBar =\n            that.footer =\n            that.wrapper =\n            that.lockedTable =\n            that.lockedContent =\n            that.lockedHeader =\n            that.lockedFooter =\n            that._groupableClickHandler =\n            that._groupRows =\n            that._setContentWidthHandler =\n            that.loaderOverlay =\n            that.wrapperClone = null;\n        },\n\n        getOptions: function() {\n            var options = this.options;\n            options.dataSource = null;\n\n            var result = extend(true, {}, this.options);\n            result.columns = kendo.deepExtend([], this.columns);\n\n            var dataSource = this.dataSource;\n\n            var initialData = dataSource.options.data && dataSource._data;\n            dataSource.options.data = null;\n\n            result.dataSource = $.extend(true, {}, dataSource.options);\n\n            dataSource.options.data = initialData;\n\n            result.dataSource.data = initialData;\n            result.dataSource.page = dataSource.page();\n            result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n            result.dataSource.pageSize = dataSource.pageSize();\n            result.dataSource.sort = dataSource.sort();\n            result.dataSource.group = dataSource.group();\n            result.dataSource.aggregate = dataSource.aggregate();\n\n            if (result.dataSource.transport) {\n                result.dataSource.transport.dataSource = null;\n            }\n\n            if (result.pageable && result.pageable.pageSize) {\n                result.pageable.pageSize = dataSource.pageSize();\n            }\n\n            return result;\n        },\n\n        setOptions: function(options) {\n            var currentOptions = this.getOptions();\n            kendo.deepExtend(currentOptions, options);\n            if (!options.dataSource) {\n                currentOptions.dataSource = this.dataSource;\n            } else {\n              if (options.dataSource.filter) {\n                  currentOptions.dataSource.filter = options.dataSource.filter;\n              }\n            }\n            var wrapper = this.wrapper;\n            var events = this._events;\n            var element = this.element;\n\n            this.destroy();\n            this.options = null;\n            if (this._isMobile) {\n                var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                mobileWrapper.after(wrapper);\n                mobileWrapper.remove();\n                wrapper.removeClass(\"k-grid-mobile\");\n            }\n            if (wrapper[0] !== element[0]) {\n                wrapper.before(element);\n                wrapper.remove();\n            }\n            element.empty();\n\n            this.init(element, currentOptions, events);\n            this._setEvents(currentOptions);\n        },\n\n        items: function() {\n            if (this.lockedContent) {\n                return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n            } else {\n                return this._items(this.tbody);\n            }\n        },\n\n        _items: function(container, includeGroupRows) {\n            return container.children().filter(function() {\n                var tr = $(this);\n                return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(GROUPING_ROW)) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n            });\n        },\n\n        dataItems: function() {\n            var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n            if (this.lockedContent) {\n                var n = dataItems.length, tmp = new Array(2 * n);\n                for (var i = n; --i >= 0;) {\n                    tmp[i] = tmp[i + n] = dataItems[i];\n                }\n                dataItems = tmp;\n            }\n\n            return dataItems;\n        },\n\n        _destroyColumnAttachments: function() {\n            var that = this;\n\n            that.resizeHandle = null;\n\n            if (!that.thead) {\n                return;\n            }\n\n            that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                var th = $(this),\n                    filterMenu = th.data(\"kendoFilterMenu\"),\n                    sortable = th.data(\"kendoColumnSorter\"),\n                    columnMenu = th.data(\"kendoColumnMenu\");\n\n                if (filterMenu) {\n                    filterMenu.destroy();\n                }\n\n                if (sortable) {\n                    sortable.destroy();\n                }\n\n                if (columnMenu) {\n                    columnMenu.destroy();\n                }\n            });\n        },\n\n        _attachCustomCommandsEvent: function() {\n            var that = this,\n                columns = leafColumns(that.columns || []),\n                command,\n                idx,\n                length;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                command = columns[idx].command;\n\n                if (command) {\n                    attachCustomCommandEvent(that, that.wrapper, command);\n                }\n            }\n        },\n\n        _aria: function() {\n            var wrapper = this.wrapper,\n                gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                table = this.table,\n                toolbar = wrapper.find(\".k-grid-toolbar\"),\n                groupingHeader = wrapper.find(\".k-grouping-header\"),\n                gridId = this._ariaGridId(),\n                tableTabindex = table.attr(TABINDEX),\n                tbodyId, headerGroupId, footerGroupId, tableOwned,\n                numberOfFixedRows = this.thead.find(TR).length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                trailingColumns = this._trailingColumns(),\n                virtual = this.virtualScroll,\n                pageable = this.options.pageable,\n                rowsCount;\n\n            table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n            if (gridRole) {\n                table.attr(ROLE, gridRole);\n            }\n\n            table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n            table.find(TR).attr(ROLE, ROW);\n            table.find(\"th\").attr(ROLE, COLUMNHEADER);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else if (this._hasDetails()) {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                } else {\n                    rowsCount = numberOfFixedRows + this.dataSource.total();\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            } else if (this._hasDetails()) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            }\n\n            if (rowsCount && rowsCount > 0) {\n                this._ariaRowIndex();\n            }\n\n            if ((virtual && virtual.columns) ||\n                (!table.attr(ARIA_COLCOUNT) &&\n                    (table.find(\"td:not([group-header-spanned-hidden]):hidden\").length > 0 ||\n                    wrapper.find(\".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden\").length > 0))) {\n                        table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                        this._ariaColumnIndex();\n            }\n\n            if (this.pager) {\n                this.pager.element.attr(ARIA_CONTROLS, gridId);\n            }\n\n            toolbar.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.toolbarLabel,\n                \"aria-controls\": gridId\n            });\n\n            groupingHeader.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.groupingHeaderLabel,\n                \"aria-controls\": gridId\n            });\n\n            headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n            footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n            if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                this._ariaLockedContent();\n            }\n\n            if (!!headerGroupId || !!footerGroupId) {\n                tbodyId = this.tbody.attr(ID) || kendo.guid();\n                tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                this.tbody.attr(ID, tbodyId);\n                table.attr(ARIA_OWNS, tableOwned);\n            }\n\n            if (this.options.groupable) {\n                this._ariaGroupTitles();\n            }\n        },\n\n        _ariaColumnIndex: function() {\n            var trailingColumns = this._trailingColumns(),\n                dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                firstIndex = Number.MAX_VALUE,\n                lastIndex = 0,\n                lockedLastIndex = 0,\n                previousVirtual = 0,\n                nextVirtual = 0,\n                previousIndex, i, cells, dataIndex, cellsIndex,\n                eachHeaderCell = function(j, cell) {\n                    var current = cell.getAttribute(\"data-index\"),\n                        currentIndex = Number(current),\n                        lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                    if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                        firstIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                        lockedLastIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                        lastIndex = currentIndex;\n                    }\n\n                    if (current !== null) {\n                        cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                        previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                    } else {\n                        cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                        previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                    }\n                };\n\n            if (dataVirtual.length === 2) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            }\n\n            for (i = 0; i < lockedHeaderRows.length; i++) {\n                previousIndex = 0;\n                lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i < headerRows.length; i++) {\n                previousIndex = 0;\n                headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i <= lockedLastIndex; i++) {\n                dataIndex = i + trailingColumns;\n                cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n\n            for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                if (previousVirtual === 0 ) {\n                    cellsIndex = i + 1;\n                } else {\n                    cellsIndex = i - previousVirtual + 2;\n                }\n\n                dataIndex = firstIndex + i + trailingColumns;\n\n                cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n        },\n\n        _ariaGroupTitles: function() {\n            var that = this,\n                groups = that.dataSource.group(),\n                ths = that.wrapper.find(\".k-grid-header th\");\n\n            ths.each(function(i, el) {\n                if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                        el.setAttribute(\"title\", that.options.messages.groupHeader);\n                }\n            });\n\n            if (groups && groups.length > 0) {\n                groups.forEach(function(group) {\n                    var field = group.field,\n                        el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                    if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                        el.attr(\"title\", that.options.messages.ungroupHeader);\n                    }\n                });\n            }\n        },\n\n        _ariaHeaderFooter: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                groupId = \"\",\n                rowGroup;\n\n            if (table.length > 0) {\n                rowGroup = table.find(group + \", tbody\");\n                groupId = rowGroup.attr(ID) || kendo.guid();\n\n                table.attr(ROLE, NONE);\n                table.find(TR).attr(ROLE, ROW);\n                table.find(el).attr(ROLE, role);\n                rowGroup.attr({\n                    role: ROWGROUP,\n                    id: groupId\n                });\n            }\n\n            if (lockedTable.length > 0) {\n                that._ariaLocked(type, group, el, role);\n            }\n\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            return groupId;\n        },\n\n        _ariaId: function() {\n            var id = this.element.attr(ID) || \"aria\";\n\n            if (id) {\n                this._cellId = id + \"_active_cell\";\n            }\n        },\n\n        _ariaGridId: function() {\n            var table = this.table,\n                gridId = table.attr(ID);\n\n            if (!gridId) {\n                gridId = kendo.guid();\n                table.attr(ID, gridId);\n            }\n\n            return gridId;\n        },\n\n        _ariaLocked: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                rows = table.find(TR),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n\n            lockedTable.find(el).attr(ROLE, role);\n\n            rows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaLockedContent: function() {\n            var that = this,\n                table = that.table,\n                tableRows = table.find(TR),\n                lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                lockedRows = lockedTable.find(TR);\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(\"tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n            tableRows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaAddHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                table = this.table,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                this._ariaColumnIndex();\n\n                table.attr(ARIA_COLCOUNT, leafColsCount);\n            }\n        },\n\n        _ariaRemoveHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                this.table.removeAttr(ARIA_COLCOUNT);\n            }\n        },\n\n        _ariaRowIndex: function() {\n            var headerRows = this.thead.find(\">tr\"),\n                numberOfHeaderRows = headerRows.length,\n                bodyRows = this.tbody.find(\">tr\"),\n                footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                totalNumberOfItems = this.dataSource.total(),\n                previousItems = this.dataSource.skip() || 0,\n                currentIndex = 1,\n                previousMaster = false,\n                i, currentRow;\n\n            if (this._hasDetails()) {\n                totalNumberOfItems = totalNumberOfItems * 2;\n                previousItems = previousItems * 2;\n            }\n\n            for (i = 0; i < numberOfHeaderRows; i++) {\n                headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n\n            currentIndex = numberOfHeaderRows + previousItems;\n\n            for (i = 0; i < bodyRows.length; i++) {\n                currentRow = bodyRows.eq(i);\n\n                if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                    if (previousMaster) {\n                        currentIndex = currentIndex + 2;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                    }\n\n                    previousMaster = true;\n                } else {\n                    currentIndex = currentIndex + 1;\n                    previousMaster = false;\n                }\n\n                currentRow.attr(ARIA_ROWINDEX, currentIndex);\n            }\n\n            currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n            for (i = 0; i < footerRows.length; i++) {\n                footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n        },\n\n        _cellsIds: function(elements, prefix, i) {\n            var ownedCells = [],\n            gridId = this._ariaGridId();\n\n            elements.each(function(j, cell) {\n                var id = cell.getAttribute(ID) || gridId + \"_\" + prefix + \"_\" + i + \"_\" + j;\n\n                cell.setAttribute(ID, id);\n\n                ownedCells.push(id);\n            });\n\n            return ownedCells;\n        },\n\n        _trailingColumns: function() {\n            return this._groups() + (this._hasDetails() ? 1 : 0);\n        },\n\n        _element: function() {\n            const that = this;\n            let table = that.element;\n\n\n            if (!table.is(\"table\")) {\n                if (that.options.scrollable) {\n                    table = that.element.find(\"> .k-grid-content > table\");\n                } else {\n                    table = that.element.children(\"table\");\n                }\n\n                if (!table.length) {\n                    table = $(\"<table />\").appendTo(that.element);\n                }\n            }\n\n            table.addClass(\"k-grid-table k-table\");\n            table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n            that.table = table;\n\n            that._wrapper();\n        },\n\n        _createResizeHandle: function(container, th) {\n            var that = this;\n            var indicatorWidth = that.options.columnResizeHandleWidth;\n            var scrollable = that.options.scrollable;\n            var resizeHandle = that.resizeHandle;\n            var halfResizeHandle = (indicatorWidth * 3) / 2;\n            var rtlCorrection = 0;\n            var headerWrap;\n            var ieCorrection;\n            var webkitCorrection;\n            var firefoxCorrection;\n            var leftMargin;\n            var invisibleSpace;\n            var leftBorderWidth;\n            var scrollLeft;\n            var left;\n            var top;\n\n            if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                resizeHandle.off(NS).remove();\n                resizeHandle = null;\n            }\n\n            if (!resizeHandle) {\n                resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                container.append(resizeHandle);\n            }\n\n            scrollLeft = kendo.scrollLeft(container);\n\n            if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeft = scrollLeft * -1;\n            }\n\n            leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n            left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n            if (!isRtl) {\n                left += th[0].offsetWidth;\n           } else {\n                if (scrollable) {\n                    rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                    headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                    invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                    leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                    ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                    webkitCorrection = -rtlCorrection;\n                    firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                    left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                }\n            }\n\n            top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n            resizeHandle.css({\n                top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                left: left - halfResizeHandle,\n                height: outerHeight(th),\n                width: indicatorWidth * 3 - rtlCorrection\n            })\n            .data(\"th\", th)\n            .show();\n\n            resizeHandle.off(DUBLECLICK + NS).on(DUBLECLICK + NS, function() {\n                that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n            });\n        },\n\n        _positionColumnResizeHandle: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that.thead.add(lockedHead).on(MOUSEMOVE + NS, \"tr:not(.k-filter-row) > th:not([data-resizable=false])\", function(e) {\n                var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                var th = $(this);\n                if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                    return;\n                }\n\n                if (typeof button !== \"undefined\" && button !== 0) {\n                    //do not create a new resize handle if a mouse button is still pressed\n                    //this happens during resizing or before UserEvents trigger \"start\"\n                    return;\n                }\n\n                if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                    // resizing multi-column headers is not supported\n                    return;\n                }\n\n                that._createResizeHandle(th.closest(DIV), th);\n            });\n        },\n\n        _resizeHandleDocumentClick: function(e) {\n            if ($(e.target).closest(\".k-column-active\").length) {\n                return;\n            }\n\n            $(document).off(e);\n\n            this._resetResizeHandleHeader();\n            this._hideResizeHandle();\n        },\n\n        _resetResizeHandleHeader: function() {\n            var th;\n\n            if (!this.resizeHandle) {\n                return;\n            }\n\n            th = $(this.resizeHandle).data(\"th\");\n\n            if (th) {\n                th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).show();\n                th.find(DOT + ORDER_CLASS).show();\n                th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                th.find(DOT + FILTER_MENU_CLASS).show();\n            }\n        },\n\n        _hideResizeHandle: function() {\n            if (this.resizeHandle) {\n                this.resizeHandle.data(\"th\")\n                    .removeClass(\"k-column-active\");\n\n                if (this.lockedContent && !this._isMobile) {\n                    this.resizeHandle.off(NS).remove();\n                    this.resizeHandle = null;\n                } else {\n                    this.resizeHandle.hide();\n                }\n            }\n        },\n\n        _positionColumnResizeHandleTouch: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                threshold: 10,\n                minHold: 500,\n                hold: function(e) {\n                    var th = $(e.target);\n\n                    e.preventDefault();\n\n                    if (that.resizeHandle) {\n                        that.resizeHandle.data(\"th\")\n                            .removeClass(\"k-column-active\");\n                        that._resetResizeHandleHeader();\n                    }\n\n                    th.addClass(\"k-column-active\");\n\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS + \",\" + DOT + SVG_ICON_CLASS).hide();\n                    th.find(DOT + ORDER_CLASS).hide();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                    th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                    that._createResizeHandle(th.closest(DIV), th);\n\n                    if (!that._resizeHandleDocumentClickHandler) {\n                        that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                    }\n\n                    $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                }\n            });\n        },\n\n        resizeColumn: function(column, columnWidth) {\n            var that = this;\n            var isLocked = !!column.locked;\n            var isHidden = !!column.hidden;\n            var options = this.options;\n            var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n            var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n            var contentTable = isLocked ? that.lockedTable : that.table;\n            var footer = that.footer || $();\n            var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n            var columnMinWidth = column.minResizableWidth || 10;\n            var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n            var col;\n\n            if (isHidden) {\n                column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                return;\n            }\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            if (options.scrollable) {\n\n                col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n            } else {\n                col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n            }\n\n            if (options.scrollable) {\n                var constrain = false;\n                var totalWidth = that.wrapper.width() - scrollbar;\n                var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                    if (width < 0) {\n                        width = columnWidth;\n                    }\n                    constrain = true;\n                }\n\n                if (width > 10 && width >= columnMinWidth) {\n                    col.css('width', width);\n\n                    if (gridWidth) {\n                        if (constrain) {\n                            width = totalWidth - scrollbar * 2;\n                        } else {\n                            width = gridWidth + (columnWidth - column.width);\n                        }\n\n                        contentTable\n                            .add(header)\n                            .add(footer)\n                            .css('width', width);\n\n                        if (!isLocked) {\n                            that._footerWidth = width;\n                        }\n                    }\n                }\n\n            that._scrollVirtualWrapperOnColumnResize();\n            } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                col.css('width', columnWidth);\n            }\n\n            column.width = columnWidth;\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        _adjustColWidths: function(contentTable, header, footer, gridWidth) {\n            const colWidths = {};\n\n            contentTable\n                .add(header)\n                .add(footer)\n                .css('width', gridWidth);\n\n            contentTable\n                .add(header)\n                .add(footer)\n                .find(\"col\")\n                .each((i, col) => {\n                    // Retrieve the actual widths of the elements.\n                    colWidths[i] = $(col).css(\"width\");\n                });\n\n            contentTable\n                .add(header)\n                .add(footer)\n                .find(\"col\")\n                .each((i, col) => {\n                    // Ensure that the style=\"width\" attribute on the col elements matches the real width of the columns.\n                    $(col).css(\"width\", colWidths[i]);\n                });\n        },\n\n        _resizable: function() {\n            var that = this,\n                options = that.options,\n                container,\n                columnStart,\n                columnWidth,\n                columnMinWidth,\n                gridWidth,\n                isMobile = this._isMobile,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                isLocked,\n                col, th;\n\n            if (options.resizable === true || (options.resizable && options.resizable.columns === true)) {\n                container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                if (isMobile) {\n                    that._positionColumnResizeHandleTouch(container);\n                } else {\n                    that._positionColumnResizeHandle(container);\n                }\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n                }\n\n                that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                    handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                    hint: function(handle) {\n                        return $('<div class=\"k-grid-resize-indicator\" />').css({\n                            height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                        });\n                    },\n                    start: function(e) {\n                        th = $(e.currentTarget).data(\"th\");\n\n                        if (isMobile) {\n                            that._hideResizeHandle();\n                        }\n\n                        let header = th.closest(\"table\"),\n                            index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                        isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                        let contentTable = isLocked ? that.lockedTable : that.table,\n                            footer = that.footer || $();\n\n                        if (that.footer && that.lockedContent) {\n                            footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                        }\n\n                        let footerTable = footer.find(\"table\");\n\n                        cursor(that.wrapper, 'col-resize');\n\n                        if (options.scrollable) {\n                            col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                        } else {\n                            col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                        }\n\n                        let columns = $.map(that.columns, function(a) {\n                            return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                        });\n\n                        columnStart = e.x.location;\n                        columnWidth = outerWidth(th);\n                        columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                        gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                        // fix broken UI in Chrome38+\n                        if (browser.webkit) {\n                            that.wrapper.addClass(\"k-grid-column-resizing\");\n                        }\n\n                        that._adjustColWidths(contentTable, header, footerTable, gridWidth);\n                    },\n                    resize: function(e) {\n                        var rtlMultiplier = isRtl ? -1 : 1,\n                            currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                        if (options.scrollable) {\n                            var footer;\n                            if (isLocked && that.lockedFooter) {\n                                footer = that.lockedFooter.children(\"table\");\n                            } else if (that.footer) {\n                                footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                            }\n                            if (!footer || !footer[0]) {\n                                footer = $();\n                            }\n                            var header = th.closest(\"table\");\n                            var contentTable = isLocked ? that.lockedTable : that.table;\n                            var constrain = false;\n                            var totalWidth = that.wrapper.width() - scrollbar;\n                            var width = currentWidth;\n\n                            if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                if (width < 0) {\n                                    width = currentWidth;\n                                }\n                                constrain = true;\n                            }\n\n                            if (width > 10 && width >= columnMinWidth) {\n                                col.css('width', width);\n\n                                if (gridWidth) {\n                                    if (constrain) {\n                                        width = totalWidth - scrollbar * 2;\n                                    } else {\n                                        width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                    }\n\n                                    contentTable\n                                        .add(header)\n                                        .add(footer)\n                                        .css('width', width);\n\n                                    if (!isLocked) {\n                                        that._footerWidth = width;\n                                    }\n                                }\n                            }\n\n                            that._scrollVirtualWrapperOnColumnResize();\n                        } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                            col.css('width', currentWidth);\n                        }\n                    },\n                    resizeend: function() {\n                        var newWidth = outerWidth(th),\n                            column,\n                            header;\n\n                        cursor(that.wrapper, \"\");\n\n                        if (browser.webkit) {\n                            that.wrapper.removeClass(\"k-grid-column-resizing\");\n                        }\n\n                        if (th && columnWidth != newWidth) {\n                            header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(TR).first().add(that.thead.find(TR).first()) : th.parent();\n\n                            var index = th.attr(kendo.attr(\"index\"));\n                            if (!index) {\n                                index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                            }\n                            column = leafColumns(that.columns)[index];\n\n                            column.width = newWidth;\n\n                            that.trigger(COLUMNRESIZE, {\n                                column: column,\n                                oldWidth: columnWidth,\n                                newWidth: newWidth\n                            });\n\n                            that._applyLockedContainersWidth(true);\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._updateStickyColumns();\n                        }\n\n                        that._resetResizeHandleHeader();\n                        that._hideResizeHandle();\n                        th = null;\n                    }\n                });\n\n            }\n        },\n\n        // Row resizing functionality below\n        _addLockedRowResizing: function(tr) {\n            var index = tr.index();\n\n            return this.lockedTable.find(TR).eq(index)\n                .add(this.tbody.find(TR).eq(index));\n        },\n\n        _getMinRowHeight: function(row) {\n            var minHeight = 0;\n\n            row.each((i, el) => {\n                var currentMinHeight;\n\n                el.style.height = '';\n                currentMinHeight = outerHeight(el);\n\n                if (currentMinHeight > minHeight) {\n                    minHeight = currentMinHeight;\n                }\n            });\n\n            return minHeight;\n        },\n\n        _cacheRowHeight: function(rows, height) {\n            var that = this;\n\n            if (!that._cachedRowsHeight) {\n                that._cachedRowsHeight = {};\n            }\n\n            rows.each((i, el) => {\n                var uid = el.getAttribute(\"data-uid\");\n\n                that._cachedRowsHeight[uid] = height;\n            });\n        },\n\n        _clearCachedRowsHeight: function(rows) {\n            var that = this;\n\n            if (rows && that._cachedRowsHeight) {\n                rows.each((i, el) => {\n                    var uid = el.getAttribute(\"data-uid\");\n\n                    delete that._cachedRowsHeight[uid];\n                });\n            } else {\n                that._cachedRowsHeight = null;\n            }\n        },\n\n        _mapCachedRowsHeight: function(method, target) {\n            var input = this._cachedRowsHeight,\n                ds = this.dataSource,\n                output = {};\n\n            Object.keys(input).forEach((key) => {\n                var item = ds[method](key);\n\n                output[item[target]] = input[key];\n            });\n\n            this._cachedRowsHeight = output;\n        },\n\n        _rowResizerDblClick: function() {\n            var that = this,\n                resizer = that.rowResizer,\n                row = resizer.data(TR),\n                oldHeight = outerHeight(row),\n                newHeight, rows;\n\n            if (row.hasClass(SELECTED)) {\n                rows = that.select();\n            } else {\n                rows = row;\n            }\n\n            if (that.lockedTable) {\n                row = that._addLockedRowResizing(row);\n\n                if (row.hasClass(SELECTED)) {\n                    rows = that.lockedTable.find(DOT + SELECTED);\n                } else {\n                    rows = that.lockedTable.find(TR).eq(row.index());\n                }\n\n                rows.each((i, el) => {\n                    var rowIndex = el.rowIndex,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex)),\n                        pairMinHeight = that._getMinRowHeight(rowPair);\n\n                    rowPair.css(HEIGHT, pairMinHeight);\n                });\n            } else {\n                rows.css(HEIGHT, AUTO);\n            }\n\n            that._clearCachedRowsHeight(rows);\n\n            resizer.removeClass(HOVER);\n            resizer.removeClass(ACTIVE);\n\n            newHeight = outerHeight(row);\n\n            if (oldHeight != newHeight) {\n                that.trigger(ROWRESIZE, {\n                    row,\n                    rows,\n                    oldHeight,\n                    newHeight\n                });\n            }\n        },\n\n        _setupRowResizer(resizer, row, top) {\n            resizer\n                .data(TR, row)\n                .css({\n                    top: top\n                });\n        },\n\n        _attachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer,\n                delay = 200,\n                isIn = false;\n\n            rowResizer\n                .on(MOUSEDOWN + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(HOVER);\n                        rowResizer.addClass(ACTIVE);\n                    }\n                })\n                .on(MOUSEUP + NS, (e) => {\n                    if (e.button === 0) {\n                        rowResizer.removeClass(ACTIVE);\n                        rowResizer.addClass(HOVER);\n                    }\n                })\n                .on(MOUSEENTER + NS, () => {\n                    isIn = true;\n\n                    setTimeout(() => {\n                        if (isIn) {\n                            rowResizer.addClass(HOVER);\n                        }\n                    }, delay);\n                })\n                .on(MOUSELEAVE + NS, () => {\n                    isIn = false;\n                    rowResizer.removeClass(HOVER);\n                });\n        },\n\n        _getResizerTop: function(tr, container) {\n            var resizer = this.rowResizer,\n                inner = resizer.find(DOT + ROW_RESIZER)[0],\n                paddingTop = parseInt(getComputedStyle(resizer[0]).paddingTop);\n\n            return tr.offset().top -\n                parseFloat(tr.css(\"marginTop\")) -\n                (container.offset().top + parseFloat(container.css(\"borderTopWidth\"))) -\n                inner.clientHeight -\n                paddingTop +\n                container.scrollTop();\n        },\n\n        _getResizerContainer: function() {\n            var container = this.tbody.closest(DIV);\n\n            if (this.lockedTable) {\n                container = container.closest(DOT + \"k-grid-container\");\n            }\n\n            return container;\n        },\n\n        _createRowResizer: function(e) {\n            var that = this,\n                tr = $(e.currentTarget),\n                targetHeight = e.currentTarget.clientHeight,\n                positionIntarget = e.offsetY,\n                rowResizer = that.rowResizer,\n                previousRow = tr.prev(TR + \":visible\"),\n                container = that._getResizerContainer(),\n                top;\n\n            if (!rowResizer) {\n                rowResizer = that.rowResizer = $('<div class=\"k-resizer-wrap\"><div class=\"k-row-resizer\"></div></div>');\n                container.append(rowResizer);\n                that._attachRowResizerEvents();\n\n                rowResizer.off(DUBLECLICK + NS).on(DUBLECLICK + NS, that._rowResizerDblClick.bind(that));\n            }\n\n            top = that._getResizerTop(tr, container);\n\n            if (previousRow.length !== 0 && targetHeight / 2 > positionIntarget) {\n                if (!previousRow.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, previousRow, top);\n                }\n            } else {\n                if (!tr.hasClass(GROUPING_ROW)) {\n                    that._setupRowResizer(rowResizer, tr, top + targetHeight);\n                }\n            }\n        },\n\n        _detachRowResizerEvents: function() {\n            var rowResizer = this.rowResizer;\n\n            rowResizer\n                .off(MOUSEDOWN + NS)\n                .off(MOUSEUP + NS)\n                .off(MOUSEENTER + NS)\n                .off(MOUSELEAVE + NS);\n        },\n\n        _mapResizedRows: function(rows, multiSelectionLocked, newHeight) {\n            var that = this;\n\n            rows.each((i, el) => {\n                var minHeight;\n\n                if (multiSelectionLocked) {\n                    var rowIndex = el.rowIndex,\n                        pairNew = newHeight,\n                        pairMin = 0,\n                        rowPair = $(el).add(that.tbody.find(TR).eq(rowIndex));\n\n                    rowPair.each((i, r) => {\n                        var currentMinHeight;\n\n                        r.style.height = '';\n                        currentMinHeight = outerHeight(r);\n\n                        if (currentMinHeight > pairMin) {\n                            pairMin = currentMinHeight;\n                        }\n                    });\n\n                    if (pairNew < pairMin) {\n                        pairNew = pairMin;\n\n                        that._clearCachedRowsHeight(rowPair.eq(0));\n                    } else {\n                        that._cacheRowHeight(rowPair.eq(0), pairNew);\n                    }\n\n                    rowPair.css(HEIGHT, pairNew);\n                } else {\n                    el.style.height = '';\n                    minHeight = outerHeight(el);\n\n                    if (newHeight > minHeight) {\n                        el.style.height = newHeight + PX;\n\n                        that._cacheRowHeight($(el), newHeight);\n                    } else {\n                        that._clearCachedRowsHeight($(el));\n                    }\n                }\n            });\n        },\n\n        _rowResizing: function() {\n            var that = this,\n                options = that.options,\n                container, rowStart, rowHeight, tr;\n\n            if (options.resizable && options.resizable.rows === true) {\n                that.tbody\n                    .parent()\n                    .add(that.lockedTable)\n                    .on(MOUSEMOVE + NS, \".k-grid-footer tr, .k-table-tbody tr\", that._createRowResizer.bind(that));\n\n                if (that.rowResizing) {\n                    that.rowResizing.destroy();\n                }\n\n                container = that._getResizerContainer();\n\n                that.rowResizing = new ui.Resizable(container, {\n                    handle: DOT + ROW_RESIZER_WRAP,\n                    start: function(e) {\n                        tr = $(e.currentTarget).data(TR);\n\n                        if (that.lockedTable) {\n                            tr = that._addLockedRowResizing(tr);\n                        }\n\n                        tr.addClass(HOVER);\n\n                        that._detachRowResizerEvents();\n\n                        rowStart = e.y.location;\n                        rowHeight = outerHeight(tr);\n                    },\n                    resize: function(e) {\n                        var newHeight = rowHeight + e.y.location - rowStart,\n                            minHeight = 0;\n\n                        if (tr.length > 1) {\n                            minHeight = that._getMinRowHeight(tr);\n                        }\n\n                        if (newHeight < minHeight) {\n                            newHeight = minHeight;\n                        }\n\n                        tr.css('height', newHeight);\n\n                        that._setupRowResizer(that.rowResizer, tr, that._getResizerTop(tr, container) + newHeight);\n                    },\n                    resizeend: function() {\n                        var newHeight = outerHeight(tr),\n                            multiSelectionLocked = false,\n                            rows;\n\n                        if (tr.hasClass(SELECTED)) {\n                            rows = that.select();\n\n                            if (tr.length > 1 && rows.length > tr.length) {\n                                rows = that.lockedTable.find(DOT + SELECTED).not(tr);\n                                multiSelectionLocked = true;\n                            }\n                        } else {\n                            rows = tr;\n                        }\n\n                        that._mapResizedRows(rows, multiSelectionLocked, newHeight);\n\n                        tr.removeClass(HOVER);\n\n                        that.rowResizer.removeClass(ACTIVE);\n                        that.rowResizer.addClass(HOVER);\n                        that._attachRowResizerEvents();\n\n                        if (multiSelectionLocked) {\n                            rows = that.select();\n                        }\n\n                        if (rowHeight != newHeight) {\n                            that.trigger(ROWRESIZE, {\n                                row: tr,\n                                rows,\n                                oldHeight: rowHeight,\n                                newHeight\n                            });\n                        }\n\n                        tr = null;\n                    }\n                });\n            }\n        },\n\n        _draggable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                if (that._draggableInstance) {\n                    that._draggableInstance.destroy();\n                }\n\n                var header = that.wrapper.children(\".k-grid-header\");\n\n                that._draggableInstance = that.wrapper.kendoDraggable({\n                    group: kendo.guid(),\n                    autoScroll: true,\n                    filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                    dragstart: function() {\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                            if (that.virtualScrollable) {\n                                kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                            } else {\n                                kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                            }\n                        });\n                    },\n                    dragend: function() {\n                        that._resetResizeHandleHeader();\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                    },\n                    drag: function() {\n                        that._hideResizeHandle();\n                    },\n                    hint: function(target) {\n                        var title = target.attr(kendo.attr(\"title\"));\n                        if (title) {\n                            title = kendo.htmlEncode(title);\n                        }\n                        return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                            .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                            .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n                    }\n                }).data(\"kendoDraggable\");\n            }\n        },\n\n        _reorderable: function() {\n            let that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n                if (that.wrapper.data(\"kendoReorderable\")) {\n                    that.wrapper.data(\"kendoReorderable\").destroy();\n                }\n\n                that.wrapper.kendoReorderable({\n                    draggable: that._draggableInstance,\n                    dropFilter: HEADERCELLS,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        let columns = flatColumnsInDomOrder(that.columns);\n                        return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                    },\n                    inSameContainer: function(e) {\n                        let sourceParent = $(e.source).parent()[0],\n                            targetParent = $(e.target).parent()[0],\n                            sourceIndex = e.sourceIndex,\n                            targetIndex = e.targetIndex,\n                            flatColumns = flatColumnsInDomOrder(that.columns),\n                            lockable = flatColumns && flatColumns[sourceIndex] && !!flatColumns[sourceIndex].lockable;\n\n                        /* If there are locked columns, check if the grid header is the same instead.\n                        Otherwise the locked/unlocked headers are treated as separate(in the case of column reordering they shouldn't be). */\n                        if (that._isLocked() && lockable) {\n                            sourceParent = $(e.source.closest(\".k-grid-header\"))[0];\n                            targetParent = $(e.target.closest(\".k-grid-header\"))[0];\n                        }\n\n                        return sourceParent === targetParent && targetParentContainerIndex(flatColumns, that.columns, sourceIndex, targetIndex) > -1;\n                    },\n                    change: function(e) {\n                        let columns = flatColumnsInDomOrder(that.columns);\n                        let column = columns[e.oldIndex];\n                        let newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n\n                        that.reorderColumn(newIndex, column, e.position === \"before\");\n                    }\n                });\n            }\n        },\n\n        _reorderHeader: function(sources, target, before, container) {\n            var that = this;\n            var sourcePosition = columnPosition(sources[0], that.columns);\n            var destPosition = columnPosition(target, that.columns);\n            var action;\n            var ths;\n\n            var leafs = [];\n            for (var idx = 0; idx < sources.length; idx++) {\n                if (sources[idx].columns) {\n                    leafs = leafs.concat(sources[idx].columns);\n                }\n            }\n            if (container) {\n                ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            } else {\n                ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            }\n\n            var sourceLockedColumns = lockedColumns(sources).length;\n            var targetLockedColumns = lockedColumns([target]).length;\n\n            if (leafs.length) {\n                if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                    action = \"prepend\";\n                    moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                    action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                    moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                }\n\n                if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                    target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                    if (target) {\n                        if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                            that._reorderHeader(leafs, target, before, that.thead);\n                        } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                            that._reorderHeader(leafs, target, before, that.lockedHead);\n                        } else {\n                            that._reorderHeader(leafs, target, before);\n                        }\n                    }\n                }\n            } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n            }\n\n            reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n        },\n\n        _reorderContent: function(sources, destination, before) {\n            var that = this;\n            var lockedRows = $();\n            var source = sources[0];\n            var visibleSources = visibleColumns(sources);\n            var sourceIndex = inArray(source, leafColumns(that.columns));\n            var destIndex = inArray(destination, leafColumns(that.columns));\n\n            var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n            var colDest = inArray(destination, visibleLeafColumns(that.columns));\n            var lockedCount = lockedColumns(that.columns).length;\n            var isLocked = !!destination.locked;\n            var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            var headerCol, footerCol, beforeVisibleColumn;\n            headerCol = footerCol = colDest;\n\n            if (destination.hidden) {\n                var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                if (visibleColumns(columnsArray).length > 0) {\n                    headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                    beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                }\n                else {\n                    if (isLocked) {\n                        colDest = that.lockedTable.find(\"colgroup\");\n                        headerCol = that.lockedHeader.find(\"colgroup\");\n                        footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                    } else {\n                        colDest = that.tbody.prev();\n                        headerCol = that.thead.prev();\n                        footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                    }\n                }\n            }\n\n            if (that._hasFilterRow()) {\n                reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            if (colSourceIndex >= 0) {\n                reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n            }\n\n            if (that.options.scrollable) {\n                if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                    reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n            }\n\n            if (footer && footer.length) {\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n                reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n            if (that.lockedTable) {\n                if (lockedCount > destIndex) {\n                    if (lockedCount <= sourceIndex) {\n                        updateColspan(\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                            sources.length\n                        );\n                    }\n                } else if (lockedCount > sourceIndex) {\n                    updateColspan(\n                        that.table.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                        that.lockedTable.find(\">tbody>tr.k-grouping-row:not([hidden])\"),\n                        sources.length\n                    );\n                }\n\n                lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n            }\n\n            for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n        },\n\n        _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n            var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n            return inArray(closestVisibleColumn, visibleColumns(this.columns));\n        },\n\n        _autoFitLeafColumn: function(leafIndex) {\n            this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n        },\n\n        _hasReorderableRows: function() {\n            return this.options.reorderable && this.options.reorderable.rows;\n        },\n\n        _draggableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                    (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell),\n                clickMoveClick = false,\n                isMobile = !!(that._isMobile || kendo.support.mobileOS);\n\n            if (that._draggableRowsInstance) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            if (this.options.reorderable.rows.clickMoveClick !== false && this._hasDragHandleColumn) {\n                clickMoveClick = true;\n            }\n\n            that._draggableRowsInstance = that.tbody.kendoDraggable({\n                holdToDrag: isMobile,\n                showHintOnHold: isMobile,\n                preventOsHoldFeatures: isMobile,\n                group: \"row-draggable\",\n                autoScroll: true,\n                filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                hint: function(target) {\n                    var hint = $('<div class=\"k-reorder-clue k-drag-clue\">' + kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }) + '</div>');\n\n                    if (selectable && that.select().length > 1 && that.lockedContent) {\n                        hint.append(\"<span>\" + that.select().length / 2 + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                    } else if (selectable && that.select().length > 1 && !that.lockedContent) {\n                        hint.append(\"<span>\" + that.select().length + \" \" + encode(that.options.messages.itemsSelected) + \"</span>\");\n                    } else {\n                        var clone = target.closest(ITEMROW).clone();\n                        clone.find(\"td.k-command-cell\").remove();\n                        clone.find(\"td\").each(function(index, elm) {\n                            hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                        });\n                    }\n\n                    return hint;\n                },\n                clickMoveClick: clickMoveClick,\n                cursorOffset: { top: 0, left: 0 }\n            }).data(\"kendoDraggable\");\n        },\n\n        _reorderableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that.tbody.data(\"kendoReorderable\")) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n            }\n\n            that.tbody.kendoReorderable({\n                smartPosition: false,\n                draggable: that._draggableRowsInstance,\n                dragOverContainers: function(sourceIndex, targetIndex) {\n                    var result = true,\n                        target = $(ITEMROW, that.content).eq(targetIndex);\n\n                    if (selectable) {\n                        result = !target.is(\".k-selected\");\n                    }\n\n                    return result;\n                },\n                inSameContainer: function(e) {\n                    if (selectable) {\n                        return !$(e.target).is(\".k-selected\");\n                    }\n\n                    return true;\n                },\n                dropFilter: \"> \" + ITEMROW,\n                allowIcon: \"insert-middle\",\n                orientation: \"vertical\",\n                reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                positionDropCue: function(reorderDropCue, dropTarget) {\n                    var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                    reorderDropCue.css({\n                        transform: \"translate(0,-50%)\",\n                        left: firstCellLeft\n                    });\n                },\n                externalDraggable: function(e) {\n                    var draggable = e.draggable;\n\n                    if (draggable) {\n                        return draggable;\n                    }\n                },\n                change: function(e) {\n                    that._triggerRowRorder(e);\n                }\n            });\n        },\n\n        _triggerRowRorder: function(e) {\n            var that = this,\n                args = {\n                    newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                    oldIndex: e.oldIndex\n                },\n                row = e.element,\n                selectable = that._checkBoxSelection ||\n                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (selectable && that.select().length > 1) {\n                args = extend(args, {\n                    rows: that.select()\n                });\n            } else {\n                args = extend(args, {\n                    row: row\n                });\n            }\n\n            if (!that.trigger(ROWREORDER, args)) {\n                that.reorderRows(selectable ? that.select() : row, args.newIndex);\n            }\n        },\n\n        reorderRowTo: function(row, index) {\n            var that = this,\n                item = that.dataItem(row),\n                oldIndex = row.index();\n\n            if (index < 0 || index === oldIndex) {\n                return;\n            }\n\n            if (!that.trigger(ROWREORDER, {\n                row: row,\n                oldIndex: row.index(),\n                newIndex: index\n            })) {\n                that.dataSource.pushMove(index, [item]);\n            }\n        },\n\n        reorderRows: function(rows, index) {\n            var that = this,\n                dataSource = that.dataSource,\n                rowsLength = that.tbody.children(ITEMROW).length,\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                items = rows.toArray().map(function(row) {\n                    return that.dataItem(row);\n                });\n\n            if (!targetItem) {\n                // If index is after last row dataItem wouldn't exist\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                index = dataSource.indexOf(targetItem) + 1;\n            } else {\n                index = dataSource.indexOf(targetItem);\n            }\n\n            if (index >= 0) {\n                that._rowDropping = true;\n                dataSource.pushMove(index, items);\n                that._rowDropping = false;\n            }\n        },\n\n        autoFitColumns: function(columns) {\n            var that = this;\n\n            columns = columns || that.columns;\n\n            for (var i = 0; i < columns.length; i++) {\n                var column = columns[i];\n\n                if (column.columns) {\n                    that.autoFitColumns(column.columns);\n                } else {\n                    that.autoFitColumn(column);\n                }\n            }\n        },\n\n        autoFitColumn: function(column) {\n            var that = this,\n                options = that.options,\n                columns = that.columns,\n                index,\n                th,\n                headerTable,\n                leafCols,\n                isLocked,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                col,\n                minWidth,\n                contentDiv, scrollLeft,\n                notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                menu,\n                thWidth;\n\n            //  retrieve the column object, depending on the method argument\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            leafCols = leafColumns(columns);\n            minWidth = column.minResizableWidth;\n            index = inArray(column, leafCols);\n            isLocked = column.locked;\n\n            if (isLocked) {\n                headerTable = that.lockedHeader.children(\"table\");\n            } else {\n                headerTable = that.thead.parent();\n            }\n\n            th = headerTable.find(\"[data-index='\" + index + \"']\");\n            menu = th.find('a.k-grid-column-menu, a.k-grid-filter-menu');\n\n            var contentTable = isLocked ? that.lockedTable : that.table,\n                footer = that.footer || $();\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            var footerTable = footer.find(\"table\").first();\n\n            if (that.lockedHeader && !isLocked) {\n                index -= visibleLocked;\n            }\n\n            // adjust column index, depending on previous hidden columns\n            for (var j = 0; j < leafCols.length; j++) {\n                if (leafCols[j] === column) {\n                    break;\n                } else {\n                    if (leafCols[j].hidden) {\n                        index--;\n                    }\n                }\n            }\n\n            // get col elements\n            if (options.scrollable) {\n                col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                    .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                    .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                if (!isLocked) {\n                    contentDiv = contentTable.parent();\n                    scrollLeft = kendo.scrollLeft(contentDiv);\n                }\n            } else {\n                col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n            }\n\n            var tables = headerTable.add(contentTable).add(footerTable);\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"initial\");\n            }\n\n            var oldColumnWidth = outerWidth(th);\n\n            // reset the table and autofitted column widths\n            // if scrolling is disabled, we need some additional repainting of the table\n            col.width(\"\");\n            tables.css(\"table-layout\", \"fixed\");\n            col.width(AUTO);\n            tables.addClass(\"k-autofitting\");\n            tables.css(\"table-layout\", \"\");\n\n            thWidth = outerWidth(th);\n\n            // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n            var newColumnWidth = Math.ceil(Math.max(\n                thWidth,\n                outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                outerWidth(footerTable.find(TR).eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n            )) + 1;\n\n            if (minWidth && minWidth > newColumnWidth) {\n                newColumnWidth = minWidth;\n            }\n\n            col.width(newColumnWidth);\n            column.width = newColumnWidth;\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"\");\n            }\n\n            // if all visible columns have widths, the table needs a pixel width as well\n            if (options.scrollable) {\n                var cols = headerTable.find(\"col\"),\n                    colWidth,\n                    totalWidth = 0;\n                for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        totalWidth += parseInt(colWidth, 10);\n                    } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                        totalWidth += parseInt(cols.eq(idx).width(), 10);\n                    } else {\n                        totalWidth = 0;\n                        break;\n                    }\n                }\n\n                if (totalWidth) {\n                    tables.each(function() {\n                        this.style.width = totalWidth + PX;\n                    });\n                }\n            }\n\n            tables.removeClass(\"k-autofitting\");\n\n            if (scrollLeft) {\n                kendo.scrollLeft(contentDiv, scrollLeft);\n            }\n\n            that.trigger(COLUMNRESIZE, {\n                column: column,\n                oldWidth: oldColumnWidth,\n                newWidth: newColumnWidth\n            });\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        reorderColumn: function(destIndex, column, before) {\n            var that = this,\n                parent = columnParent(column, that.columns),\n                columns = parent ? parent.columns : that.columns,\n                sourceIndex = inArray(column, columns),\n                destColumn = columns[destIndex],\n                virtualScroll = that.virtualScroll || {},\n                lockChanged,\n                isLocked = !!destColumn.locked,\n                lockedCount = lockedColumns(that.columns).length,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (sourceIndex === destIndex) {\n                return;\n            }\n\n            if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                return;\n            }\n\n            if (column.locked && !isLocked && lockedCount == 1) {\n                return;\n            }\n\n            that._hideResizeHandle();\n\n            if (before === undefined$1) {\n                before = destIndex < sourceIndex;\n            }\n\n            var sourceColumns = [column];\n\n            that._reorderHeader(sourceColumns, destColumn, before);\n\n            if (that.lockedHeader) {\n                removeEmptyRows(that.thead);\n                removeEmptyRows(that.lockedHeader);\n            }\n\n            if (destColumn.columns) {\n                destColumn = leafColumns(destColumn.columns);\n                destColumn = destColumn[before ? 0 : destColumn.length - 1];\n            }\n\n            if (column.columns) {\n                sourceColumns = leafColumns(column.columns);\n            }\n\n            that._reorderContent(sourceColumns, destColumn, before);\n\n            lockChanged = !!column.locked;\n            lockChanged = lockChanged != isLocked;\n            column.locked = isLocked;\n\n            columns.splice(before ? destIndex : destIndex + 1, 0, column);\n            columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n            that._updateLockedCols();\n            that._updateCols();\n            that._templates();\n\n            that._updateColumnCellIndex();\n            that._updateColumnSorters();\n\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._updateTablesWidth();\n            that._applyLockedContainersWidth();\n            that._syncLockedHeaderHeight();\n            that._syncLockedContentHeight();\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n\n            if (virtualScroll.columns) {\n                that.refresh();\n            }\n\n            if (!lockChanged) {\n                return;\n            }\n\n            if (isLocked) {\n                that.trigger(COLUMNLOCK, {\n                    column: column\n                });\n            } else {\n                that.trigger(COLUMNUNLOCK, {\n                    column: column\n                });\n            }\n        },\n\n        _updateColumnCellIndex: function() {\n            var header;\n            var offset = 0;\n\n            if (this.lockedHeader) {\n                header = this.lockedHeader.find(\"thead\");\n                offset = updateCellIndex(header, lockedColumns(this.columns));\n            }\n            updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n        },\n\n        lockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.locked || column.hidden) {\n                return;\n            }\n\n            if (column.sticky) {\n                this.unstickColumn(columns.indexOf(column));\n            }\n\n            var index = lockedColumns(columns).length - 1;\n            this.reorderColumn(index, column, false);\n        },\n\n        unlockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.locked || column.hidden) {\n                return;\n            }\n\n            var index = lockedColumns(columns).length;\n            this.reorderColumn(index, column, true);\n        },\n\n        stickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.sticky || column.hidden) {\n                return;\n            }\n\n            if (column.locked) {\n                this.unlockColumn(columns.indexOf(column));\n\n                if (column.locked) {\n                    return;\n                }\n            }\n\n            column.sticky = true;\n            this._updateStickyColumns();\n        },\n\n        unstickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.sticky || column.locked || column.hidden) {\n                return;\n            }\n\n            this._removeStickyAttributes([column]);\n            this._removeStickyStyles(stickyColumns(columns));\n\n            column.sticky = false;\n            this._updateStickyColumns();\n\n            if (this._anyStickyColumns() === 0) {\n                this._templates();\n                if (this._hasFilterRow()) {\n                    this._updateStickyFilterCells();\n                }\n            }\n        },\n\n        cellIndex: function(td) {\n            var lockedColumnOffset = 0;\n\n            if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n            }\n\n            return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container);\n\n            if (!container.is(TR) && this._editMode() !== \"popup\") {\n                container = container.closest(TR);\n            }\n\n            var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(id);\n        },\n\n        _calculateColumnIndex: function(cell) {\n            var cellIndex = this.cellIndex(cell);\n            var virtualOffset = 0;\n\n            if (this._hasVirtualColumns()) {\n                virtualOffset = parseInt($(cell).closest(TR).find(\"td\").first().attr(\"colspan\"), 10);\n                virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n            }\n\n            return cellIndex + virtualOffset;\n        },\n\n        _editable: function() {\n            let that = this,\n                editable = that.options.editable,\n                handler = function() {\n                    let target = activeElement(),\n                        cell = that._editContainer;\n\n                    if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                        if (that.editable.end()) {\n                            that.closeCell();\n                        } else {\n                            that._scrollVirtualWrapper();\n                        }\n                    }\n                },\n                mobileOS = kendo.support.mobileOS,\n                useDoubleTapEditing = !!(that._isMobile || mobileOS),\n                /*\n                    https://github.com/telerik/kendo-ui-core/issues/7817\n                */\n                userEventsPreventDefault = mobileOS && mobileOS.ios && (mobileOS.browser === \"chrome\" || mobileOS.browser === \"edge\");\n\n            that._isEditableEnabled = that._isEditableEnabled !== undefined$1 ? that._isEditableEnabled : !editable.readonly;\n\n            if (!that._isEditableEnabled) {\n                that._removeEditableClickHandlers();\n            }\n\n            if (editable && that._isEditableEnabled) {\n\n                let mode = that._editMode();\n                if (mode === \"incell\") {\n                    that.table.add(that.lockedTable)\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                            let target = $(e.target);\n                            if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                e.preventDefault();\n                            }\n                        });\n\n                    if (editable.update !== false) {\n                        if (isMac) {\n                            that.wrapper\n                                .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                    // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                    // this is necessary for the \"focusout\" event to be fired\n                                    $(e.target).trigger(\"focus\");\n                                })\n                                .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                    if (!$(e.target).is(\"input\")) {\n                                        $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                    }\n                                })\n                                .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                    var editContainer = that._editContainer;\n\n                                    if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                        that._mousedownOnEditCell = true;\n                                    } else {\n                                        that._mousedownOnEditCell = false;\n                                    }\n                                });\n                        }\n\n                        that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                            filter: \"tr:not(.k-grouping-row) > td\",\n                            allowSelection: true,\n                            preventDefault: userEventsPreventDefault,\n                            supportDoubleTap: useDoubleTapEditing,\n                            fastTap: useDoubleTapEditing,\n                            [useDoubleTapEditing ? 'doubleTap' : 'tap']: function(e) {\n                                var td = $(e.target),\n                                isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                that._mousedownOnEditCell = false;\n\n                                if (td.hasClass(\"k-hierarchy-cell\") ||\n                                    td.hasClass(\"k-detail-cell\") ||\n                                    td.hasClass(\"k-group-cell\") ||\n                                    td.hasClass(\"k-edit-cell\") ||\n                                    td.has(\".k-grid-remove-command\").length ||\n                                    (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                    $(e.target).is(\":input\")) {\n                                    return;\n                                }\n\n                                if (that.editable) {\n                                    if (that.editable.end()) {\n                                        $(activeElement()).trigger(\"blur\");\n                                        that.closeCell();\n\n                                        if (!that._requestInProgress) {\n                                            that.editCell(td);\n                                        }\n                                    } else {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                } else {\n                                    that.editCell(td);\n                                }\n                            }\n                        });\n\n                        that.wrapper.on(\"focusin\" + NS, function() {\n                            // fix focus issue in IE\n                            if (!$.contains(this, activeElement())) {\n                                clearTimeout(that.timer);\n                                that.timer = null;\n                            }\n                        })\n                        .on(\"focusout\" + NS, function(e) {\n                            var shouldCloseCell = true;\n\n                            if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                shouldCloseCell = false;\n                            }\n\n                            that._mousedownOnEditCell = false;\n\n                            if (shouldCloseCell) {\n                                that.timer = setTimeout(function() {\n                                    handler();\n                                }, 1);\n                            }\n                        });\n                    }\n                } else {\n                    if (editable.update !== false) {\n                        that._editCommandClickHandler = that._editCommandClick.bind(that);\n                        that.wrapper.on(CLICK + NS , \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", that._editCommandClickHandler);\n\n                        if (that._isVirtualInlineEditable()) {\n                            that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                if (that.editable && !that.editable.end()) {\n                                    that._scrollVirtualWrapper();\n                                }\n                            });\n                        }\n                    }\n                }\n\n                that._removeCommandClickHandler = that._removeCommandClick.bind(that);\n                that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", that._removeCommandClickHandler);\n            }\n        },\n\n        _editCommandClick: function(e) {\n            let that = this,\n                element = $(e.currentTarget);\n            if (!that._belongsToGrid(element)) {\n                return;\n            }\n            e.preventDefault();\n            that.editRow(element.closest(TR));\n        },\n\n        _removeCommandClick: function(e) {\n            let that = this,\n                editable = that.options.editable,\n                element = $(e.currentTarget);\n            if (!that._belongsToGrid(element)) {\n                return;\n            }\n\n            if (editable.destroy !== false) {\n                e.preventDefault();\n                e.stopPropagation();\n                that.removeRow(element.closest(TR));\n            } else {\n                //Required for the MVC server wrapper delete button.\n                e.stopPropagation();\n\n                if (!that._confirmation()) {\n                    e.preventDefault();\n                }\n            }\n        },\n\n        editCell: function(cell) {\n            cell = $(cell);\n\n            let that = this,\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                model = that._modelForContainer(cell);\n\n            that.closeCell();\n\n            if (model && isColumnEditable(column, model) && !column.command) {\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                that._attachModelChange(model);\n\n                that._editContainer = cell;\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.editable = cell.addClass(\"k-edit-cell\")\n                    .kendoEditable({\n                        fields: editField(column),\n                        model: model,\n                        size: that.options.size,\n                        target: that,\n                        change: function(e) {\n                            if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                e.preventDefault();\n                            }\n                        },\n                        skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                    }).data(\"kendoEditable\");\n\n                    let tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                    if (model.new === true) {\n                        tr.addClass(\"k-grid-add-row\");\n                        delete model.new;\n                    }\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                    if (tr.hasClass(\"k-grid-add-row\")) {\n                        that._relatedRow(tr).addClass(\"k-grid-add-row\");\n                    }\n                    that._syncLockedScroll();\n                }\n\n                that.trigger(EDIT, { container: cell, model: model });\n            }\n        },\n\n        enableEditing: function() {\n            let that = this,\n                toolbar = that.wrapper.find(\".k-grid-toolbar\");\n\n            if (!that._isEditableEnabled) {\n                that._isEditableEnabled = true;\n                that._editable();\n                let addButton = toolbar.find(\".k-grid-add\").getKendoButton();\n\n                if (addButton) {\n                    addButton.bind(\"click\", that._createClickHandler);\n                }\n            }\n        },\n\n        disableEditing: function() {\n            let that = this;\n\n            if (that._isEditableEnabled) {\n                if (that._editMode() === \"incell\") {\n                    that.closeCell();\n                } else {\n                    that.cancelRow();\n                }\n\n                that._clearEditableState();\n                that._destroyEditable();\n\n                if (that.editableUserEvents) {\n                    that.editableUserEvents.destroy();\n                    that.editableUserEvents = null;\n                }\n\n                that._removeEditableClickHandlers();\n\n                that._isEditableEnabled = false;\n            }\n        },\n\n        _removeEditableClickHandlers: function() {\n            let that = this,\n                toolbar = that.wrapper.find(\".k-grid-toolbar\");\n\n            that.wrapper.off(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command\", that._editCommandClickHandler);\n            that.wrapper.off(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command\", that._removeCommandClickHandler);\n            toolbar.off(CLICK + NS, \".k-grid-add\", that._createClickHandler);\n\n            let addButton = toolbar.find(\".k-grid-add\").getKendoButton();\n\n            if (addButton) {\n                addButton.unbind(\"click\");\n            }\n\n            that._editCommandClickHandler = null;\n            that._removeCommandClickHandler = null;\n        },\n\n        _adjustLockedHorizontalScrollBar: function() {\n            var table = this.table,\n                content = table.parent();\n\n            var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n            this.lockedContent.height(content[0].offsetHeight - scrollbar);\n        },\n\n        _syncLockedScroll: function() {\n            this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n            if (this.virtualScrollable) {\n                this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n            }\n        },\n\n        _syncLockedContentHeight: function() {\n            if (this.lockedTable) {\n                if (!this.touchScroller) {\n                    this._adjustLockedHorizontalScrollBar();\n                }\n                this._adjustRowsHeight(this.table, this.lockedTable);\n            }\n        },\n\n        _syncLockedHeaderHeight: function() {\n            if (this.lockedHeader) {\n                var lockedTable = this.lockedHeader.children(\"table\");\n                var table = this.thead.parent();\n\n                this._adjustRowsHeight(lockedTable, table);\n\n                syncTableHeight(lockedTable, table);\n            }\n        },\n\n        _syncLockedFooterHeight: function() {\n            if (this.lockedFooter && this.footer && this.footer.length) {\n                this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n            }\n        },\n\n        _destroyEditable: function() {\n            let that = this;\n\n            let destroy = function() {\n                if (that.editable) {\n\n                    let container = that.editView ? that.editView.element : that._editContainer;\n                    let window = that._editContainer.data(\"kendoWindow\");\n\n                    if (container) {\n                        if (window) {\n                            container = window.wrapper;\n                        }\n                        container.off(CLICK + NS, \".k-grid-cancel-command, button[ref-cancel-button]\", that._editCancelClickHandler);\n                        container.off(CLICK + NS, \".k-grid-save-command, button[ref-update-button]\", that._editUpdateClickHandler);\n                    }\n\n                    that._detachModelChange();\n                    that.editable.destroy();\n                    that.editable = null;\n                    if (window) {\n                        window.destroy();\n                    }\n                    that._editContainer = null;\n                    that._destroyEditView();\n                    that._editableIsClosing = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._editMode() === \"popup\" && !that._isMobile) {\n                    if (that._editableIsClosing) {\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                    }\n                    else {\n                        that._editableIsClosing = true;\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                    }\n                } else {\n                    destroy();\n                }\n            }\n            if (that._confirmDialog) {\n                that._confirmDialog.close();\n                that._confirmDialog.destroy();\n                that._confirmDialog = null;\n            }\n        },\n\n        _destroyEditView: function() {\n            if (this.editView) {\n                this.editView.purge();\n                this.editView = null;\n                this.pane.navigate(\"\");\n            }\n        },\n\n        _attachModelChange: function(model) {\n            var that = this;\n\n            that._modelChangeHandler = function(e) {\n                that._modelChange({ field: e.field, model: this });\n            };\n\n            model.bind(\"change\", that._modelChangeHandler);\n        },\n\n        _detachModelChange: function() {\n            var that = this,\n                container = that._editContainer,\n                model = that._modelForContainer(container);\n\n            if (model) {\n                model.unbind(CHANGE, that._modelChangeHandler);\n            }\n        },\n\n        closeCell: function(isCancel) {\n            let that = this,\n                cell = that._editContainer,\n                column,\n                tr,\n                model,\n                errors;\n\n            if (!cell) {\n                return;\n            }\n\n            model = that._modelForContainer(cell);\n\n            if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                return;\n            }\n\n            that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n            cell.removeClass(\"k-edit-cell\");\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n            errors = that.editable && that.editable.validatable && that.editable.validatable.errors();\n\n            if (isCancel && model.dirtyFields && model.dirtyFields[column.field] && errors.length) {\n                delete model.dirtyFields[column.field];\n            }\n\n            tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n            if (tr.hasClass(\"k-grid-add-row\")) {\n                tr.removeClass(\"k-grid-add-row\");\n            }\n\n            if (that.lockedContent) {\n                const relatedTr = that._relatedRow(tr);\n                relatedTr.removeClass(\"k-grid-edit-row\");\n\n                if (relatedTr.hasClass(\"k-grid-add-row\")) {\n                    relatedTr.removeClass(\"k-grid-add-row\");\n                }\n            }\n\n            that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n            that._displayCell(cell, column, model);\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n            if (that.lockedContent) {\n                adjustRowHeight(tr.css(HEIGHT, \"\")[0], that._relatedRow(tr).css(HEIGHT, \"\")[0]);\n            }\n        },\n\n        _displayCell: function(cell, column, dataItem) {\n            var that = this,\n                state = { storage: {}, count: 0 },\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            cell.empty().html(tmpl(dataItem));\n        },\n\n        removeRow: function(row) {\n            if (!this._confirmation(row)) {\n                return;\n            }\n\n            this._removeRow(row);\n        },\n\n        _removeRow: function(row) {\n            var that = this,\n                model,\n                modelId,\n                key,\n                schema,\n                mode = that._editMode();\n\n            if (mode !== \"incell\") {\n                that.cancelRow();\n            }\n\n            row = $(row);\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row = row.hide();\n            if (that.dataSource._isGroupPaged()) {\n                that._removeGroupIfEmpty(row);\n            }\n\n            model = that._modelForContainer(row);\n\n            if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                schema = that.dataSource.options.schema;\n                if (that._selectedIds && schema && schema.model) {\n                    modelId = that._getSchemaIdField();\n                    key = model[modelId];\n                    delete that._selectedIds[key];\n                }\n\n                that.dataSource.remove(model);\n\n                if (mode === \"inline\" || mode === \"popup\") {\n                    that.dataSource.sync();\n                }\n            } else if (mode === \"incell\") {\n                that._destroyEditable();\n            }\n        },\n\n        _editMode: function() {\n            let mode = \"incell\",\n                editable = this.options.editable;\n\n            if (editable !== true) {\n                if (typeof editable == \"string\") {\n                    mode = editable;\n                } else {\n                    mode = editable.mode || mode;\n                }\n            }\n\n            return mode;\n        },\n\n        editRow: function(row) {\n            let model,\n                that = this;\n\n            if (row instanceof ObservableObject) {\n                model = row;\n            } else {\n                row = $(row);\n                model = that._modelForContainer(row);\n            }\n\n            let mode = that._editMode();\n            let container;\n\n            that.cancelRow();\n\n            if (model) {\n                row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                that._attachModelChange(model);\n\n                if (mode === \"popup\") {\n                    that._createPopupEditor(model);\n                } else if (mode === \"inline\") {\n                    that._createInlineEditor(row, model);\n                } else if (mode === \"incell\") {\n                    $(row).children(DATA_CELL).each(function() {\n                        let cell = $(this);\n                        let column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        model = that._modelForContainer(cell);\n\n                        if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                            that.editCell(cell);\n                            return false;\n                        }\n                    });\n                }\n\n\n                container = that.editView ? that.editView.element : mode === \"popup\" ? that._editContainer.parent() : that._editContainer;\n\n                if (container) {\n                    if (!this._editCancelClickHandler) {\n                        this._editCancelClickHandler = this._editCancelClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-cancel-command, button[ref-cancel-button]\", this._editCancelClickHandler);\n\n                    if (!this._editUpdateClickHandler) {\n                        this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-save-command, button[ref-update-button]\", this._editUpdateClickHandler);\n                }\n            }\n        },\n\n        _editUpdateClick: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            this.saveRow();\n        },\n\n        _editCancelClick: function(e) {\n            var that = this;\n            var navigatable = that.options.navigatable;\n            var model = that.editable.options.model;\n            var container = that.editView ? that.editView.element : that._editContainer;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                return;\n            }\n\n            var currentIndex = that.items().index($(that.current()).parent());\n\n            that.cancelRow();\n\n            if (navigatable) {\n                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                focusTable(that.table, true);\n            }\n        },\n\n        _editFields: function(columns, model) {\n            var fields = [];\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.selectable || column.command) {\n                    continue;\n                }\n                if (isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                }\n            }\n            return fields;\n        },\n\n        _createPopupEditor: function(model) {\n            var that = this;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n            var column;\n            var command;\n            var idx;\n            var length;\n            var tmpl;\n            var updateText;\n            var cancelText;\n            var updateIconClass;\n            var cancelIconClass;\n            var tempCommand;\n            var columns = leafColumns(that.columns);\n            var attr;\n            var editMenuGuid = kendo.guid();\n            var editable = that.options.editable;\n            var template = editable.template;\n            var options = isPlainObject(editable) ? editable.window : {};\n            var settings = extend({}, kendo.Template, that.options.templateSettings);\n            var state;\n            var container;\n            var buttonsHTML;\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            options = options || {};\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            } else {\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable) {\n                        continue;\n                    }\n                    if (!column.command) {\n                        if (that._isMobile) {\n                            html += '<li class=\"k-item k-listgroup-item\">';\n\n                            if (isColumnEditable(column, model)) {\n                                html += '<label class=\"k-label k-listgroup-form-row\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                html += '</label>';\n                            } else {\n                                state = { storage: {}, count: 0 };\n\n                                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                if (state.count > 0) {\n                                    tmpl = tmpl.bind(state.storage);\n                                }\n\n                                html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                html += '</label>';\n                            }\n\n                            html += \"</li>\";\n                        }\n                    } else if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            }\n\n            if (command) {\n                if (isPlainObject(command)) {\n                    if (isPlainObject(command.text)) {\n                        updateText = command.text.update;\n                        cancelText = command.text.cancel;\n                    }\n                    if (isPlainObject(command.iconClass)) {\n                        updateIconClass = command.iconClass.update;\n                        cancelIconClass = command.iconClass.cancel;\n                    }\n\n                   if (command.attr) {\n                       attr = command.attr;\n                   }\n                }\n            }\n\n            if (!that._isMobile) {\n                let updateButton = $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass, size: \"medium\", skipCommandClass: true })).attr(\"ref-update-button\", \"\");\n                let cancelButton = $(that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass, size: \"medium\", skipCommandClass: true })).attr(\"ref-cancel-button\", \"\");\n\n                html += '</div>';\n\n                container = that._editContainer = $(html)\n                .appendTo(that.wrapper).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.commands.edit || \"Edit\",\n                    _footerTemplate: () =>\n                    `<div class=\"k-actions k-actions-start k-actions-horizontal k-window-actions\">` +\n                        updateButton[0].outerHTML +\n                        cancelButton[0].outerHTML +\n                    `</div>`,\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                            e.sender.element.trigger(\"focus\");\n                            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                e.preventDefault();\n                                return;\n                            }\n\n                            var currentIndex = that.items().index($(that.current()).parent());\n\n                            that._editableIsClosing = true;\n                            that.cancelRow();\n                            if (that.options.navigatable) {\n                                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                focusTable(that.table, true);\n                            }\n                        }\n                    }\n                }, options));\n            } else {\n                html += \"</ul></div>\";\n                let cancelText = encode(that.options.messages.commands.cancel);\n                let updateText = encode(that.options.messages.commands.update);\n                that.editView = that.pane.append(\n                    '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                        '<div data-' + kendo.ns + ' class=\"k-appbar k-appbar-primary\">' +\n                            kendo.html.renderButton(`<button class=\"k-header-cancel k-grid-cancel-command\" title=\"${cancelText}\" aria-label=\"${cancelText}\"></button>`, {\n                                fillMode: \"flat\",\n                                icon: \"chevron-left\"\n                            }) +\n                            '<span class=\"k-spacer\"></span>' +\n                            `<span>${encode(that.options.messages.commands.edit || \"Edit\")}</span>` +\n                            '<span class=\"k-spacer\"></span>' +\n                            kendo.html.renderButton(`<button class=\"k-header-done k-grid-save-command\" title=\"${updateText}\" aria-label=\"${updateText}\"></button>`, {\n                                fillMode: \"flat\",\n                                icon: \"check\"\n                            }) +\n                        '</div>' +\n                        '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                            html +\n                        '</div>' +\n                    '</div>');\n                container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n            }\n\n            if (!template && !that._isMobile) {\n                that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                    items: that._editFields(columns, model),\n                    buttonsTemplate: () => '',\n                    formData: model\n                }).editable;\n                that._editContainer.append(buttonsHTML);\n            } else {\n                that.editable = that._editContainer\n                .kendoEditable({\n                    fields: (that._isMobile && !template) ? that._editFields(columns, model) : null,\n                    model: model,\n                    clearContainer: false,\n                    target: that,\n                    skipFocus: true\n                }).data(\"kendoEditable\");\n            }\n\n            that._openPopUpEditor();\n\n            that.trigger(EDIT, { container: container, model: model });\n        },\n\n        _openPopUpEditor: function() {\n            var that = this;\n            var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n            var windowOptions = (that.options.editable || {}).window || {};\n\n            if (!this._isMobile) {\n                if (windowEditor) {\n                    if (!windowOptions.position) {\n                        windowEditor.center();\n                    }\n\n                    windowEditor.open();\n                }\n            } else {\n                this.pane.navigate(this.editView, this._editAnimation);\n            }\n        },\n\n        _createInlineEditor: function(row, model) {\n            var that = this;\n            var column;\n            var cell;\n            var command;\n            var fields = [];\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                cell = $(this);\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                if (!column.command && isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                    cell.attr(kendo.attr(\"container-for\"), column.field);\n                    cell.empty();\n                } else if (column.command) {\n                    command = getCommand(column.command, \"edit\");\n                    if (command) {\n                        cell.empty();\n\n                        var updateText,\n                            cancelText,\n                            updateIconClass,\n                            cancelIconClass,\n                            attr;\n\n                        if (isPlainObject(command)) {\n                                if (isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (isPlainObject(command.iconClass)) {\n                                    updateIconClass = command.iconClass.update;\n                                    cancelIconClass = command.iconClass.cancel;\n                                }\n\n                            if (command.attr) {\n                                attr = command.attr;\n                            }\n                        }\n\n                        $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                            that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                    }\n                }\n            });\n\n            that._editContainer = row;\n            that._editContainer.addClass(\"k-grid-edit-row\");\n            if (model.new === true) {\n                that._editContainer.addClass(\"k-grid-add-row\");\n                delete model.new;\n            }\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.editable = new kendo.ui.Editable(that._editContainer, {\n                target: that,\n                fields: fields,\n                size: that.options.size,\n                model: model,\n                skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                clearContainer: false\n            });\n\n            if (row.length > 1) {\n\n                adjustRowHeight(row[0], row[1]);\n                that._applyLockedContainersWidth(true);\n            }\n\n            that.trigger(EDIT, { container: row, model: model });\n        },\n\n        cancelRow: function(notify) {\n            var that = this,\n                container = that._editContainer,\n                model;\n\n            if (container) {\n                model = that._modelForContainer(container);\n\n                if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                    return;\n                }\n\n                that._destroyEditable();\n\n                that.dataSource.cancelChanges(model);\n\n                that._clearEditableState();\n\n                if (that._editMode() !== \"popup\") {\n                    that._displayRow(container);\n                } else {\n                    that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                }\n\n                that._aria();\n            }\n        },\n\n        saveRow: function() {\n            var that = this;\n            var container = this._editContainer;\n            var model = this._modelForContainer(container);\n            var deferred = $.Deferred();\n            var valid;\n\n            if (!container || !this.editable) {\n                return deferred.resolve().promise();\n            }\n\n            valid = that.editable && that.editable.end();\n\n            if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n\n                return deferred.reject().promise();\n            }\n\n            that._clearEditableState();\n\n            return this.dataSource.sync();\n        },\n\n        _displayRow: function(row) {\n                var that = this,\n                model = that._modelForContainer(row),\n                related,\n                newRow,\n                nextRow,\n                isSelected = row.hasClass(SELECTED),\n                isAlt = row.hasClass(\"k-alt\");\n\n            if (model) {\n\n                if (that.lockedContent) {\n                    related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                    kendo.applyStylesFromKendoAttributes(related, [\"display\"]);\n                    that._relatedRow(row.last()).replaceWith(related);\n                }\n\n                newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                if (!row.is(\":visible\")) {\n                    newRow.hide();\n                }\n\n                kendo.applyStylesFromKendoAttributes(newRow, [\"display\"]);\n\n                if (that._anyStickyColumns()) {\n                   kendo.applyStylesFromKendoAttributes(newRow, [\"left\", \"right\"]);\n                }\n\n                row.replaceWith(newRow);\n\n                that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                if (related && related.length) {\n                    that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                }\n\n                if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                    that.select(newRow.add(related));\n                }\n\n                if (related) {\n                    adjustRowHeight(newRow[0], related[0]);\n                }\n\n                nextRow = newRow.next();\n                if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                    kendo.ui.icon(newRow.find(\".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon\"), { icon: \"caret-alt-down\" });\n                }\n            }\n        },\n\n        _showMessage: function(messages, row) {\n            var that = this;\n\n            if (!that._isMobile) {\n                // eslint-disable-next-line no-alert\n                return window.confirm(messages.title);\n            }\n\n            var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                modal: {\n                    preventScroll: true\n                },\n                closable: false,\n                title: false,\n                content: messages.title,\n                messages: {\n                    okText: messages.confirmDelete,\n                    cancel: messages.cancelDelete\n                },\n                open: function() {\n                    if (that.content) {\n                        that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                        that.content.css(OVERFLOW, HIDDEN);\n                    }\n                },\n                close: function() {\n                    if (that.content) {\n                        that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                    }\n                }\n            });\n\n            confirmDialog.result\n                .done(function() {\n                    that._removeRow(row);\n                })\n                .fail(function() {\n                    var confirmDialog = that._confirmDialog;\n\n                    if (confirmDialog) {\n                        confirmDialog.close();\n                        confirmDialog.destroy();\n                    }\n                });\n\n            return false;\n        },\n\n        _confirmation: function(row) {\n            var that = this,\n                editable = that.options.editable,\n                confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n            if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                confirmation = that.options.messages.editable.confirmation;\n            }\n\n            if (confirmation !== false && confirmation != null) {\n\n                if (typeof confirmation === FUNCTION) {\n                    confirmation = confirmation(that._modelForContainer(row));\n                }\n\n                return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n            }\n\n            return true;\n        },\n\n        cancelChanges: function() {\n            var that = this;\n\n            if (that._cachedRowsHeight) {\n                that._mapCachedRowsHeight(\"getByUid\", \"id\");\n                that._shouldMapHights = true;\n            }\n\n            that.dataSource.cancelChanges();\n\n            if (that._isVirtualEditable()) {\n                that._virtualPageToTop(function() {\n                    that.virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        saveChanges: function() {\n            var that = this;\n            var valid = that.editable && that.editable.end();\n\n            if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                that.dataSource.sync();\n            } else if (!valid) {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        addRow: function() {\n            var that = this,\n                index,\n                dataSource = that.dataSource,\n                mode = that._editMode(),\n                createAt = that.options.editable.createAt || \"\",\n                pageSize = dataSource.pageSize(),\n                view = dataSource.view() || [];\n            var createAtBottom = createAt.toLowerCase() === BOTTOM;\n            var model;\n            var virtualEditable = that._isVirtualEditable();\n\n            if ((that.editable && that.editable.end()) || !that.editable) {\n                if (mode != \"incell\") {\n                    that.cancelRow();\n                }\n\n                index = dataSource.indexOf(view[0]);\n\n                if (createAtBottom) {\n                    index += view.length;\n\n                    if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                        index -= 1;\n                    }\n                }\n\n                if (index < 0) {\n                    if (dataSource.page() > dataSource.totalPages()) {\n                        index = (dataSource.page() - 1) * pageSize;\n                    } else {\n                        index = 0;\n                    }\n                }\n\n                if (that.options.navigatable && mode == \"incell\") {\n                    that._removeCurrent();\n                }\n\n                if (virtualEditable) {\n                    that._virtualAddRow();\n                } else {\n                    model = dataSource.insert(index, {});\n                    model.new = true;\n                    that._editModel(model);\n                }\n            } else {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        _editModel: function(model) {\n            var that = this;\n            var createAt = that.options.editable.createAt || \"\";\n            var mode = that._editMode();\n\n            if (model) {\n                var id = model.uid,\n                    table = that.lockedContent ? that.lockedTable : that.table,\n                    row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                    cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                if (mode === \"inline\" && row.length) {\n                    that.editRow(row);\n                } else if (mode === \"popup\") {\n                    that.editRow(model);\n                } else if (cell.length) {\n                    that.editCell(cell);\n                }\n\n                if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                    //scroll the containers to the bottom\n                    that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                }\n            }\n        },\n\n        _virtualAddRow: function() {\n            var that = this;\n            var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n            that._clearEditableState();\n\n            if (createAtBottom) {\n                that._virtualAddRowAtBottom();\n            } else {\n                that._virtualAddRowAtTop();\n            }\n        },\n\n        _virtualAddRowAtTop: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var model;\n\n            if (dataSource.page() === 1) {\n                model = dataSource.insert(0, {});\n                model.new = true;\n                that._editModel(model);\n                virtualScrollable.scrollToTop();\n            } else {\n                that._virtualPageToTop(function() {\n                    model = dataSource.insert(0, {});\n                    model.new = true;\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        _virtualAddRowAtBottom: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var index = dataSource.total();\n            var model;\n\n            if (dataSource.at(index - 1) instanceof ObservableObject) {\n                model = dataSource.insert(index, {});\n                model.new = true;\n\n                that._virtualPageToBottom(function() {\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            } else {\n                that._virtualPageToBottom(function() {\n                    model = dataSource.insert(index, {});\n                    model.new = true;\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            }\n        },\n\n        _virtualPageToTop: function(callback) {\n            var that = this;\n\n            that._virtualPage(0, that.dataSource.take(), function() {\n                callback();\n            });\n        },\n\n        _virtualPageToBottom: function(callback) {\n            var that = this;\n            var dataSource = that.dataSource;\n            var take = dataSource.take();\n            var total = dataSource.total();\n            var skip = total > take ? (total - take) : 0;\n\n            that._virtualPage(skip, take, function() {\n                callback();\n            });\n        },\n\n        _virtualPage: function(skip, take, callback) {\n            var that = this;\n\n            if (that._isVirtualEditable()) {\n                that.virtualScrollable._preventScroll = true;\n                that.virtualScrollable._page(skip, take, callback);\n            }\n        },\n\n        _firstEditableColumnIndex: function(container) {\n            var that = this,\n                column,\n                columns = leafColumns(that.columns),\n                idx,\n                length,\n                model = that._modelForContainer(container);\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                    return idx;\n                }\n            }\n            return -1;\n        },\n\n        _clickAdd: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.addRow();\n        },\n\n        _clickCancel: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.cancelChanges();\n        },\n\n        _clickExcel: function(e) {\n            var that = this;\n            var deferred = $.Deferred();\n\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n            that._isExport = true;\n\n            that._progress(true);\n\n            setTimeout(() => {\n                that.saveAsExcel(deferred);\n                deferred.always(() => {\n                        that._progress(false);\n                        that._isExport = false;\n                    });\n            }, 1);\n        },\n\n        _clickPdf: function(e) {\n            var that = this;\n\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n            that._isExport = true;\n            that._pdfInitialized = true;\n\n            that._progress(true);\n            var promise = that.saveAsPDF();\n\n            if (promise) {\n                promise.done(function() {\n                    that._progress(false);\n                    that._isExport = false;\n                    that._pdfInitialized = false;\n                });\n            }\n        },\n\n        _clickSave: function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            this.saveChanges();\n        },\n\n        _searchInput: function(e) {\n            var that = this,\n                input = e.currentTarget;\n\n            clearTimeout(that._searchTimeOut);\n\n            that._searchTimeOut = setTimeout(function() {\n                that._searchTimeOut = null;\n\n                var options = that.options;\n                var searchFields = options.search ? options.search.fields : null;\n                var expression = { filters: [], logic: \"or\" };\n                var value = input.value;\n\n                if (!searchFields) {\n                    searchFields = getColumnsFields(options.columns);\n                }\n\n                if (that.dataSource.options.endless) {\n                    that.dataSource.options.endless = null;\n                    that._endlessPageSize = that.dataSource.options.pageSize;\n                }\n\n                if (value) {\n                    for (var i = 0; i < searchFields.length; i++) {\n                        that._pushExpression(expression.filters, searchFields[i], value);\n                    }\n                } else {\n                    expression = {};\n                }\n\n                that.dataSource.filter(expression);\n            }, 300);\n        },\n\n        _pasteToolbarDropDown: function() {\n            var that = this;\n\n            if (that.wrapper.find(\".k-grid-paste-action\").length) {\n                that.pasteActionsDropDownList = that.wrapper\n                    .find(\".k-grid-paste-action\")\n                    .kendoDropDownList({\n                        dataSource: [{ value: \"insert\", text: \"Paste (Insert)\" }, { value: \"replace\", text: \"Paste (Replace)\" }],\n                        dataTextField: \"text\",\n                        dataValueField: \"value\",\n                        _allowFilterPaste: false,\n                    }).data(\"kendoDropDownList\");\n            }\n        },\n\n        _pushExpression: function(filters, field, value) {\n            var that = this,\n                isServerFiltering = that.dataSource.options.serverFiltering,\n                defaultOperators = {\n                    string: \"contains\",\n                    number: \"gte\",\n                    date: \"gte\",\n                    enums: \"eq\",\n                    boolean: \"eq\"\n                },\n                name = field.name || field,\n                operator = field.operator,\n                modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                fieldInfo = modelInfo && modelInfo[name],\n                parseFn = fieldInfo && fieldInfo.parse,\n                expression = {\n                    field: name,\n                    operator: operator || defaultOperators.string,\n                    value: value\n                };\n\n            if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                extend(expression, {\n                    operator: operator || defaultOperators[fieldInfo.type],\n                    value: parseFn(value)\n                });\n            }\n\n            if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                return;\n            }\n\n            filters.push(expression);\n        },\n\n        _toolbar: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                toolbar = that.options.toolbar,\n\n                container, items;\n\n            if (toolbar) {\n                that._createClickHandler = that._addClickHandler = that._clickAdd.bind(that);\n                that._cancelClickHandler = that._clickCancel.bind(that);\n                that._saveClickHandler = that._clickSave.bind(that);\n                that._excelClickHandler = that._clickExcel.bind(that);\n                that._pdfClickHandler = that._clickPdf.bind(that);\n                that._serachHandler = that._searchInput.bind(that);\n\n                container = that.wrapper.find(\".k-grid-toolbar\");\n\n                if (!container.length) {\n                    container = $('<div class=\"k-grid-toolbar k-toolbar\" />')\n                        .prependTo(wrapper);\n\n                    if (typeof toolbar === STRING || isFunction(toolbar)) {\n                        if (typeof toolbar === STRING) {\n                            toolbar = kendo.template(toolbar).bind(that);\n                        }\n\n                        container.html(toolbar({ grid: that }));\n                        that._attachToolbarClicks();\n                    } else if (isArray(toolbar)) {\n                        items = that._processItems(toolbar);\n\n                        container.kendoToolBar({\n                            navigateOnTab: !that.options.navigatable,\n                            size: that.options.size,\n                            items: items\n                        });\n                    }\n                } else {\n                    that._attachToolbarClicks();\n                }\n\n                container.on(INPUT + NS, \".k-grid-search input\", this._serachHandler);\n            }\n        },\n\n        _attachToolbarClicks: function() {\n            var editable = this.options.editable,\n                container = this.wrapper.find(\".k-grid-toolbar\");\n\n            if (editable && editable.create !== false) {\n                container.on(CLICK + NS, \".k-grid-add\", this._createClickHandler)\n                    .on(CLICK + NS, \".k-grid-cancel-changes\", this._cancelClickHandler)\n                    .on(CLICK + NS, \".k-grid-save-changes\", this._saveClickHandler);\n            }\n\n            container.on(CLICK + NS, \".k-grid-excel\", this._excelClickHandler);\n            container.on(CLICK + NS, \".k-grid-pdf\", this._pdfClickHandler);\n        },\n\n        _processItems: function(tools) {\n            var that = this,\n                options = that.options,\n                items = [],\n                messages = this.options.messages.commands,\n                itemsCollectionHasSpacer = false;\n\n            tools.map(t => {\n                var command, searchText, icon, className, inputSize, template = \"\";\n\n                if (typeof t === 'string') {\n                    command = t.toLowerCase();\n                    t = {};\n                    t.text = messages[command] || command;\n                } else {\n                    command = (t.name || t.text || \"\").toLowerCase();\n                    t.text = t.text || messages[command] || command;\n                }\n\n                if (!itemsCollectionHasSpacer && (command === \"search\" || command === \"columns\")) {\n                    itemsCollectionHasSpacer = true;\n                    items.push({\n                        type: \"spacer\"\n                    });\n                }\n\n                if (command === \"search\") {\n                    searchText = htmlEncode(t.text || messages.search, true);\n                    icon = t.icon || t.iconClass || \"search\";\n\n                    inputSize = kendo.getValidCssClass(\"k-input-\", \"size\", that.options.size);\n                    template += `<span class='k-searchbox k-input ${inputSize} k-rounded-md k-input-solid k-grid-search'>`;\n                    template += kendo.ui.icon({ icon: icon, iconClass: \"k-input-icon\" });\n                    template += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                    template += \"</span>\";\n\n                    items.push({\n                        name: \"search\",\n                        overflow: \"never\",\n                        template: template\n                    });\n                } else if (command === \"paste\" && options.allowPaste) {\n                    items.push({\n                        template: \"<input class='k-grid-paste-action' />\"\n                    });\n                } else {\n                    if (!command && !(isPlainObject(t) && t.template)) {\n                        throw new Error(\"Custom commands should have name specified\");\n                    }\n\n                    t = extend({ type: \"button\" }, defaultCommands[command], t);\n                    className = t.className || \"k-grid-\" + (command || \"\").replace(/\\s/g, \"\");\n                    t.spriteCssClass = t.icon ? null : t.iconClass;\n\n                    t.attributes = that._processAttr(t.attr);\n                    delete t.attr;\n\n                    if (!!className) {\n                        if (t.attributes[\"class\"] === undefined$1) {\n                            t.attributes[\"class\"] = \"\";\n                        }\n\n                        t.attributes[\"class\"] += (\" \" + className);\n                    }\n\n                    if (t.template) {\n                        delete t.type;\n                    }\n\n                    if (!!that[\"_\" + command + \"ClickHandler\"]) {\n                        t.click = that[\"_\" + command + \"ClickHandler\"];\n                    }\n\n                    items.push(t);\n                }\n            });\n\n            return items;\n        },\n\n        _processAttr: function(attr) {\n            var attributes = {},\n                attrArray;\n\n            if (typeof attr === STRING && attr.length > 0) {\n                attrArray = attr.split(\" \");\n                attrArray.map(a => {\n                    var keyValue = a.split(\"=\");\n\n                    if (keyValue.length === 2) {\n                        attributes[keyValue[0]] = keyValue[1].replaceAll('\"', \"\").replaceAll(\"'\", \"\");\n                    }\n                });\n            } else if (isPlainObject(attr)) {\n                attributes = attr;\n            }\n\n            return attributes;\n        },\n\n        _createButton: function(command) {\n            var button,\n                template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                options = { className: command.skipCommandClass ? \"\" : className, text: commandName, attr: \"\", iconClass: \"\", size: command.size || this.options.size },\n                messages = this.options.messages.commands,\n                attributeClassMatch;\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                command = extend(true, {}, command);\n\n                if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                    command.className += \" \" + options.className;\n                } else if (command.className === undefined$1) {\n                    command.className = options.className;\n                }\n\n                if (command.className.indexOf(\"k-primary\") > -1) {\n                    command.className = command.className.replace(\"k-primary\", \"\");\n                    command.themeColor = \"primary\";\n                }\n\n                if (commandName === \"edit\") {\n                    command = extend(true, {}, command);\n                    command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                    command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                }\n\n                if (command.attr) {\n                    if (isPlainObject(command.attr)) {\n                        command.attr = stringifyAttributes(command.attr);\n                    }\n\n                    if (command.attr instanceof Function)\n                    {\n                        let compiledAttributes = command.attr(command);\n                        command.attr = stringifyAttributes(compiledAttributes);\n                    }\n\n                    if (typeof command.attr === STRING) {\n                        attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                        if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                            command.className += \" \" + attributeClassMatch[1];\n                        }\n                    }\n                }\n\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n            }\n\n            button = kendo.template(template)(options);\n\n            if (!command.template) {\n                return kendo.html.renderButton($(button), options);\n            } else {\n                return button;\n            }\n        },\n\n        _hasFooters: function() {\n            return !!this.footerTemplate ||\n                !!this.groupFooterTemplate ||\n                (this.footer && this.footer.length > 0) ||\n                this.wrapper.find(\".k-grid-footer\").length > 0;\n        },\n\n        _groupable: function() {\n            var that = this;\n\n            if (that._groupableClickHandler) {\n                that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n            } else {\n                that._groupableClickHandler = function(e) {\n                    var element = $(this),\n                    groupRow = element.closest(TR);\n\n                    var group = that._groupRows ? that._groupRows[that.wrapper.find(DOT + GROUPING_ROW).index(groupRow)] : { };\n\n                    if (element.is(CARET_ALT_DOWN)) {\n                        if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                            that.collapseGroup(groupRow);\n                        }\n                    } else {\n                        if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                            that.expandGroup(groupRow);\n                        }\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                };\n            }\n\n            if (that._isLocked()) {\n                that.lockedTable.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            } else {\n                that.table.on(CLICK + NS, \".k-grouping-row \" + CARET_ALT_RIGHT + \", .k-grouping-row \" + CARET_ALT_DOWN, that._groupableClickHandler);\n            }\n\n            that._attachGroupable();\n        },\n\n        _attachGroupable: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                groupable = that.options.groupable,\n                draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n            if (groupable && groupable.enabled !== false) {\n                if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                    $(\"<div/>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                }\n\n                if (that.groupable) {\n                    that._destroyGroupable();\n                }\n\n                if (browser.chrome) {\n                    wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                    wrapper.find(filter).css(\"touch-action\", NONE);\n                }\n\n                that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                    draggable: that._draggableInstance,\n                    groupContainer: \">div.k-grouping-header\",\n                    dataSource: that.dataSource,\n                    draggableElements: filter,\n                    filter: filter,\n                    size: that.options.size,\n                    allowDrag: that.options.reorderable,\n                    enableContextMenu: !!that.options.contextMenu,\n                    removeGroup: function(e) {\n                        that._showUngroupedColumn(e);\n                    },\n                    change: function(e) {\n                        if (that.trigger(\"group\", { groups: e.groups })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            that._hideGroupedColumns(e.groups);\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    }\n                }));\n\n                that._addGroupableOptionsToHeader();\n            }\n        },\n\n        _showUngroupedColumn: function(group) {\n            var columns = leafColumns(this.columns);\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                    this.showColumn(columns[i]);\n                }\n            }\n        },\n\n        _hideGroupedColumns: function(groups) {\n            if (!groups) {\n                return;\n            }\n            var columns = leafColumns(this.columns);\n            var fields = [];\n            var i;\n\n            for (i = 0; i < groups.length; i++) {\n                if (groups[i].colID) {\n                    fields.push(groups[i].colID);\n                }\n            }\n\n            for (i = 0; i < columns.length; i++) {\n                if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                    this.hideColumn(columns[i]);\n                }\n            }\n        },\n\n        _resetEndless: function() {\n            var that = this;\n            that.dataSource.options.endless = null;\n            that._endlessPageSize = that.dataSource.options.pageSize;\n            that.dataSource._skip = 0;\n            that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n            that.dataSource._page = 1;\n        },\n\n        _addGroupableOptionsToHeader: function() {\n            var that = this;\n            var columns = flatColumns(that.columns);\n            var columnFieldMap = {};\n            var field = \"\";\n            var headerCells = that._headerCells();\n            var cellFieldAttr = \"\";\n            var headerCell;\n            var columnOptions;\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                field = columns[i].field;\n                columnFieldMap[columns[i].field] = columns[i];\n            }\n\n            for (i = 0; i < headerCells.length; i++) {\n                headerCell = headerCells.eq(i);\n                cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                columnOptions = columnFieldMap[cellFieldAttr];\n\n                if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                    headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                }\n            }\n        },\n\n        _destroyGroupable: function() {\n            var that = this;\n\n            if (that.groupable && that.groupable.element) {\n                that.groupable.element.kendoGroupable(\"destroy\");\n            }\n\n            that.groupable = null;\n\n            that._removeGroupableOptionsFromHeader();\n        },\n\n        _removeGroupableOptionsFromHeader: function() {\n            var that = this;\n            var headerCells = that._headerCells();\n\n            for (var i = 0; i < headerCells.length; i++) {\n                headerCells.eq(i).removeData(GROUP_SORT);\n            }\n        },\n\n        _continuousItems: function(filter, cell) {\n            if (!this.lockedContent) {\n                return;\n            }\n\n            var that = this;\n\n            var elements = that.table.add(that.lockedTable);\n\n            var lockedItems = $(filter, elements[0]);\n            var nonLockedItems = $(filter, elements[1]);\n            var columns = cell ? lockedColumns(leafColumns(that.columns)).length : 1;\n            var nonLockedColumns = cell ? leafColumns(that.columns).length - columns : 1;\n            var result = [];\n\n            for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                push.apply(result, lockedItems.slice(idx, idx + columns));\n                push.apply(result, [].splice.call(nonLockedItems, 0, nonLockedColumns));\n            }\n\n            return result;\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                cell,\n                notString = [],\n                isLocked = that._isLocked(),\n                selectable = that.options.selectable,\n                hasSkeletonLoader = that.options.loaderType === \"skeleton\";\n\n            if (selectable && !selectable.checkboxSelection) {\n\n                if (that.selectable) {\n                    that.selectable.destroy();\n                }\n\n                that._selectedIds = {};\n\n                selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                multi = selectable.multiple;\n                cell = selectable.cell;\n\n                if (that._hasDetails()) {\n                    notString[notString.length] = \".k-detail-row\";\n                }\n                if (that.options.groupable || that._hasFooters() || that._groups()) {\n                    notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                }\n\n                if (hasSkeletonLoader) {\n                    notString[notString.length] = \"[data-skeleton-row]\";\n                }\n                notString = notString.join(\",\");\n\n                if (notString !== \"\") {\n                    notString = \":not(\" + notString + \")\";\n                }\n\n                var elements = that.table;\n                if (isLocked) {\n                    elements = elements.add(that.lockedTable);\n                }\n\n                var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                that.selectable = new kendo.ui.Selectable(elements, {\n                    allowPaste: that.options.allowPaste,\n                    filter: filter,\n                    aria: true,\n                    multiple: multi,\n                    holdToDrag: !!(that._isMobile || kendo.support.mobileOS),\n                    toggleable: !!(that._isMobile || kendo.support.mobileOS),\n                    dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                    changing: function(e) {\n                        if (that.trigger(CHANGING, { target: e.target, originalEvent: e.originalEvent })) {\n                            e.preventDefault();\n                        }\n                    },\n                    change: function(e) {\n                        var selectedValues;\n                        if (!cell) {\n                            that._persistSelectedRows();\n                        }\n\n                        if (that._checkBoxSelection) {\n                            selectedValues = that.selectable.value();\n                            that._uncheckCheckBoxes();\n                            that._checkRows(selectedValues);\n                            if (selectedValues.length && selectedValues.length === that.items().length) {\n                                that._toggleHeaderCheckState(true);\n                            } else {\n                                that._toggleHeaderCheckState(false);\n                            }\n                        }\n\n                        that._calculateAggregatesForSelected();\n\n                        if (e.event) {\n                            that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                        }\n                    },\n                    useAllItems: isLocked && multi && cell,\n                    relatedTarget: function(items) {\n                        if (cell || !isLocked) {\n                            return;\n                        }\n\n                        var related;\n                        var result = $();\n                        for (var idx = 0, length = items.length; idx < length; idx ++) {\n                            related = that._relatedRow(items[idx]);\n\n                            if (inArray(related[0], items) < 0) {\n                                result = result.add(related);\n                            }\n                        }\n\n                        return result;\n                    },\n                    continuousItems: function() {\n                        return that._continuousItems(filter, cell);\n                    },\n                    ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                    addIdToRanges: true\n                });\n\n                if (that.options.navigatable) {\n                    elements.on(\"keydown\" + NS, function(e) {\n                        var current = that.current();\n                        var target = e.target;\n                        var eventObject = { event: e };\n                        var triggerChange;\n                        var triggerChanging;\n                        var lastSelection;\n                        if (!current) {\n                            return;\n                        }\n                        if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                            !current.is(\".k-edit-cell,.k-header\") &&\n                            current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n                                triggerChanging = triggerChange || (multi && current.hasClass(SELECTED) && e.ctrlKey);\n\n                                if (triggerChanging && that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                    return;\n                                }\n\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            that._deselectCheckRows(current);\n                                            that._calculateAggregatesForSelected();\n                                            that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                                if (triggerChange) {\n                                    that._calculateAggregatesForSelected();\n                                    that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                                }\n                        } else if (!cell &&\n                            ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                          ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                           (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                           (e.shiftKey && e.keyCode == keys.UP) ||\n                           (e.shiftKey && e.keyCode == keys.DOWN) ||\n                           (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            current = current.parent();\n\n                            if (that.trigger(CHANGING, { target: current, originalEvent: e })) {\n                                return;\n                            }\n\n                            lastSelection = that.selectable.value();\n\n                            if (isLocked) {\n                                current = current.add(that._relatedRow(current));\n                            }\n\n                            if (multi) {\n                                if (!that.selectable._lastActive) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                if (!compareElements(lastSelection, that.selectable.value())) {\n                                    that.trigger(CHANGE, eventObject);\n                                }\n                            } else if (!current.hasClass(SELECTED)) {\n                                that.selectable.clear();\n                                that.selectable.value(current);\n                                that._calculateAggregatesForSelected();\n                                that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n                            }\n                        }\n                    });\n                }\n            }\n        },\n\n        _pasteReplaceHandler: function(plain) {\n            var that = this,\n                rows,\n                current,\n                currentRow,\n                currentRowUid,\n                currentField,\n                uids = [];\n\n            current = that.select().first();\n\n            if (!current.length) {\n                return;\n            }\n\n            if (current.is(TR)) {\n                current = current.children(TD).first();\n            }\n\n            rows = plain.split(\"\\n\").filter(f => f);\n            currentRow = current.closest(\"tr\");\n            currentField = that.thead.find(\"th:eq(\" + current.index() + \")\").data(\"field\");\n            currentRowUid = currentRow.data(\"uid\");\n\n            uids.push(currentRowUid);\n\n            currentRow.nextAll(ITEMROW).slice(0, rows.length - 1).each((i, item) => {\n                uids.push($(item).data(\"uid\"));\n            });\n\n            that._executePaste(rows, uids, null, currentField);\n        },\n\n        _pasteInsertHandler: function(plain) {\n            var that = this,\n                dataSource = that.dataSource,\n                rows,\n                current,\n                currentRow,\n                dataItemIndex,\n                dataItem;\n\n            current = that.select().first();\n\n            if (!current.length) {\n                return;\n            }\n\n            if (current.is(TR)) {\n                current = current.children(TD).first();\n            }\n\n            rows = plain.split(\"\\n\").filter(f => f);\n            currentRow = current.closest(\"tr\");\n            dataItem = that.dataItem(currentRow);\n            dataItemIndex = dataSource.indexOf(dataItem) + 1;\n\n            that._executePaste(rows, null, dataItemIndex, null);\n        },\n\n        _executePaste: function(rows, uids, index, currentField) {\n            var that = this,\n                dataSource = that.dataSource,\n                update = uids || false,\n                dataItem,\n                row,\n                cells,\n                cell,\n                column,\n                field,\n                selectedUids = that._getSelectedRowUids(),\n                selectedColumnFields = that._getSelectedColumnFields(),\n                changedItems = [],\n                visibleColumns = visibleLeafColumns(that.columns).filter(col => !col.selectable && !col.draggable & !col.command),\n                startingIndex = currentField && visibleColumns.map(c => c.field).indexOf(currentField);\n\n            // If only one value is copied and multiple cells are selected, replace all values in all selected cells with the copied value.\n            if (rows.length === 1 && rows[0].split(\"\\t\").length === 1 && update) {\n                for (let j = 0; j < selectedUids.length; j++) {\n                    const uid = selectedUids[j];\n                    dataItem = dataSource.getByUid(uid);\n                    cell = rows[0].split(\"\\t\")[0];\n\n                    for (let j = 0; j < selectedColumnFields.length; j++) {\n                        field = selectedColumnFields[j];\n                        if (dataItem && cell) {\n                            dataItem.set(field, cell);\n                        }\n                    }\n\n                    if (dataItem && dataItem.dirty) {\n                        changedItems.push(dataItem);\n                    }\n                }\n            } else {\n                // If more than one value is copied, proceed with the standard replace.\n                for (let i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    cells = row.split(\"\\t\");\n                    dataItem = update ? dataSource.getByUid(uids[i]) : dataSource.insert(index + i, {});\n\n                    for (let j = 0; j < cells.length; j++) {\n                        cell = cells[j].replace(/\\r/, \"\");\n                        column = visibleColumns[j + startingIndex || 0];\n\n                        if (column && dataItem && cell) {\n                            field = column.field;\n                            dataItem.set(field, cell);\n                        }\n                    }\n\n                    if (dataItem && dataItem.dirty) {\n                        changedItems.push(dataItem);\n                    }\n                }\n            }\n            that.trigger(PASTE, { items: changedItems, type: update ? \"replace\" : \"insert\" });\n        },\n\n        _pasteKeyboardHandler: function(e) {\n            var that = this,\n                current = that.current(),\n                clipBoardData = e.originalEvent.clipboardData,\n                operation = (that.pasteActionsDropDownList && that.pasteActionsDropDownList.value()) || \"insert\",\n                rowUid,\n                cellIndex,\n                plain;\n\n            if ($(e.target).is(\".k-edit-cell input:visible\")) {\n                return;\n            }\n\n            if (clipBoardData) {\n                e.preventDefault();\n                plain = clipBoardData.getData(\"text\").trimEnd();\n\n                // If the copied value consists only of white spaces or new lines, reduce it to a single white space.\n                if (isEmptyString(plain)) {\n                    plain = \" \";\n                }\n\n                if (current && current.length) {\n                    cellIndex = current.index();\n                    rowUid = current.closest(TR).data(\"uid\");\n                }\n\n                if (operation === \"replace\") {\n                    that._pasteReplaceHandler(plain);\n                }\n\n                if (operation === \"insert\") {\n                    that._pasteInsertHandler(plain);\n                }\n\n                // Restore the focus to the last focused cell.\n                if (cellIndex && rowUid) {\n                    that._currentRowIndex = that.wrapper.find(TR + \"[data-uid='\" + rowUid + \"']\").index();\n                    that._restoreCurrent(cellIndex);\n                }\n            }\n        },\n\n        _paste: function() {\n            var that = this,\n                options = that.options,\n                selectable = options.selectable,\n                allowPaste = options.allowPaste;\n\n            if (allowPaste && selectable) {\n                that.pasteHandler = that._pasteKeyboardHandler.bind(that);\n                const container = that.content || that.table;\n                container.on(PASTE + NS, that.pasteHandler);\n\n                if (that.options.toolbar) {\n                    that._pasteToolbarDropDown();\n                }\n            }\n        },\n\n        _clipboard: function() {\n            var options = this.options;\n            var selectable = options.selectable;\n\n            if (selectable && options.allowCopy) {\n                var grid = this;\n                if (!options.navigatable) {\n                    grid.table.attr(TABINDEX, 0);\n\n                    grid.table.add(grid.lockedTable)\n                        .on(MOUSEDOWN + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        })\n                        .on(MOUSEDOWN + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                }\n                grid.copyHandler = grid.copySelection.bind(grid);\n                grid.updateClipBoardState = function() {\n                    if (grid.areaClipBoard) {\n                        grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                    }\n                };\n                const container = grid.content || grid.table;\n                grid.bind(\"change\",grid.updateClipBoardState);\n                container.on(\"keydown\", grid.copyHandler);\n                grid.clearAreaHandler = grid.clearArea.bind(grid);\n                container.on(\"keyup\", grid.clearAreaHandler);\n            }\n        },\n\n        copySelectionToClipboard: function(includeHeaders) {\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n            document.execCommand('copy');\n        },\n\n        copySelection: function(e) {\n            if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                !(e.keyCode === 67 && (e.ctrlKey || e.metaKey)) ||\n                $(e.target).is(\"input:visible,textarea:visible\") ||\n                (window.getSelection && window.getSelection().toString()) ||\n                (document.selection && document.selection.createRange().text) ) {\n                return;\n            }\n\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n        },\n\n        _createAreaClipBoard: function() {\n            if (!this.areaClipBoard) {\n                this.areaClipBoard =\n                    $(\"<textarea />\")\n                    .css({\n                        position: \"fixed\",\n                        top: \"50%\",\n                        left: \"50%\",\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    })\n                    .appendTo(this.wrapper);\n            }\n        },\n\n        getTSV: function(includeHeaders) {\n            var grid = this;\n            var selected = grid.select();\n            var delimeter = \"\\t\";\n            var allowCopy = grid.options.allowCopy;\n            var onlyVisible = true;\n            var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n            if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                delimeter = allowCopy.delimeter;\n            }\n            var text = \"\";\n            if (selected.length) {\n                if (selected.eq(0).is(TR)) {\n                    selected = selected.find(\"td:not(.k-group-cell)\");\n                }\n                if (onlyVisible) {\n                    selected.filter(\":visible\");\n                }\n\n                var result = [];\n                var cellsOffset = this.columns.length;\n                var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                var inLockedArea = true;\n                var fields = [];\n                var field;\n                var columns = visibleLeafColumns(this.columns);\n\n                $.each(selected, function(idx, cell) {\n                    cell = $(cell);\n                    field = grid._getCellField(cell, hasLockedCols);\n\n                    if (columns.findIndex(c => c.field === field) === -1) {\n                        return;\n                    }\n\n                    var tr = cell.closest(TR);\n                    var rowIndex = tr.index();\n                    var cellIndex = cell.index();\n                    if (onlyVisible) {\n                        cellIndex -= cell.prevAll(\":hidden\").length;\n                    }\n                    if (lockedCols && inLockedArea) {\n                        inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                    }\n                    if (grid._groups() && inLockedArea) {\n                        cellIndex -= grid._groups();\n                    }\n                    cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                    if (field) {\n                        fields[cellIndex] = field;\n                    }\n                    if (cellsOffset > cellIndex) {\n                        cellsOffset = cellIndex;\n                    }\n                    var cellText = cell.text();\n                    if (!result[rowIndex]) {\n                        result[rowIndex] = [];\n                    }\n                    result[rowIndex][cellIndex] = cellText;\n                });\n\n                var rowsOffset = result.length;\n                result = $.each(result, function(idx, val) {\n                    if (val) {\n                        result[idx] = val.slice(cellsOffset);\n                        if (rowsOffset > idx) {\n                            rowsOffset = idx;\n                        }\n                    }\n                });\n\n                if (includeHeaders && fields.length) {\n                    result.splice(rowsOffset, 0, fields.map(function(field) {\n                        return getTitle(field, columns);\n                    }));\n\n                    var headerIndex = result.findIndex(function(el) {\n                        return el !== undefined$1;\n                    });\n\n                    result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                }\n\n                $.each(result.slice(rowsOffset), function(idx, val) {\n                    if (val) {\n                        text += val.join(delimeter) + \"\\r\\n\";\n                    } else {\n                        text += \"\\r\\n\";\n                    }\n                });\n            }\n            return text;\n        },\n\n        clearArea: function(e) {\n            if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                focusTable(this.table, true);\n            }\n\n            if (this.areaClipBoard) {\n                this.areaClipBoard.remove();\n                this.areaClipBoard = null;\n            }\n        },\n\n        _adaptiveColumns: function() {\n            var that = this;\n\n            if (that._anyColumnHasMediaQuery()) {\n                that._setColumnsMediaVisibility(that.columns);\n                that._attachColumnMediaResizeHandler();\n            }\n        },\n\n        _anyColumnHasMediaQuery: function() {\n            return this._columnsWithMediaQuery().length;\n        },\n\n        _columnsWithMediaQuery: function() {\n            return columnsWithMedia(this.columns);\n        },\n\n        _attachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            that._detachColumnMediaResizeHandler();\n            that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n            $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n        },\n\n        _detachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            if (that._columnMediaResizeHandler) {\n                $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n            }\n        },\n\n        _onColumnMediaResize: function() {\n            var that = this;\n            that._setColumnsMediaVisibility(that.columns);\n            that._setContentMediaWidth();\n        },\n\n        _setColumnsMediaVisibility: function(columns) {\n            var cols = columns || [];\n\n            for (var i = 0; i < cols.length; i++) {\n                this._setColumnMediaVisibility(cols[i]);\n            }\n        },\n\n        _setColumnMediaVisibility: function(column) {\n            var that = this;\n\n            if (isUndefined(column.media)) {\n                that._setColumnsMediaVisibility(column.columns);\n            } else {\n                if (columnMatchesMedia(column)) {\n                    that._showColumnByMedia(column);\n\n                    if (!column.hidden) {\n                        that._setColumnsMediaVisibility(column.columns);\n                    }\n                } else {\n                    that._hideColumnByMedia(column);\n                }\n            }\n        },\n\n        _showColumnByMedia: function(column) {\n            if (!column.hidden) {\n                // \"hidden\" has a priority over \"matchesMedia\"\n                this.showColumn(column);\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _hideColumnByMedia: function(column) {\n            var initiallyHidden = column.hidden;\n\n            if (!initiallyHidden) {\n                column._hideByMedia = true;\n                this.hideColumn(column);\n                column._hideByMedia = false;\n\n                // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                column.hidden = initiallyHidden;\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _setContentMediaWidth: function() {\n            var that = this;\n            var options = that.options;\n            var isLocked = that._isLocked();\n            var footer;\n\n            if (options.scrollable && (options.resizable === true || (options.resizable && options.resizable.columns === true))) {\n                if (isLocked && that.lockedFooter) {\n                    footer = that.lockedFooter.children(\"table\");\n                } else if (that.footer) {\n                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                }\n\n                if (!footer || !footer[0]) {\n                    footer = $();\n                }\n\n                var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                var contentTable = isLocked ? that.lockedTable : that.table;\n\n                var headerColumns = header.find(\"th\");\n                var headerColgroup = header.find(\"colgroup\");\n\n                var headerColumnsCount = headerColumns.length;\n                var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                var totalHeaderWidth = 0;\n\n                if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                    var currentHeaderWidth = header.css(WIDTH);\n\n                    for (var i = 0; i < headerColumnsCount; i++) {\n                        if (isElementVisible(headerColumns[i])) {\n                            var columnWidth;\n                            var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                            var colgroupChild = headerColgroup.children()[cellIndex];\n                            var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                            if (columnStyleWidth !== \"\") {\n                                columnWidth = parseFloat(columnStyleWidth);\n                            } else {\n                                // remove the header width to calculate the height of a column without fixed width\n                                header.css(WIDTH, AUTO);\n                                columnWidth = outerWidth(headerColumns.eq(i));\n                                header.css(WIDTH, currentHeaderWidth);\n                            }\n\n                            totalHeaderWidth += columnWidth;\n                        }\n                    }\n\n                    contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                    header.css('width', totalHeaderWidth);\n                    footer.css('width', totalHeaderWidth);\n                    that._updateStickyColumns();\n                }\n            }\n        },\n\n        _minScreenSupport: function() {\n            var any = this.hideMinScreenCols();\n\n            if (any) {\n                this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                $(window).on(\"resize\", this.minScreenResizeHandler);\n            }\n        },\n\n        hideMinScreenCols: function() {\n            var cols = this.columns,\n                screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n            return this._iterateMinScreenCols(cols, screenWidth);\n        },\n\n        _iterateMinScreenCols: function(cols, screenWidth) {\n            var any = false;\n\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                var minWidth = col.minScreenWidth;\n                if (minWidth !== undefined$1 && minWidth !== null) {\n                    any = true;\n                    if (minWidth > screenWidth) {\n                        this.hideColumn(col);\n                    } else {\n                        this.showColumn(col);\n                    }\n                }\n                if (!col.hidden && col.columns) {\n                    any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                }\n            }\n            return any;\n        },\n\n        _stickyColumns: function() {\n            var that = this;\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(false);\n            }\n        },\n\n        _updateStickyColumns: function() {\n            var that = this;\n            var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(true);\n                that._templates();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n\n                if (that._hasFilterRow()) {\n                    that._updateStickyFilterCells();\n                }\n            }\n        },\n\n        _updateStickyFilterCells: function() {\n            var that = this;\n            var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n            if (filterCells.length) {\n                filterCells.each(function() {\n                    var th = $(this);\n                    var column = th.data(\"column\");\n\n                    if (column.sticky) {\n                        if (isPlainObject(column.stickyStyle)) {\n                            th.css({\n                                left: column.stickyStyle.left || \"\",\n                                right: column.stickyStyle.right || \"\"\n                            });\n                        }\n\n                        th.addClass(STICKY_HEADER_CLASS);\n                    } else {\n                        th.css({\n                            left: \"\",\n                            right: \"\"\n                        });\n\n                        th.removeClass(STICKY_HEADER_CLASS);\n                    }\n                });\n            }\n        },\n\n        _anyStickyColumns: function() {\n            var that = this;\n\n            return stickyColumns(that.columns).length;\n        },\n\n        _setStickyColumns: function(updateStyles) {\n            var that = this;\n            var columns = stickyColumns(that.columns);\n            var visibleColumns = visibleStickyColumns(that.columns);\n            var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n            that._removeStickyAttributes(columns);\n            that._setStickyClassAttributes(columns);\n            that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n            if (updateStyles) {\n                that._setStickyStyles(visibleColumns, stickyWidths);\n            }\n        },\n\n        _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n            var that = this;\n            var i;\n            var column;\n            var columnWidth;\n            var nextColumnLeft;\n            var nextColumnRight;\n            var left = isRtl ? \"right\" : \"left\";\n            var right = isRtl ? \"left\" : \"right\";\n            var stickyWidths = {\n                left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n            };\n\n            for (i = 0; i < columns.length - 1; i++) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                stickyWidths[left][i + 1] = nextColumnLeft;\n            }\n\n            for (i = columns.length - 1; i > 0; i--) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                stickyWidths[right][i - 1] = nextColumnRight;\n            }\n\n            return stickyWidths;\n        },\n\n        _setStickyClassAttributes: function(columns, masterIndex) {\n            var that = this;\n            var i;\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    if (!masterIndex && i) {\n                        masterIndex = i;\n                    }\n\n                    that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                }\n\n                if (masterIndex) {\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n            }\n        },\n\n        _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n            var that = this;\n            var i;\n            var column;\n            var stickyLeft;\n            var stickyRight;\n            var stickyStyle;\n            var childCols;\n            var childStickyWidths;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                stickyLeft = stickyWidths.left[i];\n                stickyRight = stickyWidths.right[i];\n                stickyStyle = { left: stickyLeft + \"px\", right: stickyRight + \"px\" };\n\n                if (column.columns) {\n                    childCols = visibleChildColumns([column]);\n                    childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                    that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                    if (updateStyles) {\n                        that._setStickyStyles(childCols, childStickyWidths);\n                    }\n                }\n\n                addColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n                addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), stickyStyle.left);\n                addColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), stickyStyle.right);\n\n                column.stickyStyle = stickyStyle;\n            }\n        },\n\n        _removeStickyAttributes: function(columns) {\n            var that = this;\n            var i;\n            var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n            var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n            var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n            var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    that._removeStickyAttributes(childColumns([column]));\n                }\n\n                removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"attributes\", kendo.attr(\"style-right\"), '', true);\n\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"headerAttributes\", kendo.attr(\"style-right\"), '', true);\n\n                removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-left\"), '', true);\n                removeColumnAttribute(column, \"footerAttributes\", kendo.attr(\"style-right\"), '', true);\n            }\n        },\n\n        _setStickyStyles: function(columns, stickyWidths) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var left;\n            var right;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                left = stickyWidths.left[i];\n                right = stickyWidths.right[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.addClass(STICKY_HEADER_CLASS);\n                if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                    header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                setLeftAndRightStyles(header, left, right);\n\n                if (column.columns) {\n                    continue;\n                }\n\n                if (that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.addClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, left, right);\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, left, right);\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, left, right);\n                    }\n                }\n            }\n        },\n\n        _removeStickyStyles: function(columns) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.removeClass(STICKY_HEADER_CLASS);\n                header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                setLeftAndRightStyles(header, \"\", \"\");\n\n                if (column.columns) {\n                    that._removeStickyStyles(column.columns);\n                    continue;\n                }\n\n                if (column.footerTemplate && that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.removeClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, \"\", \"\");\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(GROUPING_ROW)) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, \"\", \"\");\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, \"\", \"\");\n                    }\n                }\n            }\n        },\n\n        _getColumnHeader: function(column) {\n            var that = this;\n            var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n            return header;\n        },\n\n        _sumColumnWidth: function(column) {\n            var that = this;\n            var width = 0;\n\n            if (column.columns) {\n                width = that._sumCurrentWidths(leafColumns([column]));\n            } else {\n                width = that._sumCurrentWidths([column]);\n            }\n\n            return width;\n        },\n\n        _sumCurrentWidths: function(cols) {\n            var that = this;\n            var width = 0;\n            var colWidth = 0;\n            var col;\n            var header;\n            var i;\n            var length = cols.length;\n\n            for (i = 0; i < length; i++) {\n                col = cols[i];\n                header = that._getColumnHeader(col);\n\n                if (!col.hidden && columnMatchesMedia(col)) {\n                    colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                    width += colWidth ? parseInt(colWidth, 10) : 0;\n                }\n            }\n\n            return width;\n        },\n\n        _belongsToGrid: function(element) {\n            return this.wrapper[0] === element.closest(WRAPPER)[0];\n        },\n\n        getSelectedData: function() {\n            var that = this;\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var result = [];\n            var visibleColumns = visibleLeafColumns(that.columns);\n\n            for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, null, true));\n            }\n\n            if (selectedSingleItems.length) {\n                result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns, null, true));\n            }\n\n            return result;\n        },\n\n        getSelectedDataByKeys: function() {\n            var that = this,\n                dataSource = that.dataSource,\n                keys = that.selectedKeyNames(),\n                visibleColumns = visibleLeafColumns(that.columns),\n                key,\n                dataItem,\n                result = {};\n\n            var columnMapHandler = function(col) {\n                var result = {};\n\n                if (!col.field) {\n                    return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n            };\n\n            for (let i = 0; i < keys.length; i++) {\n                key = keys[i];\n                dataItem = dataSource.get(key);\n\n                if (dataItem) {\n                    result[dataItem.uid] = $.extend.apply({}, visibleColumns.map(columnMapHandler));\n                }\n            }\n\n            return Object.keys(result).map(function(id) {\n                return result[id];\n            });\n        },\n\n        exportSelectedToExcel: function(includeHeaders) {\n            if (!kendo.excel || !kendo.ooxml) {\n                throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n            }\n\n            var that = this;\n            var excel = this.options.excel || {};\n            var visibleColumns = visibleLeafColumns(that.columns);\n            var exporter = new kendo.excel.ExcelExporter({});\n            var columnHandler = function() {return { autoWidth: true };};\n            var book = {\n                sheets: [{\n                    columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                    rows: [],\n                    freezePane: {},\n                    filter: false\n                }]\n            };\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var idx;\n            var exportData = [];\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var sortHandler = exportDataSort.bind(that);\n\n\n            for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n            }\n\n            if (exportData.length) {\n                that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n            }\n            exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n            if (exportData.length) {\n                if (hasLockedCols) {\n                    exportData = exportData.sort(sortHandler);\n                }\n                that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n            }\n\n            if (book.sheets[0].rows.length) {\n                var workbook = new kendo.ooxml.Workbook(book);\n\n                if (!workbook.options) {\n                    workbook.options = {};\n                }\n                workbook.options.skipCustomHeight = true;\n\n                workbook.toDataURLAsync().then(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: book.fileName || excel.fileName,\n                        proxyURL: excel.proxyURL,\n                        forceProxy: excel.forceProxy\n                    });\n                });\n            }\n        },\n\n        _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n            var idx = 0;\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n            var item;\n            const exporterInstance = exporter._instance ?? exporter;\n            for (idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                exporter.data = [item];\n                this._setExporterColumns(exporterInstance, visibleColumns, item);\n                this._createExportRows(book, exporterInstance, includeHeaders);\n            }\n        },\n\n        _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n            const exporterInstance = exporter._instance ?? exporter;\n            exporter.data = data;\n            this._setExporterColumns(exporterInstance, visibleColumns, data[0]);\n            this._createExportRows(book, exporterInstance, includeHeaders);\n        },\n\n        _createExportRows: function(book, exporter, includeHeaders) {\n            const exporterInstance = exporter._instance ?? exporter;\n            book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporterInstance._rows() : exporterInstance._dataRows(exporterInstance.data, 0));\n        },\n\n        _setExporterColumns: function(exporter, columns, item) {\n            const exporterInstance = exporter._instance ?? exporter;\n            exporterInstance.columns = exporterInstance.options.columns = $.map(columns.filter(function(col) {\n                return Object.keys(item).indexOf(col.field) >= 0;\n            }), exporterInstance._prepareColumn);\n        },\n\n        _mapSelectionToData: function(elements, visibleColumns, columnsFilter, ignoreOffset) {\n            var that = this;\n            var elementType = elements[0][0].nodeName;\n            var isRowSelection = elementType === 'TR';\n            var dataItem;\n            var result = {};\n            var element;\n            var curr;\n            var field;\n            var columnMapHandler = function(col) {\n                var result = {};\n\n                if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                    return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n            };\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var column;\n\n            for (var i = 0; i < elements.length; i++) {\n                element = elements[i];\n                dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                if (isRowSelection) {\n                    result[dataItem.uid] = $.extend.apply({}, visibleColumns.map(columnMapHandler));\n                } else {\n                    field = that._getCellField(element, hasLockedCols, ignoreOffset);\n\n                    if (!field) {\n                        continue;\n                    }\n\n                    curr = result[dataItem.uid];\n\n                    if (!curr) {\n                        curr = result[dataItem.uid] = {};\n                    }\n\n                    column = findColumnByField(visibleColumns, field);\n\n                    if (!column || (columnsFilter && !columnsFilter(column))) {\n                        continue;\n                    }\n\n                    curr[field] = dataItem[field];\n                }\n            }\n\n            return Object.keys(result).map(function(id) {\n                result[id].uid = id;\n                return result[id];\n            });\n        },\n\n        _getCellField: function(cell, hasLockedCols, ignoreOffset) {\n            var grid = this;\n            var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n            var fieldAttr = kendo.attr('field');\n            var index = kendo.attr('index');\n            var indexOffset = 0;\n\n            if (ignoreOffset) {\n                indexOffset = grid._trailingColumns();\n            }\n\n            if (hasLockedCols) {\n                return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            } else {\n                return grid.thead.find(\"th[\" + index + \"='\" + (cell.index() - indexOffset) + \"']\").attr(fieldAttr);\n            }\n        },\n\n        _relatedRow: function(row) {\n            var lockedTable = this.lockedTable;\n            row = $(row);\n\n            if (!lockedTable) {\n                return row;\n            }\n\n            var table = row.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr\").index(row);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr\").eq(index);\n        },\n\n        _relatedCell: function(cell) {\n            var lockedTable = this.lockedTable;\n\n            cell = $(cell);\n\n            if (!lockedTable) {\n                return cell;\n            }\n\n            var table = cell.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr>td\").index(cell);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr>td\").index(index);\n        },\n\n        clearSelection: function() {\n            var that = this;\n\n            if (that.selectable && !that._checkBoxSelection) {\n                that.selectable.clear();\n            }\n\n            if (that._checkBoxSelection) {\n                that._deselectCheckRows(that.select());\n                return;\n            }\n\n            if (that.options.persistSelection) {\n                that._persistSelectedRows();\n            } else {\n                that._selectedIds = {};\n            }\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable,\n                selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                cell = selectableoptions.cell;\n\n            items = that.table.add(that.lockedTable).find(items);\n            if (items.length) {\n                if (selectable && !selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        if (cell) {\n                            return that._relatedCell(this);\n                        }\n                        else {\n                            return that._relatedRow(this);\n                        }\n                    }));\n                }\n\n                if (selectable && !that._checkBoxSelection) {\n                    selectable.value(items);\n                } else {\n                    that._checkRows(items);\n                    if (that.select().length === that.items().length) {\n                        that._toggleHeaderCheckState(true);\n                    }\n                }\n\n                if (!cell) {\n                    that._persistSelectedRows();\n                }\n\n                return;\n            }\n\n            return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n        },\n\n        _initSelectableAggregates: function() {\n            var that = this;\n\n            if (!that.options.selectable) {\n                return;\n            }\n\n            if (!that._selectableAggregatesOptions) {\n                that._selectableAggregatesOptions = that._parseSelectableAggregatesOptions();\n            }\n\n            if (that._selectableAggregatesOptions.count) {\n                that._cellAggregates = {\n                    count: 0\n                };\n            }\n        },\n\n        _calculateAggregatesForSelected: function() {\n            var that = this,\n                options = that.options,\n                selectedData = that.getSelectedDataByKeys(),\n                selectable = that.options.selectable,\n                cellAggregates = selectable.cellAggregates,\n                cellsLength = visibleLeafColumns(that.columns).filter(col => !col.selectable && !col.draggable & !col.command).length,\n                columnFields = getColumnsFields(options.columns),\n                isCellSelection = kendo.ui.Selectable.parseOptions(selectable).cell,\n                dataItem,\n                type,\n                value,\n                numberAggregates = [],\n                dateAggregates = [],\n                booleanAggregates = [],\n                count, min, max, sum, average, earliest, latest, isTrue, isFalse;\n\n            if (!cellAggregates) {\n                return;\n            }\n\n            // getSelectedDataByKeys won't work for cell selection.\n            if (isCellSelection) {\n                selectedData = that.getSelectedData();\n            }\n\n            cellAggregates = that._selectableAggregatesOptions;\n\n            for (let i = 0; i < selectedData.length; i++) {\n                dataItem = selectedData[i];\n\n                for (let j = 0; j < columnFields.length; j++) {\n                    value = dataItem[columnFields[j]];\n                    type = getType(value);\n\n                    switch (type) {\n                        case \"number\":\n                            numberAggregates.push(value);\n                            break;\n                        case \"date\":\n                            dateAggregates.push(value);\n                            break;\n                        case \"boolean\":\n                            booleanAggregates.push(value);\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            }\n\n            if (cellAggregates.count) {\n                count = isCellSelection ? cellsExcludingSpecialColumns(that.select()).length : selectedData.length * cellsLength;\n            }\n\n            if (numberAggregates.length) {\n                max = cellAggregates.max ? numberAggregates.reduce((acc, current) => Math.max(acc, current)) : null;\n                min = cellAggregates.min ? numberAggregates.reduce((acc, current) => Math.min(acc, current)) : null;\n                sum = cellAggregates.sum ? numberAggregates.reduce((acc, current) => acc + current) : null;\n                average = cellAggregates.average ? numberAggregates.reduce((acc, current) => (acc + current)) / numberAggregates.length : null;\n            }\n\n            if (dateAggregates.length) {\n                earliest = cellAggregates.earliest ? dateAggregates.reduce((acc, current) => new Date(Math.min(acc, current))) : null;\n                latest = cellAggregates.latest ? dateAggregates.reduce((acc, current) => new Date(Math.max(acc, current))) : null;\n            }\n\n            if (booleanAggregates.length) {\n                isTrue = cellAggregates.isTrue ? booleanAggregates.filter(b => b === true).length : null;\n                isFalse = cellAggregates.isFalse ? booleanAggregates.filter(b => b === false).length : null;\n            }\n\n            that._cellAggregates = {\n                count: count,\n                max: max,\n                min: min,\n                sum: sum,\n                average: average,\n                earliest: earliest,\n                latest: latest,\n                isTrue: isTrue,\n                isFalse: isFalse\n            };\n\n            if (that.statusBar) {\n                that._statusBar();\n            }\n        },\n\n        _parseSelectableAggregatesOptions: function() {\n            var that = this,\n                cellAggregates = that.options.selectable.cellAggregates,\n                result = {};\n\n            if (isArray(cellAggregates)) {\n                for (let i = 0; i < cellAggregates.length; i++) {\n                    result[cellAggregates[i]] = true;\n                }\n                return result;\n            }\n\n            // If the value of cellAggregates is 'true' -> all aggregates must be enabled.\n            return {\n                count: true,\n                min: true,\n                max: true,\n                sum: true,\n                average: true,\n                earliest: true,\n                latest: true,\n                isTrue: true,\n                isFalse: true\n            };\n        },\n\n        _toggleHeaderCheckState: function(checked) {\n            var that = this;\n            if (checked) {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                    .attr(ARIA_LABEL, \"Deselect all rows\");\n            } else {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                    .attr(ARIA_LABEL, \"Select all rows\");\n            }\n        },\n\n        _uncheckCheckBoxes: function() {\n            var that = this;\n            var tables = that.table.add(that.lockedTable);\n\n            tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n        },\n\n        _deselectCheckRows: function(items) {\n            var that = this,\n            rangeSelectedAttr = kendo.attr(\"range-selected\");\n            items = that.table.add(that.lockedTable).find(items);\n\n            if (that._isLocked()) {\n                items = items.add(items.map(function() {\n                    return that._relatedRow(this);\n                }));\n            }\n\n            items.each(function() {\n                $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n            });\n            that._toggleHeaderCheckState(false);\n\n            that._persistSelectedRows();\n\n        },\n\n        _checkRows: function(items) {\n            items.each(function() {\n                $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                    .prop(\"checked\", true)\n                    .attr(ARIA_LABEL, \"Deselect row\")\n                    .attr(ARIA_CHECKED, true);\n            });\n        },\n\n        _persistSelectedRows: function() {\n            var that = this,\n                key,\n                dataItem,\n                allRows = that.items(),\n                dataSourceOptions = that.dataSource.options,\n                schema = dataSourceOptions.schema,\n                modelId,\n                selectedViewIds = {};\n\n            if (!schema || !schema.model || !that._data) {\n                return;\n            }\n\n            modelId = that._getSchemaIdField();\n\n            if (!modelId) {\n                return;\n            }\n\n            if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                that._selectedIds = {};\n            }\n\n            that.select().each(function() {\n                dataItem = that.dataItem(this);\n                selectedViewIds[dataItem[modelId]] = true;\n            });\n\n            for (var i = 0; i < allRows.length; i ++) {\n                dataItem = that.dataItem(allRows[i]);\n                key = dataItem[modelId];\n                if (selectedViewIds[key]) {\n                    that._selectedIds[key] = true;\n                } else {\n                    delete that._selectedIds[key];\n                }\n            }\n        },\n\n        selectedKeyNames: function() {\n            var that = this,\n                ids = [];\n            for (var property in that._selectedIds) {\n                ids.push(property);\n            }\n            ids.sort();\n            return ids;\n        },\n\n        _updateCurrentAttr: function(current, next) {\n            var headerId = $(current).data(\"headerId\");\n            var nextId;\n            var descId;\n\n            $(current).removeClass(FOCUSED);\n            this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n            if (headerId) {\n                headerId = headerId.replace(this._cellId, \"\");\n                $(current).attr(ID, headerId);\n            } else {\n                $(current).removeAttr(ID);\n            }\n\n            nextId = next.attr(ID);\n\n            if (nextId != this._cellId) {\n                next.data(\"headerId\", nextId);\n            }\n\n            if (!!nextId) {\n                descId = nextId;\n            } else {\n                next.attr(ID, this._cellId);\n            }\n\n            next.addClass(FOCUSED);\n            this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n            this._current = next;\n        },\n\n        _scrollCurrent: function() {\n            const current = this._current;\n            const scrollable = this.options.scrollable;\n\n            if (!current || !scrollable) {\n                return;\n            }\n\n            var row = current.parent();\n            var tableContainer = row.closest(\"table\").parent();\n\n            var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n            var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n            var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n            //adjust scroll vertically\n            if (isInContent) {\n                if (this.virtualScroll) {\n                    var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                    if (this.virtualScroll.rows) {\n                        this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                        this.virtualScrollable.scrollIntoView(row);\n                    } else {\n                        this._rowVirtualIndex = rowIndex;\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                } else {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n            }\n\n            if (this.lockedContent) {\n                //sync locked and non-locked content scrollTop\n                this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n            }\n\n            //adjust scroll horizontally, if not inside locked tables\n            if (!isInLockedContainer) {\n                this._scrollTo(current[0], scrollableContainer);\n            }\n        },\n\n\n        _findGroupedItem: function(data, id, idField) {\n            const that = this;\n            let item;\n\n            for (let i = 0; i < data.length; i++) {\n                const group = data[i];\n                if (group.field === idField) {\n                    if (group.value === id) {\n                        if (group.items[0].uid && group.items[0][idField]) {\n                            item = group.items[0];\n                        } else {\n                            item = that._findGroupedItem(group.items, id, idField);\n                        }\n                    }\n                } else if (group.items[0].uid && group.items[0][idField]) {\n                    item = group.items.find((item) => item[idField] === id);\n                } else {\n                    item = that._findGroupedItem(group.items, id, idField);\n                }\n\n                if (item) {\n                    return item;\n                }\n\n            }\n        },\n\n        _findClosestGroupingRow: function(htmlRow, rowsCount, hiddenGroupingRows) {\n            const that = this;\n            const hasGroupingRows = that.options.groupable && that.dataSource.group().length > 0;\n            let i = rowsCount ? rowsCount : 0;\n            let j = hiddenGroupingRows ? hiddenGroupingRows : 0;\n\n            if (!hasGroupingRows || !htmlRow) {\n                return { targetRow: htmlRow, rowsToTarget: i, hiddenGroupingRows: j };\n            }\n\n            const prevSibling = $(htmlRow.previousSibling);\n            if (prevSibling && prevSibling.hasClass(GROUPING_ROW)) {\n                let result = { targetRow: prevSibling, rowsToTarget: i, hiddenGroupingRows: j };\n                if (prevSibling.css(\"display\") === \"none\") {\n                    result = that._findClosestGroupingRow(prevSibling[0], i, j + 1);\n                }\n                return result;\n            } else {\n                const result = that._findClosestGroupingRow(prevSibling[0], i + 1, j);\n                if ( result ) {\n                    return { targetRow: result.targetRow, rowsToTarget: result.rowsToTarget, hiddenGroupingRows: j };\n                }\n            }\n        },\n\n        _checkItemAlreadyLoaded: function(id, idField) {\n            const that = this;\n            const dataSource = that.dataSource;\n            const ranges = dataSource._ranges;\n\n            let item;\n            for (let i = 0; i < ranges.length; i++) {\n                const range = ranges[i].data;\n                item = range.find((item) => item[idField] === id);\n\n                if (item) {\n                    return { loadedItem: item, page: i };\n                }\n            }\n\n            return;\n        },\n\n        scrollToItem: function(id, callback) {\n            const that = this;\n            const options = that.options;\n            const dataSource = that.dataSource;\n            const groups = dataSource.group();\n            const pageSize = dataSource.pageSize();\n            const idField = that._getSchemaIdField();\n            const scrollable = options.scrollable;\n            const scrollableContainer = that.wrapper.find(\".k-grid-content.k-auto-scrollable\");\n            const rowHeight = kendo._outerHeight(that.tbody.find(`tr:not(.${GROUPING_ROW})`));\n            let rootGroupingRow = options.groupable && that.wrapper.find(`.${GROUPING_ROW}:first-child`);\n            let previouslyScrolledItems = {};\n\n            if (that._scrolledItems) {\n                previouslyScrolledItems = that._scrolledItems;\n            }\n\n            let groupingRowHeight = 0;\n            let targetRowIsHidden = false;\n\n            if (scrollable && scrollable.virtual && groups.length === 0) {\n                that.virtualScrollable._alwaysScrollTop = true;\n            }\n\n            if (!id || !idField) {\n                return;\n            }\n\n            const currentView = dataSource.view();\n\n            let item = currentView.find((item) => item[idField] == id);\n\n            if (groups.length > 0) {\n                item = that._findGroupedItem(currentView, id, idField);\n                groupingRowHeight = kendo._outerHeight(rootGroupingRow[0]);\n            }\n\n            if (!item && options.scrollable.virtual) {\n                if (!that.virtualScrollable._programmaticallyScrolling || that.virtualScrollable._programmaticallyScrolling.state() === 'resolved') {\n                    that.virtualScrollable._programmaticallyScrolling = $.Deferred();\n                }\n\n                callback && typeof callback === 'function' && callback({\n                    success: (index) => {\n                        let itemIndex = index;\n                        itemIndex = typeof itemIndex !== 'number' ? Number(itemIndex) : itemIndex;\n\n                        if (isNaN(itemIndex)) {\n                            return;\n                        }\n\n                        const serverPaging = dataSource.options.serverPaging;\n                        let page = math.floor(itemIndex / pageSize);\n\n                        if (serverPaging) {\n                            const itemLoaded = that._checkItemAlreadyLoaded(id, idField);\n                            if (itemLoaded) {\n                                page = itemLoaded.page;\n                            }\n                        }\n\n\n                        const allRows = scrollableContainer.find(TR);\n                        const lastRowOffsetTop = allRows[allRows.length - 1].offsetTop;\n                        const pageEndOffset = (pageSize / allRows.length) * lastRowOffsetTop;\n\n                        const itemsToTarget = (itemIndex - page * pageSize) - 1;\n\n                        const scrollPosition = page * pageEndOffset + itemsToTarget * rowHeight;\n\n                        that._scrollingUp = that.virtualScrollable.verticalScrollbar.scrollTop() > scrollPosition;\n                        that._scrollOffset = scrollPosition;\n                        that.virtualScrollable._scrollTo(scrollPosition);\n                        that.virtualScrollable.verticalScrollbar.trigger(SCROLL);\n\n                        return that.virtualScrollable._programmaticallyScrolling.done(() => {\n                            that.scrollToItem(id);\n                        });\n                    }\n                });\n                return;\n            }\n\n            const uid = item && item.uid;\n\n            if (!uid) {\n                return;\n            }\n\n            const selector = `[data-uid=${uid}]`;\n            let element = $(selector);\n\n\n            let { targetRow, rowsToTarget, hiddenGroupingRows } = that._findClosestGroupingRow(element[0]);\n\n\n            if (!element || !targetRow) {\n                return;\n            } else if (groups.length > 0 && element.css(\"display\") === \"none\") {\n                element = targetRow;\n                targetRowIsHidden = true;\n            }\n\n            const hiddenGroupingRowsOffset = targetRowIsHidden ? (hiddenGroupingRows * groupingRowHeight) + rowHeight : 0;\n            let wrapperPosition = element[0].offsetTop - (((rowsToTarget + groups.length) * groupingRowHeight) - hiddenGroupingRowsOffset);\n            let scrollPosition = wrapperPosition;\n\n            if (options.scrollable.virtual) {\n                if (previouslyScrolledItems && previouslyScrolledItems[id]) {\n                    const scrollerPosition = Math.floor(that.virtualScrollable.verticalScrollbar.scrollTop());\n                    const prevScrollDown = Math.floor(previouslyScrolledItems[id].scrollingDownOffset);\n                    const prevScrollUp = Math.floor(previouslyScrolledItems[id].scrollingUpOffset);\n\n                    if (scrollerPosition === prevScrollUp || scrollerPosition === prevScrollDown) {\n                        return;\n                    }\n\n                    that._scrollingUp = scrollerPosition > scrollPosition;\n\n                    if (that._scrollingUp) {\n                        scrollPosition = prevScrollUp ?? scrollPosition;\n                    } else {\n                        scrollPosition = prevScrollDown ?? scrollPosition;\n                    }\n                }\n\n                if (that._scrollOffset) {\n                    if (!that._scrollingUp) {\n                        scrollPosition += that._scrollOffset;\n                    } else {\n                        if (that._scrollOffset === wrapperPosition) {\n                            that._scrollOffset += rowHeight;\n                        }\n                        scrollPosition = ((wrapperPosition - that.virtualScrollable._scrollTop) + that._scrollOffset);\n                    }\n                }\n                that.virtualScrollable._scrollTo(wrapperPosition, scrollPosition);\n\n                if (!previouslyScrolledItems[id]) {\n                    previouslyScrolledItems[id] = {};\n                }\n\n                if (that._scrollingUp) {\n                    if (previouslyScrolledItems[id] && !previouslyScrolledItems[id].scrollingUpOffset) {\n                        previouslyScrolledItems[id].scrollingUpOffset = scrollPosition;\n                    }\n                } else {\n                    if (previouslyScrolledItems[id] && !previouslyScrolledItems[id].scrollingDownOffset) {\n                        previouslyScrolledItems[id].scrollingDownOffset = scrollPosition;\n                    }\n                }\n            } else {\n                scrollableContainer.scrollTop(scrollPosition);\n            }\n\n            if (that.virtualScrollable) {\n                if (that._scrollOffset) {\n                    delete that._scrollOffset;\n                }\n                if (that._scrollingUp) {\n                    delete that._scrollingUp;\n                }\n            }\n\n            that._scrolledItems = previouslyScrolledItems;\n        },\n\n        current: function(next) {\n            return this._setCurrent(next, true);\n        },\n\n        _setCurrent: function(next, preventTrigger, preventScroll) {\n            var current = this._current;\n\n            next = $(next);\n\n            if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                this._filterFocusable().attr(TABINDEX, -1);\n            }\n\n            if (next.length) {\n                if (!current || current[0] !== next[0]) {\n                    var parent = next.parent();\n                    var siblings = parent.children(DATA_CELL);\n                    var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                    if (this._hasVirtualColumns()) {\n                        this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                    }\n                    this._updateCurrentAttr(current, next);\n\n                    if (!preventScroll) {\n                        this._scrollCurrent();\n                    }\n\n                    if (!preventTrigger) {\n                        this.trigger(NAVIGATE, {\n                            element: next\n                        });\n                    }\n                }\n            }\n\n            if (next && next.length) {\n                this._lastCellIndex = next.parent().children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED).index(next);\n            }\n\n            this._updateSelctCheckbox(current, next);\n\n            return this._current;\n        },\n\n        _removeCurrent: function() {\n            if (this._current) {\n                this._current.removeClass(FOCUSED);\n                this._current = null;\n            }\n        },\n\n        _updateSelctCheckbox: function(current, next) {\n            var nextCheckbox;\n\n            if (next && next.length) {\n                nextCheckbox = next.find(\".k-select-checkbox\");\n\n                if (nextCheckbox.length > 0) {\n                    nextCheckbox.trigger(\"focus\");\n                } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                    focusTable(this.table, true);\n                }\n            }\n        },\n\n        _scrollTo: function(element, container) {\n            var elementToLowercase = element.tagName.toLowerCase();\n            var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n            var table = $(element).closest(\"table\")[0];\n            var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n            var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n            var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n            var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n            var bottomDistance = elementOffset + elementOffsetDir;\n            var result = 0;\n            var ieCorrection = 0;\n            var firefoxCorrection = 0;\n\n            if (isRtl && isHorizontal) {\n                if (browser.msie || browser.edge) {\n                    ieCorrection = table.offsetLeft;\n                } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                    firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                }\n            }\n\n            containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n            if (containerScroll > elementOffset) {\n                result = elementOffset;\n            } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                if (elementOffsetDir <= containerOffsetDir) {\n                    result = (bottomDistance - containerOffsetDir);\n                } else {\n                    result = elementOffset;\n                }\n            } else {\n                result = containerScroll;\n            }\n\n            result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n            container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n        },\n\n        _navigatable: function() {\n            var that = this;\n\n            if (!that.options.navigatable) {\n                return;\n            }\n\n            //data tables - locked and non-locked\n            var dataTables = that.table.add(that.lockedTable);\n            //header tables - locked and non-locked\n            var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n            //the over wich keys will be handled\n            var tables = dataTables;\n\n            if (that.options.scrollable) {\n                //add the header table when the widget is scrollable\n                tables = tables.add(headerTables);\n            }\n\n            this._navigatableTables = tables;\n            this._headertables = headerTables;\n\n            //dettach all previous events\n            tables.off(MOUSEDOWN + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n            headerTables\n                .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n            //prevent propagation when clicked inside detail grid\n            dataTables\n                .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n\n            tables\n                //handle click on tables, will attempt to focus the table\n                .on((kendo.support.touch ? \"touchstart\" + NS : MOUSEDOWN + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                .on(\"focus\" + NS, that._tableFocus.bind(that))\n                .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n            that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n        },\n\n        _filterFocus: function(e) {\n            var header = e.target.closest(\"th\");\n\n            this._filterFocusable().attr(TABINDEX, 0);\n            this._setCurrent(header);\n            $(header).removeClass(FOCUSED);\n        },\n\n        _tableFocus: function() {\n            var current = this.current();\n            var table = this.lockedTable ? this.lockedTable : this.table;\n\n            //if there is already current, highlighted it\n            //otherwise highlight the first possible cell\n            if (current && current.is(\":visible\")) {\n                current.addClass(FOCUSED);\n            } else {\n                if (this._virtualColScroll) {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                } else {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                }\n            }\n\n            this.table.attr(TABINDEX, 0);\n        },\n\n        _tableBlur: function() {\n            var current = this.current();\n\n            if (current) {\n                current.removeClass(FOCUSED);\n            }\n        },\n\n        _findCellIndex: function(columns, startIndex, reversed) {\n            var cellIndex;\n            var i;\n\n            if (reversed) {\n                for (i = startIndex; i >= 0; i--) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            } else {\n                for (i = startIndex; i < columns.length; i++) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            }\n\n            return cellIndex;\n        },\n\n        _scrollToColumn: function(key, e) {\n            if (this._virtualCellIndex === undefined$1) {\n                return false;\n            }\n\n            var that = this;\n            var cellIndex = that._virtualCellIndex;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var scrollWidth = 0;\n\n            if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n            } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n            } else if (key == keys.HOME) {\n                cellIndex = that._findCellIndex(leafsCols, 0);\n            } else if (key == keys.END) {\n                cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n            }\n\n            for (var i = 0; i < cellIndex; i++) {\n                scrollWidth += leafsCols[i].width;\n            }\n\n            that._virtualCellIndex = cellIndex;\n            if (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            kendo.scrollLeft(that.content, scrollWidth);\n            return true;\n        },\n\n        _tableKeyDown: function(e) {\n            let current = this.current(),\n                currentTable = current && current.closest(DOT + \"k-grid-table\")[0],\n                virtualScroll = this.virtualScroll || {},\n                requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching(),\n                target = $(e.target),\n                canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon\");\n\n            if (e.altKey && e.keyCode == keys.DOWN) {\n                this.current().find(\".k-grid-filter-menu, .k-grid-column-menu\").click();\n                e.stopImmediatePropagation();\n                return;\n            }\n\n            // do not handle key down if request in progress\n            // or there isn't current set\n            if (requestInProgress) {\n                // swallow key events while in progress\n                e.preventDefault();\n                return;\n            }\n\n            if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                return;\n            }\n\n            if (!current) {\n                current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n            }\n\n            if (!current.length) {\n                return;\n            }\n\n            var handled = false;\n\n            if (!e.isDefaultPrevented() && e.keyCode === keys.F10) {\n                handled = this._focusToolbar();\n            }\n\n            if (canHandle && e.keyCode == keys.UP) {\n                handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.DOWN) {\n                handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, currentTable);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, currentTable);\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                handled = this._handlePageDown();\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEUP) {\n                handled = this._handlePageUp();\n            }\n\n            if (canHandle && e.keyCode == keys.HOME) {\n                handled = this._handleHome(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.END) {\n                handled = this._handleEnd(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.SPACEBAR) {\n                handled = this._handleSpaceKey(current, e.ctrlKey);\n            }\n\n            if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                handled = this._handleEnterKey(current, currentTable, target);\n            }\n\n            if (e.keyCode == keys.ESC) {\n                handled = this._handleEscKey(current, currentTable);\n            }\n\n            if (e.keyCode == keys.TAB) {\n                handled = this._handleTabKey(current, currentTable, e.shiftKey, target);\n            }\n\n            if (handled) {\n                //prevent scrolling while pressing the keys\n                e.preventDefault();\n                //required in hierarchy\n                e.stopPropagation();\n            }\n        },\n\n        _focusToolbar: function() {\n            var focusable = this.wrapper.find(\".k-grid-toolbar [tabindex=0]\");\n\n            if (focusable.length > 0) {\n                focusable.first().addClass(\".k-focus\").trigger(\"focus\");\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.collapseGroup(row);\n                } else {\n                    this.collapseRow(row);\n                }\n            } else if (ctrlKey && current.is(DOT + HEADER_CLASS) && this.options.reorderable) {\n               this._moveColumn(current, true);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._prevHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                        if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.lockedTable[0], row[0])) {\n                                next = next.prevAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).last();\n                        } else {\n                            next = this._tabNext(current, currentTable, true);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container);\n\n                        next = this._prevHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(GROUPING_ROW)) {\n                    this.expandGroup(row);\n                } else {\n                    this.expandRow(row);\n                }\n             } else if (ctrlKey && current.is(DOT + HEADER_CLASS) && this.options.reorderable) {\n                this._moveColumn(current, false);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._nextHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                       if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.table[0], row[0])) {\n                                next = next.nextAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).first();\n                        } else {\n                            next = this._tabNext(current, currentTable, false);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container, true);\n\n                        next = this._nextHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveUp: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n               next = current.parent();\n               next = next.prevAll(ITEMROW).first();\n               next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.prevAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n               next = this._prevVerticalCell(container, current);\n               if (!next[0]) {\n                  this._lastCellIndex = 0;\n                  container = this._verticalContainer(container, true);\n\n                  next = this._prevVerticalCell(container, current);\n\n                  if (next.is(\":hidden\")) {\n                    next = next.nextAll().not(\":hidden\").first();\n                  }\n\n                  if (next[0]) {\n                      focusTable(this.table, true);\n                  }\n               }\n            }\n\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n\n            return true;\n        },\n\n        _moveDown: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index + 1);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n                next = this._nextVerticalCell(container, current);\n                if (!next[0]) {\n                    this._lastCellIndex = 0;\n                    container = this._verticalContainer(container);\n\n                    next = this._nextVerticalCell(container, current);\n                    if (next[0]) {\n                        focusTable(this.table, true);\n                    }\n                }\n            }\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(this._findVisibleCell(next));\n            this._lastCellIndex = tmp;\n            return true;\n        },\n\n        _moveColumn: function(current, isLeft) {\n            var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n            var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n            var oldIndex = elements.index($(current));\n            var offset = isLeft ? - 1 : 1;\n            var column = columns[oldIndex];\n            var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n            if (newIndex >= 0) {\n                this.reorderColumn(newIndex, column, isLeft);\n                this.trigger(COLUMNREORDER, {\n                    newIndex: newIndex,\n                    oldIndex: oldIndex,\n                    column: column\n                });\n            }\n        },\n\n        _handleHome: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var prev;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.HOME);\n                return true;\n            }\n\n            if (ctrl) {\n                if (this.lockedTable) {\n                    prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                } else {\n                    prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                }\n            } else if (isInBody || isInLockedTable) {\n                if (isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                prev = row.children(DATA_CELL).first();\n            }\n\n            if (prev && prev.length) {\n                this._setCurrent(prev);\n                return true;\n            }\n        },\n\n        _handleEnd: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var next;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(keys.END);\n                return true;\n            }\n\n            if (ctrl) {\n                next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n            } else if (isInBody || isInLockedTable) {\n                if (!isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                next = row.children(DATA_CELL).last();\n            }\n\n            if (next && next.length) {\n                this._setCurrent(next);\n                return true;\n            }\n        },\n\n        _handlePageDown: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() + 1);\n\n            return true;\n        },\n\n        _handlePageUp: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() - 1);\n\n            return true;\n        },\n\n        _handleTabKey: function(current, currentTable, shiftKey, target) {\n            var isInCell = this.options.editable && this._editMode() == \"incell\";\n            var cell, filterFocusable;\n\n            if (!isInCell ||\n                current.is(\"th\") ||\n                (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n\n                        if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                            filterFocusable.first().trigger(\"focus\");\n\n                            return true;\n                        } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                            filterFocusable.last().trigger(\"focus\");\n\n                            return true;\n                        }\n                    }\n\n                    return false;\n            }\n\n            cell = $(activeElement()).closest(\".k-edit-cell\");\n\n            if (cell[0] && cell[0] !== current[0]) {\n                current = cell;\n            }\n\n            cell = this._tabNext(current, currentTable, shiftKey);\n\n            if (cell[0] === current[0]) {\n                return false;\n            }\n\n            if (cell.length) {\n                this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleEscKey: function(current) {\n            var active = activeElement();\n            var isInCell = this._editMode() == \"incell\";\n\n            if (!isInEdit(current)) {\n                if (current.has(active).length) {\n                    // return focus back to the table\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                if (current.parent().hasClass(\"k-filter-row\")) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (isInCell) {\n                this.closeCell(true);\n            } else {\n                var currentIndex = $(current).parent().index();\n                if (active) {\n                    active.blur();\n                }\n                this.cancelRow(true);\n                if (currentIndex >= 0) {\n                    this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                }\n            }\n\n            focusTable(this.table, true);\n\n            return true;\n        },\n\n        _toggleCurrent: function(current, editable, hasDetails) {\n            var row = current.parent();\n\n            if (current.is(\".k-command-cell\")) {\n                return false;\n            }\n\n            if (row.is(\".k-filter-row\")) {\n                return false;\n            }\n\n            if (row.is(DOT + GROUPING_ROW)) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            if (!editable && hasDetails) {\n                row.find(\".k-icon,.k-svg-icon\").first().click();\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleSpaceKey: function(current, ctrlKey) {\n            var that = this;\n\n            if (!ctrlKey || !that.groupable || !current.hasClass(HEADER_CLASS)) {\n                return;\n            }\n\n            var descriptors = that.groupable.descriptors();\n            var field = current.attr(kendo.attr(\"field\"));\n            var aggregates = that.groupable.aggregates();\n\n            if (that.groupable._canDrag(current)) {\n                descriptors.push({\n                    field: field,\n                    dir: \"asc\",\n                    aggregates: aggregates || []\n                });\n            } else {\n                descriptors = $.grep(descriptors, function(item)\n                {\n                    return item.field !== field;\n                });\n            }\n\n            that.dataSource.group(descriptors);\n\n            return true;\n        },\n\n        _handleEnterKey: function(current, currentTable, target) {\n            var editable = this.options.editable && this.options.editable.update !== false;\n            var container = target.closest(\"td\");\n            var hasDetails = this._hasDetails();\n            var link, filterFocusable;\n\n            if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                current = container;\n            }\n\n            if (current.is(\"th\")) {\n                // sort the column, if possible\n                link = current.find(\".k-link\");\n\n                if (current.has($(activeElement())).length > 0) {\n                    return false;\n                } else if (link.length) {\n                    link.click();\n                } else if (current.parent().hasClass(\"k-filter-row\")) {\n                    filterFocusable = this._filterFocusable();\n                    filterFocusable.attr(TABINDEX, 0);\n                    current.find(\":kendoFocusable\").first().trigger(\"focus\");\n                } else {\n                    current.find(CHECKBOXINPUT).trigger(\"focus\");\n                }\n\n                return true;\n            }\n            if (this._toggleCurrent(current, editable, hasDetails)) {\n                return true;\n            }\n\n            var focusable = current.find(\":kendoFocusable\").first();\n            if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                focusable.trigger(\"focus\");\n\n                return true;\n            }\n\n            if (editable && !target.is(\":button,.k-button,textarea\")) {\n                if (!container[0]) {\n                    container = current;\n                }\n\n                this._handleEditing(container, false, currentTable);\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _nextHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.nextAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(HEADER_CLASS)) {\n                        var headerRows = [];\n                        mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).first();\n                    }\n\n                    //get the same row index in the new table\n                    return this._findVisibleCell(rows.eq(originalIndex).children(DATA_CELL_HIDDENINCLUDED).first());\n                }\n            }\n\n            return this._findVisibleCell(current.nextAll(DATA_CELL + \",[hidden]\").eq(0));\n        },\n\n        _prevHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.prevAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(HEADER_CLASS)) {\n                        var headerRows = [];\n                        var columns = lockedColumns(this.columns);\n                        mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).last();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).last();\n                }\n            }\n\n            cells = current.prevAll(DATA_CELL + \",[hidden]\");\n            let cellToFocus = this._findVisibleCell(cells.first());\n            if (cellToFocus.is(\".k-group-cell\")) {\n                return cellToFocus.next(DATA_CELL);\n            }\n\n            return cellToFocus;\n        },\n\n        _currentDataIndex: function(table, current) {\n            var index = current.attr(\"data-index\");\n\n            if (!index) {\n                return undefined$1;\n            }\n\n            var lockedColumnsCount = lockedColumns(this.columns).length;\n            if (lockedColumnsCount && !table.closest(DIV).hasClass(\"k-grid-content-locked\")[0]) {\n                return index - lockedColumnsCount;\n            }\n\n            return index;\n        },\n\n        _findVisibleCell: function($cell) {\n            var col = $cell.index();\n            var row = $cell.closest('tr').index();\n            var $newFocus;\n\n            if ($cell.is('[hidden]')) {\n                $newFocus = $cell.prevAll(':not([hidden])').first();\n                var hiddenCount = $cell.prevUntil(':not([hidden])', '[hidden]').length;\n                if (!$newFocus.attr('colspan') || ($newFocus.attr('colspan') > 1 && $newFocus.attr('colspan') <= hiddenCount + 1)) {\n                    $newFocus = $cell.prevAll('[hidden]').last();\n                    if ($newFocus.length === 0) {\n                        return $cell.closest('tr').prevAll().find(`td:nth-of-type(${col + 1}):visible`).last();\n                    }\n\n                    while (!$newFocus.attr('rowspan') && !($newFocus.attr('rowspan') > 1 && $newFocus.attr('rowspan') != row - $newFocus.closest('tr').index()) && Math.abs($newFocus.index() - col) != $newFocus.attr('colspan')) {\n                        $newFocus = $newFocus.closest('tr').prevAll().find('td, th').eq(col).first();\n                        if ($newFocus.length === 0) {\n                            $newFocus = $cell;\n                            break;\n                        }\n                    }\n                }\n            } else {\n                $newFocus = $cell;\n            }\n\n            return $newFocus;\n        },\n\n        _prevVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n\n            //current is in the header, but not at the last level of multi-level columns\n            if (index || current.hasClass(HEADER_CLASS)) {\n                cells = parentColumnsCells(current);\n                return cells.eq(cells.length - 2);\n            }\n\n            //check this out\n            index = Math.max(row.children(DATA_CELL_HIDDENINCLUDED).index(current), this._lastCellIndex || 0);\n\n            //if current is inside filter row\n            if (row.hasClass(\"k-filter-row\")) {\n                let offset = rows.last().children(\".k-group-cell\").length;\n\n                return leafDataCells(container).filter(isCellVisible).eq(Math.max(0, index - offset));\n            }\n\n            //move up to header container\n            if (rowIndex == -1) {\n                if (this._hasVirtualColumns()) {\n                    index = this._virtualCellIndex;\n                }\n                //is there filter row in the header container\n                row = container.find(\"tr.k-filter-row:visible\");\n                if (!row[0]) {\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                        index--;\n                    }\n\n                    let offset = 0;\n                    if (current.parent().is(\".k-table-group-row\")) {\n                        offset = rows.last().children(\".k-group-cell\").length;\n                    }\n\n                    return leafDataCells(container).eq(Math.max(0, index - offset));\n                } else {\n                    if (this._hasDetails()) {\n                        index--;\n                    }\n                }\n            } else {\n                row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n            }\n\n            cells = row.children(DATA_CELL_HIDDENINCLUDED);\n            if (cells.length > index) {\n                let nextCell = cells.eq(index);\n                if (nextCell.is(\".k-group-cell\")) {\n                    nextCell = nextCell.nextAll(\"td\").not(\".k-group-cell\").not(\":hidden\").first();\n                }\n\n                return this._findVisibleCell(nextCell);\n            }\n\n            return cells.eq(0);\n        },\n\n        _nextVerticalCell: function(container, current) {\n            var cells;\n            var originalRow;\n            var row = originalRow = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n            var virtualScroll = this.virtualScroll || {};\n            var colspan;\n            //current is in the header, but not at the last level of multi-level columns\n            //and we are not changing the table\n            if (rowIndex != -1 && index === undefined$1 && current.hasClass(HEADER_CLASS)) {\n                return childColumnsCells(current).eq(1);\n            }\n\n            index = index ? parseInt(index, 10) : row.children(DATA_CELL_HIDDENINCLUDED).index(current);\n            index = Math.max(index, this._lastCellIndex || 0);\n\n            //move down to data container\n            if (rowIndex == -1) {\n                row = rows.eq(0);\n                if (virtualScroll.columns) {\n                    colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                    index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                }\n                // in hierarchical grid we need to correct the index\n                // since the k-hierarchy cell is navigatable\n                if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                    index++;\n                }\n\n                if (row.hasClass(\"k-table-group-row\")) {\n                    index += originalRow.children(\".k-group-cell\").length;\n                }\n            } else {\n                row = rows.eq(rowIndex + current[0].rowSpan);\n            }\n\n            cells = row.children(\".k-group-cell,\" + DATA_CELL_HIDDENINCLUDED);\n\n            let cellToFocus = cells.eq(0);\n            if (cells.length > index) {\n                cellToFocus = cells.eq(index);\n            }\n\n            if (cellToFocus.is(\".k-group-cell\")) {\n                cellToFocus = cellToFocus.nextAll(\"td\").not(\".k-group-cell\").not(\":hidden\").first();\n            }\n\n            return cellToFocus;\n        },\n\n        _verticalContainer: function(container, up) {\n            var table = container.parent();\n            var length = this._navigatableTables.length;\n            var step = Math.floor(length / 2);\n            var index = inArray(table[0], this._navigatableTables);\n\n            if (up) {\n                step *= -1;\n            }\n            index += step;\n\n            if (index >= 0 || index < length) {\n                table = this._navigatableTables.eq(index);\n            }\n\n            return table.find(up ? \">thead\" : \">tbody\");\n        },\n\n        _filterFocusable: function() {\n            return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n        },\n\n        _horizontalContainer: function(container, right) {\n            var length = this._navigatableTables.length;\n            if (length <= 2) {\n                return container;\n            }\n\n            var table = container.parent();\n            var index = inArray(table[0], this._navigatableTables);\n\n            index += right ? 1 : -1;\n\n            if (right && (index == 2 || index == length)) {\n                return container;\n            }\n\n            if (!right && (index == 1 || index < 0)) {\n                return container;\n            }\n\n            return this._navigatableTables.eq(index).find(\"thead, tbody\");\n        },\n\n        _tabNext: function(current, currentTable, back) {\n            var switchRow = true;\n            var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n            if (!next.length) {\n                next = current.parent();\n                if (this.lockedTable) {\n                    switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                    next = this._relatedRow(next);\n                }\n\n                if (switchRow) {\n                    if (this._hasVirtualColumns()) {\n                        return current;\n                    }\n                    next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                }\n                if (back) {\n                    next = next.children(DATA_CELL).last();\n                } else {\n                    next = next.children(DATA_CELL).first();\n                }\n            }\n\n            return next;\n        },\n\n        _handleEditing: function(current, next, table) {\n            var that = this,\n                active = $(activeElement()),\n                mode = that._editMode(),\n                isIE = browser.msie,\n                editContainer = that._editContainer,\n                focusable,\n                editable = that.options.editable && that.options.editable.update !== false,\n                isEdited;\n\n            table = $(table);\n            if (mode == \"incell\") {\n                isEdited = current.hasClass(\"k-edit-cell\");\n            } else {\n                isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n            }\n\n            if (that.editable) {\n                if ($.contains(editContainer[0], active[0])) {\n                    active.trigger(\"blur\");\n                    if (isIE) {\n                        //IE10 with jQuery 1.9.x does not trigger blur handler\n                        //numeric textbox does trigger change\n                        active.trigger(\"blur\");\n                    }\n                }\n\n                if (!that.editable) {\n                    focusTable(that.table);\n                    return;\n                }\n\n                if (that.editable.end()) {\n                    if (mode == \"incell\") {\n                        that.closeCell();\n                    } else {\n                        that.saveRow();\n                        isEdited = true;\n                    }\n                } else {\n                    if (mode == \"incell\") {\n                        that._setCurrent(editContainer);\n                    } else {\n                        that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                    }\n                    focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                    if (focusable) {\n                        focusable.focus();\n                    }\n                    return;\n                }\n            }\n\n            if (next) {\n                that._setCurrent(next);\n            }\n\n            focusTable(that.table, true);\n\n            if (!editable) {\n                return;\n            }\n\n            if ((!isEdited && !next) || next) {\n                if (mode === INCELL) {\n                    if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                        that.editCell(that.current());\n                    }\n                } else {\n                    that.editRow(that.current().parent());\n                }\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                table = that.table,\n                height = that.options.height,\n                width = that.options.width,\n                wrapper = that.element;\n\n            if (!wrapper.is(DIV)) {\n               wrapper = wrapper.wrap(\"<div/>\").parent();\n            }\n\n            that.wrapper = wrapper.addClass(\"k-grid \" + kendo.getValidCssClass(\"k-grid-\", \"size\", that.options.size));\n\n            if (height) {\n                that.wrapper.css(HEIGHT, height);\n                table.css(HEIGHT, AUTO);\n            }\n\n            if (width) {\n                that.wrapper.css(WIDTH, width);\n            }\n\n            that._initMobile();\n        },\n\n        _initContextMenu: function() {\n            var that = this,\n                options = that.options,\n                groupsContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.groups) ? { items: options.contextMenu.groups } : { items: defaultGroupsContextMenu },\n                tbodyContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.body) ? { items: options.contextMenu.body } : { items: defaultBodyContextMenu },\n                theadContextMenu = isPlainObject(options.contextMenu) && isArray(options.contextMenu.head) ? { items: options.contextMenu.head } : { items: defaultHeadContextMenu };\n\n            var mainOptions = isPlainObject(options.contextMenu) ? options.contextMenu : {};\n\n            tbodyContextMenu = extend({}, {\n                messages: options.messages,\n                target: that.tbody,\n                filter: \".k-table-td\",\n                action: that._action.bind(that),\n                states: that._buildStates()\n            }, mainOptions, tbodyContextMenu);\n\n            theadContextMenu = extend({}, {\n                messages: options.messages,\n                target: that.thead,\n                filter: \".k-table-th\",\n                action: that._action.bind(that),\n                states: that._buildStates()\n            }, mainOptions, theadContextMenu);\n\n            if (that.groupable) {\n                groupsContextMenu = extend({}, {\n                    showOn: \"click\",\n                    target: that.groupable.groupContainer,\n                    filter: \".k-groupable-context-menu\",\n                    messages: options.messages,\n                    action: that._action.bind(that),\n                    states: that._buildStates()\n                }, mainOptions, groupsContextMenu);\n            }\n\n\n            that.tbodyContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", tbodyContextMenu);\n            that.theadContextMenu = new ui.grid.ContextMenu(\"<ul></ul>\", theadContextMenu);\n            that.groupsContextMenu = !!that.groupable && new ui.grid.ContextMenu(\"<ul></ul>\", groupsContextMenu);\n        },\n\n        _buildStates: function() {\n            var that = this;\n\n            return {\n                isEditable: that.options.editable,\n                isSelectable: that.options.selectable,\n                isSortable: that.options.sortable,\n                isRowReorderable: isPlainObject(that.options.reorderable) ? that.options.reorderable.rows : that.options.reorderable,\n                isGroupable: that.options.groupable,\n                allowPaste: that.options.allowPaste,\n                alwaysDisabled: false,\n                hasSelection: () => (this.select() ? this.select().length > 0 : false),\n                isSorted: () => !(this.dataSource.sort() ? this.dataSource.sort().length > 0 : false),\n                canMoveGroupPrev: (target) =>{\n                    var group = $(target).closest(\".k-chip\");\n\n                    return group.index() > 0;\n                },\n                canMoveGroupNext: (target) =>{\n                    var length = $(target).closest(\".k-chip-list\").children().length - 1;\n                    var group = $(target).closest(\".k-chip\");\n\n                    return group.index() < length;\n                }\n            };\n        },\n\n        _action: function(args) {\n            var commandName = args.command,\n                commandOptions = extend({ grid: this }, args.options),\n                command = new ui.grid.commands[commandName](commandOptions);\n\n            return command.exec();\n        },\n\n        _initMobile: function() {\n            var options = this.options;\n            var that = this;\n\n            this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                options.mobile === \"phone\" ||\n                                options.mobile === \"tablet\";\n\n            if (this._isMobile) {\n                var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                    '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                    'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                )\n                .parent();\n\n                this.pane = this._createPane(html);\n                this.view = this.pane.view();\n\n                if (options.height) {\n                    this.pane.element.parent().css(HEIGHT, options.height);\n                } else {\n                    this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                }\n\n                this._editAnimation = \"slide\";\n\n                // Grid transitions should not propagate to the view\n                that.wrapper.on(\"transitionend\" + NS, function(e) {\n                    e.stopPropagation();\n                });\n\n                that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                    e.preventDefault();\n                    return false;\n                });\n\n                this.view.bind(\"showStart\", function() {\n                    if (that._isLocked()) {\n                        that._updateTablesWidth();\n                        that._applyLockedContainersWidth();\n                        that._syncLockedContentHeight();\n                        that._syncLockedHeaderHeight();\n                        that._syncLockedFooterHeight();\n                    }\n                });\n            }\n        },\n\n        _createPane: function(html) {\n            var pane = kendo.Pane.wrap(html, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n\n            return pane;\n        },\n\n        _initLoader: function(options) {\n            var that = this,\n                defaultOptions = {\n                    size: 'medium',\n                    messages: { exporting: 'Exporting...' }\n            };\n            defaultOptions = $.extend({}, defaultOptions, options);\n\n            const loader = $(\"<div></div>\").kendoLoader(defaultOptions).data(\"kendoLoader\");\n\n            that.loader = loader;\n            that._loaderContainer = useLoaderContainer.bind(that);\n        },\n\n        _tbody: function() {\n            var that = this,\n                table = that.table,\n                tbody;\n\n            tbody = table.find(\">tbody\");\n\n            if (!tbody.length) {\n                tbody = $(\"<tbody/>\").appendTo(table);\n            }\n\n            tbody.addClass('k-table-tbody');\n            that.tbody = tbody;\n        },\n\n        _scrollable: function() {\n            var that = this,\n                header,\n                table,\n                options = that.options,\n                scrollable = options.scrollable,\n                hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                headerWrap;\n\n            if (scrollable) {\n                header = that.wrapper.children(\".k-grid-header\");\n\n                if (!header[0]) {\n                    header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                }\n\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                table = $('<table role=\"none\" class=\"k-grid-header-table k-table\"/>');\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", options.size));\n\n                table.width(that.table[0].style.width);\n\n                table.append(that.thead);\n                header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                that.content = that.table.parent();\n                that.virtualScroll = virtualScroll;\n\n                if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                    that.content = that.content.parent();\n                }\n\n                if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                    that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                }\n\n                if (!that.content.parent().hasClass(\"k-grid-container\")) {\n                    that.content.wrap(\"<div class='k-grid-container' />\").parent();\n                }\n\n                if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                    that._createVirtualScrollable();\n                }\n\n                if (virtualScroll && virtualScroll.columns) {\n\n                    that.table.css({\n                        width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                    });\n                }\n\n                headerWrap = header.children(\".k-grid-header-wrap\");\n\n                that.scrollables = headerWrap.add(that.content);\n\n                // the footer may exists if rendered from the server\n                var footer = that.wrapper.find(\".k-grid-footer\");\n\n                if (footer.length) {\n                    that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                }\n\n                headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                    if (that._scrollLeft !== this.scrollLeft) {\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                    }\n                });\n\n                if (virtualScroll && virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                        if (that.lockedContent) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (virtualScroll.columns && isScrollingLeft) {\n                            that.refresh();\n                        }\n                    });\n                } else {\n                    var endless = scrollable.endless;\n                    var originalPageSize = that.dataSource.options.pageSize;\n                    if (endless) {\n                        that._endlessPageSize = originalPageSize;\n                    }\n                    that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                        if (that.lockedContent && e.currentTarget == that.content[0]) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (endless) {\n                            if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                !that._endlessFetchInProgress &&\n                                that._endlessPageSize < that.dataSource.total()) {\n                                that._skipRerenderItemsCount = that._endlessPageSize;\n                                that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                that.dataSource.options.endless = true;\n                                that._endlessFetchInProgress = true;\n                                that.dataSource.pageSize(that._endlessPageSize);\n                            }\n                        }\n\n                        if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                              that._virtualColScroll = true;\n                              that._cacheEditableState();\n                              that.refresh();\n                              that._restoreEditableState();\n                              that._virtualColScroll = false;\n                        }\n\n                        if (that.rowResizer) {\n                            that.rowResizer.css(\"left\", e.currentTarget.scrollLeft + \"px\");\n                        }\n                    });\n\n                    var touchScroller = that.content.data(\"kendoTouchScroller\");\n                    if (touchScroller) {\n                        touchScroller.destroy();\n                    }\n\n                    touchScroller = kendo.touchScroller(that.content);\n                    if (touchScroller && touchScroller.movable) {\n                        that.touchScroller = touchScroller;\n                        touchScroller.movable.bind(\"change\", function(e) {\n                            kendo.scrollLeft(that.scrollables, -e.sender.x);\n                            if (that.lockedContent) {\n                                that.lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n\n                        that.one(DATABOUND, function(e) {\n                            e.sender.wrapper.addClass(\"k-grid-backface\");\n                        });\n                    }\n                }\n            }\n        },\n\n        _createVirtualScrollable: function() {\n            var that = this;\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = new VirtualScrollable(that.content, {\n                dataSource: that.dataSource,\n                itemHeight: function() { return that._averageRowHeight(); },\n                page: function() {\n                    that._restoreEditableState();\n                },\n                scroll: function() {\n                    that._focusEditable();\n                },\n                loadStart: function() {\n                    that._progress(true);\n                },\n                loadEnd: function() {\n                    that._progress(false);\n                }\n            });\n\n            that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n        },\n\n        _onVirtualPaging: function() {\n            var that = this;\n\n            that._cacheEditableState();\n\n            if (that._isVirtualIncellEditable()) {\n                that._shouldClearEditableState = false;\n                that.closeCell();\n                that._shouldClearEditableState = true;\n            }\n        },\n\n        _isVirtualEditable: function() {\n            return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n        },\n\n        _isVirtualInlineEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INLINE;\n        },\n\n        _isVirtualIncellEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INCELL;\n        },\n\n        _isVirtualPopupEditable: function() {\n            return this.virtualScrollable && this._editMode() === \"popup\";\n        },\n\n        _hasVirtualColumns: function() {\n            return (this.virtualScroll || {}).columns ? true : false;\n        },\n\n        _scrollVirtualWrapper: function() {\n            var that = this;\n            var scrollable = that.virtualScrollable;\n\n            if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                if (scrollable._isScrolledToBottom()) {\n                    scrollable._scrollWrapperToBottom();\n                } else if (scrollable._isScrolledToTop()) {\n                    scrollable._scrollWrapperToTop();\n                }\n            }\n        },\n\n        _scrollVirtualWrapperOnColumnResize: function() {\n            var virtualScrollable = this.virtualScrollable;\n\n            if (virtualScrollable) {\n                virtualScrollable._scrollWrapperOnColumnResize();\n            }\n        },\n\n        _restoreEditableState: function() {\n            var that = this;\n            var editableState = that._editableState || {};\n            var editedModel = editableState.model;\n            var dataSource = that.dataSource;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var row;\n            var cell;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                if (that._editMode() === INLINE) {\n                    that._shouldClearEditableState = false;\n                    that.editRow(editedModel);\n                    if (!virtualColumns) {\n                        that._focusEditable();\n                    }\n                } else if (that._editMode() === INCELL) {\n                    row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                    cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                    if (cell[0]) {\n                        that._shouldClearEditableState = false;\n                        that.editCell(cell);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    }\n                }\n            }\n\n            that._shouldClearEditableState = true;\n        },\n\n        _focusEditable: function() {\n            var that = this;\n            var editedField = (that._editableState || {}).field;\n            var editContainer = that._editContainer;\n\n            if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                }\n            }\n        },\n\n        _canFocusEditable: function() {\n            var that = this;\n            var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n            (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n            return result;\n        },\n\n        _cacheEditableState: function() {\n            var that = this;\n            var editContainer = that._editContainer;\n            var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var active;\n            var widget;\n            var value;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                that._clearEditableState();\n                active = $(activeElement());\n\n                if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                    //change event is not fired if the editable container is scrolled\n                    //out of the virtual view with the mousewheel right after editing\n                    active.change();\n\n                    widget = kendo.widgetInstance(active, kendo.ui);\n\n                    if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                        value = active.val();\n\n                        if (active.is(\"[type='checkbox'\")) {\n                            value = active.is(\":checked\");\n                        }\n\n                        widget.value(value);\n                        widget.trigger(CHANGE);\n                    }\n                }\n\n                if (that._editMode() === INLINE) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                    };\n                } else if (that._editMode() === INCELL) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: editContainer.attr(kendo.attr(FIELD))\n                    };\n                }\n            }\n        },\n\n        _clearSortClasses: function() {\n            var that = this,\n                content = that.content || that.table,\n                lockedContent = that.lockedContent;\n\n            if (content) {\n                content.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n\n            if (lockedContent) {\n                lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n        },\n\n        _clearEditableState: function() {\n            var that = this;\n\n            if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                that._editableState = null;\n            }\n        },\n\n        _destroyVirtualScrollable: function() {\n            var that = this;\n\n            that._clearEditableState();\n\n            if (that.virtualScrollable && that.virtualScrollable.element) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = null;\n        },\n\n        _destroyRowResizing: function() {\n            if (this.rowResizing) {\n                this.rowResizing.destroy();\n\n                this.rowResizing = null;\n            }\n\n            if (this.rowResizer) {\n                this._detachRowResizerEvents();\n                this.rowResizer.off(DUBLECLICK + NS);\n                this.rowResizer = null;\n                this._clearCachedRowsHeight();\n            }\n        },\n\n        _renderNoRecordsContent: function() {\n            var that = this;\n\n            if (that.options.noRecords) {\n                var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                if (noRecordsElement.length) {\n                    noRecordsElement.remove();\n                }\n\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    noRecordsElement = $(that.noRecordsTemplate({ grid: that }));\n                    kendo.applyStylesFromKendoAttributes(noRecordsElement, [\"margin\", \"position\"]);\n                    noRecordsElement.insertAfter(that.table);\n                }\n            }\n        },\n\n        _setContentWidth: function(scrollLeft) {\n            var that = this,\n                hiddenDivClass = 'k-grid-content-expander',\n                hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                resizable = that.resizable,\n                expander;\n\n            if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                expander = that.table.parent().children('.' + hiddenDivClass);\n                that._setContentWidthHandler = that._setContentWidth.bind(that);\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    if (!expander[0]) {\n                        expander = $(hiddenDiv).appendTo(that.table.parent());\n                        if (resizable) {\n                            resizable.bind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n                    if (that.thead) {\n                        expander.width(that.thead.width());\n                        if (!isNaN(parseFloat(scrollLeft, 10))) {\n                            kendo.scrollLeft(that.content, scrollLeft);\n                        }\n                    }\n                } else if (expander[0]) {\n                    expander.remove();\n                    if (resizable) {\n                        resizable.unbind(\"resize\", that._setContentWidthHandler);\n                    }\n                }\n\n                that._applyLockedContainersWidth(true);\n                that._syncLockedContentHeight();\n\n                // workaround IE does not show vertical scrollbar for elements without width\n                if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                    that.table[0].style.width = \"1px\";\n                }\n            }\n        },\n\n        _applyLockedContainersWidth: function(calculateGroupWidth) {\n            if (this.options.scrollable && this.lockedHeader) {\n                let headerTable = this.thead.parent(),\n                    headerWrap = headerTable.parent(),\n                    contentWidth = this.wrapper[0].clientWidth,\n                    groups = this._groups(),\n                    scrollbar = kendo.support.scrollbar(),\n                    cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    width = columnsWidth(cols),\n                    nonLockedColsWidth = columnsWidth(nonLockedCols),\n                    footerWrap;\n\n                if (groups > 0 && calculateGroupWidth) {\n                    width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                }\n\n                if (width >= contentWidth) {\n                    width = contentWidth - 3 * scrollbar;\n                }\n\n                this.lockedHeader\n                    .add(this.lockedContent)\n                    .width(width);\n\n                headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + PX;\n\n                headerTable.add(this.table).width(nonLockedColsWidth);\n\n                //https://github.com/telerik/kendo-ui-core/issues/377\n                if (this.virtualScrollable && !isIE11) {\n                    contentWidth -= scrollbar;\n                }\n\n                this.content[0].style.width = contentWidth - width - 1 + PX;\n\n                if (this.lockedFooter && this.lockedFooter.length) {\n                    this.lockedFooter.width(width);\n                    footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                    footerWrap[0].style.width = headerWrap[0].clientWidth + PX;\n                    footerWrap.children().first().width(nonLockedColsWidth);\n                }\n            }\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height,\n                header = that.wrapper.children(\".k-grid-header\"),\n                scrollbar = kendo.support.scrollbar();\n            var scrollableHeight = (options.scrollable || {}).height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n                if (scrollableHeight && that.content[0].style.height === \"\") {\n                    // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                    that.content[0].style.height = scrollableHeight;\n                }\n\n                height = that.wrapper.innerHeight();\n\n                height -= outerHeight(header);\n\n                if (that.pager && that.pager.element.is(\":visible\")) {\n                    height -= outerHeight(that.pager.element);\n                }\n\n                if (options.groupable) {\n                    height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                }\n\n                if (options.toolbar) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                }\n\n                if (that.footerTemplate) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                }\n\n                if (that.statusBar) {\n                    height -= outerHeight(that.wrapper.children(\".k-selection-aggregates\"));\n                }\n\n                var isGridHeightSet = function(el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n\n                    el.height(AUTO);\n                    newHeight = el.height();\n\n                    if (initialHeight != newHeight) {\n                        el.height(\"\");\n                        return true;\n                    }\n                    el.height(\"\");\n                    return false;\n                };\n\n                if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                    if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                        if (that.lockedContent) {\n                            scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                            that.lockedContent.height(height - scrollbar);\n                        }\n\n                        that.content.height(height);\n                    } else {\n                        that.content.height(scrollbar * 2 + 1);\n                    }\n                }\n            }\n        },\n\n        _averageRowHeight: function() {\n            var that = this,\n                itemsCount = that._items(that.tbody, true).length,\n                rowHeight = that._rowHeight;\n\n            if (itemsCount === 0) {\n                return rowHeight;\n            }\n\n            if (!that._rowHeight) {\n                that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                that._sum = rowHeight;\n                that._measures = 1;\n            }\n\n            var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n            if (rowHeight !== currentRowHeight) {\n                that._measures ++;\n                that._sum += currentRowHeight;\n                that._rowHeight = that._sum / that._measures;\n            }\n            return rowHeight;\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                pageable,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (isPlainObject(dataSource)) {\n                extend(dataSource, { table: that.table, fields: that.columns });\n\n                pageable = options.pageable;\n\n                if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                    dataSource.pageSize = pageable.pageSize;\n                }\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                .unbind(PROGRESS, that._progressHandler)\n                                .unbind(REQUESTEND, that._requestEndHandler)\n                                .unbind(ERROR, that._errorHandler)\n                                .unbind(SORT, that._sortHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._requestEndHandler = that._requestEnd.bind(that);\n                that._errorHandler = that._error.bind(that);\n                that._sortHandler = that._clearSortClasses.bind(that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(REQUESTEND, that._requestEndHandler)\n                                .bind(ERROR, that._errorHandler)\n                                .bind(SORT, that._sortHandler);\n        },\n\n        _error: function() {\n            this._progress(false);\n            this._requestInProgress = false;\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n            this._requestInProgress = true;\n        },\n\n        _requestEnd: function() {\n            this._requestInProgress = false;\n        },\n\n        _modelChange: function(e) {\n            var that = this,\n                tbody = that.tbody,\n                model = e.model,\n                row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                relatedRow,\n                cell,\n                column,\n                isAlt = row.hasClass(\"k-alt\"),\n                tmp,\n                idx = that._items(tbody).index(row),\n                isLocked = that.lockedContent,\n                selectable,\n                selectableRow,\n                childCells,\n                originalCells,\n                length;\n\n            if (isLocked) {\n                relatedRow = that._relatedRow(row);\n            }\n\n            if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (column.field === e.field) {\n                        if (!cell.hasClass(\"k-edit-cell\")) {\n                            that._displayCell(cell, column, model);\n                        } else {\n                            cell.addClass(\"k-dirty-cell\");\n                        }\n                    }\n                });\n\n            } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                selectableRow = $().add(row);\n\n                if (isLocked) {\n                    tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                    selectableRow = selectableRow.add(relatedRow);\n\n                    relatedRow.replaceWith(tmp);\n                }\n\n                tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                let tmpResult = $(tmp);\n                kendo.applyStylesFromKendoAttributes(tmpResult, [\"display\"]);\n                row.replaceWith(tmpResult);\n\n                tmp = that._items(tbody).eq(idx);\n\n                if (isLocked) {\n                    row = row.add(relatedRow);\n\n                    relatedRow = that._relatedRow(tmp)[0];\n                    adjustRowHeight(tmp[0], relatedRow);\n\n                    tmp = tmp.add(relatedRow);\n                }\n\n                selectable = that.options.selectable;\n                if ((selectable || that._checkBoxSelection) && row.hasClass(SELECTED)) {\n                   that.select(tmp);\n                }\n\n                originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                    column = that.columns[idx];\n\n                    cell = childCells.eq(idx);\n                    if (selectable && originalCells.eq(idx).hasClass(SELECTED)) {\n                        cell.addClass(SELECTED);\n                    }\n                }\n\n                that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n            }\n        },\n\n        _pageable: function() {\n            var that = this,\n                pagerWrap,\n                pageable = that.options.pageable,\n                size = that.options.size,\n                navigatable = that.options.navigatable;\n\n            if (pageable) {\n                pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                if (!pagerWrap.length) {\n                    pagerWrap = $('<div class=\"k-pager k-grid-pager\"/>');\n                }\n\n                if (pageable.position === \"top\") {\n                    pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                } else {\n                    pagerWrap.appendTo(that.wrapper);\n                }\n\n                if (that.pager) {\n                    that.pager.destroy();\n                }\n\n                if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                    that.pager = pageable;\n                } else {\n                    if (that.dataSource._groupPaging) {\n                        that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    } else {\n                        that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable, size: size }));\n                    }\n                }\n\n                that.pager.bind(\"pageChange\", function(e) {\n                    if (that.trigger(\"page\", { page: e.index })) {\n                        e.preventDefault();\n                    }\n                });\n\n                that._togglePagerVisibility();\n            }\n        },\n\n        _statusBar: function() {\n            var that = this,\n                options = that.options,\n                wrapper = that.wrapper,\n                statusBarTemplate = options.statusBarTemplate,\n                content = \"\";\n\n            if (statusBarTemplate) {\n                if (!that.statusBar) {\n                    content += '<div class=\"k-selection-aggregates k-grid-selection-aggregates\">';\n\n                    content += statusBarTemplate({ aggregates: that._cellAggregates });\n\n                    content += '</div>';\n\n                    if (options.scrollable) {\n                        that.statusBar = $(content).insertAfter(wrapper.find(DOT + \"k-grid-container\"));\n                    } else {\n                        that.statusBar = $(content).insertAfter(wrapper.find(DOT + \"k-grid-table\"));\n                    }\n                } else {\n                    that.statusBar.html(statusBarTemplate({ aggregates: that._cellAggregates }));\n                }\n            }\n        },\n\n        _footer: function() {\n            var that = this,\n                aggregates = that.dataSource.aggregates(),\n                html = \"\",\n                footerTemplate = that.footerTemplate,\n                options = that.options,\n                footerWrap,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            if (footerTemplate) {\n                html = $(that._wrapFooter(footerTemplate(aggregates)));\n                kendo.applyStylesFromKendoAttributes(html, [\"display\", \"left\", \"right\"]);\n\n                if (footer.length) {\n                    var tmp = html;\n\n                    footer.replaceWith(tmp);\n                    footer = that.footer = tmp;\n                } else {\n                    if (options.scrollable) {\n                        if (that.statusBar) {\n                            that.footer = html.insertBefore(that.statusBar);\n                        } else if (options.pageable && options.pageable.position !== \"top\") {\n                            that.footer = html.insertBefore(that.wrapper.children(\"div.k-grid-pager\"));\n                        } else {\n                            that.footer = html.appendTo(that.wrapper);\n                        }\n                        footer = that.footer;\n                    } else {\n                        footer = that.footer = html.insertAfter(that.tbody);\n                    }\n                }\n            } else if (footer && !that.footer) {\n                that.footer = footer;\n            }\n\n            if (footer.length) {\n                if (options.scrollable) {\n                    footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                    that.scrollables = $(\n                        that.scrollables\n                            .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                            .toArray()\n                    ).add(footerWrap);\n                }\n\n                if (that._footerWidth) {\n                    footer.find(\"table\").css('width', that._footerWidth);\n                }\n\n                if (footerWrap) {\n                    var offset = kendo.scrollLeft(that.content);\n\n                    if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                        offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                    }\n                    kendo.scrollLeft(footerWrap, offset);\n                }\n            }\n\n            if (that.lockedContent) {\n                that._appendLockedColumnFooter();\n                that._applyLockedContainersWidth();\n                that._syncLockedFooterHeight();\n            }\n        },\n\n        _wrapFooter: function(footerRow) {\n            var that = this,\n                html = \"\",\n                table,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n            if (that.options.scrollable) {\n                html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table class=\"k-table k-grid-footer-table\"><tfoot class=\"k-table-tfoot\">' + footerRow + '</tfoot></table></div></div>');\n                table = html.find(\"table\");\n                table.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                that._appendCols(table);\n                html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                return html;\n            }\n\n            return '<tfoot class=\"k-grid-footer k-table-tfoot\">' + footerRow + '</tfoot>';\n        },\n\n        _globalColumnsMenu: function(cell) {\n            var that = this,\n                menu,\n                columns = leafColumns(that.columns),\n                options = that.options,\n                columnMenu = options.columnMenu,\n                menuOptions,\n                initCallback = function(e) {\n                    that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                },\n                openCallback = function(e) {\n                    that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    cell.trigger(\"focus\");\n                };\n\n            if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                let toggleable = !!(columnMenu.autoSize || columnMenu.clearAllFilters);\n\n                menu = cell.data(\"kendoColumnMenu\");\n                if (menu) {\n                    menu.destroy();\n                }\n\n                let columnsExpanderOptions = {\n                    toggleable: toggleable,\n                    expanded: columnMenu.expanded || true,\n                    animation: false,\n                    hideExpanderIndicator: !toggleable\n                };\n\n                menuOptions = {\n                    dataSource: that.dataSource,\n                    columns: columnMenu.columns,\n                    sortable: false,\n                    filterable: false,\n                    clearAllFilters: columnMenu.clearAllFilters,\n                    messages: columnMenu.messages,\n                    hideAutoSizeColumn: true,\n                    owner: that,\n                    closeCallback: closeCallback,\n                    init: initCallback,\n                    open: openCallback,\n                    pane: that.pane,\n                    autoSize: columnMenu.autoSize,\n                    encodeTitles: that.options.encodeTitles,\n                    componentType: \"modern\",\n                    columnsExpanderOptions: columnsExpanderOptions\n                };\n\n                cell.kendoColumnMenu(menuOptions);\n            }\n        },\n\n        _columnMenu: function() {\n            var that = this,\n                menu,\n                columns = leafColumns(that.columns),\n                column,\n                options = that.options,\n                columnMenu = options.columnMenu,\n                menuOptions,\n                sortable,\n                filterable,\n                cells,\n                hasMultiColumnHeaders = grep(that.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0,\n                hasLockableColumns = grep(that.columns, function(item) {\n                    return item.lockable !== false;\n                }).length > 0,\n                hasStickableColumns = grep(that.columns, function(item) {\n                    return item.stickable === true;\n                }).length > 0,\n                isMobile = this._isMobile,\n                initCallback = function(e) {\n                    that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                },\n                openCallback = function(e) {\n                    that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                stickCallback = function(e) {\n                    that.trigger(COLUMNSTICK, { column: e.column });\n                },\n                unstickCallback = function(e) {\n                    that.trigger(COLUMNUNSTICK, { column: e.column });\n                },\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n            if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    var cell = cells.eq(idx);\n\n                    if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        menu = cell.data(\"kendoColumnMenu\");\n                        if (menu) {\n                            menu.destroy();\n                        }\n\n                        sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                            compare: (column.sortable || {}).compare\n                        }) : false;\n\n                        filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend(true, { pane: that.pane }, options.filterable, column.filterable) : false;\n\n                        if (column.filterable && column.filterable.dataSource) {\n                            filterable.forceUnique = false;\n                            filterable.checkSource = column.filterable.dataSource;\n                        }\n\n                        if (filterable) {\n                            filterable.format = column.format;\n                        }\n\n                        menuOptions = {\n                            dataSource: that.dataSource,\n                            values: column.values,\n                            columns: columnMenu.columns,\n                            sortable: sortable,\n                            filterable: filterable,\n                            messages: columnMenu.messages,\n                            owner: that,\n                            closeCallback: closeCallback,\n                            init: initCallback,\n                            open: openCallback,\n                            stick: stickCallback,\n                            unstick: unstickCallback,\n                            pane: that.pane,\n                            sort: sortHandler,\n                            filtering: filterHandler,\n                            filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                            autoSize: columnMenu.autoSize,\n                            hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                            hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                            encodeTitles: that.options.encodeTitles,\n                            componentType: columnMenu.componentType,\n                            appendTo: DOT + classNames.headerCellInner,\n                            reorderable: options.reorderable === true || (options.reorderable && options.reorderable.columns),\n                            groupable: that.options.groupable && that.options.groupable.enabled !== false && column.groupable !== false\n                        };\n\n                        cell.kendoColumnMenu(menuOptions);\n                    }\n                }\n            }\n        },\n\n        _headerCells: function() {\n            return $(this.thead).find(\"th\").filter(function() {\n                var th = $(this);\n                return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n            });\n        },\n\n        _hasFilterMenu: function() {\n            var filterable = this.options.filterable;\n            if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                return false;\n            }\n\n            return filterable;\n        },\n\n        _filterable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                filterMenu,\n                cells,\n                cell,\n                filterInit = function(e) {\n                    that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterOpen = function(e) {\n                    that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                },\n                filterable = that._hasFilterMenu();\n\n            if (filterable && !that.options.columnMenu) {\n                cells = leafDataCells(that.thead);//that._headerCells();\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    cell = cells.eq(idx);\n\n                    if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        filterMenu = cell.data(\"kendoFilterMenu\");\n\n                        if (filterMenu) {\n                            filterMenu.destroy();\n                        }\n\n                        filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                        if (filterMenu) {\n                           filterMenu.destroy();\n                        }\n\n                        var columnFilterable = columns[idx].filterable;\n\n                        var options = extend({},\n                            filterable,\n                            columnFilterable,\n                            {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler,\n                                appendTo: DOT + classNames.headerCellInner\n                            }\n                        );\n\n                        if (columnFilterable && columnFilterable.messages) {\n                            options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                        }\n                        if (columnFilterable && columnFilterable.dataSource) {\n                            options.forceUnique = false;\n                            options.checkSource = columnFilterable.dataSource;\n                        }\n\n                        if (columnFilterable && columnFilterable.multi) {\n                            cell.kendoFilterMultiCheck(options);\n                        } else {\n                            cell.kendoFilterMenu(options);\n                        }\n                    }\n                }\n            }\n        },\n\n        _filterRow: function() {\n            var that = this;\n            if (!that._hasFilterRow()) {\n               return;\n            }\n\n            var settings;\n            var columns = leafColumns(that.columns),\n                filterable = that.options.filterable,\n                rowheader = that.thead.find(\".k-filter-row\"),\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n\n            this._updateHeader(that._groups());\n\n            for (var i = 0; i < columns.length; i++) {\n                var suggestDataSource,\n                    col = columns[i],\n                    operators = that.options.filterable.operators,\n                    customDataSource = false,\n                    td = $(\"<td class='k-table-td' title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                    field = col.field;\n\n                if (col.hidden) {\n                    td.hide();\n                }\n                rowheader.append(td);\n                if (field && col.filterable !== false) {\n                    var cellOptions = col.filterable && col.filterable.cell || {};\n\n                    suggestDataSource = that.options.dataSource;\n                    if (suggestDataSource instanceof DataSource) {\n                        suggestDataSource = that.options.dataSource.options;\n                    }\n\n                    var messages = extend(true, {}, filterable.messages);\n                    if (col.filterable) {\n                        extend(true, messages, col.filterable.messages);\n                    }\n\n                    if (cellOptions.enabled === false) {\n                        td.html(\"&nbsp;\");\n                        continue;\n                    }\n                    if (cellOptions.dataSource) {\n                        suggestDataSource = cellOptions.dataSource;\n                        customDataSource = true;\n                    }\n                    if (col.filterable && col.filterable.operators) {\n                        operators = col.filterable.operators;\n                    }\n\n                    settings = {\n                        column: col,\n                        dataSource: that.dataSource,\n                        suggestDataSource: suggestDataSource,\n                        customDataSource: customDataSource,\n                        field: field,\n                        messages: messages,\n                        size: that.options.size,\n                        values: col.values,\n                        template: cellOptions.template,\n                        delay: cellOptions.delay,\n                        inputWidth: cellOptions.inputWidth,\n                        suggestionOperator: cellOptions.suggestionOperator,\n                        minLength: cellOptions.minLength,\n                        dataTextField: cellOptions.dataTextField,\n                        operator: cellOptions.operator,\n                        operators: operators,\n                        showOperators: cellOptions.showOperators,\n                        change: filterHandler\n                    };\n\n                    $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                        .appendTo(td)\n                        .kendoFilterCell(settings);\n                } else {\n                    td.html(\"&nbsp;\");\n                }\n                td.data(\"column\", col);\n            }\n\n            this._filterFocusable().attr(TABINDEX, -1);\n        },\n\n        _sortable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                column,\n                sorterInstance,\n                cell,\n                sortable = that.options.sortable,\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                    }\n                };\n\n\n            if (sortable) {\n                var cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.destroy();\n                        }\n\n                        cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                            .kendoColumnSorter(\n                                extend({}, sortable, column.sortable, {\n                                    dataSource: that.dataSource,\n                                    aria: true,\n                                    filter: \":not(.k-column-active)\",\n                                    change: sortHandler\n                                })\n                            );\n                    }\n                }\n                cells = null;\n            }\n        },\n\n        _columns: function(columns) {\n            var that = this,\n                table = that.table,\n                encoded,\n                cols = table.find(\"col\"),\n                lockedCols,\n                headerRows = that.element.find('thead tr'),\n                dataSource = that.options.dataSource,\n                draggableColumns;\n\n            // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n            columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                th = $(th);\n                var sortable = th.attr(kendo.attr(\"sortable\")),\n                    filterable = th.attr(kendo.attr(\"filterable\")),\n                    type = th.attr(kendo.attr(\"type\")),\n                    groupable = th.attr(kendo.attr(\"groupable\")),\n                    field = th.attr(kendo.attr(\"field\")),\n                    title = th.attr(kendo.attr(\"title\")),\n                    columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                    menu = th.attr(kendo.attr(\"menu\"));\n\n                if (!field) {\n                   field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                }\n\n                return {\n                    field: field,\n                    type: type,\n                    title: title,\n                    sortable: sortable !== \"false\",\n                    filterable: filterable !== \"false\",\n                    groupable: groupable !== \"false\",\n                    menu: menu !== \"false\",\n                    columnMenu: columnMenu !== \"false\",\n                    template: th.attr(kendo.attr(\"template\")),\n                    width: cols.eq(idx).css(WIDTH)\n                };\n            });\n\n            encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n            if (that.options.scrollable) {\n                var initialColumns = columns;\n                lockedCols = lockedColumns(columns);\n                columns = nonLockedColumns(columns);\n\n                if (lockedCols.length > 0 && columns.length === 0) {\n                    throw new Error(\"There should be at least one non locked column\");\n                }\n\n                normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                columns = lockedCols.concat(columns);\n            }\n\n            if (headerRows.length && columns.length) {\n                that._updateColumnIDs(columns, headerRows.first());\n            }\n\n            that.columns = normalizeColumns(columns, encoded);\n\n            if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                that._selectedIds = {};\n                that._checkBoxSelection = true;\n                that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n            }\n\n            draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n            if (draggableColumns.length) {\n                that._hasDragHandleColumn = true;\n\n                for (var i = 0; i < draggableColumns.length; i++) {\n                    draggableColumns[i].headerAttributes = $.extend({\n                        \"aria-label\": that.options.messages.dragHandleLabel\n                    }, draggableColumns[i].headerAttributes);\n                }\n            }\n\n            that._foreignKeyBindings(that.columns);\n        },\n\n        _foreignKeyBindings: function(columns) {\n            var that = this;\n            var length = columns.length;\n            var column;\n\n            for (var i = 0; i < length; i++) {\n                column = columns[i];\n\n                if (column.dataSource) {\n                    that._fetchForeignKeyValues(column);\n                }\n            }\n        },\n\n        _fetchForeignKeyValues: function(column) {\n            var that = this;\n            var promise = $.Deferred();\n\n            that._hasBoundForeignKey = true;\n            column.dataSource = DataSource.create(column.dataSource);\n\n            if (!that._foreignKeyPromises) {\n                that._foreignKeyPromises = [];\n            }\n\n            that._foreignKeyPromises.push(promise);\n            column.dataSource.fetch().then(function() {\n                var data = column.dataSource.data();\n                column.values = data.map(function(item) {\n                    return {\n                        value: item[column.dataValueField],\n                        text: item[column.dataTextField]\n                    };\n                });\n                promise.resolve();\n            });\n\n        },\n\n        _updateColumnIDs: function(columns, tr) {\n\n            if (!columns.length) {\n                return;\n            }\n\n            var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n            var id;\n            for (var i = 0; i < columns.length; i++) {\n                id = ths.eq(i).attr(ID);\n                if (id) {\n                    columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                }\n            }\n\n            this._updateColumnIDs(childColumns(columns), tr.next());\n        },\n\n        _headerCheckboxClick: function(e) {\n            var that = this,\n                checkBox = $(e.target),\n                checked = checkBox.prop(\"checked\");\n\n            if (!that._belongsToGrid(checkBox)) {\n                return;\n            }\n\n            if (that.trigger(CHANGING, { target: checkBox, originalEvent: e })) {\n                e.preventDefault();\n                return;\n            }\n\n            if (checked) {\n                that.select(that.items());\n            } else {\n                that.clearSelection();\n            }\n\n            that._calculateAggregatesForSelected();\n            that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n        },\n\n        _checkboxClick: function(e) {\n            var that = this,\n                row = $(e.target).closest(TR),\n                isSelecting = !row.hasClass(SELECTED);\n\n            if (!that._belongsToGrid(row)) {\n                return;\n            }\n\n            if (that.trigger(CHANGING, { target: row, originalEvent: e })) {\n                e.preventDefault();\n                return;\n            }\n\n            if (isSelecting) {\n                that.select(row);\n            } else {\n                that._deselectCheckRows(row);\n            }\n            that._calculateAggregatesForSelected();\n            that.trigger(CHANGE, { cellAggregates: that._cellAggregates });\n        },\n\n        _groups: function() {\n            var group = this.dataSource.group();\n\n            return group ? group.length : 0;\n        },\n\n        _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                idx,\n                length = columns.length,\n                template,\n                state = { storage: {}, count: 0 },\n                column,\n                type,\n                hasDetails = that._hasDetails(),\n                groups = that._groups();\n\n            var fieldAttr = kendo.attr(\"field\");\n            var field;\n            var classAttribute;\n            var compiledAttributes;\n            let rowTemplateFunc;\n\n            if (!rowTemplate) {\n                rowTemplateFunc = (data) => {\n                    var uid = length ? ` ${kendo.attr(\"uid\")}=\"${kendo.getter(\"uid\")(data)}\"` : '';\n                    var rowTemplateResult = `<tr class=\"${alt ? 'k-alt k-table-row k-table-alt-row ' : 'k-table-row '}k-master-row\"${uid}>`;\n\n                    if (groups > 0 && !skipGroupCells) {\n                        rowTemplateResult += groupCells(groups);\n                    }\n\n                    if (hasDetails) {\n                        rowTemplateResult += '<td class=\"k-hierarchy-cell k-table-td\" aria-expanded=\"false\">' + kendo.ui.icon($(`<a href=\"#\" ${ARIA_LABEL}=\"${EXPAND}\" tabindex=\"-1\"></a>`), { icon: `caret-alt-${isRtl ? \"left\" : \"right\"}` }) + '</td>';\n                    }\n\n                    for (idx = 0; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column.template;\n                        type = typeof template;\n                        field = column.field;\n                        compiledAttributes = {};\n\n                        let dirtyCellTemplate;\n\n                        if (that._editMode() && field) {\n                            column.attributes = column.attributes || {};\n\n                            if (that.virtualScroll) {\n                                column.attributes[fieldAttr] = field;\n                            }\n\n                            dirtyCellTemplate = that._dirtyCellTemplate(field)(data);\n                        }\n\n                        if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                            column.attributes = removeHiddenStyle(column.attributes);\n                        } else if (!column.colSpan && column.hidden) {\n                            column.attributes = addHiddenStyle(column.attributes);\n                        }\n\n                        if (column.command) {\n                            column.attributes = column.attributes || {};\n                            classAttribute = column.attributes[\"class\"];\n\n                            if (typeof classAttribute !== \"undefined\") {\n                                if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                    column.attributes[\"class\"] += \" k-command-cell\";\n                                }\n                            } else {\n                                column.attributes[\"class\"] = \"k-command-cell\";\n                            }\n                        }\n\n                        if (column.draggable) {\n                            column.attributes = column.attributes || {};\n                            if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                                if (column.attributes[\"class\"].indexOf(\"k-drag-cell k-touch-action-none\") < 0) {\n                                    column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                                }\n                            } else {\n                                column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                            }\n\n                            if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                                column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                            }\n\n                            if (typeof column.attributes.style !== \"undefined\") {\n                                if (column.attributes.style.indexOf(\"cursor: move;\") < 0) {\n                                    column.attributes.style += \" cursor: move;\";\n                                }\n                            } else {\n                                column.attributes.style = \"cursor: move;\";\n                            }\n                        }\n\n                        if (column._attributesFunction) {\n                            compiledAttributes = column._attributesFunction(data);\n                        }\n\n                        let attributes = extend({}, column.attributes, compiledAttributes);\n                        if (dirtyCellTemplate) {\n                            attributes[\"class\"] = (attributes[\"class\"] || \"\");\n                            attributes[\"class\"] += dirtyCellTemplate;\n                        }\n                        let columnAttributes = stringifyAttributes(attributes);\n                        let colSpanAttributes = '';\n\n                        if (column.colSpan) {\n                            if (column.colSpan > 1) {\n                                colSpanAttributes += \" \" + kendo.attr(\"virtual\");\n                            }\n                            colSpanAttributes += ` colSpan=\"${column.colSpan}\"`;\n                        }\n                        rowTemplateResult += decorateCellWithClass(`<td${columnAttributes}${colSpanAttributes}>`);\n                        rowTemplateResult += column.selectable ? kendo.template(SELECTCOLUMNTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) }) : that._cellTmpl(column, state)(data);\n                        rowTemplateResult += \"</td>\";\n                    }\n\n                    rowTemplateResult += \"</tr>\";\n                    return rowTemplateResult;\n                };\n            }\n\n            rowTemplate = kendo.template(rowTemplate || rowTemplateFunc, settings);\n\n            if (state.count > 0) {\n                return rowTemplate.bind(state.storage);\n            }\n\n            return rowTemplate;\n        },\n\n        _dirtyCellTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? ' k-dirty-cell' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _headerCellText: function(column) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.headerTemplate,\n                type = typeof(template),\n                text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || htmlEncode(column.field || \"\");\n\n            if (type === FUNCTION) {\n                text = kendo.template(template, settings)({});\n            } else if (type === STRING) {\n                text = template;\n            }\n            return text;\n        },\n\n        _cellTmpl: function(column, state) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.template,\n                field = column.field,\n                // html = \"\",\n                idx,\n                length,\n                format = column.format,\n                type = typeof template,\n                columnValues = column.values;\n\n            if (column.command) {\n                if (isArray(column.command)) {\n                    return (data) => {\n                        let html = \"\";\n                        for (idx = 0, length = column.command.length; idx < length; idx++) {\n                            if (column.command[idx].visible) {\n                                html += column.command[idx].visible(data) ? that._createButton(column.command[idx]) : '';\n                            } else {\n                                html += that._createButton(column.command[idx]);\n                            }\n                        }\n                        return html;\n                    };\n                }\n                return () => that._createButton(column.command);\n            }\n\n            if (column.selectable) {\n                return SELECTCOLUMNTMPL;\n            }\n\n            if (column.draggable) {\n                return DRAGHANDLECOLUMNTMPL;\n            }\n\n            return (data) => {\n                let html = that._dirtyIndicatorTemplate(field)(data);\n\n                if (type === FUNCTION) {\n                    state.storage[\"tmpl\" + state.count] = template;\n                    html += template(data);\n                    state.count++;\n                } else if (type === STRING) {\n                    html += kendo.template(template, settings)(data);\n                } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                    var v = convertToObject(columnValues);\n                    var f = v[settings.useWithBlock ? kendo.getter(field)(data) : field];\n                    html += encode(f != null ? f : '');\n                } else {\n                    let fieldValue = '';\n                    if (field) {\n                        field = kendo.getter(field)(data);\n                        fieldValue = field == null ? '' : field;\n                    }\n\n                    if (format) {\n                        fieldValue = kendo.format(format.replace(formatRegExp, \"$1\"), fieldValue);\n                    }\n\n                    html += column.encoded ? encode(fieldValue) : fieldValue;\n                }\n\n                return html;\n            };\n        },\n\n        _dirtyIndicatorTemplate: function(field) {\n            return (data) => {\n                if (field && data && data.dirty && data.dirtyFields) {\n                    let dirtyField = field.charAt(0) === \"[\" ? kendo.getter(field)(data.dirtyFields) : data.dirtyFields[field];\n                    return dirtyField ? '<span class=\\\"k-dirty\\\"></span>' : '';\n                }\n\n                return \"\";\n            };\n        },\n\n        _virtualCols: function(columns) {\n            var that = this;\n            var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n            var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n            var tableWidth = outerWidth(that.content);\n            var sumOfWidths = sumWidths(columns);\n            var colsToRender = [];\n            var firstColspan = 0;\n            var lastColspan = 0;\n            var hiddenColumns = 0;\n            var idx = 0;\n            var widthOfHiddenColumns = 0;\n            var considerNext;\n\n            for (idx = 0; idx < columns.length; idx++) {\n                considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                    if (widths[idx]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[idx];\n                } else {\n                    firstColspan = 1 + hiddenColumns;\n                    break;\n                }\n            }\n\n            hiddenColumns = 0;\n            widthOfHiddenColumns = 0;\n\n            for (var i = columns.length - 1; i >= 0; i--) {\n                if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                    if (widths[i]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[i];\n                } else {\n                    lastColspan = 1 + hiddenColumns;\n                    for (var j = idx; j <= i; j++) {\n                        if (columns[j].locked) {\n                            continue;\n                        }\n                        colsToRender.push(columns[j]);\n                        if (columns[j].colSpan) {\n                            delete columns[j].colSpan;\n                        }\n                    }\n                    colsToRender[0].colSpan = firstColspan;\n                    colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                    break;\n                }\n            }\n\n            if (colsToRender[0].hidden) {\n                colsToRender[0].colSpan--;\n            }\n\n            that.virtualCols = colsToRender;\n\n            return colsToRender;\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                dataSource = that.dataSource,\n                groups = dataSource.group(),\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                aggregates = dataSource.aggregate(),\n                columnLeafs = leafColumns(that.columns),\n                columnsLocked = leafColumns(lockedColumns(that.columns)),\n                leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (options.scrollable && columnsLocked.length) {\n                if (options.rowTemplate || options.altRowTemplate) {\n                    throw new Error(\"Having both row template and locked columns is not supported\");\n                }\n\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n            } else {\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n            }\n\n            if (that._hasDetails()) {\n                that.detailTemplate = that._detailTmpl(options.detailTemplate || (() => \"\"));\n            }\n\n            if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template k-table-row\");\n            }\n\n            if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\", columnsLocked.length);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer k-table-row\");\n                }\n            }\n\n            if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-table-group-row k-grouping-row k-table-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                }\n            } else {\n                that.groupHeaderColumnTemplate = null;\n                that.lockedGroupHeaderColumnTemplate = null;\n            }\n\n            if (that.options.noRecords) {\n                that.noRecordsTemplate = that._noRecordsTmpl();\n            }\n        },\n\n        _noRecordsTmpl: function() {\n            var wrapper = '<div class=\"{0}\">{1}</div>';\n            var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n            var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? ` ${kendo.attr(\"style-margin\")}=\"0 auto\" ${kendo.attr(\"style-position\")}=\"static\"` : '';\n            var state = { storage: {}, count: 0 };\n            var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var template;\n            // var html = \"\";\n            var type;\n            var tmpl;\n            let resultTemplate;\n\n            if (this.options.noRecords.template) {\n                template = this.options.noRecords.template;\n            } else {\n                template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n            }\n\n            type = typeof template;\n            if (type === \"function\") {\n                let currentCustomTemplate = state.storage[\"tmpl\" + state.count] = template;\n                state.count++;\n                resultTemplate = (data) => kendo.format(wrapper, NORECORDSCLASS, currentCustomTemplate(data));\n\n            } else if (type === \"string\") {\n                resultTemplate = this.options.noRecords.template ?\n                    kendo.format(wrapper, NORECORDSCLASS, template)\n                    : () => kendo.format(wrapper, NORECORDSCLASS, template);\n            }\n\n            tmpl = kendo.template(resultTemplate, settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            return tmpl;\n        },\n\n        _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                // html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                groups = that._groups(),\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column;\n\n            let footerTemplateFunction = (data) => {\n                let html = '<tr class=\"' + rowClass + '\">';\n\n                if (groups > 0 && !skipGroupCells) {\n                    html += groupCells(groups);\n                }\n\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell k-table-td\">&nbsp;</td>';\n                }\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    html += decorateCellWithClass(\"<td\" + stringifyAttributes(column.footerAttributes) + \">\");\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        html += template(data);\n                        count++;\n                    } else {\n                        html += \"&nbsp;\";\n                    }\n\n                    html += \"</td>\";\n                }\n\n                html += '</tr>';\n                return html;\n            };\n\n            let resultTemplate = kendo.template(footerTemplateFunction, settings);\n\n            if (count > 0) {\n                return resultTemplate.bind(storage);\n            }\n\n            return resultTemplate;\n        },\n\n        _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column,\n                headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                groupHeaderColumnTemplateClass;\n\n            if (headerTemplateIndex < 0) {\n                return;\n            }\n            var groupHeaderTemplFunc = (data) => {\n                var resultHtml = '<tr data-group-uid=\"' + data.uid + '\" class=\"' + rowClass + '\">';\n\n                if (!skipGroupCells) {\n                    for (var i = 0; i < data.groupCells; i++) {\n                        resultHtml += '<td class=\"k-table-td k-group-cell\">&nbsp;</td>';\n                    }\n                }\n\n                if (that._hasDetails()) {\n                    resultHtml += '<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>';\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(columns.length)(data) : '';\n                    return resultHtml;\n                    // return kendo.template(resultHtml, settings);\n                }\n\n                if (headerTemplateIndex < MINCOLSPANVALUE) {\n                    headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : '';\n                }\n                else {\n                    resultHtml += !skipGroupCells ? groupCellBuilder(headerTemplateIndex)(data) : groupCellLockedContentBuilder(headerTemplateIndex);\n                }\n\n                for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n\n                    if (column.sticky) {\n                        let stickyAttributes = '';\n                        groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                        if (!groupHeaderColumnTemplateClass) {\n                            groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                        }\n\n                        if (isPlainObject(column.stickyStyle)) {\n                            let stickyLeft = column.stickyStyle.left ? `${kendo.attr(\"style-left\")}=\"${column.stickyStyle.left}\"` : '';\n                            let stickyRight = column.stickyStyle.right ? `${kendo.attr(\"style-right\")}=\"${column.stickyStyle.right}\"` : '';\n                            stickyAttributes = `${stickyLeft} ${stickyRight}`;\n                        }\n\n                        resultHtml += `<td class=\"k-table-td ${STICKY_CELL_CLASS} ${groupHeaderColumnTemplateClass}\" ${stickyAttributes}>`;\n                    } else {\n                        resultHtml += \"<td class='k-table-td'>\";\n                    }\n\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                            template = kendo.template(template, scope);\n                        }\n\n                        storage[\"tmpl\" + count] = template;\n                        resultHtml += storage[\"tmpl\" + count](data);\n                        count++;\n                    } else {\n                        resultHtml += \"&nbsp;\";\n                    }\n\n                    resultHtml += \"</td>\";\n                }\n\n                resultHtml += '</tr>';\n\n                return resultHtml;\n            };\n\n            html = kendo.template(groupHeaderTemplFunc, settings);\n\n            if (count > 0) {\n                return html.bind(storage);\n            }\n\n            return html;\n        },\n\n        _detailTmpl: function(template) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                templateFunctionStorage = {},\n                templateFunctionCount = 0,\n                groups = that._groups(),\n                colspan = visibleColumns(leafColumns(that.columns)).length,\n                type = typeof template;\n\n            let detailTemplateFunction = (data) => {\n                let html = '<tr role=\"row\" class=\"k-detail-row k-table-row\">';\n                if (groups > 0) {\n                    html += groupCells(groups);\n                }\n\n                html += `<td role=\"gridcell\" class=\"k-hierarchy-cell k-table-td\"></td><td role=\"gridcell\" class=\"k-table-td k-detail-cell\"${colspan ? ` colspan=\"${colspan}\"` : ''}>`;\n                if (type === FUNCTION) {\n                    templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                    html += template(data);\n                    templateFunctionCount++;\n                } else {\n                    html += kendo.template(template, settings)(data);\n                }\n\n                html += \"</td></tr>\";\n                return html;\n            };\n\n            let resultTemplate = kendo.template(detailTemplateFunction, settings);\n\n            if (templateFunctionCount > 0) {\n                return resultTemplate.bind(templateFunctionStorage);\n            }\n\n            return resultTemplate;\n        },\n\n        _hasDetails: function() {\n            var that = this;\n\n            return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n        },\n        _hasFilterRow: function() {\n            var filterable = this.options.filterable;\n            var hasFiltering = filterable &&\n                    typeof filterable.mode == STRING &&\n                    filterable.mode.indexOf(ROW) != -1;\n            var columns = this.columns;\n            var columnsWithoutFiltering = $.grep(columns, function(col) {\n                return col.filterable === false;\n            });\n\n            if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                hasFiltering = false;\n            }\n\n            return hasFiltering;\n        },\n\n        _details: function() {\n            var that = this;\n\n            if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                throw new Error(\"Having both detail template and locked columns is not supported\");\n            }\n\n            that.table.on(CLICK + NS, \".k-hierarchy-cell \" + CARET_ALT_RIGHT + \", .k-hierarchy-cell \" + CARET_ALT_DOWN, function(e) {\n                var button = $(this);\n\n                that._toggleDetails(button);\n                e.preventDefault();\n                return false;\n            });\n        },\n\n        _toggleDetails: function(button, omitAnimation) {\n            var that = this,\n            cell = button.closest(\"td.k-hierarchy-cell\"),\n            expanding = button.is(CARET_ALT_RIGHT),\n            masterRow = button.closest(\"tr.k-master-row\"),\n            masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n            detailRow,\n            detailTemplate = that.detailTemplate,\n            data,\n            hasDetails = that._hasDetails(),\n            ariaLabelText = expanding ? COLLAPSE : EXPAND,\n            ariaExpandText = expanding ? true : false;\n\n            if (!expanding) {\n                kendo.ui.icon(button, { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            } else {\n                kendo.ui.icon(button, { icon: \"caret-alt-down\" });\n            }\n\n            button.attr(ARIA_LABEL, ariaLabelText);\n\n            cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n            detailRow = masterRow.next();\n\n            if (detailRow.hasClass(\"k-hidden\")) {\n                detailRow.removeClass(\"k-hidden\");\n            }\n\n            if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                data = that.dataItem(masterRow);\n\n                detailRow = $(detailTemplate(data))\n                    .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                    .insertAfter(masterRow);\n\n                if (masterRowIndex || masterRowIndex === 0) {\n                    detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                }\n\n                that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n            }\n\n            that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n            if (omitAnimation) {\n                toggleRow(detailRow, expanding);\n            } else {\n                detailRow.toggle(expanding);\n            }\n        },\n\n        dataItem: function(tr) {\n            tr = $(tr)[0];\n            if (!tr) {\n                return null;\n            }\n\n            var rows = this.tbody.children(),\n                classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                idx = tr.sectionRowIndex,\n                j, correctIdx;\n\n            correctIdx = idx;\n\n            for (j = 0; j < idx; j++) {\n                if (classesRegEx.test(rows[j].className)) {\n                    correctIdx--;\n                }\n            }\n\n            return this._data[correctIdx];\n        },\n\n        expandRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_RIGHT);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        collapseRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td ' + CARET_ALT_DOWN);\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        _createHeaderCells: function(columns, rowSpan) {\n            var that = this,\n                idx,\n                th,\n                text,\n                html = \"\",\n                length,\n                title,\n                columnMenu = that.options.columnMenu,\n                sortable = that.options.sortable,\n                filterable = that._hasFilterMenu(),\n                messages = that.options.messages,\n                leafs = leafColumns(that.columns),\n                groups = that.dataSource.group(),\n                field;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                th = columns[idx].column || columns[idx];\n                text = that._headerCellText(th);\n                title = th.title;\n                field = \"\";\n\n                let index = inArray(th, leafs);\n                let currentTh = \"\";\n\n                if (th.selectable) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({ size: kendo.getValidCssClass(\"k-checkbox-\", \"size\", that.options.size) });\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.draggable) {\n                    currentTh += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : \"\";\n                    currentTh += \">\" + text + \"</th>\";\n                } else if (th.command) {\n                    currentTh += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += \">\" + ((!text || text === \"&nbsp;\") ? text : kendo.template(DEFAULTHEADERTEMPLATE)({ text: text })) + \"</th>\";\n                } else {\n                    if (th.field) {\n                        field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                    }\n\n                    currentTh += \"<th scope='col' \" + field;\n                    if ((columnMenu && th.field && th.menu !== false)) {\n                        currentTh += \" aria-haspopup='menu'\";\n                    } else if (filterable && th.filterable !== false && !th.command) {\n                        currentTh += \" aria-haspopup='dialog'\";\n                    }\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        currentTh += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (columns[idx].colSpan > 1) {\n                        currentTh += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    } else if (columns[idx].colSpan === 1) {\n                        currentTh += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    }\n\n                    if (title) {\n                        title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                        currentTh += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                    }\n\n                    if (th.groupable !== undefined$1) {\n                        currentTh += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                    }\n\n                    if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                        currentTh += \"title='\";\n                        currentTh += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                        currentTh += \"' \";\n                    }\n\n                    if (th.aggregates && th.aggregates.length) {\n                        currentTh += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                    }\n\n                    if (index > -1) {\n                        currentTh += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    currentTh += stringifyAttributes(th.headerAttributes);\n\n                    text = kendo.template(DEFAULTHEADERTEMPLATE)({ text: text });\n\n                    currentTh += \">\" + text + \"</th>\";\n                }\n                if (that.options.resizable) {\n                    html += $(currentTh).attr(\"data-resizable\", (th.resizable !== false).toString()).addClass(\"k-table-th\")[0].outerHTML;\n                } else {\n                    html += $(currentTh).addClass(\"k-table-th\")[0].outerHTML;\n                }\n            }\n            return html;\n        },\n\n        _appendLockedColumnContent: function() {\n            var columns = this.columns,\n                idx,\n                colgroup = this.table.find(\"colgroup\"),\n                cols = colgroup.find(COLGROUP),\n                length,\n                lockedCols = $(),\n                skipHiddenCount = 0,\n                container,\n                colSpan,\n                spanIdx,\n                colOffset = 0;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n\n                    if (isVisible(columns[idx])) {\n                        colSpan = 1;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    } else {\n                        skipHiddenCount ++;\n                    }\n                }\n            }\n\n            container = $('<div class=\"k-grid-content-locked\"><table class=\"k-grid-table k-table\"><colgroup></colgroup><tbody class=\"k-table-tbody\"></tbody></table></div>');\n            // detach is required for IE8, otherwise it switches to compatibility mode\n            colgroup.detach();\n            container.find(\"colgroup\").append(lockedCols);\n            colgroup.insertBefore(this.table.find(\"tbody\"));\n\n            this.lockedContent = container.insertBefore(this.content);\n            this.lockedTable = container.children(\"table\");\n            this.lockedTable.addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n        },\n\n        _appendLockedColumnFooter: function() {\n            var that = this;\n            var footer = that.footer;\n            var cells = footer.find(\".k-footer-template>td\");\n            var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n            var html = $('<div class=\"k-grid-footer-locked\"><table class=\"k-grid-footer-table k-table\"><colgroup></colgroup><tfoot class=\"k-table-tfoot\"><tr class=\"k-footer-template k-table-row\"></tr></tfoot></table></div>');\n            var idx, length;\n            var groups = that._groups();\n            var lockedCells = $(), lockedCols = $();\n\n            html.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", this.options.size));\n\n            lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n            for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                lockedCells = lockedCells.add(cells.eq(idx + groups));\n            }\n\n            lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n            for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                lockedCols = lockedCols.add(cols.eq(idx + groups));\n            }\n\n            lockedCells.appendTo(html.find(TR));\n            lockedCols.appendTo(html.find(\"colgroup\"));\n            that.lockedFooter = html.prependTo(footer);\n        },\n\n        _appendLockedColumnHeader: function(container) {\n            var that = this,\n                columns = this.columns,\n                idx,\n                html,\n                length,\n                colgroup,\n                tr,\n                trFilter,\n                table,\n                header,\n                filtercellCells,\n                rows = [],\n                skipHiddenCount = 0,\n                cols = $(),\n                hasFilterRow = that._hasFilterRow(),\n                filterCellOffset = 0,\n                filterCells = $(),\n                cell,\n                leafColumnsCount = 0,\n                cells = $();\n\n            colgroup = that.thead.prev().find(COLGROUP);\n            header = that.thead.find(TR).first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var colOffset = 0;\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n                    cell = header.eq(idx);\n                    leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                    if (isVisible(columns[idx])) {\n                        var colSpan = null;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    }\n\n                    mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                    leafColumnsCount = leafColumnsCount || 1;\n                    for (var j = 0; j < leafColumnsCount; j++) {\n                        filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                    }\n                    filterCellOffset += leafColumnsCount;\n                }\n\n                if (columns[idx].columns) {\n                    skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                }\n\n                if (!isVisible(columns[idx])) {\n                    skipHiddenCount++;\n                }\n            }\n\n            if (rows.length) {\n                html = '<div class=\"k-grid-header-locked\"><table class=\"k-grid-header-table k-table\"><colgroup></colgroup><thead class=\"k-table-thead\">';\n                html += new Array(rows.length + 1).join(\"<tr class='k-table-row'></tr>\");\n                html += (hasFilterRow ? '<tr class=\"k-filter-row k-table-row\"></tr>' : '') + '</thead></table></div>';\n\n                table = $(html);\n\n                table.find('.k-grid-header-locked').css('width', '1px');\n\n                table.find(\"table\").addClass(kendo.getValidCssClass(\"k-table-\", \"size\", that.options.size));\n                colgroup = table.find(\"colgroup\");\n                colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                tr = table.find(\"thead tr:not(.k-filter-row)\");\n                for (idx = 0, length = rows.length; idx < length; idx++) {\n                    cells = toJQuery(rows[idx]);\n                    tr.eq(idx).append(that.thead.find(TR).eq(idx).find(\".k-group-cell\").add(cells));\n                }\n\n                var count = removeEmptyRows(this.thead);\n                if (rows.length < count) {\n                    removeRowSpanValue(table, count - rows.length);\n                }\n\n                trFilter = table.find(\".k-filter-row\");\n                trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                this.lockedHeader = table.prependTo(container);\n                this.thead.find(\".k-group-cell\").remove();\n\n                return true;\n            }\n            return false;\n        },\n\n        _removeLockedContainers: function() {\n            var elements = this.lockedHeader\n                .add(this.lockedContent)\n                .add(this.lockedFooter);\n\n            kendo.destroy(elements);\n            elements.off(NS).remove();\n\n            this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n            this.selectable = null;\n        },\n\n        _thead: function() {\n            var that = this,\n                columns = that.columns,\n                hasDetails = that._hasDetails() && columns.length,\n                hasFilterRow = that._hasFilterRow(),\n                idx,\n                html = \"\",\n                thead = that.table.find(\">thead\"),\n                hasTHead = that.element.find(\"thead\").first().length > 0,\n                headerContent = that.options.messages.expandCollapseColumnHeader,\n                tr;\n\n            if (!thead.length) {\n                thead = $(\"<thead/>\").insertBefore(that.tbody);\n            }\n\n            thead.addClass(\"k-table-thead\").attr(\"role\", \"rowgroup\");\n\n            if (that.lockedHeader && that.thead) {\n                tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                tr.remove();\n                tr = $();\n\n                that._removeLockedContainers();\n            } else if (hasTHead) {\n                tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n            } else {\n                tr = that.element.find(\"tr:has(th)\").first();\n            }\n\n            if (!tr.length) {\n                tr = thead.children().first();\n                if (!tr.length) {\n                   var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                   that._prepareColumns(rows, columns);\n\n                   for (idx = 0; idx < rows.length; idx++) {\n                       html += \"<tr class='k-table-row'>\";\n                       if (hasDetails) {\n                           html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + headerContent + '</th>';\n                       }\n                       html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                       html += \"</tr>\";\n                   }\n\n                   tr = $(html);\n                   kendo.applyStylesFromKendoAttributes(tr, [\"display\", \"left\", \"right\"]);\n                }\n            } else {\n                for (idx = 0; idx < columns.length; idx++) {\n\t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n\t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n                    cell.addClass(\"k-table-th\");\n\t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n\t\t\t\t\t\tcell[0].style.display = NONE;\n\t\t\t\t\t}\n               }\n\n               that._updateHeadersAttr(childColumns(columns));\n\t\t\t}\n\n            if (hasFilterRow) {\n                var filterRow = $(\"<tr/>\");\n                filterRow.addClass(\"k-filter-row k-table-row\");\n                if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                    filterRow.prepend('<td class=\"k-table-td k-hierarchy-cell\">&nbsp;</td>');\n                }\n\n                var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                if (existingFilterRow.length) {\n                    kendo.destroy(existingFilterRow);\n                    existingFilterRow.remove();\n                }\n\n                thead.append(filterRow);\n            }\n\n            if (!tr.children().length) {\n                html = \"\";\n                if (hasDetails) {\n                    html += '<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">&nbsp;</th>';\n                }\n\n                html += that._createHeaderCells(columns);\n\n                tr.html(html);\n            } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                tr.prepend('<th class=\"k-hierarchy-cell k-table-th\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n            }\n\n            tr.find(\"th\").addClass(HEADER_CLASS);\n\n            if (!that.options.scrollable) {\n                thead.addClass(\"k-grid-header\");\n            }\n\n            tr.find(\"script\").remove().end().prependTo(thead);\n\n            if (that.thead) {\n                that._destroyColumnAttachments();\n            }\n\n            that.thead = thead;\n\n            that._sortable();\n\n            that._filterable();\n\n            that._filterRow();\n\n            that._scrollable();\n\n            that._columnMenu();\n\n            var syncHeight;\n            var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n            if (hasLockedColumns) {\n\n                syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                that._appendLockedColumnContent();\n\n                that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                if (kendo.support.touch) {\n                    that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                        move: function(e) {\n                            that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that._updateLockedCols();\n            }\n\n            that._updateCols();\n\n            that._updateColumnCellIndex();\n\n            that._updateFirstColumnClass();\n\n            that._resizable();\n\n            that._draggable();\n\n            that._reorderable();\n\n            that._updateHeader(that._groups());\n\n            that._updateStickyColumns();\n\n            if (hasLockedColumns) {\n                if (syncHeight) {\n                    that._syncLockedHeaderHeight();\n                }\n\n                that._applyLockedContainersWidth();\n            }\n        },\n\n        _retrieveFirstColumn: function(columns, rows) {\n            var result = $();\n\n            if (rows.length && columns[0]) {\n                var column = columns[0];\n\n                while (column.columns && column.columns.length) {\n                    column = column.columns[0];\n                    rows = rows.filter(\":not(:first)\");\n                }\n\n                result = result.add(rows);\n            }\n\n            return result;\n        },\n\n        _updateFirstColumnClass: function() {\n            var that = this,\n                columns = that.columns || [],\n                hasDetails = that._hasDetails() && columns.length;\n\n            if (!hasDetails && !that._groups()) {\n                var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                columns = nonLockedColumns(columns);\n\n                var rows = that._retrieveFirstColumn(columns, tr);\n\n                if (that._isLocked()) {\n                    tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                    columns = lockedColumns(that.columns);\n\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n\n                rows.each(function() {\n                    var ths = $(this).find(\"th\");\n                    ths.removeClass(\"k-first\");\n                    ths.eq(0).addClass(\"k-first\");\n                });\n            }\n        },\n\n        _prepareColumns: function(rows, columns, parentCell, parentRow) {\n            var row = parentRow || rows[rows.length - 1];\n\n            var childRow = rows[row.index + 1];\n            var totalColSpan = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                var cell = { column: columns[idx], colSpan: 0 };\n                row.cells.push(cell);\n\n                if (columns[idx].columns && columns[idx].columns.length) {\n                    if (!childRow) {\n                        childRow = { rowSpan: 0, cells: [], index: rows.length };\n                        rows.push(childRow);\n                    }\n                    cell.colSpan = columns[idx].columns.length;\n                    this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                    totalColSpan += cell.colSpan - 1;\n                    row.rowSpan = rows.length - row.index;\n                }\n            }\n            if (parentCell) {\n                parentCell.colSpan += totalColSpan;\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var content = this.content;\n\n            if (this.virtualScroll && this.virtualScroll.rows) {\n                content = this.virtualScrollable.verticalScrollbar;\n            }\n\n            var scrollTop = content.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta) {\n                if (content[0].scrollHeight > content[0].clientHeight &&\n                    (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                    content[0].scrollTop > 0 && delta > 0)) {\n                    e.preventDefault();\n                }\n\n                content.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _isLocked: function() {\n            return this.lockedHeader != null;\n        },\n\n        _updateHeaderCols: function() {\n            var table = this.thead.parent().add(this.table);\n\n            if (this._isLocked()) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n            }\n        },\n\n        _updateColumnSorters: function() {\n            var that = this;\n            var cells = leafDataCells(that.thead);\n            var columns = leafColumns(that.columns);\n            var column;\n            var cell;\n            var sorterInstance;\n\n            if (!that.options.sortable) {\n                return;\n            }\n\n            for (var idx = 0, length = cells.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (column.sortable !== false && !column.command && column.field) {\n                    cell = cells.eq(idx);\n\n                    sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                    if (sorterInstance) {\n                        sorterInstance.refresh();\n                    }\n                }\n            }\n        },\n\n        _updateHeadersAttr: function(columns) {\n            if (!columns.length) {\n                return;\n            }\n\n            var that = this;\n\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].headerAttributes) {\n                    var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                    th.attr(\"headers\", columns[i].headerAttributes.headers);\n                }\n            }\n\n            that._updateHeadersAttr(childColumns(columns));\n        },\n\n        _updateCols: function(table) {\n            table = table || this.thead.parent().add(this.table);\n\n            this._appendCols(table, this._isLocked());\n        },\n\n        _updateLockedCols: function(table) {\n            if (this._isLocked()) {\n                table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _appendCols: function(table, locked) {\n            if (locked) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _autoColumns: function(schema) {\n            if (schema && schema.toJSON) {\n                var that = this,\n                    field,\n                    encoded;\n\n                schema = schema.toJSON();\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                for (field in schema) {\n                    that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                }\n\n                that._thead();\n\n                that._templates();\n            }\n        },\n\n        _setRowCachedHeight: function(row, uid) {\n            var cachedHeights = this._cachedRowsHeight,\n                cachedHeight = cachedHeights[uid],\n                $row;\n\n            if (cachedHeight) {\n                $row = $(row);\n                $row[0].style.height = cachedHeight + \"px\";\n                row = $row.prop(\"outerHTML\");\n            }\n\n            return row;\n        },\n\n        _rowsHtml: function(data, templates) {\n            var that = this,\n                html = \"\",\n                idx,\n                rowTemplate = templates.rowTemplate,\n                altRowTemplate = templates.altRowTemplate,\n                cachedHeights = that._cachedRowsHeight,\n                length, row;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (that._skipRerenderItemsCount > 0) {\n                    that._skipRerenderItemsCount--;\n                } else {\n                    if (idx % 2) {\n                        row = altRowTemplate(data[idx]);\n                    } else {\n                        row = rowTemplate(data[idx]);\n                    }\n\n                    if (cachedHeights) {\n                        row = that._setRowCachedHeight(row, data[idx].uid);\n                    }\n\n                    html += row;\n                }\n                that._data.push(data[idx]);\n            }\n\n            return html;\n        },\n\n        _groupData: function(group, skipFooter, firstColumn) {\n            var that = this,\n                footerDefaults = that._groupAggregatesDefaultObject || {},\n                groupItems = group.items,\n                aggregates = extend({}, footerDefaults, group.aggregates),\n                headerData = extend({}, {\n                    field: group.field,\n                    value: group.value,\n                    items: groupItems,\n                    aggregates: aggregates\n                }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                footerData = {};\n\n            if (!skipFooter) {\n                for (var aggregate in aggregates) {\n                    footerData[aggregate] = extend({}, aggregates[aggregate],\n                        { group: { field: group.field, value: group.value, items: groupItems } }\n                    );\n                }\n            }\n            return extend({}, footerData, headerData);\n        },\n\n        _removeGroupIfEmpty: function(row) {\n            var that = this,\n                itemsCount,\n                subgroupsCount,\n                length = that.dataSource._group.length;\n\n            for (var i = 0; i < length; i++) {\n                row = row.prev();\n                itemsCount = +row.attr('data-group-item-count');\n                subgroupsCount = +row.attr('data-sub-group-count');\n\n                if (itemsCount == 1 || subgroupsCount == 1) {\n                    row.hide();\n                }\n\n            }\n        },\n\n        _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n            var that = this,\n                html = \"\",\n                idx,\n                length,\n                isLocked = that.lockedContent != null,\n                field = group.field,\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                firstColumn = visibleColumns(that.columns)[0],\n                firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || htmlEncode(field, true)) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                groupItems = group.currentItems || group.items,\n                groups = that._groups(),\n                groupFooterTemplate = templates.groupFooterTemplate,\n                groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                groupData,\n                isGroupPaged = that.dataSource._isGroupPaged(),\n                expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n            if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                expanded = true;\n            }\n\n            if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n            }\n            if (template && !skipColspan) {\n                text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n            }\n\n            if (!that._skipRerenderItemsCount) {\n                if (!group.excludeHeader) {\n                    html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                } else if (isLocked) {\n                    group.excludeHeader = isLockedTable ? false : true;\n                } else {\n                    group.excludeHeader = false;\n                }\n            } else {\n                groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            if (expanded) {\n                if (group.hasSubgroups) {\n                    for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                        html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                    }\n                } else {\n                    html += that._rowsHtml(groupItems, templates);\n                }\n            }\n\n            if (groupFooterTemplate) {\n\n                if (skipLastGroup) {\n                    if (!inArray(group.value, that._skippedGroups)) {\n                        that._skippedGroups.push(group.value);\n                    }\n                } else {\n                    if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                        that._skippedGroups.shift();\n                    }\n                    if (!that._skipRerenderItemsCount) {\n                        html += groupFooterTemplate(groupData);\n                    }\n                }\n            }\n            return html;\n        },\n\n        collapseGroup: function(group) {\n            var level,\n                that = this,\n                groupToCollapse = group,\n                groupable = this.options.groupable,\n                showFooter = groupable.showFooter,\n                footerCount = showFooter ? 0 : 1,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                tr;\n\n            group = $(group);\n            level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterCollapse;\n\n                that.dataSource._groupsState[groupUid] = false;\n                groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"collapseGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_DOWN).length) {\n                kendo.ui.icon(group.find(CARET_ALT_DOWN), { icon: `caret-alt-${isRtl ? 'left' : 'right'}` });\n            }\n\n            group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n            group = group.nextAll(TR);\n\n            var toHide = [];\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    footerCount++;\n                } else if (tr.hasClass(\"k-group-footer\")) {\n                    footerCount--;\n                }\n\n                if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                    break;\n                }\n\n                if (relatedGroup.length) {\n                    toHide.push(relatedGroup[idx]);\n                }\n                toHide.push(tr[0]);\n            }\n\n            $(toHide).hide();\n\n            if (this.options.scrollable.endless && this.content) {\n                clearTimeout(that._collapseGroupsTimeOut);\n                that._collapseGroupsTimeOut = setTimeout(function() {\n                    that.content.scroll();\n                    that._groupToCollapse = groupToCollapse;\n                });\n            }\n        },\n\n        expandGroup: function(group) {\n                group = $(group);\n\n            var that = this,\n                showFooter = that.options.groupable.showFooter,\n                level,\n                tr,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                footersVisibility = [],\n                groupsCount = 1;\n\n                level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterExpand;\n\n                that.dataSource._groupsState[groupUid] = true;\n                if (groupObject.items && groupObject.items.length) {\n                    groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                }\n\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"expandGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(DIV).hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(TR);\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(TR).eq(group.index()).nextAll(TR);\n                }\n            }\n\n            if (group.find(CARET_ALT_RIGHT).length) {\n                kendo.ui.icon(group.find(CARET_ALT_RIGHT), { icon: \"caret-alt-down\" });\n            }\n\n            group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n            group = group.nextAll(TR);\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n                if (offset <= level) {\n                    break;\n                }\n\n                if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                    tr.show();\n                    relatedGroup.eq(idx).show();\n\n                    if (tr.hasClass(GROUPING_ROW) && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        that.expandGroup(tr);\n                    }\n\n                    if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon,.k-svg-icon\").is(CARET_ALT_DOWN)) {\n                        tr.next().show();\n                        relatedGroup.eq(idx + 1).show();\n                    }\n                }\n\n                if (tr.hasClass(GROUPING_ROW)) {\n                    if (showFooter) {\n                        footersVisibility.push(tr.is(\":visible\"));\n                    }\n                    groupsCount ++;\n                }\n\n                if (tr.hasClass(\"k-group-footer\")) {\n                    if (showFooter) {\n                        var toggleVisibility = footersVisibility.pop();\n                        tr.toggle(toggleVisibility);\n                        relatedGroup.eq(idx).toggle(toggleVisibility);\n                    }\n                    if (groupsCount == 1) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                    } else {\n                        groupsCount --;\n                    }\n                }\n            }\n\n            if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n            (!that.options.scrollable.endless && this._isLocked())) {\n                that._syncLockedContentHeight();\n            }\n        },\n\n        _updateHeader: function(groups) {\n            var that = this,\n                container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                length = container.find(TR).first().find(\"th.k-group-cell\").length,\n                rows = container.children(\"tr:not(:first)\").filter(function() {\n                    return !$(this).children(\":visible\").length;\n                });\n\n            if (groups > length) {\n                $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header k-table-th\" scope=\"col\">' + encode(that.options.messages.expandCollapseColumnHeader) + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                if (that.element.is(\":visible\")) {\n                    rows.find(\"th.k-group-cell\").hide();\n                }\n            } else if (groups < length) {\n                container.find(TR).each(function() {\n                    $(this).find(\".k-group-cell\").eq(groups).remove();\n                    $(this).find(\".k-group-cell\").slice(groups).remove();\n                });\n            }\n            if (groups > filterCells) {\n                $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-table-group-td k-table-td\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n            }\n        },\n\n        _firstDataItem: function(data, grouped) {\n            if (data && grouped) {\n                if (data.hasSubgroups) {\n                    data = this._firstDataItem(data.items[0], grouped);\n                } else {\n                    data = data.items[0];\n                }\n            }\n            return data;\n        },\n\n        _updateTablesWidth: function() {\n            var that = this,\n                tables;\n\n            if (!that._isLocked()) {\n                return;\n            }\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                .add(that.thead.parent())\n                .add(that.table);\n\n            that._footerWidth = tableWidth(tables.eq(0));\n            tables.width(that._footerWidth);\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                .add(that.lockedHeader.find(\">table\"))\n                .add(that.lockedTable);\n\n            tables.width(tableWidth(tables.eq(0)));\n        },\n\n        hideColumn: function(column) {\n            var that = this,\n                cell,\n                tables,\n                idx,\n                cols,\n                colWidth,\n                position,\n                width = 0,\n                headerCellIndex,\n                length,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                virtualScroll = that.virtualScroll || {},\n                columns = that.columns,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                columnIndex,\n                groupHeaderColumnTemplateColumns,\n                columnsToHide;\n\n            if (!Array.isArray(column)) {\n                columnsToHide = [column];\n            } else {\n                columnsToHide = column;\n            }\n\n            columnsToHide.forEach((column) => {\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                if (typeof column == \"number\") {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function(item) {\n                        return item.field === column;\n                    })[0];\n                }\n\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                if (column.columns && column.columns.length) {\n                    position = columnVisiblePosition(column, columns);\n\n                    setColumnVisibility(column, false);\n\n                    setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                       this.hideColumn(column.columns[idx]);\n                    }\n\n                    that._ariaAddHiddenColIndex();\n                    that.trigger(COLUMNHIDE, { column: column });\n\n                    return;\n                }\n\n                columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n                setColumnVisibility(column, false);\n\n                that._setParentsVisibility(column, false);\n\n                that._templates();\n\n                that._updateCols();\n                that._updateLockedCols();\n\n                var container = that.thead;\n\n                headerCellIndex = columnIndex;\n                if (that.lockedHeader && visibleLocked > columnIndex) {\n                    container = that.lockedHeader.find(\">table>thead\");\n                } else {\n                    headerCellIndex -= visibleLocked;\n                }\n\n                cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n                cell[0].style.display = NONE;\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n                if (footer[0]) {\n                    that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                    that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                    setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n                }\n\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNHIDE, { column: column });\n                    return;\n                }\n\n                if (that.lockedTable && visibleLocked > columnIndex) {\n                    hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n                } else {\n                    hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n                }\n\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                    that._syncLockedFooterHeight();\n                } else {\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                            width += parseInt(colWidth, 10);\n                        } else {\n                            width = 0;\n                            break;\n                        }\n                    }\n\n                    tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                    that._footerWidth = null;\n\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + PX;\n                        });\n\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n\n                that._updateFirstColumnClass();\n                that._updateStickyColumns();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._ariaAddHiddenColIndex();\n                that.trigger(COLUMNHIDE, { column: column });\n            });\n        },\n\n        _setParentsVisibility: function(column, visible) {\n            var that = this;\n            var columns = that.columns;\n            var idx;\n            var parents = [];\n            var parent;\n            var position;\n            var cell;\n            var colSpan;\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            var predicate = visible ?\n                function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n            if (columnParents(column, columns, parents) && parents.length) {\n                for (idx = parents.length - 1; idx >= 0; idx--) {\n                    parent = parents[idx];\n                    position = columnPosition(parent, columns);\n                    cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                    if (predicate(parent)) {\n                        setColumnVisibility(parent, visible);\n                        cell[0].style.display = visible ? \"\" : NONE;\n                    }\n\n                    if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                        colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                        cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                    }\n                }\n            }\n        },\n\n        _updateContentWidth: function() {\n            var that = this;\n            var tables = that.table.add(that.thead.parent());\n\n            tables.css({\n                width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n            });\n            that.refresh();\n        },\n\n        showColumn: function(column) {\n            var that = this,\n                idx,\n                length,\n                cell,\n                tables,\n                width,\n                headerCellIndex,\n                position,\n                colWidth,\n                cols,\n                columns = that.columns,\n                virtualScroll = that.virtualScroll || {},\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                columnIndex,\n                originalColumn,\n                columnLeafIndex,\n                groupHeaderColumnTemplateColumns,\n                columnsToShow;\n\n                if (!Array.isArray(column)) {\n                    columnsToShow = [column];\n                } else {\n                    columnsToShow = column;\n                }\n\n                columnsToShow.forEach((column) => {\n                    groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n                    if (typeof column == \"number\") {\n                        columnIndex = column;\n                        column = columns[column];\n                    } else if (isPlainObject(column)) {\n                        $.each(flatColumns(columns), function(index, item) {\n                            if (item === column) {\n                                column = item;\n                                columnIndex = index;\n                                return false;\n                            }\n                        });\n                    } else {\n                        $.each(flatColumns(columns), function(index, item) {\n                            if (item.field === column) {\n                                column = item;\n                                columnIndex = index;\n                                return false;\n                            }\n                        });\n                    }\n\n                    if (!column || isVisible(column)) {\n                        return;\n                    }\n\n                    var setColumnVisibility = that._columnVisibilitySetter(column);\n\n                    if (column.columns && column.columns.length) {\n                        position = columnPosition(column, columns);\n                        originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                        setColumnVisibility(column, true);\n\n                        setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                        for (idx = 0; idx < column.columns.length; idx++) {\n                            if (!originalColumn.columns[idx].hidden) {\n                                this.showColumn(column.columns[idx]);\n                            }\n                        }\n\n                        that._ariaRemoveHiddenColIndex();\n                        that.trigger(COLUMNSHOW, { column: column });\n\n                        return;\n                    }\n\n                    columnLeafIndex = inArray(column, leafColumns(columns));\n\n                    setColumnVisibility(column, true);\n\n                    that._setParentsVisibility(column, true);\n\n                    that._templates();\n                    that._updateCols();\n                    that._updateLockedCols();\n\n                    var container = that.thead;\n\n                    headerCellIndex = columnLeafIndex;\n                    if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                        container = that.lockedHeader.find(\">table>thead\");\n                    } else {\n                        headerCellIndex -= lockedColumnsCount;\n                    }\n\n                    cell = leafDataCells(container).eq(headerCellIndex);\n                    cell[0].style.display = \"\";\n                    cell[0].classList.remove(\"k-hidden\");\n\n                    setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n                    if (footer[0]) {\n                        that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                        that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                        setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n                    }\n\n                    if (virtualScroll.columns && !column.locked) {\n                        that._updateContentWidth();\n                        that.trigger(COLUMNSHOW, { column: column });\n                        return;\n                    }\n\n                    if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                        showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n                    } else {\n                        showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n                    }\n\n                    if (that.lockedTable) {\n                        that._updateTablesWidth();\n                        that._applyLockedContainersWidth();\n                        that._syncLockedContentHeight();\n                        that._syncLockedHeaderHeight();\n                    } else {\n                        tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                        if (!column.width) {\n                            tables.width(\"\");\n                        } else {\n                            width = 0;\n                            cols = that.thead.prev().find(\"col\");\n                            for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                                colWidth = cols[idx].style.width;\n\n                                if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                                    width += outerWidth(cols[idx]);\n                                    continue;\n                                }\n\n                                if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                                    width += outerWidth(cols[idx]);\n                                    continue;\n                                }\n\n                                if (colWidth.indexOf(\"%\") > -1) {\n                                    width = 0;\n                                    break;\n                                }\n                                width += parseInt(colWidth, 10);\n                            }\n\n                            that._footerWidth = null;\n                            if (width) {\n                                tables.each(function() {\n                                    this.style.width = width + PX;\n                                });\n                                that._footerWidth = width;\n                                that._setContentWidth();\n                            }\n                        }\n                    }\n\n                    that._updateFirstColumnClass();\n                    that._updateStickyColumns();\n                    if (groupHeaderColumnTemplateColumns.length > 0) {\n                        that._renderGroupRows();\n                    }\n                    that._ariaRemoveHiddenColIndex();\n                    that.trigger(COLUMNSHOW, { column: column });\n                });\n        },\n\n        _columnVisibilitySetter: function(column) {\n            var col = column || {};\n\n            if (isUndefined(col.media)) {\n                return setColumnVisibility;\n            } else {\n                return setColumnMediaVisibility;\n            }\n        },\n\n\n        _buildSkeleton: function() {\n            var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n            var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n            var loaderHTML = \"\";\n            var colspan;\n            var groups = this._groups();\n            var columnsCount = visibleColumns.length + groups;\n\n            if (this._hasDetails()) {\n                columnsCount++;\n            }\n\n            if (this._hasVirtualColumns()) {\n                colspan = parseInt(this.content.find(TR).first().find(\"td\").first().attr(\"colspan\"), 10);\n            }\n\n            for (var i = 0; i < pageSize; i++) {\n                loaderHTML += \"<tr class='k-table-row' data-skeleton-row>\";\n                for (var j = 0; j < columnsCount; j++) {\n                    if (colspan && !j) {\n                        loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    } else {\n                        loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>\";\n                    }\n                }\n                loaderHTML += \"</tr>\";\n            }\n            return loaderHTML;\n        },\n\n        _progress: function(toggle) {\n            var element = this.element;\n            var endless = this.options.scrollable && this.options.scrollable.endless;\n            var loaderType = this.options.loaderType;\n            var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n            var skeleton;\n\n            if (isVirtualization) {\n                element = this.content;\n            } else if (this._editContainer && this._editMode() === \"popup\") {\n                element = this._editContainer;\n            } else if (this.lockedContent || endless) {\n                element = this.wrapper;\n            } else if (this.element.is(\"table\")) {\n                element = this.element.parent();\n            } else if (this.content && this.content.length) {\n                element = this.content;\n            }\n\n            if (loaderType == \"skeleton\" && !this._isExport) {\n                if (toggle) {\n                    skeleton = this._buildSkeleton();\n                        element.find(\"tbody\")\n                         .empty()\n                         .append(skeleton);\n                } else {\n                    element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                }\n            } else {\n                if (this._isExport) {\n                    this._loaderContainer(toggle, { message: this.options.messages.loader.exporting });\n                } else if (endless && toggle) {\n                    kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content.parent()[0].offsetTop, opacity: true });\n                } else {\n                    kendo.ui.progress(element, toggle);\n                }\n            }\n        },\n\n        _resize: function(size, force) {\n\n            this._syncLockedContentHeight();\n            this._syncLockedHeaderHeight();\n\n            if (this.content) {\n                this._setContentWidth();\n                this._setContentHeight();\n            }\n\n            if (this.lockedTable) {\n                this._syncLockedScroll();\n            }\n\n            if (this.virtualScrollable && (force || this._rowHeight)) {\n                if (force) {\n                    this._rowHeight = null;\n                }\n                this.virtualScrollable.repaintScrollbar();\n            }\n\n            if (this.pager && this.pager.element) {\n                this.pager.resize(force);\n            }\n\n            if (this._anyStickyColumns()) {\n                this._updateStickyColumns(false);\n            }\n        },\n\n        _isActiveInTable: function() {\n            var active = activeElement();\n\n            if (!active) { return false; }\n\n            return this.table[0] === active ||\n                $.contains(this.table[0], active) ||\n                (this._isLocked() &&\n                    (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                );\n        },\n\n        refresh: function(e) {\n            var that = this,\n                data = that.dataSource.view(),\n                navigatable = that.options.navigatable,\n                virtualScroll = that.virtualScroll || {},\n                currentIndex,\n                current = $(that.current()),\n                isCurrentInHeader = false,\n                groups = that._groups(),\n                colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                hasMultiColumnHeaders = grep(that.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0,\n                contentScrollLeft,\n                cachedItemsToSkip,\n                multiColumnHeaderIndex = 0;\n\n            if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                    return;\n                }\n            }\n\n            if (that._shouldMapHights) {\n                that._mapCachedRowsHeight(\"get\", \"uid\");\n                that._shouldMapHights = false;\n            }\n\n            if (virtualScroll.columns) {\n                that._templates();\n            }\n\n            //someone remove the edited item\n            if (e && e.action === \"remove\" && that.editable &&\n                that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n            }\n\n            e = e || {};\n\n            if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (e.action === SYNC && that._isVirtualEditable()) {\n                that._destroyEditable();\n                that._clearEditableState();\n            }\n\n            if (!that._endlessFetchInProgress) {\n                if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                    isCurrentInHeader = current.is(\"th\");\n                    currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n\n                    if (isCurrentInHeader && hasMultiColumnHeaders) {\n                        multiColumnHeaderIndex = current.parent().index();\n                    }\n                }\n                that._destroyEditable();\n            }\n\n            if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                clearTimeout(that._progressTimeOut);\n                that._progressTimeOut = setTimeout(function() {\n                    if (!that._endlessFetchInProgress) {\n                        that._progress(false);\n                    }\n                }, 250);\n            } else {\n                if (!that._isExport) {\n                    that._progress(false);\n                }\n            }\n\n            if (current.length) {\n                that._currentRowIndex = current.parent().index();\n            }\n\n            that._hideResizeHandle();\n\n            that._data = [];\n\n            if (!that.columns.length) {\n                that._autoColumns(that._firstDataItem(data[0], groups));\n                colspan = groups + that.columns.length;\n            }\n\n            that._group = groups > 0 || that._group;\n\n            if (that._group) {\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                if (!that._virtualColScroll) {\n                    that._updateHeader(groups);\n                }\n                that._group = groups > 0;\n                that._groupRows = groupRows(data);\n            }\n\n            if (that.content) {\n                contentScrollLeft = kendo.scrollLeft(that.content);\n            }\n\n            if (that.options.loaderType !== \"skeleton\" && e && e.action === \"sync\" && e.partialUpdate && e.changedItems && e.changedItems.length) {\n                that._data = that.dataSource.flatView();\n                e.changedItems.forEach((changedItem) => {\n                   that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + changedItem.uid + \"]\"));\n                });\n                that._progress(false);\n                that._destroyEditable();\n            } else {\n                cachedItemsToSkip = that._skipRerenderItemsCount;\n                that._renderContent(data, colspan, groups);\n                if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                    that._skipRerenderItemsCount = cachedItemsToSkip;\n                }\n                that._renderLockedContent(data, colspan, groups);\n            }\n\n            if (!that._virtualColScroll) {\n                that._footer();\n\n                that._renderNoRecordsContent();\n\n                that._togglePagerVisibility();\n\n                that._setContentHeight();\n\n                that._setContentWidth(that.content && contentScrollLeft);\n            }\n\n            if (that.lockedTable) {\n                //requires manual trigger of scroll to sync both tables\n                if (virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                } else if (that.touchScroller) {\n                    that.touchScroller.movable.trigger(\"change\");\n                } else {\n                    that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                    that.content.trigger(\"scroll\");\n                }\n            }\n\n            if (!that._endlessFetchInProgress && !that._rowDropping) {\n                that._restoreCurrent(currentIndex, isCurrentInHeader, multiColumnHeaderIndex);\n            }\n\n            if (that.touchScroller) {\n                that.touchScroller.contentResized();\n            }\n\n            if (that.selectable) {\n                that.selectable.resetTouchEvents();\n            }\n\n            if (that._checkBoxSelection) {\n                that._toggleHeaderCheckState(false);\n            }\n\n            if (that.options.persistSelection &&\n                ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                (that.items().length || that.dataSource._isGroupPaged())) {\n                that._restoreSelection();\n            }\n\n            if (!that.options.persistSelection) {\n                that._selectedIds = {};\n            }\n\n            if (that._hasReorderableRows()) {\n                that._draggableRows();\n                that._reorderableRows();\n            }\n\n            if (that.options.selectable && that.options.selectable.cellAggregates) {\n                that._calculateAggregatesForSelected();\n            }\n\n            that._aria();\n\n            that.trigger(DATABOUND);\n       },\n\n        _getSchemaIdField: function() {\n            const that = this;\n            const model = that.dataSource.options.schema.model;\n            return isFunction(model) ? model.fn.idField : model && model.id;\n        },\n\n        _restoreCurrent: function(currentIndex, isCurrentInHeader, multiColumnHeaderIndex) {\n            if (currentIndex === undefined$1 || currentIndex < 0) {\n                return;\n            }\n\n            this._removeCurrent();\n\n            if (isCurrentInHeader) {\n                this._setCurrent(this.thead.find(`tr:eq(${multiColumnHeaderIndex}) th:not(.k-group-cell)`).eq(currentIndex), false, this._hasVirtualColumns());\n            } else {\n                var rowIndex = 0;\n                var virtualScroll = this.virtualScroll || {};\n\n                if (this._rowVirtualIndex) {\n                    if (virtualScroll.rows) {\n                        rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                    } else {\n                        rowIndex = this._rowVirtualIndex;\n                    }\n                } else if (this._currentRowIndex) {\n                    rowIndex = this._currentRowIndex;\n                } else {\n                    currentIndex = 0;\n                }\n\n                var row = $();\n                var colspan;\n\n                if (this.lockedTable) {\n                    row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                }\n                row = row.add(this.tbody.children().eq(rowIndex));\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                    currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                }\n\n\n                var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                    .eq(currentIndex);\n\n                if (!td.length || currentIndex < 0) {\n                    return;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    this._setCurrent(td, true, true);\n                } else {\n                    this._setCurrent(td);\n                }\n\n            }\n\n            if (this._current) {\n                focusTable(this.table, true);\n            }\n        },\n\n        _restoreSelection: function() {\n            var that = this,\n                allRows = that.items(),\n                selectedRows,\n                id = that._getSchemaIdField();\n\n            selectedRows = grep(allRows, function(row) {\n                 var dataItemKey = that.dataItem(row)[id];\n                 if (that._selectedIds[dataItemKey]) {\n                    return row;\n                 }\n            });\n\n            that.select(selectedRows);\n        },\n\n        _getSelectedRowUids: function() {\n            var that = this,\n                selected = that.select(),\n                row,\n                uid,\n                result = [];\n\n            for (let i = 0; i < selected.length; i++) {\n                row = $(selected[i]);\n\n                if (kendo.ui.Selectable.parseOptions(that.options.selectable).cell) {\n                    row = row.closest(TR);\n                }\n\n                uid = row.data(\"uid\");\n\n                if (result.indexOf(uid) === -1) {\n                    result.push(uid);\n                }\n            }\n\n            return result;\n        },\n\n        _getSelectedColumnFields: function() {\n            var that = this,\n                selected = that.select(),\n                field,\n                index,\n                visibleColumns = visibleLeafColumns(that.columns).filter(col => !col.selectable && !col.draggable & !col.command),\n                result = [];\n\n            // If the mode is in row selection, then return all of the visible columns.\n            if (!kendo.ui.Selectable.parseOptions(that.options.selectable).cell) {\n                return visibleColumns.map(vc => vc.field);\n            }\n\n            for (let i = 0; i < selected.length; i++) {\n                index = $(selected[i]).index();\n\n                field = that.thead.find(\"th:eq(\" + index + \")\").data(\"field\");\n\n                if (result.indexOf(field) === -1) {\n                    result.push(field);\n                }\n            }\n\n            return result;\n        },\n\n       _cleanupDetailItems: function() {\n           var that = this;\n\n           if (that._hasDetails()) {\n               that.tbody.find(\".k-detail-cell\").empty();\n           }\n       },\n\n       _renderContent: function(data, colspan, groups) {\n            var that = this,\n                idx,\n                length,\n                html = \"\",\n                isLocked = that.lockedContent != null,\n                endlessAppend = null,\n                skipLastGroup,\n                flatViewLength,\n                scrollable = that.options.scrollable,\n                templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate,\n                        groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                    };\n            if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                that._skipRerenderItemsCount = 0;\n                if (that.content) {\n                    that.content[0].scrollTop = 0;\n                }\n            }\n            endlessAppend = that._skipRerenderItemsCount > 0;\n            colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n            if (groups > 0) {\n\n                colspan = isLocked ? colspan - groups : colspan;\n\n                if (that.detailTemplate) {\n                    colspan++;\n                }\n\n                if (that.groupFooterTemplate) {\n                    that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                }\n                if (that.options.scrollable.endless) {\n                    flatViewLength = that.dataSource.flatView().length;\n                }\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (!that._skippedGroups) {\n                        that._skippedGroups = [];\n                    }\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                    html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                }\n            } else {\n                html += that._rowsHtml(data, templates);\n            }\n\n            if (endlessAppend) {\n                that.tbody.append(html);\n                kendo.applyStylesFromKendoAttributes(that.tbody, [\"display\", \"left\", \"right\"]);\n                clearTimeout(that._endlessFetchTimeOut);\n                that._endlessFetchTimeOut = setTimeout(function() {\n                    if (that._groupToCollapse) {\n                        that.collapseGroup(that._groupToCollapse);\n                        that._groupToCollapse = null;\n                    }\n                });\n                that._endlessFetchInProgress = null;\n            } else {\n                that.tbody = appendContent(that.tbody, that.table, html, this.options.size);\n            }\n       },\n\n       _renderGroupRows: function() {\n        var that = this,\n        data = that._groupRows,\n        groupRows = that.wrapper.find(DOT + GROUPING_ROW),\n        groups = that._groups(),\n        groupRowBuilderFunc,\n        isLocked = that.lockedContent != null,\n        columns,\n        colspan,\n        group,\n        field,\n        column,\n        template,\n        text,\n        groupHeaderData,\n        tableContainer,\n        isInLockedContainer,\n        prevElement,\n        newGroupRowElement,\n        currentRow,\n        level,\n        groupHeaderColumnTemplate,\n        firstColumnGroupData;\n\n        groupRows.each(function(index, row) {\n            currentRow = $(row);\n            tableContainer = currentRow.closest(\"table\").parent();\n            isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n            columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n            level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n            if (isLocked) {\n                groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n            }\n            else {\n                groupRowBuilderFunc = groupRowBuilder;\n                colspan = columns.length + groups - level;\n            }\n\n            group = index >= data.length ? data[index - data.length] : data[index];\n            field = group.field;\n            column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n            firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n            template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n            text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || htmlEncode(field, true)) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n            groups = groups;\n            groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n            groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n            if (template) {\n                text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n            }\n\n            prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n            newGroupRowElement = $(groupHeaderColumnTemplate ?\n                groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                groupRowBuilderFunc(colspan, level, text, null, null, null, isRtl)\n            );\n\n            kendo.applyStylesFromKendoAttributes(newGroupRowElement, [\"display\", \"left\", \"right\"]);\n\n            if (prevElement.is(\"tbody\")) {\n                prevElement.prepend(newGroupRowElement);\n            }\n            else {\n                prevElement.after(newGroupRowElement);\n            }\n                currentRow.remove();\n           });\n       },\n\n       _renderLockedContent: function(data, colspan, groups) {\n           var html = \"\",\n               idx,\n               length,\n               skipLastGroup,\n               endlessAppend = null,\n               flatViewLength,\n               templates = {\n                   rowTemplate: this.lockedRowTemplate,\n                   altRowTemplate: this.lockedAltRowTemplate,\n                   groupFooterTemplate: this.lockedGroupFooterTemplate,\n                   groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n               };\n\n           if (this.lockedContent) {\n\n               var table = this.lockedTable;\n               endlessAppend = this._skipRerenderItemsCount > 0;\n\n               if (groups > 0) {\n                   colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                   if (this.options.scrollable.endless) {\n                     flatViewLength = this.dataSource.flatView().length;\n                   }\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                    html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                   }\n               } else {\n                   html = this._rowsHtml(data, templates);\n               }\n\n               if (endlessAppend) {\n                   table.children(\"tbody\").append(html);\n               } else {\n                   appendContent(table.children(\"tbody\"), table, html, this.options.size);\n               }\n\n               this._syncLockedContentHeight();\n           }\n       },\n\n       _togglePagerVisibility: function() {\n           if (this.options.pageable.alwaysVisible === false) {\n                this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n            }\n       },\n\n       _adjustRowsHeight: function(table1, table2) {\n           var rows = table1[0].rows,\n               length = rows.length,\n               idx,\n               rows2 = table2[0].rows,\n               containers = table1.add(table2),\n               containersLength = containers.length,\n               heights = [];\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               if (rows[idx].style.height) {\n                   rows[idx].style.height = rows2[idx].style.height = \"\";\n               }\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               var offsetHeight1 = rows[idx].offsetHeight;\n               var offsetHeight2 = rows2[idx].offsetHeight;\n               var height = 0;\n\n               if (offsetHeight1 > offsetHeight2) {\n                   height = offsetHeight1;\n               } else if (offsetHeight1 < offsetHeight2) {\n                   height = offsetHeight2;\n               }\n\n               heights.push(height);\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = NONE;\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (heights[idx]) {\n                   //add one to resolve row misalignment in IE\n                   rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + PX;\n               }\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = \"\";\n           }\n       }\n   });\n\n   if (kendo.ExcelMixin) {\n       kendo.ExcelMixin.extend(Grid.prototype);\n   }\n\n   if (kendo.PDFMixin) {\n       kendo.PDFMixin.extend(Grid.prototype);\n\n       Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n           var grid = this;\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n           var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n           var cont = $(\"<div>\")\n               .css({ position: \"absolute\", left: -10000, top: -10000 });\n           var clone;\n\n           grid.toggleUnexportableColumns(grid.columns);\n           clone = grid.wrapper.clone().css({\n               height: AUTO, width: AUTO\n           }).appendTo(cont);\n           clone.find(\".k-grid-content\").css({ height: AUTO, width: AUTO, overflow: \"visible\" });\n           clone.find('> table, .k-grid-header table, .k-grid-content > table, .k-grid-footer table').css({ height: AUTO, width: \"100%\", overflow: \"visible\" });\n           clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n           clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n           var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.one(\"change\", draw);\n                   dataSource.page(startingPage);\n               } else {\n                   grid.refresh();\n                   draw();\n               }\n           }\n\n           function draw() {\n               cont.appendTo(document.body);\n               var options = $.extend({}, grid.options.pdf, {\n                   _destructive: true,\n                   progress: function(p) {\n                       progress.notify({\n                           page: p.page,\n                           pageNumber: p.pageNum,\n                           progress: 0.5 + p.pageNum / p.totalPages / 2,\n                           totalPages: p.totalPages\n                       });\n                   }\n               });\n               kendo.drawing.drawDOM(clone, options)\n                   .always(function() {\n                       cont.remove();\n                   })\n                   .then(function(group) {\n                       result.resolve(group);\n                       grid.toggleUnexportableColumns(grid.columns, true);\n                   })\n                   .fail(function(err) {\n                       result.reject(err);\n                   });\n           }\n\n           function renderPage() {\n               var pageNum = dataSource.page();\n               var totalPages = allPages ? dataSource.totalPages() : 1;\n               body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n               if (pageNum < totalPages) {\n                   dataSource.page(pageNum + 1);\n               } else {\n                   dataSource.unbind(\"change\", renderPage);\n                   resolve();\n               }\n           }\n\n           if (allPages) {\n               dataSource.bind(\"change\", renderPage);\n               dataSource.page(1);\n           } else {\n               renderPage();\n           }\n\n           return result.promise();\n       };\n\n       Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n           var length = columns.length;\n           var column;\n           var exportable;\n           var visibleInExport;\n           var visibleInExportOnly;\n\n           for (var i = 0; i < length; i++) {\n               column = columns[i];\n               exportable = column.exportable;\n               if (!restore) {\n                   if (typeof column.exportable === \"object\") {\n                       exportable = column.exportable.pdf;\n                   }\n\n                   visibleInExport = !column.hidden && exportable !== false;\n                   visibleInExportOnly = column.hidden && exportable === true;\n                   exportable = visibleInExport || visibleInExportOnly;\n\n                   if (!exportable && !column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.hideColumn(column);\n                   } else if (exportable && column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.showColumn(column);\n                   } else if (exportable && column.columns) {\n                       this.toggleUnexportableColumns(column.columns);\n                   }\n               } else {\n                   if (column._toggledDuringExport) {\n                       column._toggledDuringExport = false;\n\n                       if (column.hidden) {\n                           this.showColumn(column);\n                       } else {\n                           this.hideColumn(column);\n                       }\n                   } else if (column.columns) {\n                       this.toggleUnexportableColumns(column.columns, restore);\n                   }\n               }\n           }\n       };\n\n       Grid.prototype._drawPDF = function(progress) {\n           var grid = this;\n\n           if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != AUTO) {\n               return grid._drawPDF_autoPageBreak(progress);\n           }\n\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n\n           // This group will be our document containing all pages\n           var doc = new kendo.drawing.Group();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.unbind(\"change\", exportPage);\n                   dataSource.one(\"change\", function() {\n                       result.resolve(doc);\n                   });\n\n                   dataSource.page(startingPage);\n               } else {\n                   result.resolve(doc);\n               }\n           }\n\n           function exportPage() {\n                grid.toggleUnexportableColumns(grid.columns);\n                grid._drawPDFShadow({\n                    width: grid.wrapper.width()\n                }, {\n                    avoidLinks: grid.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                    var args = {\n                        page: group,\n                        pageNumber: pageNum,\n                        progress: pageNum / totalPages,\n                        totalPages: totalPages\n                    };\n\n                    grid.toggleUnexportableColumns(grid.columns, true);\n                    progress.notify(args);\n                    doc.append(args.page);\n\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        resolve();\n                    }\n                })\n                .fail(function(err) {\n                    result.reject(err);\n                });\n            }\n\n            if (allPages) {\n                dataSource.bind(\"change\", exportPage);\n                dataSource.page(1);\n            } else {\n                exportPage();\n            }\n\n            return result.promise();\n        };\n   }\n\n   function syncTableHeight(table1, table2) {\n       table1 = table1[0];\n       table2 = table2[0];\n\n       if (table1.rows.length !== table2.rows.length) {\n           var lockedHeigth = table1.offsetHeight;\n           var tableHeigth = table2.offsetHeight;\n\n           var row;\n           var diff;\n           if (lockedHeigth > tableHeigth) {\n               row = table2.rows[table2.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table2.rows[table2.rows.length - 2];\n               }\n\n               diff = lockedHeigth - tableHeigth;\n           } else {\n               row = table1.rows[table1.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table1.rows[table1.rows.length - 2];\n               }\n\n               diff = tableHeigth - lockedHeigth;\n           }\n           row.style.height = row.offsetHeight + diff + PX;\n       }\n   }\n\n   function adjustRowHeight(row1, row2) {\n       var height;\n       var offsetHeight1 = row1.offsetHeight;\n       var offsetHeight2 = row2.offsetHeight;\n\n       if (offsetHeight1 > offsetHeight2) {\n           height = offsetHeight1 + PX;\n       } else if (offsetHeight1 < offsetHeight2) {\n           height = offsetHeight2 + PX;\n       }\n\n       if (height) {\n           row1.style.height = row2.style.height = height;\n       }\n   }\n\n   function getCommand(commands, name) {\n       var idx, length, command;\n\n       if (typeof commands === STRING && commands === name) {\n          return commands;\n       }\n\n       if (isPlainObject(commands) && commands.name === name) {\n           return commands;\n       }\n\n       if (isArray(commands)) {\n           for (idx = 0, length = commands.length; idx < length; idx++) {\n               command = commands[idx];\n\n               if ((typeof command === STRING && command === name) || (command.name === name)) {\n                   return command;\n               }\n           }\n       }\n       return null;\n   }\n\n   function compareElements(element, toCompare) {\n       if (element.length !== toCompare.length) {\n           return false;\n       }\n\n       for (var i = 0; i < element.length; i++) {\n           if (element[i] !== toCompare[i]) {\n               return false;\n           }\n       }\n\n       return true;\n   }\n\n   function focusTable(table, direct) {\n       if (!table || table.length === 0) {\n           return;\n       }\n\n       if (direct === true) {\n           table = $(table);\n           var scrollLeft = kendo.scrollLeft(table.parent());\n\n            kendo.focusElement(table);\n            kendo.scrollLeft(table.parent(), scrollLeft);\n        } else {\n            $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n        }\n    }\n\n   function isColumnGroupable(grid, column) {\n       return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n   }\n\n   function isGroupedBy(groups, field) {\n       return !!$.grep(groups, function(item) {\n           return item.field === field;\n       }).length;\n   }\n\n   function isColumnEditable(column, model) {\n       if (!column.field || column.selectable) {\n           return false;\n       }\n       if (model.editable && !model.editable(column.field)) {\n           return false;\n       }\n       if (column.editable && !column.editable(model)) {\n           return false;\n       }\n       return true;\n   }\n\n   function isInputElement(element) {\n       return $(element).is(INPUT_SELECTORS);\n   }\n\n    function tableClick(e) {\n        var that = this,\n            currentTarget = $(e.currentTarget),\n            isHeader = currentTarget.is(\"th\"),\n            table = this.table.add(this.lockedTable),\n            headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n            isInput = isInputElement(e.target),\n            preventScroll = $(e.target).is('.k-checkbox'),\n            target = $(e.target),\n            currentTable = currentTarget.closest(\"table\")[0];\n\n        if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n            this._setCurrent(currentTarget);\n            return;\n        }\n\n        if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n            return;\n        }\n\n        if (target.is(CARET_ALT_RIGHT + \",\" + CARET_ALT_DOWN)) {\n            return;\n        }\n\n        if (this.options.navigatable) {\n            this._setCurrent(currentTarget, false, preventScroll);\n        }\n\n        if (isHeader || !isInput) {\n            setTimeout(function() {\n                var activeEl = $(kendo._activeElement());\n                if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\") || activeEl.is(\".k-upload .k-upload-button\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                    return;\n                }\n\n                //Only if input element is not selected yet and it is not descendant of the grid's table\n                if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                    //DOMElement.focus() only for header, because IE doesn't really focus the table\n                    focusTable(that.table[0], true);\n                }\n            });\n        }\n\n        if (isHeader && !kendo.support.touch) {\n            e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n        }\n    }\n\n   function leftMostPosition(element, rtl) {\n       if (!rtl) {\n           return 0;\n       }\n\n       var result = 0;\n\n       if (kendo.support.browser.webkit) {\n           result = element.width();\n       }\n\n       return result;\n   }\n\n   function parseVirtualSettings(options) {\n        var asLowerString;\n\n        if (typeof options === \"string\") {\n            asLowerString = options.toLowerCase();\n            if (asLowerString === \"true\") {\n                return {\n                    rows: true\n                };\n            } else {\n                return {\n                    rows: asLowerString.indexOf(\"rows\") > -1,\n                    columns: asLowerString.indexOf(\"columns\") > -1\n                };\n            }\n\n        } else if (options === true) {\n            return {\n                rows: true\n            };\n        }\n   }\n\n   function isElementVisibleInWrapper(wrapper, element) {\n       var offsetTop;\n       var halfHeight;\n\n       if (!wrapper) {\n         return false;\n       }\n\n       element = $(element);\n\n       if (element[0] && contains(wrapper[0], element[0])) {\n           offsetTop = element.offset().top - wrapper.offset().top;\n           halfHeight = element.outerHeight() / 2;\n\n           if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n               return true;\n           }\n       }\n\n       return false;\n   }\n\n   function isInEdit(cell) {\n       return cell &&\n           (cell.hasClass(\"k-edit-cell\") ||\n            cell.parent().hasClass(\"k-grid-edit-row\"));\n   }\n\n    function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n        var html;\n\n        if (groupHeaderColumnTemplate) {\n            html = groupHeaderColumnTemplate(extend({}, groupData, {\n                groupCells: level,\n                colspan: templateColspan,\n                text: text,\n                expanded: expanded,\n                isRtl: isRtl,\n                uid: group.uid\n            }));\n        } else {\n            html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged, isRtl);\n        }\n\n        return html;\n    }\n\n   function groupCellBuilder(headerTemplateIndex) {\n    return ({ colspan, text, expanded, isRtl }) => {\n        let collapsedClass = `caret-alt-${isRtl ? 'left' : 'right'}`;\n        return `<td class=\"k-table-td\" colspan=\"${colspan + headerTemplateIndex}\">` +\n        '<p class=\"k-reset\">' +\n            kendo.ui.icon($(`<a href=\"\\\\#\" tabindex=\"-1\" ${ARIA_LABEL}=\"${(expanded ? COLLAPSE : EXPAND)}\"></a>`), { icon: (expanded ? 'caret-alt-down' : collapsedClass) }) + text +\n        `</p></td>${new Array(colspan + headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\")}`;\n    };\n   }\n\n   function groupCellLockedContentBuilder(headerTemplateIndex) {\n    return '<td class=\"k-table-td\" colspan=\"' + headerTemplateIndex + '\">' +\n    `<p class=\"k-reset\">&nbsp;</p></td>${new Array(headerTemplateIndex).join(\"<td hidden group-header-spanned-hidden></td>\")}`;\n   }\n\n   function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData, isRtl) {\n    return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-table-group-row k-grouping-row k-table-row\">' + groupCells(level) +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n        '<p class=\"k-reset\">' +\n        kendo.ui.icon($('<a href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>'), { icon: (expanded ? 'caret-alt-down' : `caret-alt-${isRtl ? 'left' : 'right'}`) }) + text +\n    `</p></td>${new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")}</tr>`;\n   }\n\n   function groupRowLockedContentBuilder(colspan) {\n    return '<tr class=\"k-table-group-row k-grouping-row k-table-row\">' +\n        '<td class=\"k-table-td\" colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n        `<p class=\"k-reset\">&nbsp;</p></td>${new Array(colspan).join(\"<td hidden group-header-spanned-hidden></td>\")}</tr>`;\n   }\n\n   function toggleRow(row, visible) {\n       row = $(row)[0];\n       if (visible) {\n           row.style.display = \"\";\n       } else {\n           row.style.display = NONE;\n       }\n   }\n\n   function htmlEncode(value, backslashEscapeQuotes) {\n       var ampRegExp = /&/g,\n           ltRegExp = /</g,\n           quoteRegExp = /\"/g,\n           aposRegExp = /'/g,\n           gtRegExp = />/g;\n\n       return (\"\" + value)\n           .replace(ampRegExp, \"&amp;\")\n           .replace(ltRegExp, \"&lt;\")\n           .replace(gtRegExp, \"&gt;\")\n           .replace(quoteRegExp, function(match) {\n               if (backslashEscapeQuotes) {\n                   return \"\\\\\" + match;\n               }\n               return \"&quot;\";\n           })\n           .replace(aposRegExp, \"&#39;\");\n   }\n\n   function isEmptyString(value) {\n        return !/\\S/.test(value);\n   }\n\n   function getTitle(field, columns) {\n        return columns.filter(function(col) {\n            return col.field === field;\n        })[0].title || field;\n    }\n\n    function exportDataSort(a, b) {\n        return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n    }\n\n    function isExcelExportableColumn(column) {\n        return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n    }\n\n   ui.plugin(Grid);\n   ui.plugin(VirtualScrollable);\n\n   extend(kendo.ui.grid, {\n       defaultBodyContextMenu: defaultBodyContextMenu,\n       defaultHeadContextMenu: defaultHeadContextMenu,\n       defaultGroupsContextMenu: defaultGroupsContextMenu\n   });\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { __meta__, kendo$1 as default };\n"]}