{"version":3,"file":"kendo.ripple.cmn.chunk.js","names":["__meta__","id","name","category","description","depends","hidden","chunk","closest","element","selector","matches","Element","prototype","el","sel","msMatchesSelector","node","parentElement","createRipple","doc","ripple","createElement","className","blob","appendChild","once","eventName","fn","listener","removeEventListener","remove","addEventListener","activate","containerSelector","options","e","container","target","document","ownerDocument","test","type","classList","contains","add","_a","state_1","animated","released","eventType","focusin","keydown","mousedown","pointerdown","touchdown","animationstart","currentTarget","release","window","getComputedStyle","getPropertyValue","rect","getBoundingClientRect","left","top_1","clientX","clientY","top","width","height","dx","dy","size","Math","sqrt","style","offsetWidth","Error","cssText","setTimeout","finishAnimation","state","deactivate","parentNode","removeChild","transition","opacity","register","root","elements","arr","handlers","map","item","defaultOptions","events","global","activator","body","forEach","evt","concat","apply"],"sources":["kendo.ripple.cmn.chunk.js"],"mappings":"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","ignoreList":[],"sourcesContent":["\n\nconst __meta__ = {\n    id: \"ripple.cmn.chunk\",\n    name: \"RippleCmnChunk\",\n    category: \"web\",\n    description: \"A reusable outputed chunk of code\",\n    depends: [],\n    hidden: true,\n    chunk: true\n};\n\nvar closest = function (element, selector) {\n    if (element.closest) {\n        return element.closest(selector);\n    }\n    var matches = Element.prototype.matches ?\n        function (el, sel) { return el.matches(sel); }\n        : function (el, sel) { return el.msMatchesSelector(sel); };\n    var node = element;\n    while (node) {\n        if (matches(node, selector)) {\n            return node;\n        }\n        node = node.parentElement;\n    }\n};\nvar createRipple = function (doc) {\n    var ripple = doc.createElement('div');\n    ripple.className = 'k-ripple';\n    var blob = doc.createElement('div');\n    blob.className = 'k-ripple-blob';\n    ripple.appendChild(blob);\n    return [ripple, blob];\n};\nvar once = function (element, eventName, fn) {\n    var listener = function () {\n        fn();\n        element.removeEventListener(eventName, listener, false);\n    };\n    var remove = function () { return element.addEventListener(eventName, listener, false); };\n    remove();\n    return { remove: remove };\n};\nvar activate = function (containerSelector, options) { return function (e) {\n    var target = e.target;\n    var doc = target.document || target.ownerDocument;\n    var container;\n    if (options.container) {\n        container = options.container(target);\n    }\n    else {\n        container = closest(target, containerSelector);\n    }\n    if (!container) {\n        return;\n    }\n    // focus event of ripple container triggers double-focus\n    var doubleFocus = /focus/i.test(e.type) && container.classList.contains(\"k-ripple-target\");\n    if (doubleFocus) {\n        return;\n    }\n    if (!target.classList.contains('k-checkbox') && !target.classList.contains('k-radio')) {\n        // suppress focus when animating ripples\n        container.classList.add(\"k-ripple-target\");\n        var _a = createRipple(doc), ripple = _a[0], blob = _a[1];\n        var state_1 = {\n            animated: false,\n            released: false,\n            blob: blob,\n            container: container,\n            ripple: ripple\n        };\n        var eventType = {\n            'focusin': 'focusout',\n            'keydown': 'keyup',\n            'mousedown': 'mouseup',\n            'pointerdown': 'pointerup',\n            'touchdown': 'touchup',\n            'animationstart': 'animationend'\n        }[e.type];\n        once(e.currentTarget, eventType, function () { return release(state_1); });\n        container.appendChild(ripple);\n        // recalc to allow the effect to animate\n        window.getComputedStyle(ripple).getPropertyValue('opacity');\n        var rect = container.getBoundingClientRect();\n        var left = 0;\n        var top_1 = 0;\n        if ((/mouse|pointer|touch/).test(e.type)) {\n            left = e.clientX - rect.left;\n            top_1 = e.clientY - rect.top;\n        }\n        else {\n            left = rect.width / 2;\n            top_1 = rect.height / 2;\n        }\n        // coordinates of the farthest corner\n        var xMax = left < rect.width / 2 ? rect.width : 0;\n        var yMax = top_1 < rect.height / 2 ? rect.height : 0;\n        // distance to the farthest corner\n        var dx = left - xMax;\n        var dy = top_1 - yMax;\n        // blob size is twice the blob radius\n        var size = 2 * Math.sqrt(dx * dx + dy * dy);\n        var duration = 500;\n        blob.style.width = blob.style.height = size + \"px\";\n        // force reflow for Safari 11 to align ripple blob\n        if (blob.offsetWidth < 0) {\n            throw new Error(\"Inconceivable!\");\n        }\n        blob.style.cssText = \"\\n        width: \" + size + \"px;\\n        height: \" + size + \"px;\\n        transform: translate(-50%, -50%) scale(1);\\n        left: \" + left + \"px;\\n        top: \" + top_1 + \"px;\\n    \";\n        setTimeout(function () { return finishAnimation(state_1); }, duration);\n    }\n    else {\n        e.target.classList.remove('k-ripple-focus');\n        if (e.type !== 'animationend') {\n            e.target.classList.add('k-ripple-focus');\n        }\n    }\n}; };\nvar finishAnimation = function (state) {\n    state.animated = true;\n    deactivate(state);\n};\nvar release = function (state) {\n    state.released = true;\n    deactivate(state);\n};\nvar deactivate = function (state) {\n    // deactivation happens when both\n    // - the activation event has been released (release)\n    // - the ripple has finished animating (finishAnimation)\n    if (!state.released || !state.animated) {\n        return;\n    }\n    var blob = state.blob, ripple = state.ripple, container = state.container;\n    if (container) {\n        once(container, 'blur', function () { return container.classList.remove(\"k-ripple-target\"); });\n    }\n    if (blob) {\n        once(blob, 'transitionend', function () {\n            if (ripple && ripple.parentNode) {\n                ripple.parentNode.removeChild(ripple);\n            }\n        });\n        blob.style.transition = 'opacity 200ms linear';\n        blob.style.opacity = '0';\n    }\n};\n/**\n * @hidden\n */\nvar register = function (root, elements) {\n    var flatten = function (arr) { return [].concat.apply([], arr); };\n    var handlers = flatten(elements.map(function (item) {\n        var defaultOptions = {\n            events: ['mousedown', 'touchdown'],\n            global: false\n        };\n        var selector = item.selector, _a = item.options, options = _a === void 0 ? defaultOptions : _a;\n        var activator = activate(selector, options);\n        var events = options.events || defaultOptions.events;\n        var container = options.global ? document.body : root;\n        events.forEach(function (evt) { return container.addEventListener(evt, activator, false); });\n        return { events: events, options: options, activator: activator };\n    }));\n    return function () {\n        if (!root) {\n            return;\n        }\n        var removeListener = function (_a) {\n            var events = _a.events, options = _a.options, activator = _a.activator;\n            var container = options.global ? document.body : root;\n            events.forEach(function (evt) { return container.removeEventListener(evt, activator, false); });\n        };\n        handlers.forEach(removeListener);\n        root = null;\n    };\n};\n\nexport { register as r };\nexport { __meta__ };"]}