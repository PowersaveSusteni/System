{"version":3,"file":"kendo.scheduler.js","names":["__meta__","id","name","category","description","depends","features","$","undefined$1","kendo","window","date","MS_PER_DAY","getDate","getMilliseconds","recurrence","encode","htmlEncode","keys","ui","Widget","DataBoundWidget","STRING","Popup","Calendar","DataSource","data","isPlainObject","extend","toString","Object","prototype","isArray","Array","NS","CLICK","MOUSEDOWN","TOUCHSTART","support","pointers","TOUCHMOVE","TOUCHEND","MOUSEMOVE","mousemove","CHANGE","PROGRESS","ERROR","CANCEL","REMOVE","RESET","SAVE","EDIT","DISABLED","FOCUSEDSTATE","valueStartEndBoundRegex","MIN_SCREEN","TODAY","Date","EXCEPTION_SEPARATOR","OLD_EXCEPTION_SEPARATOR_REGEXP","RECURRENCE_EXCEPTION","EDITRECURRING","COMMANDBUTTONTMPL","className","attr","text","icon","fillMode","themeColor","html","renderButton","VIEWS_DROPDOWN_TEMPLATE","template","label","views","type","map","view","title","join","DEFAULT_TOOLS","pdf","attributes","class","pdfMobile","showText","today","previous","groupClass","next","current","search","refresh","create","calendar","previousMobile","nextMobile","currentMobile","togglable","group","defaultDesktopTools","defaultMobileToolsFirst","defaultMobileToolsSecond","timezoneButtonText","model","message","startTimezone","endTimezone","appendTimezoneAttr","attrs","options","timezone","appendValidDateValidator","validationRules","fields","field","validation","validDateRule","validDateValidator","appendDateCompareValidator","dateCompareRule","dateCompare","convertData","method","removeUid","event","idx","length","startOffset","endOffset","start","getTimezoneOffset","end","convert","uid","getTime","getOccurrenceByUid","SchedulerDataReader","Class","init","schema","reader","this","originalFunction","wrapDataAccess","bind","serialize","call","ObservableArray","wrapDataSerialization","errors","parse","total","groups","aggregates","applyZone","fromZone","toZone","remove","input","filter","picker","widgetInstance","parseDate","val","format","value","SchedulerEvent","Model","define","that","fn","_defaultId","defaults","idField","_time","fieldTime","toUtcTime","_date","clone","updateUid","constructor","toJSON","duration","offset","MS_PER_MINUTE","expand","zone","update","eventInfo","set","_startTime","_endTime","isMultiDay","isAllDay","isException","isNew","recurrenceId","isOccurrence","isRecurring","recurrenceRule","isRecurrenceHead","toOccurrence","recurrenceException","obj","shouldSerialize","key","milliseconds","setTime","defaultValue","required","validDate","container","closest","startInput","find","endInput","startPicker","endPicker","editable","untilDateCompare","until","SchedulerDataSource","modelBase","apply","logic","filters","operator","Query","events","concat","expandAll","toArray","cancelChanges","_removeExceptionDate","insert","index","_createNewModel","accept","_pushCreated","_addExceptionDate","pushCreate","items","_removeExceptions","slice","item","shift","head","get","replaceRegExp","RegExp","toExceptionString","replace","test","newException","dataSource","Error","defaultCommands","canceledit","destroy","imageClass","iconClass","descriptionEditor","createValidationAttributes","appendTo","wrap","ruleName","rule","modelField","specialRules","datatype","inArray","isFunction","filterResourceEditorData","editor","parentValue","parentValueField","valueField","valueArray","editorValue","isMs","JSON","stringify","forEach","currentValue","indexOf","splice","trigger","bindParentValueChangeHandler","currentEditor","resource","parent","parentElement","ns","parentWidget","getKendoDropDownList","ev","sender","dataParentValueField","dataValueField","on","target","filterMobileResourceEditorData","parentSelectedValue","itemParentValue","getter","removeAttribute","setAttribute","moveEventRange","distance","editors","mobile","dateRange","dateTimeValidate","dateValidate","hide","timezonePopUp","messages","noTimezone","click","kendoMobileTimezoneEditor","optionLabel","kendoMobileRecurrenceEditor","pane","multipleResources","dataTextField","setTimeout","resources","desktop","timezoneEditorButton","visible","toggle","kendoTimezoneEditor","kendoRecurrenceEditor","kendoMultiSelect","valuePrimitive","itemTemplate","disabled","dataColorField","tagTemplate","select","e","dataItem","preventDefault","dataBound","list","i","element","eq","addClass","kendoDropDownList","Editor","Observable","createButton","toggleDateValidationHandler","_toggleDateValidation","isDateTimeInput","shouldValidate","bindAttribute","each","is","allDayEvent","checkHierarchical","windows_zones","push","_initTimezoneEditor","repeat","recurrenceEditor","resourceIndex","parentResource","some","multiple","_buildDesktopEditTemplate","editableFields","renderCheckBox","separateTimezones","editableField","fieldName","fieldTitle","_createEndTimezoneButton","_buildMobileEditTemplate","midPart","_buildEditTemplate","isMobile","settings","Template","templateSettings","unescape","_revertTimezones","_startTimezone","_endTimezone","MobileEditor","arguments","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","css","height","animations","left","right","close","unbind","timezoneView","content","kSwitch","endTimezoneRow","last","cancel","timezoneTitle","save","append","contentElement","show","stopPropagation","hasClass","editView","_editPane","navigate","checked","enable","showDialog","actions","buttons","button","action","primary","document","body","kendoDialog","modal","preventScroll","closable","editEvent","updateText","removeText","cancelText","titleText","editorTitle","resetSeries","resetSeriesBtn","deleteBtn","kendoEditable","clearContainer","validateOnBlur","_views","roleSelector","not","purge","PopupEditor","$html","deleteText","applyStylesFromKendoAttributes","kendoWindow","resizable","draggable","userTriggered","position","open","center","cycleForm","popup","_timezonePopup","buttonIndex","wrapper","currentTarget","getKendoWindow","activator","wnd","checkbox","saveButton","cancelButton","timezonePopup","startTimezoneChange","prop","timezoneEditorTitle","focus","Scheduler","_initModel","_wrapper","selectable","_tabindex","_toolbar","_dataSource","_resources","_resizeHandler","resize","_resizable","_movable","_bindResize","_navigation","_selectable","_touchHandlers","_ariaId","guid","_createEditor","mediaQueryList","mediaQuery","onChange","_onMediaChange","toolbar","children","removeClass","_showWatermarkOverlay","_selectedView","toolbarEl","getKendoToolBar","matches","_model","dateForTitle","shortDateForTitle","_unbindResize","off","dataItems","_data","eventsUids","dict","eventsUidsLength","eventsCount","sortedData","_isMobile","mobileOS","_isTouch","originalEvent","pointerType","_isInverseColor","eventElement","_groupsByResource","groupIndex","groupsArray","parentFieldValue","parentField","prevIndex","dataIndex","fieldValue","currentGroupIndex","selectedGroups","selection","_selection","selectedEvents","slots","_selectedSlots","_selectedEvents","_resourceBySlot","_old","clearSelection","groupsByResource","groupedResources","_selectEvents","_select","ranges","rangeStart","_startDate","rangeEnd","addDays","_endDate","timeSlotCollectionCount","toLocalDate","isDaySlot","eventsLength","isGrouped","ctrlKey","_ctrlKey","currentGroup","daySlotCollectionCount","collIdx","getTimeSlotCollection","dayCollIdx","getDaySlotCollection","getAttribute","_createSelection","startX","startY","endX","endY","timeStamp","touchMoveHandler","_touchMove","stop","_touchPosX","_tapPosition","_touchPosY","_userTouched","_scrolling","now","_preventFocus","delta","amplitude","_amplitude","_dragging","Math","abs","_mouseDownSelection","kineticScrollNeeded","animate","scrollTop","_mouseDown","_initialFocus","_shiftKey","_keydown","shiftKey","mouseMoveHandler","_mouseMove","which","isRight","_activeElement","focusElement","_selectFirstSlot","firstSlot","firstAllDay","first","firstContent","_firstEvent","firstEvent","contentEvent","firstEventInAllDay","firstEventInContent","occurrenceByUid","_focusToolbar","oldSelection","oldEventsLength","removeAttr","currentUid","uids","coordinate","changedTouches","verticalScroll","scrollHeight","clientHeight","horizontalScroll","scrollWidth","clientWidth","round","scrollLeft","applyVerticalScroll","applyhorizontalScroll","clearTimeout","_moveTimer","slot","selectionByElement","startDate","endDate","backward","_viewByIndex","_keydownToolbar","keyCode","altKey","DOWN","_showCalendar","_selectedViewName","activeElement","_keydownView","cell","isModifier","arrowKeys","LEFT","RIGHT","UP","isRtl","ENTER","DELETE","BACKSPACE","moveToEvent","HOME","END","_scrollTo","removeEvent","_keydownShortcut","currentDate","toggleFullDay","addEvent","timezoneOffset","_keydownYearView","TAB","F10","_adjustSelectedDate","_keydownAgendaView","move","_keydownChangeView","viewByIndex","viewIndex","_keydownChangeDate","direction","nextDate","previousDate","toolbarIsFocused","ESC","_updateSelection","_updateEventForSelection","_timeSlotInterval","indexOfEvent","autoBind","snap","allDaySlot","min","max","workWeekStart","workWeekEnd","workDays","showWorkHours","startTime","endTime","currentTimeMarker","updateInterval","useLocalTimezone","ongoingEvents","cssClass","enabled","footer","deleteWindowTitle","selectView","ariaSlotLabel","ariaEventLabel","at","to","allDay","prefix","day","week","workWeek","agenda","month","timeline","timelineWeek","timelineWorkWeek","timelineMonth","year","recurrenceMessages","resetSeriesWindowTitle","deleteWindowOccurrence","deleteWindowSeries","editWindowTitle","editWindowOccurrence","editWindowSeries","confirmation","width","orientation","_refreshHandler","_progressHandler","_errorHandler","_resourceRefreshHandler","resourceDS","_resourceProgressHandler","_resourceErrorHandler","_editor","_moveDraggable","_resizeDraggable","add","setDataSource","fetch","siblings","startSlot","endSlot","startResources","clonedEvent","originSlot","originStartTime","clonedEvents","cachedEvents","movable","android","Draggable","ignore","holdToDrag","autoScroll","isTouch","_eventOptionsForMove","inverseColor","evtClone","evtCloneElement","_slotByPosition","x","startLocation","y","range","location","slotIndex","targetSlotElement","top","_updateMoveHint","_removeMoveHint","endResources","_isMultiDrag","evt","updatedEventOptions","eventOptions","_updateEvent","sync","cancelHold","handle","directions","dragstart","_updateEventForResize","drag","dir","currentSlot","originalStart","originalEnd","_updateResizeHint","dragend","dragHandle","_removeResizeHint","setHours","setMinutes","dragcancel","updateEvent","callback","_preventRefresh","_convertDates","getHours","getMinutes","getSeconds","recurrenceHead","getByUid","_showRecurringDialog","eventUid","exception","editRecurring","occurrenceText","seriesText","_modelForContainer","_confirmation","isResetSeries","_isEditorOpened","deleteRecurringConfirmation","deleteSeriesConfirmation","resetSeriesConfirmation","cancelEvent","_editEvent","saveEvent","dirty","_editRecurringDialog","_createPopupEditor","editOccurrence","editSeries","editRecurringMode","_createButton","command","commandName","edit","_set","_attemptRefresh","_deleteRecurringDialog","_removeEvent","occurrence","occurrencesInRange","deleteOccurrence","deleteSeries","createException","deleteOccurrenceConfirmation","createExceptionConfirmation","currentModel","seriesCallback","occurrenceCallback","exeptionCallback","deleteRecurring","_unbindView","_bindView","_viewRemoveHandler","_viewAddHandler","_viewEditHandler","_viewNavigateHandler","isWorkDay","switchWorkDay","_workDayMode","_selectView","_viewActivateHandler","constrainSelection","_renderView","_initialSize","matchMedia","_viewsCount","viewElementToSelect","viewsDropdown","viewsButtonGroup","rebind","viewName","_initializeView","mouseAndTouchPresent","mobileDateForTitle","mobileYearForTitle","force","size","getSize","currentSize","_size","selectedDate","isInDateRange","setFullYear","getFullYear","getMonth","isSettings","overrideOptions","trimOptions","defaultView","selected","hasType","defaultViews","time","resourceFetchArray","_preventRebind","when","then","_requestStart","_error","_progress","progress","resourcePromises","_resourceDataSource","groupName","promises","dataSourceInstance","_bindResourceEvents","isResourceGrouped","_refreshResource","observable","formattedDate","formattedShortDate","_processHandlers","_pdfClickHandler","saveAsPDF","_createClickHandler","_calendarClickHandler","_currentClickHandler","_todayClickHandler","_previousClickHandler","_nextClickHandler","_refreshClickHandler","_viewClickHandler","values","t","_processDefaults","viewsDdl","viewsMobile","viewsButtons","refAttribute","toLowerCase","_viewsButtons","_processToolbarArray","tools","toolbarOptions","commands","grep","unshift","_processViewTools","result","viewsIndex","_processToolbarItems","desktopItems","mobileItems","navigation","main","_processTools","secondToolbar","kendoToolBar","defaultTools","parentMessages","placeholder","throttle","targetElm","anchor","activate","_toggleResize","change","setOptions","depth","copyAnchorStyles","preventRefresh","visibleEndDate","refreshLayout","render","slotByPosition","slotByElement","el","centerX","centerY","resourcesBySlot","plugin","PDFMixin","SCHEDULER_EXPORT","_drawPDF","styles","style","cssText","scheduler","promise","Deferred","table","_drawPDFShadow","avoidLinks","done","args","page","pageNumber","totalPages","notify","resolve","fail","err","reject","always","TimezoneEditor","zones","zones_titles","_zonesQuery","_zoneTitleId","_zoneTitlePicker","_zonePicker","_zoneTitle","_zone","_value","zoneTitle","DropDownList","cascadeFrom","other_zone","ZONETITLEOPTIONTEMPLATE","ZONEOPTIONTEMPLATE","territory","MobileTimezoneEditor","_bindZones","_filter","_options","_zonePickerLabel","zoneSelect","after","zonePicker","zone_value","jQuery","kendo$1"],"sources":["kendo.scheduler.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import './kendo.dropdownlist.js';\nimport './kendo.editable.js';\nimport './kendo.multiselect.js';\nimport './kendo.window.js';\nimport './kendo.datetimepicker.js';\nimport './kendo.scheduler.recurrence.js';\nimport './kendo.scheduler.view.js';\nimport './kendo.scheduler.dayview.js';\nimport './kendo.scheduler.agendaview.js';\nimport './kendo.scheduler.monthview.js';\nimport './kendo.scheduler.timelineview.js';\nimport './kendo.scheduler.yearview.js';\nimport './kendo.dialog.js';\nimport './kendo.pane.js';\nimport './kendo.pdf.js';\nimport './kendo.switch.js';\nimport './kendo.toolbar.js';\nimport './kendo.html.button.js';\nimport './kendo.icons.js';\n\nconst __meta__ = {\n    id: \"scheduler\",\n    name: \"Scheduler\",\n    category: \"web\",\n    description: \"The Scheduler is an event calendar.\",\n    depends: [ \"dropdownlist\", \"editable\", \"multiselect\", \"window\", \"datepicker\", \"datetimepicker\", \"toolbar\", \"scheduler.recurrence\", \"scheduler.view\", \"html.button\", \"icons\" ],\n    features: [ {\n        id: \"scheduler-dayview\",\n        name: \"Scheduler Day View\",\n        description: \"Scheduler Day View\",\n        depends: [ \"scheduler.dayview\" ]\n    }, {\n        id: \"scheduler-agendaview\",\n        name: \"Scheduler Agenda View\",\n        description: \"Scheduler Agenda View\",\n        depends: [ \"scheduler.agendaview\" ]\n    }, {\n        id: \"scheduler-monthview\",\n        name: \"Scheduler Month View\",\n        description: \"Scheduler Month View\",\n        depends: [ \"scheduler.monthview\" ]\n    }, {\n        id: \"scheduler-timelineview\",\n        name: \"Scheduler Timeline View\",\n        description: \"Scheduler Timeline View\",\n        depends: [ \"scheduler.timelineview\" ]\n    }, {\n        id: \"scheduler-yearview\",\n        name: \"Scheduler Year View\",\n        description: \"Scheduler Year View\",\n        depends: [ \"scheduler.yearview\" ]\n    }, {\n        id: \"scheduler-mobile\",\n        name: \"Scheduler adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"scheduler-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export the scheduler events as PDF\",\n        depends: [ \"pdf\", \"drawing\" ]\n    }, {\n        id: \"scheduler-timezones\",\n        name: \"Timezones\",\n        description: \"Allow selecting timezones different than Etc/UTC\",\n        depends: [ \"timezones\" ]\n    }]\n};\n\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        date = kendo.date,\n        MS_PER_DAY = date.MS_PER_DAY,\n        getDate = date.getDate,\n        getMilliseconds = kendo.date.getMilliseconds,\n        recurrence = kendo.recurrence,\n        encode = kendo.htmlEncode,\n        keys = kendo.keys,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        DataBoundWidget = ui.DataBoundWidget,\n        STRING = \"string\",\n        Popup = ui.Popup,\n        Calendar = ui.Calendar,\n        DataSource = kendo.data.DataSource,\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        toString = Object.prototype.toString,\n        isArray = Array.isArray,\n        NS = \".kendoScheduler\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        TOUCHSTART = kendo.support.pointers ? \"pointerdown\" : \"touchstart\",\n        TOUCHMOVE = kendo.support.pointers ? \"pointermove\" : \"touchmove\",\n        TOUCHEND = kendo.support.pointers ? \"pointerup\" : \"touchend\",\n        MOUSEMOVE = kendo.support.mousemove,\n        CHANGE = \"change\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        CANCEL = \"cancel\",\n        REMOVE = \"remove\",\n        RESET = \"resetSeries\",\n        SAVE = \"save\",\n        ADD = \"add\",\n        EDIT = \"edit\",\n        DISABLED = \"disabled\",\n        OPTION = \"option\",\n        FOCUSEDSTATE = \"k-focus\",\n        INVERSECOLORCLASS = \"k-event-inverse\",\n        valueStartEndBoundRegex = /(?:value:start|value:end)(?:,|$)/,\n        MIN_SCREEN = \"(min-width: 1024px)\",\n        TODAY = getDate(new Date()),\n        EXCEPTION_SEPARATOR = \",\",\n        OLD_EXCEPTION_SEPARATOR_REGEXP = /\\;/g,\n        RECURRENCE_EXCEPTION = \"recurrenceException\",\n        DELETECONFIRM = \"Are you sure you want to delete this event?\",\n        DELETERECURRING = \"Do you want to delete only this event occurrence or the whole series?\",\n        EDITRECURRING = \"Do you want to edit only this event occurrence or the whole series?\",\n        DELETERECURRINGCONFIRM = \"Are you sure you want to delete this event occurrence?\",\n        RESETSERIESCONFIRM = \"Are you sure you want to reset the whole series?\",\n        DELETESERIESCONFIRM = \"Are you sure you want to delete the whole series?\",\n        ONGOING_CLASS = \"k-event-ongoing\",\n        COMMANDBUTTONTMPL = ({ className, attr, text, icon, fillMode, themeColor }) =>\n            kendo.html.renderButton(`<button type=\"button\" class=\"${className}\" ${attr}>${text}</button>`, {\n                icon: icon,\n                fillMode: fillMode,\n                themeColor: themeColor\n            }),\n        VIEWS_DROPDOWN_TEMPLATE = kendo.template(({ label, views, type }) =>\n            `<select aria-label=\"${label}\" class=\"k-picker k-dropdown-list k-dropdown ${type}\">` +\n                Object.keys(views).map((view) => `<option value=\"${view}\">${views[view].title}</option>`).join('') +\n            '</select>'\n        ),\n\n        DEFAULT_TOOLS = {\n            pdf: {\n                name: \"pdf\",\n                type: \"button\",\n                icon: \"file-pdf\",\n                attributes: {\n                    class: \"k-pdf\"\n                }\n            },\n            pdfMobile: {\n                name: \"pdf\",\n                type: \"button\",\n                icon: \"file-pdf\",\n                showText: \"overflow\",\n                attributes: {\n                    class: \"k-pdf\"\n                }\n            },\n            today: {\n                name: \"today\",\n                type: \"button\",\n                attributes: {\n                    \"ref-nav-today\": \"\",\n                }\n            },\n            previous: {\n                name: \"previous\",\n                type: \"button\",\n                icon: \"caret-alt-left\",\n                showText: \"overflow\",\n                attributes: {\n                    \"ref-nav-prev\": \"\",\n                },\n                groupClass: \"k-scheduler-navigation\"\n            },\n            next: {\n                name: \"next\",\n                type: \"button\",\n                icon: \"caret-alt-right\",\n                showText: \"overflow\",\n                attributes: {\n                    \"ref-nav-next\": \"\",\n                },\n                groupClass: \"k-scheduler-navigation\"\n            },\n            current: {\n                name: \"current\",\n                type: \"button\",\n                icon: \"calendar\",\n                fillMode: \"flat\",\n                text: 'placeholder',\n                attributes: {\n                    \"aria-live\": \"polite\",\n                    class: \"k-nav-current\"\n                }\n            },\n            search: {\n                template: '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' +\n                        '<input tabindex=\"-1\" autocomplete=\"off\" class=\"k-input-inner k-scheduler-search-input k-input-inner\" />' +\n                        `<span class=\"k-input-suffix\">${kendo.ui.icon(\"search\")}</span>` +\n                    '</span>'\n            },\n            refresh: {\n                name: \"refresh\",\n                type: \"button\",\n                icon: \"arrow-rotate-cw\",\n                showText: \"overflow\",\n                attributes: {\n                    class: \"k-scheduler-refresh\"\n                }\n            },\n            create: {\n                name: \"create\",\n                type: \"button\",\n                icon: \"plus\",\n                attributes: {\n                    class: \"k-create-event\"\n                }\n            },\n            calendar: {\n                name: \"calendar\",\n                type: \"button\",\n                icon: \"calendar\",\n                attributes: {\n                    class: \"k-nav-calendar\"\n                }\n            },\n            previousMobile: {\n                name: \"previous\",\n                type: \"button\",\n                icon: \"chevron-left\",\n                showText: \"overflow\",\n                attributes: {\n                    \"ref-nav-prev\": \"\",\n                },\n                groupClass: \"k-scheduler-navigation\"\n            },\n            nextMobile: {\n                name: \"next\",\n                type: \"button\",\n                icon: \"chevron-right\",\n                showText: \"overflow\",\n                attributes: {\n                    \"ref-nav-next\": \"\",\n                },\n                groupClass: \"k-scheduler-navigation\"\n            },\n            currentMobile: {\n                template: '<span class=\"k-scheduler-navigation\">' +\n                        '<span class=\"k-nav-current\">' +\n                            '<span class=\"k-m-date-format\"></span>' +\n                            '<span class=\"k-y-date-format\"></span>' +\n                        '</span>' +\n                    '</span>'\n            },\n            view: {\n                name: \"view\",\n                type: \"button\",\n                togglable: true,\n                group: \"views\"\n            }\n        },\n\n        defaultDesktopTools = [\n            [\"today\", \"previous\", \"next\"],\n            \"current\",\n            { type: \"spacer\" }\n        ],\n\n        defaultMobileToolsFirst = [\n            [\"calendar\"],\n            { type: \"spacer\" }\n        ],\n\n        defaultMobileToolsSecond = [\n            \"previousMobile\",\n            { type: \"spacer\" },\n            \"currentMobile\",\n            { type: \"spacer\" },\n            \"nextMobile\"\n        ],\n\n        MOBILEDATERANGEEDITOR = function(container, options) {\n            var attr = { name: options.field, title: options.title };\n            var isAllDay = options.model.isAllDay;\n            var dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"'\";\n            var dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"'\";\n\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n\n            $('<input type=\"datetime-local\" required ' + kendo.attr(\"type\") + '=\"datetime-local\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ', invisible:isAllDay\" ' + dateTimeValidate + '/>')\n                .attr(attr)\n                .appendTo(container);\n\n            $('<input type=\"date\" required ' + kendo.attr(\"type\") + '=\"date\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                dateValidate + '/>')\n                .attr(attr).appendTo(container);\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n        },\n        DATERANGEEDITOR = function(container, options) {\n            var attr = { name: options.field, title: options.title },\n                isAllDay = options.model.isAllDay,\n                dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"' \",\n                dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"' \";\n\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datetimepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',invisible:isAllDay\" ' +\n                dateTimeValidate + '/>')\n            .attr(attr).appendTo(container);\n\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                dateValidate + '/>')\n            .attr(attr).appendTo(container);\n\n            $('<span ' + kendo.attr(\"bind\") + '=\"text: ' + options.field + 'Timezone\"></span>').appendTo(container);\n\n            if (options.field === \"end\") {\n                $('<span ' + kendo.attr(\"bind\") + '=\"text: startTimezone, invisible: endTimezone\"></span>').appendTo(container);\n            }\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n        },\n        RECURRENCEEDITOR = function(container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages\n                });\n        },\n        MOBILERECURRENCEEDITOR = function(container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoMobileRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages,\n                    pane: options.pane,\n                    value: options.model[options.field]\n                });\n        },\n        MOBILEISALLDAYEDITOR = function(container, options) {\n            $('<input type=\"checkbox\" data-role=\"switch\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').appendTo(container);\n        },\n        ISALLDAYEDITOR = function(container, options) {\n            $('<input type=\"checkbox\" data-role=\"checkbox\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" data-label=\"' + options.title + '\" />')\n                .attr({\n                    id: options.field,\n                    name: options.field,\n                    title: options.title ? options.title : options.field\n                })\n                .appendTo(container);\n        },\n        MOBILETIMEZONEPOPUP = function(container, options) {\n            var text = timezoneButtonText(options.model, options.messages.noTimezone);\n            $('<span class=\"k-timezone-label\"></span>').text(text).appendTo(container);\n            $(kendo.ui.icon(\"arrow-chevron-right\")).appendTo(container);\n            container.closest(\"li.k-item label\").on(CLICK, options.click);\n        },\n        TIMEZONEPOPUP = function(container, options) {\n            $('<a href=\"#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" data-bind=\"invisible:isAllDay\"><span class=\"k-button-text\">' + options.messages.timezoneEditorButton + '</span></a>').on(CLICK, options.click).appendTo(container);\n        },\n        MOBILETIMEZONEEDITOR = function(container, options) {\n            $('<div class=\"k-mobiletimezoneeditor\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoMobileTimezoneEditor({\n                    optionLabel: options.noTimezone\n                });\n        },\n        TIMEZONEEDITOR = function(container, options) {\n            var visible = options.visible || options.visible === undefined$1;\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({ name: options.field })\n                .toggle(visible)\n                .appendTo(container)\n                .kendoTimezoneEditor({\n                    optionLabel: options.noTimezone,\n                    title: options.title\n                });\n        };\n\n    function timezoneButtonText(model, message) {\n        message = message || \"\";\n\n        if (model.startTimezone) {\n            message = model.startTimezone;\n\n            if (model.endTimezone) {\n                message += \" | \" + model.endTimezone;\n            }\n        }\n\n        return message;\n    }\n\n    function appendTimezoneAttr(attrs, options) {\n        var timezone = options.timezone;\n\n        if (timezone) {\n            attrs[kendo.attr(\"timezone\")] = timezone;\n        }\n    }\n\n    function appendValidDateValidator(attrs, options) {\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules) {\n            var validDateRule = validationRules.validDateValidator;\n            if (validDateRule && isPlainObject(validDateRule) && validDateRule.message) {\n                attrs[kendo.attr(\"validDate-msg\")] = validDateRule.message;\n            }\n        }\n    }\n\n    function appendDateCompareValidator(attrs, options) {\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules) {\n            var dateCompareRule = validationRules.dateCompare;\n            if (dateCompareRule && isPlainObject(dateCompareRule) && dateCompareRule.message) {\n                attrs[kendo.attr(\"dateCompare-msg\")] = dateCompareRule.message;\n            }\n        }\n    }\n\n    function wrapDataAccess(originalFunction, timezone) {\n        return function(data) {\n            data = originalFunction(data);\n\n            convertData(data, \"apply\", timezone);\n\n            return data || [];\n        };\n    }\n\n    function wrapDataSerialization(originalFunction, timezone) {\n        return function(data) {\n\n            if (data) {\n                if (toString.call(data) !== \"[object Array]\" && !(data instanceof kendo.data.ObservableArray)) {\n                    data = [data];\n                }\n            }\n\n            convertData(data, \"remove\", timezone, true);\n\n            data = originalFunction(data);\n\n            return data || [];\n        };\n    }\n\n    function convertData(data, method, timezone, removeUid) {\n        var event,\n            idx,\n            length,\n            startOffset,\n            endOffset;\n\n        data = data || [];\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            event = data[idx];\n            startOffset = event.start ? event.start.getTimezoneOffset() : null;\n            endOffset = event.start ? event.end.getTimezoneOffset() : null;\n\n            if (removeUid) {\n                if (event.startTimezone || event.endTimezone) {\n                    if (timezone) {\n                        event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                        event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    } else {\n                        event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                        event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                    }\n\n                } else if (timezone) {\n                    event.start = kendo.timezone[method](event.start, timezone);\n                    event.end = kendo.timezone[method](event.end, timezone);\n                }\n            } else {\n                if (event.startTimezone || event.endTimezone) {\n                    event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                    event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n\n                    if (timezone) {\n                        event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                        event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                    }\n\n                } else if (timezone) {\n                    event.start = kendo.timezone[method](event.start, timezone);\n                    event.end = kendo.timezone[method](event.end, timezone);\n                }\n            }\n\n            if (removeUid) {\n                delete event.uid;\n            }\n\n            if (method === \"remove\" && event.start && startOffset && startOffset !== event.start.getTimezoneOffset()) {\n                event.start = new Date(event.start.getTime() + (startOffset - event.start.getTimezoneOffset()) * 60000);\n            }\n            if (method === \"remove\" && event.end && endOffset && endOffset !== event.end.getTimezoneOffset()) {\n                event.end = new Date(event.end.getTime() + (endOffset - event.end.getTimezoneOffset()) * 60000);\n            }\n        }\n        return data;\n    }\n\n    function getOccurrenceByUid(data, uid) {\n        var length = data.length,\n            idx = 0,\n            event;\n\n        for (; idx < length; idx++) {\n            event = data[idx];\n\n            if (event.uid === uid) {\n                return event;\n            }\n        }\n    }\n\n    var SchedulerDataReader = kendo.Class.extend({\n        init: function(schema, reader) {\n            var timezone = schema.timezone;\n\n            this.reader = reader;\n\n            if (reader.model) {\n                this.model = reader.model;\n            }\n\n            this.timezone = timezone;\n            this.data = wrapDataAccess(this.data.bind(this), timezone);\n            this.serialize = wrapDataSerialization(this.serialize.bind(this), timezone);\n        },\n        errors: function(data) {\n            return this.reader.errors(data);\n        },\n        parse: function(data) {\n            return this.reader.parse(data);\n        },\n        data: function(data) {\n            return this.reader.data(data);\n        },\n        total: function(data) {\n            return this.reader.total(data);\n        },\n        groups: function(data) {\n            return this.reader.groups(data);\n        },\n        aggregates: function(data) {\n            return this.reader.aggregates(data);\n        },\n        serialize: function(data) {\n            return this.reader.serialize(data);\n        }\n    });\n\n    function applyZone(date, fromZone, toZone) {\n        if (toZone) {\n            date = kendo.timezone.convert(date, fromZone, toZone);\n        } else {\n            date = kendo.timezone.remove(date, fromZone);\n        }\n\n        return date;\n    }\n\n    function validDateValidator(input) {\n        if ((input.filter(\"[name=start]\").length && input.filter(\"[title=Start]\").length) ||\n            (input.filter(\"[name=end]\").length && input.filter(\"[title=End]\").length) ||\n            input.filter(\".k-recur-until\").length) {\n            var date;\n            var picker = kendo.widgetInstance(input, kendo.ui);\n\n            if (picker) {\n                date = kendo.parseDate(input.val(), picker.options.format);\n                return !!date && picker.value();\n            } else {\n                date = kendo.parseDate(input.val());\n                return !!date;\n            }\n        }\n\n        return true;\n    }\n\n    function dateCompareValidator(input) {\n        if (input.filter(\"[name=end]\").length) {\n            var container = input.closest(\".k-scheduler-edit-form\");\n            var startInput = container.find(\"[name=start]:visible\");\n            var endInput = container.find(\"[name=end]:visible\");\n\n            if (endInput[0] && startInput[0]) {\n                var start, end;\n                var startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                var endPicker = kendo.widgetInstance(endInput, kendo.ui);\n\n                var editable = container.data(\"kendoEditable\");\n                var model = editable ? editable.options.model : null;\n\n                if (startPicker && endPicker) {\n                    start = startPicker.value();\n                    end = endPicker.value();\n                } else {\n                    start = kendo.parseDate(startInput.val());\n                    end = kendo.parseDate(endInput.val());\n                }\n\n                if (start && end) {\n                    if (model) {\n                        var timezone = startInput.attr(kendo.attr(\"timezone\"));\n                        var startTimezone = model.startTimezone;\n                        var endTimezone = model.endTimezone;\n\n                        startTimezone = startTimezone || endTimezone;\n                        endTimezone = endTimezone || startTimezone;\n\n                        if (startTimezone) {\n                            start = applyZone(start, startTimezone, timezone);\n                            end = applyZone(end, endTimezone, timezone);\n                        }\n                    }\n\n                    return start <= end;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function untilDateCompareValidator(input) {\n        var untilPicker, until,\n            container, startInput, start, startPicker;\n\n        if (input.filter(\".k-recur-until\").length) {\n            untilPicker = kendo.widgetInstance(input, kendo.ui);\n            until = untilPicker.value();\n            container = input.closest(\".k-scheduler-edit-form\");\n            startInput = container.find(\"[name=start]:visible\");\n\n            if (startInput[0]) {\n                startPicker = kendo.widgetInstance(startInput, kendo.ui);\n\n                if (startPicker) {\n                    start = startPicker.value();\n                } else {\n                    start = kendo.parseDate(startInput.val());\n                }\n\n                if (start && until) {\n                    return start <= until;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    var SchedulerEvent = kendo.data.Model.define({\n        init: function(value) {\n            var that = this;\n\n            kendo.data.Model.fn.init.call(that, value);\n\n            that._defaultId = that.defaults[that.idField];\n        },\n\n        _time: function(field) {\n            var date = this[field];\n            var fieldTime = \"_\" + field + \"Time\";\n\n            if (this[fieldTime]) {\n                return this[fieldTime] - kendo.date.toUtcTime(kendo.date.getDate(date));\n            }\n\n            return getMilliseconds(date);\n        },\n\n        _date: function(field) {\n            var fieldTime = \"_\" + field + \"Time\";\n\n            if (this[fieldTime]) {\n                return this[fieldTime] - this._time(field);\n            }\n\n            return kendo.date.getDate(this[field]);\n        },\n\n        clone: function(options, updateUid) {\n            var uid = this.uid,\n                event = new this.constructor($.extend({}, this.toJSON(), options));\n\n            if (!updateUid) {\n                event.uid = uid;\n            }\n\n            return event;\n        },\n\n        duration: function() {\n            var end = this.end;\n            var start = this.start;\n            var offset = (end.getTimezoneOffset() - start.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\n\n            return end - start - offset;\n        },\n\n        expand: function(start, end, zone) {\n            return recurrence ? recurrence.expand(this, start, end, zone) : [this];\n        },\n\n        update: function(eventInfo) {\n            for (var field in eventInfo) {\n                this.set(field, eventInfo[field]);\n            }\n\n            if (this._startTime) {\n                this.set(\"_startTime\", kendo.date.toUtcTime(this.start));\n            }\n\n            if (this._endTime) {\n                this.set(\"_endTime\", kendo.date.toUtcTime(this.end));\n            }\n        },\n\n        isMultiDay: function() {\n            return this.isAllDay || this.duration() >= kendo.date.MS_PER_DAY;\n        },\n\n        isException: function() {\n            return !this.isNew() && this.recurrenceId;\n        },\n\n        isOccurrence: function() {\n            return this.isNew() && this.recurrenceId;\n        },\n\n        isRecurring: function() {\n            return !!(this.recurrenceRule || this.recurrenceId);\n        },\n\n        isRecurrenceHead: function() {\n            return !!(this.id && this.recurrenceRule);\n        },\n\n        toOccurrence: function(options) {\n            options = $.extend(options, {\n                recurrenceException: null,\n                recurrenceRule: null,\n                recurrenceId: this.id || this.recurrenceId\n            });\n\n            options[this.idField] = this.defaults[this.idField];\n\n            return this.clone(options, true);\n        },\n\n        toJSON: function() {\n            var obj = kendo.data.Model.fn.toJSON.call(this);\n            obj.uid = this.uid;\n\n            delete obj._startTime;\n            delete obj._endTime;\n\n            return obj;\n        },\n\n        shouldSerialize: function(field) {\n            return kendo.data.Model.fn.shouldSerialize.call(this, field) && field !== \"_defaultId\";\n        },\n\n        set: function(key, value) {\n            var isAllDay = this.isAllDay || false;\n\n            kendo.data.Model.fn.set.call(this, key, value);\n\n            if (key == \"isAllDay\" && value != isAllDay) {\n                var start = kendo.date.getDate(this.start);\n                var end = new Date(this.end);\n                var milliseconds = kendo.date.getMilliseconds(end);\n\n                if (milliseconds === 0 && value) {\n                    milliseconds = MS_PER_DAY;\n                }\n\n                this.set(\"start\", start);\n\n                if (value === true) {\n                    kendo.date.setTime(end, -milliseconds);\n\n                    if (end < start) {\n                        end = start;\n                    }\n                } else {\n                    kendo.date.setTime(end, MS_PER_DAY - milliseconds);\n                }\n\n                this.set(\"end\", end);\n            }\n        },\n        id: \"id\",\n        fields: {\n            id: { type: \"number\" },\n            title: { defaultValue: \"\", type: \"string\" },\n            start: { type: \"date\", validation: { required: true, validDate: { value: validDateValidator } } },\n            startTimezone: { type: \"string\" },\n            end: {\n                type: \"date\",\n                validation: {\n                    required: true,\n                    validDate: { value: validDateValidator },\n                    dateCompare: { value: dateCompareValidator }\n                }\n            },\n            endTimezone: { type: \"string\" },\n            recurrenceRule: {\n                defaultValue: \"\",\n                type: \"string\",\n                validation: {\n                    validDate: { value: validDateValidator },\n                    untilDateCompare: { value: untilDateCompareValidator }\n                }\n            },\n            recurrenceException: { defaultValue: \"\", type: \"string\" },\n            isAllDay: { type: \"boolean\", defaultValue: false },\n            description: { type: \"string\" }\n        }\n    });\n\n    var SchedulerDataSource = DataSource.extend({\n        init: function(options) {\n\n            DataSource.fn.init.call(this, extend(true, {}, {\n                schema: {\n                    modelBase: SchedulerEvent,\n                    model: SchedulerEvent\n                }\n            }, options));\n\n            this.reader = new SchedulerDataReader(this.options.schema, this.reader);\n        },\n\n        expand: function(start, end) {\n            var data = this.view(),\n                filter = {},\n                endOffset;\n\n            if (start && end) {\n                endOffset = end.getTimezoneOffset();\n                end = new Date(end.getTime() + MS_PER_DAY - 1);\n\n                if (end.getTimezoneOffset() !== endOffset) {\n                    end = kendo.timezone.apply(end, endOffset);\n                }\n\n                filter = {\n                    logic: \"or\",\n                    filters: [\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"gte\", value: start },\n                                { field: \"end\", operator: \"gte\", value: start },\n                                { field: \"start\", operator: \"lte\", value: end }\n                            ]\n                        },\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"lte\", value: new Date(start.getTime() + MS_PER_DAY - 1) },\n                                { field: \"end\", operator: \"gte\", value: start }\n                            ]\n                        }\n                    ]\n                };\n\n                data = new kendo.data.Query(expandAll(data, start, end, this.reader.timezone)).filter(filter).toArray();\n            }\n\n            return data;\n        },\n\n        cancelChanges: function(model) {\n            if (model && model.isOccurrence()) {\n                this._removeExceptionDate(model);\n            }\n\n            DataSource.fn.cancelChanges.call(this, model);\n        },\n\n        insert: function(index, model) {\n            if (!model) {\n                return;\n            }\n\n            if (!(model instanceof SchedulerEvent)) {\n                var eventInfo = model;\n\n                model = this._createNewModel();\n                model.accept(eventInfo);\n            }\n\n            if ((!this._pushCreated && model.isRecurrenceHead()) || model.recurrenceId) {\n                model = model.recurrenceId ? model : model.toOccurrence();\n                this._addExceptionDate(model);\n            }\n\n            return DataSource.fn.insert.call(this, index, model);\n        },\n\n        pushCreate: function(items) {\n            this._pushCreated = true;\n            DataSource.fn.pushCreate.call(this, items);\n            this._pushCreated = false;\n        },\n\n        remove: function(model) {\n            if (model.isRecurrenceHead()) {\n                this._removeExceptions(model);\n            } else if (model.isRecurring()) {\n                this._addExceptionDate(model);\n            }\n\n            return DataSource.fn.remove.call(this, model);\n        },\n\n        _removeExceptions: function(model) {\n            var data = this.data().slice(0),\n                item = data.shift(),\n                id = model.id;\n\n            while (item) {\n                if (item.recurrenceId === id) {\n                    DataSource.fn.remove.call(this, item);\n                }\n\n                item = data.shift();\n            }\n\n            model.set(RECURRENCE_EXCEPTION, \"\");\n        },\n\n        _removeExceptionDate: function(model) {\n            if (model.recurrenceId) {\n                var head = this.get(model.recurrenceId);\n\n                if (head) {\n                    var start = model.defaults.start;\n                    var replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                    var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n                    if (replaceRegExp.test(recurrenceException)) {\n                        head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                    } else {\n                        start = model.start;\n                        replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                        head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                    }\n                }\n            }\n        },\n\n        _addExceptionDate: function(model) {\n            var start = model.start;\n            var zone = this.reader.timezone;\n            var head = this.get(model.recurrenceId);\n            var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n            if (!recurrence.isException(recurrenceException, start, zone)) {\n                var newException = recurrence.toExceptionString(start, zone);\n                model.defaults.start = start;\n                head.set(RECURRENCE_EXCEPTION, recurrenceException + (recurrenceException && newException ? EXCEPTION_SEPARATOR : \"\") + newException);\n            }\n        }\n    });\n\n    function expandAll(events, start, end, zone) {\n        var length = events.length,\n            data = [],\n            idx = 0;\n\n        for (; idx < length; idx++) {\n            data = data.concat(events[idx].expand(start, end, zone));\n        }\n\n        return data;\n    }\n\n    SchedulerDataSource.create = function(options) {\n        if (isArray(options) || options instanceof kendo.data.ObservableArray) {\n            options = { data: options };\n        }\n\n        var dataSource = options || {},\n            data = dataSource.data;\n\n        dataSource.data = data;\n\n        if (!(dataSource instanceof SchedulerDataSource) && dataSource instanceof kendo.data.DataSource) {\n            throw new Error(\"Incorrect DataSource type. Only SchedulerDataSource instances are supported\");\n        }\n\n        return dataSource instanceof SchedulerDataSource ? dataSource : new SchedulerDataSource(dataSource);\n    };\n\n    extend(true, kendo.data, {\n       SchedulerDataSource: SchedulerDataSource,\n       SchedulerDataReader: SchedulerDataReader,\n       SchedulerEvent: SchedulerEvent\n    });\n\n    var defaultCommands = {\n        update: {\n            text: \"Save\",\n            className: \"k-button-solid-primary k-scheduler-update\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-scheduler-cancel\"\n        },\n        destroy: {\n            text: \"Delete\",\n            icon: \"trash\",\n            imageClass: \"k-i-trash\",\n            className: \"k-button-solid-primary k-scheduler-delete\",\n            iconClass: \"k-icon\"\n        }\n    };\n\n    function trimOptions(options, overrideOptions) {\n        delete options.name;\n        delete options.prefix;\n\n        delete options.remove;\n        delete options.edit;\n        delete options.add;\n        delete options.navigate;\n\n        for (var key in overrideOptions) {\n            options[key] = overrideOptions[key];\n        }\n\n        return options;\n    }\n\n    /*\n    function fieldType(field) {\n        field = field != null ? field : \"\";\n        return field.type || kendo.type(field) || \"string\";\n    }\n    */\n\n    function descriptionEditor(options) {\n        var attr = createValidationAttributes(options.model, options.field);\n\n        return function(container, model) {\n            $('<textarea name=\"description\" class=\"k-input-inner\" title=\"' + model.title + '\"/>').attr(attr)\n                .appendTo(container)\n                .wrap('<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"></span>');\n        };\n    }\n\n    function createValidationAttributes(model, field) {\n        var modelField = (model.fields || model)[field];\n        var specialRules = [\"url\", \"email\", \"number\", \"date\", \"boolean\"];\n        var validation = modelField ? modelField.validation : {};\n        // var type = fieldType(modelField);\n        var datatype = kendo.attr(\"type\");\n        var inArray = $.inArray;\n        var ruleName;\n        var rule;\n\n        var attr = {};\n\n        for (ruleName in validation) {\n            rule = validation[ruleName];\n\n            if (inArray(ruleName, specialRules) >= 0) {\n                attr[datatype] = ruleName;\n            } else if (!kendo.isFunction(rule)) {\n                attr[ruleName] = isPlainObject(rule) ? (rule.value || ruleName) : rule;\n            }\n\n            attr[kendo.attr(ruleName + \"-msg\")] = rule.message;\n        }\n\n        return attr;\n    }\n\n    function filterResourceEditorData(editor, parentValue, parentValueField, valueField) {\n        var editorValue = editor.value(),\n            isMs = Array.isArray(editorValue),\n            valueArray;\n\n        if (isMs) {\n            valueArray = JSON.parse(JSON.stringify(editorValue));\n        } else {\n            valueArray = [editorValue.toString()];\n        }\n\n        editor.dataSource.data().forEach(function(item) {\n            if (item[parentValueField] === null || item[parentValueField] === undefined$1 || item[parentValueField] == parentValue) {\n                item.set(DISABLED, false);\n            } else {\n                var currentValue = item.get(valueField);\n\n                item.set(DISABLED, true);\n\n                if (valueArray.indexOf(currentValue) >= 0 || valueArray.indexOf(currentValue.toString()) >= 0) {\n                    if (isMs) {\n                        valueArray.splice(valueArray.indexOf(currentValue), 1);\n                    } else {\n                        editor.value(null);\n                        editor.trigger(CHANGE);\n                    }\n                }\n            }\n        });\n\n        if (isMs && valueArray.length < editorValue.length) {\n            editor.value(valueArray);\n            editor.trigger(CHANGE);\n        }\n    }\n\n    function bindParentValueChangeHandler(container, currentEditor, resource, parent) {\n        var parentElement = container.closest(\".k-edit-form-container\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n        var parentWidget = parentElement.getKendoDropDownList();\n\n        if (parentWidget) {\n            parentWidget.bind(CHANGE, function(ev) {\n                var parentValue = ev.sender.value();\n\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n            });\n        } else {\n            parentElement.on(CHANGE, function(ev) {\n                var parentValue = ev.target.value;\n\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n            });\n        }\n    }\n\n    function filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue) {\n        var options = currentEditor.find(OPTION),\n            editorValue = currentEditor.val(),\n            isMs = Array.isArray(editorValue),\n            valueArray;\n\n        if (isMs) {\n            valueArray = JSON.parse(JSON.stringify(editorValue));\n        } else {\n            valueArray = [editorValue];\n        }\n\n        resource.dataSource.view().forEach(function(item, index) {\n            var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n            var valid = itemParentValue === null || itemParentValue === undefined$1 || itemParentValue == parentSelectedValue;\n\n            if (valid) {\n                options[index].removeAttribute(DISABLED);\n            } else {\n                options[index].setAttribute(DISABLED, DISABLED);\n\n                var currentValue = \"\" + item.get(resource.dataValueField);\n\n                if (valueArray.indexOf(currentValue) >= 0) {\n                    if (isMs) {\n                        valueArray.splice(valueArray.indexOf(currentValue), 1);\n                    } else {\n                        currentEditor.val(null);\n                        currentEditor.trigger(CHANGE);\n                    }\n                }\n            }\n        });\n\n        if (isMs && valueArray.length < editorValue.length) {\n            currentEditor.val(valueArray);\n            currentEditor.trigger(CHANGE);\n        }\n    }\n\n    function dropDownResourceEditor(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var currentEditor;\n\n            if (parent) {\n                setTimeout(function() {\n                    filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                    bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n            }\n\n            currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" title=\"' + model.title + '\">', kendo.ns, resource.field))\n                .appendTo(container)\n                .attr(attr)\n                .kendoDropDownList({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    optionLabel: \"None\",\n                    template: (data) => `<span ${data.disabled ? \"data-disabled\" : \"\"}><span class=\"k-scheduler-mark\" ${kendo.attr(\"style-background-color\")}=\"${data[resource.dataColorField] || \"none\"}\"></span>${data[resource.dataTextField]}</span>`,\n                    select: function(e) {\n                        if (e.dataItem && e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function(e) {\n                        let options = e.sender.list.find('li');\n\n                        for (let i = 0; i < options.length; i++) {\n                            var element = options.eq(i);\n\n                            if (element.find(\"[data-disabled]\").length > 0) {\n                                element.addClass(\"k-disabled\");\n                            }\n                        }\n                    }\n                }).data(\"kendoDropDownList\");\n       };\n    }\n\n    function dropDownResourceEditorMobile(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var options = \"\";\n            var view = resource.dataSource.view();\n\n            for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>',\n                    kendo.getter(resource.dataValueField)(view[idx]),\n                    kendo.getter(resource.dataTextField)(view[idx])\n                );\n            }\n\n            var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">{2}</select>',\n                kendo.ns,\n                resource.field,\n                options\n            ))\n            .appendTo(container)\n            .attr(attr);\n\n            if (parent) {\n                setTimeout(function() {\n                    var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                    var parentSelectedValue = model[parent];\n\n                    filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                    parentElement.on(CHANGE, function(ev) {\n                        var parentValue = ev.target.value;\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                    });\n                });\n            }\n       };\n    }\n\n    function multiSelectResourceEditor(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var currentEditor;\n\n            if (parent) {\n                setTimeout(function() {\n                    filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                    bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n            }\n\n            currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">', kendo.ns, resource.field))\n                .appendTo(container)\n                .attr(attr)\n                .kendoMultiSelect({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    itemTemplate: (data) => `<span ${data.disabled ? \"data-disabled\" : \"\"}><span class=\"k-scheduler-mark\" ${kendo.attr(\"style-background-color\")}=\"${data[resource.dataColorField] || \"none\"}\"></span>${data[resource.dataTextField]}</span>`,\n                    tagTemplate: (data) => `<span class=\"k-scheduler-mark\" ${kendo.attr(\"style-background-color\")}=\"${data[resource.dataColorField] || \"none\"}\"></span>${data[resource.dataTextField]}`,\n                    select: function(e) {\n                        if (e.dataItem && e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function(e) {\n                        let options = e.sender.list.find('li');\n\n                        for (let i = 0; i < options.length; i++) {\n                            let element = options.eq(i);\n\n                            if (element.find(\"[data-disabled]\").length > 0) {\n                                element.addClass(\"k-disabled\");\n                            }\n                        }\n                    }\n                }).data(\"kendoMultiSelect\");\n       };\n    }\n\n    function multiSelectResourceEditorMobile(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var options = \"\";\n            var view = resource.dataSource.view();\n\n            for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>',\n                    kendo.getter(resource.dataValueField)(view[idx]),\n                    kendo.getter(resource.dataTextField)(view[idx])\n                );\n            }\n\n            var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" multiple=\"multiple\">{2}</select>',\n                kendo.ns,\n                resource.field,\n                options\n            ))\n            .appendTo(container)\n            .attr(attr);\n\n            if (parent) {\n                setTimeout(function() {\n                    var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                    var parentSelectedValue = model[parent];\n\n                    filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                    parentElement.on(CHANGE, function(ev) {\n                        var parentValue = ev.target.value;\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                    });\n                });\n            }\n       };\n    }\n\n    function moveEventRange(event, distance) {\n        var duration = event.end.getTime() - event.start.getTime();\n\n        var start = new Date(event.start.getTime());\n\n        kendo.date.setTime(start, distance);\n\n        var end = new Date(start.getTime());\n\n        kendo.date.setTime(end, duration, true);\n\n        return {\n            start: start,\n            end: end\n        };\n    }\n\n    var editors = {\n        mobile: {\n            dateRange: MOBILEDATERANGEEDITOR,\n            timezonePopUp: MOBILETIMEZONEPOPUP,\n            timezone: MOBILETIMEZONEEDITOR,\n            recurrence: MOBILERECURRENCEEDITOR,\n            description: descriptionEditor,\n            multipleResources: multiSelectResourceEditorMobile,\n            resources: dropDownResourceEditorMobile,\n            isAllDay: MOBILEISALLDAYEDITOR\n        },\n        desktop: {\n            dateRange: DATERANGEEDITOR,\n            timezonePopUp: TIMEZONEPOPUP,\n            timezone: TIMEZONEEDITOR,\n            recurrence: RECURRENCEEDITOR,\n            description: descriptionEditor,\n            multipleResources: multiSelectResourceEditor,\n            resources: dropDownResourceEditor,\n            isAllDay: ISALLDAYEDITOR\n        }\n    };\n\n    var Editor = kendo.Observable.extend({\n        init: function(element, options) {\n\n            kendo.Observable.fn.init.call(this);\n\n            this.element = element;\n            this.options = extend(true, {}, this.options, options);\n            this.createButton = this.options.createButton;\n\n            this.toggleDateValidationHandler = this._toggleDateValidation.bind(this);\n        },\n\n        _toggleDateValidation: function(e) {\n            if (e.field == \"isAllDay\") {\n                var container = this.container,\n                    isAllDay = this.editable.options.model.isAllDay,\n                    bindAttribute = kendo.attr(\"bind\"),\n                    element, isDateTimeInput, shouldValidate;\n                container.find(\"[\" + bindAttribute + \"*=end],[\" + bindAttribute + \"*=start]\").each(function() {\n                    element = $(this);\n                    if (valueStartEndBoundRegex.test(element.attr(bindAttribute))) {\n                        isDateTimeInput = element.is(\"[\" + kendo.attr(\"role\") + \"=datetimepicker],[type*=datetime]\");\n                        shouldValidate = isAllDay !== isDateTimeInput;\n                        element.attr(kendo.attr(\"validate\"), shouldValidate.toString());\n                    }\n                });\n            }\n        },\n\n        fields: function(editors, model) {\n            var that = this;\n            var messages = that.options.messages;\n            var timezone = that.options.timezone;\n\n            var click = function(e) {\n                e.preventDefault();\n                that._initTimezoneEditor(model, this);\n            };\n\n            var fields = [\n                { field: \"title\", title: messages.editor.title /*, format: field.format, editor: field.editor, values: field.values*/ },\n                { field: \"start\", title: messages.editor.start, editor: editors.dateRange, timezone: timezone },\n                { field: \"end\", title: messages.editor.end, editor: editors.dateRange, timezone: timezone },\n                { field: \"isAllDay\", title: messages.editor.allDayEvent, editor: editors.isAllDay }\n            ];\n\n            var checkHierarchical = function(item) {\n                return !!item[resource.dataParentValueField];\n            };\n\n            if (kendo.timezone.windows_zones) {\n                fields.push({ field: \"timezone\", title: messages.editor.timezone, editor: editors.timezonePopUp, click: click, messages: messages.editor, model: model });\n                fields.push({ field: \"startTimezone\", title: messages.editor.startTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n                fields.push({ field: \"endTimezone\", title: messages.editor.endTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n            }\n\n            if (!model.recurrenceId) {\n                fields.push({ field: \"recurrenceRule\", title: messages.editor.repeat, editor: editors.recurrence, timezone: timezone, messages: messages.recurrenceEditor, pane: this.pane });\n            }\n\n            if (\"description\" in model) {\n                fields.push({ field: \"description\", title: messages.editor.description, editor: editors.description({ model: model, field: \"description\" }) });\n            }\n\n            for (var resourceIndex = 0; resourceIndex < this.options.resources.length; resourceIndex++) {\n                var resource = this.options.resources[resourceIndex];\n                var resourceView = resource.dataSource.view();\n                var hasParent = resourceView.some(checkHierarchical);\n                var parentResource, parent;\n\n                if (hasParent) {\n                    parentResource = this.options.resources[resourceIndex - 1];\n\n                    if (parentResource) {\n                        parent = parentResource.field;\n                    }\n                }\n\n                fields.push({\n                    field: resource.field,\n                    title: resource.title,\n                    editor: resource.multiple ? editors.multipleResources(resource, model, parent) : editors.resources(resource, model, parent)\n                });\n            }\n\n            return fields;\n        },\n\n        end: function() {\n            return this.editable.end();\n        },\n\n        _buildDesktopEditTemplate: function(model, fields, editableFields) {\n            var messages = this.options.messages;\n\n            const startTimezone = `<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                                    '<div class=\"k-form\">' +\n                                    '<div class=\"k-form-field\"><div class=\"k-form-field-wrap\">' + kendo.html.renderCheckBox($('<input class=\"k-timezone-toggle\"/>'), { label: messages.editor.separateTimezones }) + '</div></div>';\n\n            const editableField = (fieldName) => {\n                const isEditable = !model.editable || model.editable(fieldName);\n\n                if (isEditable) {\n                    return `<div ${kendo.attr(\"container-for\")}=\"${fieldName}\" class=\"k-form-field-wrap\"></div>`;\n                } else {\n                    return `<div class=\"k-form-field-wrap\">${(fieldName && kendo.getter(fieldName)(model)) || ''}</div>`;\n                }\n            };\n\n            const generateFields = (field) => {\n                const fieldName = field.field;\n                const fieldTitle = field.title;\n                const modelField = model.fields[fieldName];\n                const isEditable = !model.editable || model.editable(fieldName);\n\n                if (isEditable) {\n                    editableFields.push(field);\n                }\n\n                return (fieldName === 'startTimezone' ? startTimezone : '') +\n                    (modelField && modelField.type === \"boolean\" ?\n                        `<div class=\"k-form-field\">${editableField(fieldName)}</div>` :\n                        `<div class=\"k-form-field\"><label class=\"k-label k-form-label\" for=\"${fieldName}\" id=\"${fieldName}_label\">${fieldTitle || fieldName || \"\"}</label>${editableField(fieldName)}</div>`) +\n                    (fieldName === 'endTimezone' ? this._createEndTimezoneButton() : '');\n            };\n\n            return `<div class=\"k-form\">` +\n                fields.map(generateFields).join('') +\n            `</div>`;\n        },\n\n        _buildMobileEditTemplate: function(model, fields, editableFields) {\n            var messages = this.options.messages;\n\n            const startTimezone = `<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                                    '<ul class=\"k-listgroup k-listgroup-flush\">' +\n                                        '<li class=\"k-item k-listgroup-item\">' +\n                                            '<label class=\"k-label k-listgroup-form-row\">' +\n                                                '<span class=\"k-item-title k-listgroup-form-row\">' + encode(messages.editor.separateTimezones) + '</span>' +\n                                                '<span class=\"k-listgroup-form-field-wrapper\">' +\n                                                    '<input class=\"k-timezone-toggle\" data-role=\"switch\" type=\"checkbox\" />' +\n                                                '</span>' +\n                                            '</label>' +\n                                        '</li>';\n\n            const editableField = (field) => {\n                const fieldName = field.field;\n                const fieldTitle = field.title;\n                const isEditable = !model.editable || model.editable(fieldName);\n                let midPart;\n\n                if (isEditable) {\n                    midPart = `${fieldName === 'timezone' ?\n                                    `<label class=\"k-label k-listgroup-form-row\" data-bind=\"css: { k-disabled: isAllDay }\">` :\n                                    `<label class=\"k-label k-listgroup-form-row\">`}` +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${fieldTitle || fieldName || \"\"}</span>` +\n                        `<div class=\"k-listgroup-form-field-wrapper\" ${kendo.attr(\"container-for\")}=\"${fieldName}\"></div>`;\n                } else {\n                    midPart = `<li class=\"k-item k-listgroup-item\">` +\n                        `<label class=\"k-label k-no-click k-listgroup-form-row\">` +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${fieldTitle || fieldName || \"\"}</span>` +\n                        `<span class=\"k-no-editor k-listgroup-form-field-wrapper\">${(fieldName && kendo.getter(fieldName)(model)) || ''}</span>`;\n                }\n\n\n                return `<li class=\"k-item k-listgroup-item\">` +\n                   midPart +\n                `</label></li>`;\n\n            };\n\n            const generateFields = (field) => {\n                const fieldName = field.field;\n                const isEditable = !model.editable || model.editable(fieldName);\n\n                if (isEditable) {\n                    editableFields.push(field);\n                }\n\n                return (fieldName === \"timezone\" || fieldName === \"recurrenceRule\" ? '</ul><ul class=\"k-listgroup k-listgroup-flush\">' : '') +\n                    (fieldName === 'startTimezone' ? startTimezone : '') +\n                    editableField(field) +\n                    (fieldName === 'recurrenceRule' ? '</ul><ul class=\"k-listgroup k-listgroup-flush\">' : '') +\n                    (fieldName === 'endTimezone' ? '</ul></div>' : '');\n            };\n\n            const result = `<ul class=\"k-listgroup k-listgroup-flush\">` +\n                fields.map(generateFields).join('') +\n            `</ul>`;\n\n            return result;\n        },\n\n        _buildEditTemplate: function(model, fields, editableFields, isMobile) {\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var template = this.options.editable.template;\n            var html = \"\";\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n                html += (kendo.template(template, settings))(model);\n            } else if (isMobile) {\n                html += '<div data-role=\"content\">' + this._buildMobileEditTemplate(model, fields, editableFields) + '</div>';\n            } else {\n                html += this._buildDesktopEditTemplate(model, fields, editableFields);\n            }\n\n            return html;\n        },\n\n        _createEndTimezoneButton: function() {\n            return '</ul></div>';\n        },\n\n        _revertTimezones: function(model) {\n            model.set(\"startTimezone\", this._startTimezone);\n            model.set(\"endTimezone\", this._endTimezone);\n\n            delete this._startTimezone;\n            delete this._endTimezone;\n        }\n    });\n\n    var MobileEditor = Editor.extend({\n        init: function() {\n            Editor.fn.init.apply(this, arguments);\n\n            this.pane = kendo.Pane.wrap(this.element, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n            this.pane.element.parent().css(\"height\", this.options.height);\n            this.view = this.pane.view();\n        },\n\n        options: {\n            animations: {\n                left: \"slide\",\n                right: \"slide:right\"\n            }\n        },\n\n        destroy: function() {\n            this.close();\n            this.unbind();\n            this.pane.destroy();\n        },\n\n        _initTimezoneEditor: function(model) {\n            var that = this;\n            var pane = that.pane;\n            var messages = that.options.messages;\n            var timezoneView = that.timezoneView;\n            var container = timezoneView ? timezoneView.content.find(\".k-scheduler-timezones\") : that.container.find(\".k-scheduler-timezones\");\n            var kSwitch = container.find(\"input.k-timezone-toggle\").data(\"kendoSwitch\");\n            var endTimezoneRow = container.find(\"li.k-item:not(.k-zonepicker)\").last();\n            var startTimezoneChange = function(e) {\n                if (e.field === \"startTimezone\") {\n                    var value = model.startTimezone;\n\n                    kSwitch.enable(value);\n\n                    if (!value) {\n                        endTimezoneRow.hide();\n                        model.set(\"endTimezone\", \"\");\n                        kSwitch.value(false);\n                    }\n                }\n            };\n\n            that._startTimezone = model.startTimezone || \"\";\n            that._endTimezone = model.endTimezone || \"\";\n\n            if (!timezoneView) {\n                var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\">' +\n                '<div data-role=\"header\" class=\"k-appbar k-appbar-primary\">' +\n                    kendo.html.renderButton(`<button class=\"k-header-cancel k-scheduler-cancel\" title=\"${messages.cancel}\" aria-label=\"${messages.cancel}\"></button>`, {\n                        fillMode: \"flat\",\n                        icon: \"chevron-left\"\n                    }) +\n                    '<span class=\"k-spacer\"></span>' +\n                    `<span>${encode(messages.editor.timezoneTitle)}</span>` +\n                    '<span class=\"k-spacer\"></span>' +\n                    encode(messages.editor.timezoneTitle) +\n                    kendo.html.renderButton(`<button class=\"k-header-done k-scheduler-update\" title=\"${messages.save}\" aria-label=\"${messages.save}\"></button>`, {\n                        fillMode: \"flat\",\n                        icon: \"check\"\n                    }) +\n                '</div><div data-role=\"content\"></div>';\n\n                this.timezoneView = timezoneView = pane.append(html);\n\n                timezoneView.contentElement.append(container.show());\n\n                timezoneView.element.on(CLICK + NS, \".k-scheduler-cancel, .k-scheduler-update\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    if ($(this).hasClass(\"k-scheduler-cancel\")) {\n                        that._revertTimezones(model);\n                    }\n\n                    var editView = that._editPane;\n\n                    var text = timezoneButtonText(model, messages.editor.noTimezone);\n\n                    editView.content.find(\".k-timezone-label\").text(text);\n\n                    pane.navigate(editView, that.options.animations.right);\n                });\n\n                kSwitch.bind(CHANGE, function(ev) {\n                    endTimezoneRow.toggle(ev.checked);\n                    model.set(\"endTimezone\", \"\");\n                });\n                model.bind(CHANGE, startTimezoneChange);\n            }\n\n            kSwitch.value(!!model.endTimezone);\n            kSwitch.enable(!!model.startTimezone);\n\n            if (model.endTimezone) {\n                endTimezoneRow.show();\n            } else {\n                endTimezoneRow.hide();\n            }\n\n            pane.navigate(timezoneView, that.options.animations.left);\n        },\n\n        showDialog: function(options) {\n            var actions = options.buttons.map(function(button) {\n                return {\n                    text: button.text,\n                    action: button.click\n                };\n            });\n\n            actions.push({\n                text: this.options.messages.cancel,\n                primary: true\n            });\n\n            $(\"<div />\").appendTo(document.body)\n                .kendoDialog({\n                    close: function() {\n                        this.destroy();\n                    },\n                    modal: {\n                        preventScroll: true\n                    },\n                    closable: false,\n                    title: false,\n                    content: options.text,\n                    actions: actions\n                });\n        },\n\n        editEvent: function(model) {\n            var pane = this.pane;\n            var html = \"\";\n\n            var messages = this.options.messages;\n            var updateText = messages.save;\n            var removeText = messages.destroy;\n            var cancelText = messages.cancel;\n            var titleText = messages.editor.editorTitle;\n            var resetSeries = messages.resetSeries;\n\n            html += '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\"' + kendo.attr(\"uid\") + '=\"' + model.uid + '\">' +\n                '<div data-role=\"header\" class=\"k-appbar k-appbar-primary\">' +\n                    kendo.html.renderButton(`<button class=\"k-header-cancel k-scheduler-cancel\" title=\"${cancelText}\" aria-label=\"${cancelText}\"></button>`, {\n                        fillMode: \"flat\",\n                        icon: \"chevron-left\"\n                    }) +\n                    '<span class=\"k-spacer\"></span>' +\n                    `<span>${encode(titleText)}</span>` +\n                    '<span class=\"k-spacer\"></span>' +\n                    kendo.html.renderButton(`<button class=\"k-header-done k-scheduler-update\" title=\"${updateText}\" aria-label=\"${updateText}\"></button>`, {\n                        fillMode: \"flat\",\n                        icon: \"check\"\n                    }) +\n                '</div>';\n\n            var fields = this.fields(editors.mobile, model);\n\n            var that = this;\n\n            var editableFields = [];\n\n            html += this._buildEditTemplate(model, fields, editableFields, true);\n\n            html += \"</div>\";\n\n            var view = pane.append(html);\n\n            if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                var resetSeriesBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-resetSeries k-link k-label\" aria-label=\"' + resetSeries + '\">' + resetSeries + '</span></li></ul>';\n                view.contentElement.append(resetSeriesBtn);\n            }\n\n            if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false) {\n                var deleteBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-delete k-link k-label\" aria-label=\"' + removeText + '\">' + removeText + '</span></li></ul>';\n                view.contentElement.append(deleteBtn);\n            }\n\n            this._editPane = view;\n\n            var container = this.container = view.element;\n\n            this.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                target: that.options.target,\n                validateOnBlur: true\n            }).data(\"kendoEditable\");\n\n            if (!this.trigger(\"edit\", { container: container, model: model })) {\n\n                container.on(CLICK + NS, \"a.k-scheduler-edit, .k-scheduler-cancel, .k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    var button = $(this);\n\n                    if (!button.hasClass(\"k-scheduler-edit\")) {\n\n                        var name = \"cancel\";\n\n                        if (button.hasClass(\"k-scheduler-update\")) {\n                            name = \"save\";\n                        } else if (button.hasClass(\"k-scheduler-delete\")) {\n                            name = \"remove\";\n                        } else if (button.hasClass(\"k-scheduler-resetSeries\")) {\n                            name = RESET;\n                        }\n\n                        that.trigger(name, { container: container, model: model });\n                    } else {\n                        pane.navigate(this._editPane, that.options.animations.right);\n                    }\n                });\n\n                pane.navigate(view, that.options.animations.left);\n\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n            } else {\n                this.trigger(\"cancel\", { container: container, model: model });\n            }\n\n            return this.editable;\n        },\n\n        _views: function() {\n            return this.pane.element\n                    .find(kendo.roleSelector(\"view\"))\n                    .not(this.view.element);\n        },\n\n        close: function() {\n            if (this.container) {\n                this.pane.navigate(\"\", this.options.animations.right);\n\n                var views = this._views();\n                var view;\n\n                for (var idx = 0, length = views.length; idx < length; idx++) {\n                    view = views.eq(idx).data(\"kendoView\");\n                    if (view) {\n                       view.purge();\n                    }\n                }\n\n                views.remove();\n\n                this.container = null;\n                if (this.editable) {\n                    this.editable.options.model.unbind(CHANGE, this.toggleDateValidationHandler);\n                    this.editable.destroy();\n                    this.editable = null;\n                }\n                this.timezoneView = null;\n            }\n        }\n    });\n\n    var PopupEditor = Editor.extend({\n        destroy: function() {\n            this.close();\n            this.unbind();\n        },\n\n        editEvent: function(model) {\n            var that = this;\n            var editable = that.options.editable;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form k-scheduler-edit-form\"><div class=\"k-edit-form-container\">';\n            var $html;\n            var messages = that.options.messages;\n            var updateText = messages.save;\n            var updateIcon = \"save\";\n            var cancelText = messages.cancel;\n            var cancelIcon = \"cancel-outline\";\n            var deleteText = messages.destroy;\n            var deleteIcon = \"trash\";\n            var resetSeries = messages.resetSeries;\n            var fields = this.fields(editors.desktop, model);\n            var editableFields = [];\n            var fieldName;\n\n            html += this._buildEditTemplate(model, fields, editableFields, false);\n\n            var attr;\n            var options = isPlainObject(editable) ? editable.window : {};\n\n            html += '<div class=\"k-edit-buttons\">';\n\n            html += this.createButton({ name: \"update\", text: updateText, attr: attr, icon: updateIcon }) + this.createButton({ name: \"canceledit\", text: cancelText, attr: attr, icon: cancelIcon });\n\n            if (!model.isNew() && editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                html += this.createButton({ name: \"resetSeries\", text: resetSeries, attr: attr });\n            }\n\n            if ((!model.isNew() || model.isRecurring()) && editable.destroy !== false) {\n                html += '<span class=\"k-spacer\"></span>' + this.createButton({ name: \"delete\", text: deleteText, attr: attr, icon: deleteIcon, fillMode: \"flat\", themeColor: \"primary\" });\n            }\n\n            html += '</div></div></div>';\n\n            $html = $(html);\n            kendo.applyStylesFromKendoAttributes($html, [\"display\"]);\n\n            var container = this.container = $html\n                .appendTo(that.element).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: messages.editor.editorTitle,\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            if (that.trigger(CANCEL, { container: container, model: model })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }, options));\n\n            that.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                validateOnBlur: true,\n                target: that.options.target\n            }).data(\"kendoEditable\");\n\n            for (var field in editableFields) {\n                if (editableFields[field].field !== \"recurrenceRule\") {\n                    fieldName = editableFields[field].field;\n                    container.find(\"[name='\" + fieldName + \"']\").attr(\"aria-labelledby\", fieldName + \"_label\");\n                }\n\n                if (editableFields[field].field === \"isAllDay\") {\n                    container.find(\"label[for='\" + fieldName + \"']\").attr(\"id\", fieldName + \"_label\");\n                }\n            }\n\n            if (!that.trigger(EDIT, { container: container, model: model })) {\n\n                if (editable.window && editable.window.position) {\n                    container.data(\"kendoWindow\").open();\n                } else {\n                    container.data(\"kendoWindow\").center().open();\n                }\n\n                container.on(CLICK + NS, \"button.k-scheduler-cancel\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(CANCEL, { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-update\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(\"save\", { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-delete\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(REMOVE, { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-resetSeries\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    that.trigger(RESET, { container: container, model: model });\n                });\n\n                kendo.cycleForm(container);\n\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n            } else {\n                that.trigger(CANCEL, { container: container, model: model });\n            }\n\n            return that.editable;\n        },\n\n        close: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n                    that.editable.options.model.unbind(CHANGE, that.toggleDateValidationHandler);\n                    that.editable.destroy();\n                    that.editable = null;\n                    that.container = null;\n                }\n                if (that.popup) {\n                    that.popup.destroy();\n                    that.popup = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._timezonePopup && that._timezonePopup.data(\"kendoWindow\")) {\n                    that._timezonePopup.data(\"kendoWindow\").destroy();\n                    that._timezonePopup = null;\n                }\n\n                if (that.container.is(\":visible\")) {\n                    that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                } else {\n                    destroy();\n                }\n            } else {\n                destroy();\n            }\n        },\n\n        _createEndTimezoneButton: function() {\n            var messages = this.options.messages;\n            var html = \"\";\n\n            html += '<div class=\"k-edit-buttons\">';\n            html += this.createButton({ name: \"savetimezone\", icon: \"save\", themeColor: \"primary\", text: messages.save }) + this.createButton({ name: \"canceltimezone\", icon: \"cancel-outline\", text: messages.cancel });\n            html += '</div></div></div>';\n\n            return html;\n        },\n\n        showDialog: function(options) {\n            var html = kendo.format(\"<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>\", options.text);\n\n            html += '<div class=\"k-edit-buttons\">';\n\n            for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                html += this.createButton(options.buttons[buttonIndex]);\n            }\n\n            html += '</div></div></div>';\n\n            var wrapper = this.element;\n\n            if (this.popup) {\n                this.popup.destroy();\n            }\n\n            var popup = this.popup = $(html).appendTo(wrapper)\n                               .eq(0)\n                               .on(CLICK, \".k-button\", function(e) {\n                                    e.preventDefault();\n\n                                    popup.close();\n\n                                    var buttonIndex = $(e.currentTarget).index();\n\n                                    options.buttons[buttonIndex].click();\n                               })\n                               .kendoWindow({\n                                   modal: true,\n                                   resizable: false,\n                                   draggable: false,\n                                   title: options.title,\n                                   visible: false,\n                                   close: function() {\n                                       this.destroy();\n                                       wrapper.trigger(\"focus\");\n                                   }\n                               })\n                               .getKendoWindow();\n\n            popup.center().open();\n        },\n\n        _initTimezoneEditor: function(model, activator) {\n            var that = this;\n            var container = that.container.find(\".k-scheduler-timezones\");\n            var checkbox = container.find(\"input.k-timezone-toggle\");\n            var endTimezoneRow = container.find(\".k-form-field\").last();\n            var saveButton = container.find(\".k-scheduler-savetimezone\");\n            var cancelButton = container.find(\".k-scheduler-canceltimezone\");\n            var timezonePopup = that._timezonePopup;\n            var startTimezoneChange = function(e) {\n                if (e.field === \"startTimezone\") {\n                    var value = model.startTimezone;\n\n                    checkbox.prop(DISABLED, !value);\n\n                    if (!value) {\n                        endTimezoneRow.hide();\n                        model.set(\"endTimezone\", \"\");\n                        checkbox.prop(\"checked\", false);\n                    }\n                }\n            };\n            var wnd;\n\n            that._startTimezone = model.startTimezone;\n            that._endTimezone = model.endTimezone;\n\n            if (!timezonePopup) {\n                that._timezonePopup = timezonePopup = container.kendoWindow({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.editor.timezoneEditorTitle,\n                    visible: false,\n                    close: function(e) {\n                        model.unbind(CHANGE, startTimezoneChange);\n\n                        if (e.userTriggered) {\n                            that._revertTimezones(model);\n                        }\n\n                        if (activator) {\n                            activator.focus();\n                        }\n                    }\n                });\n\n                checkbox.on(CLICK, function() {\n                    endTimezoneRow.toggle(checkbox.prop(\"checked\"));\n                    model.set(\"endTimezone\", \"\");\n                });\n\n                saveButton.on(CLICK, function(e) {\n                    e.preventDefault();\n                    wnd.close();\n                });\n\n                cancelButton.on(CLICK, function(e) {\n                    e.preventDefault();\n                    that._revertTimezones(model);\n                    wnd.close();\n                });\n\n                model.bind(CHANGE, startTimezoneChange);\n            }\n\n            checkbox.prop(\"checked\", model.endTimezone).prop(DISABLED, !model.startTimezone);\n\n            if (model.endTimezone) {\n                endTimezoneRow.show();\n            } else {\n                endTimezoneRow.hide();\n            }\n\n            wnd = timezonePopup.data(\"kendoWindow\");\n            wnd.center().open();\n        }\n    });\n\n    var Scheduler = DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (!that.options.views || !that.options.views.length) {\n                that.options.views = [\"day\", \"week\"];\n            }\n\n            that.resources = [];\n\n            that._initModel();\n\n            that._wrapper();\n\n            if (that.options.selectable) {\n                that._tabindex();\n            }\n\n            that._views();\n\n            that._toolbar();\n\n            that._dataSource();\n\n            that._resources();\n\n            that._resizeHandler = function() {\n                that.resize();\n            };\n\n            that.wrapper.on(MOUSEDOWN + NS + \" selectstart\" + NS, function(e) {\n                var target = $(e.target);\n\n                if (!target.is(\":kendoFocusable\") && target.closest(\".k-button\").length === 0) {\n                    e.preventDefault();\n                }\n            });\n\n            if (that.options.editable && that.options.editable.resize !== false) {\n                that._resizable();\n            }\n\n            that._movable();\n\n            that._bindResize();\n\n            if (that.options.messages && that.options.messages.recurrence) {\n                recurrence.options = that.options.messages.recurrence;\n            }\n\n            that._navigation();\n            that._selectable();\n            that._touchHandlers();\n\n            that._ariaId = kendo.guid();\n\n            that._createEditor();\n\n            that.mediaQueryList = kendo.mediaQuery(MIN_SCREEN);\n            that.mediaQueryList.onChange(that._onMediaChange.bind(that));\n\n            that.toolbar.find('.k-scheduler-views').children().removeClass('k-button-rectangle');\n\n            if (that._showWatermarkOverlay) {\n                that._showWatermarkOverlay(that.element[0]);\n            }\n        },\n\n        _onMediaChange: function(e) {\n            var that = this;\n            var view = that._selectedView;\n            var toolbarEl = that.toolbar;\n            var toolbar = toolbarEl.getKendoToolBar();\n\n            if (e.matches) {\n                toolbar.hide(toolbarEl.find(\".k-views-dropdown\"));\n                toolbar.show(toolbarEl.find(\".k-views-dropdown\").parent().next(\".k-button-group\"));\n            } else {\n                toolbar.show(toolbarEl.find(\".k-views-dropdown\"));\n                toolbar.hide(toolbarEl.find(\".k-views-dropdown\").parent().next(\".k-button-group\"));\n            }\n\n            that._model.set(\"formattedDate\", e.matches ? view.dateForTitle() : view.shortDateForTitle());\n        },\n\n        _bindResize: function() {\n            $(window).on(\"resize\" + NS, this._resizeHandler);\n        },\n\n        _unbindResize: function() {\n            $(window).off(\"resize\" + NS, this._resizeHandler);\n        },\n\n        dataItems: function() {\n            var that = this;\n            var items = that.items();\n            var events = that._data;\n            var eventsUids = $.map(items, function(item) {\n                return $(item).attr(\"data-uid\");\n            });\n            var i;\n            var key;\n\n            var dict = {};\n            var eventsUidsLength = eventsUids.length;\n            for (i = 0; i < eventsUidsLength; i++) {\n                dict[eventsUids[i]] = null;\n            }\n\n            var eventsCount = events.length;\n            for (i = 0; i < eventsCount; i++) {\n                var event = events[i];\n                if (dict[event.uid] !== undefined$1) {\n                    dict[event.uid] = event;\n                }\n            }\n\n            var sortedData = [];\n            for (key in dict) {\n                sortedData.push(dict[key]);\n            }\n\n            return sortedData;\n        },\n\n        _isMobile: function() {\n            var options = this.options;\n            return (options.mobile === true && kendo.support.mobileOS) || options.mobile === \"phone\" || options.mobile === \"tablet\";\n        },\n\n        _isTouch: function(event) {\n            return /touch/.test(event.type) || (event.originalEvent && /touch/.test(event.originalEvent.pointerType));\n        },\n\n        _isInverseColor: function(eventElement) {\n            return eventElement.hasClass(INVERSECOLORCLASS);\n        },\n\n        _groupsByResource: function(resources, groupIndex, groupsArray, parentFieldValue, parentField) {\n            if (!groupsArray) {\n                groupsArray = [];\n            }\n\n            var resource = resources[0];\n            if (resource) {\n                var group;\n                var data = resource.dataSource.view();\n                var prevIndex = 0;\n\n                for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                    var fieldValue = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                    var currentGroupIndex = groupIndex + prevIndex + dataIndex;\n\n                    group = this._groupsByResource(resources.slice(1), currentGroupIndex, groupsArray, fieldValue, resource.field);\n                    group[resource.field] = fieldValue;\n                    prevIndex = group.groupIndex;\n\n                    if (parentField && parentFieldValue) {\n                        group[parentField] = parentFieldValue;\n                    }\n\n                    if (resources.length === 1) {\n                        group.groupIndex = groupIndex + dataIndex;\n                        groupsArray.push(group);\n                    }\n                }\n                return group;\n            } else {\n                return {};\n            }\n        },\n\n        data: function() {\n            return this._data;\n        },\n\n        select: function(options) {\n            var that = this;\n            var view = that.view();\n            var selection = that._selection;\n            var groups = view.groups;\n            var selectedGroups;\n\n            if (options === undefined$1) {\n                var selectedEvents;\n                var slots = view._selectedSlots;\n\n                if (!selection) {\n                    return [];\n                }\n\n                if (selection && selection.events) {\n                    selectedEvents = that._selectedEvents();\n                }\n\n                return {\n                    start: selection.start,\n                    end: selection.end,\n                    events: selectedEvents,\n                    slots: slots,\n                    resources: view._resourceBySlot(selection)\n                };\n            }\n\n            if (!options) {\n                that._selection = null;\n                that._old = null;\n                view.clearSelection();\n\n                return;\n            }\n\n            if (Array.isArray(options)) {\n                options = {\n                    events: options.splice(0)\n                };\n            }\n\n            if (options.resources) {\n                var fieldName;\n                var filters = [];\n                var groupsByResource = [];\n\n                if (view.groupedResources) {\n                    that._groupsByResource(view.groupedResources, 0, groupsByResource);\n                }\n\n                for (fieldName in options.resources) {\n                    filters.push({ field: fieldName, operator: \"eq\", value: options.resources[fieldName] });\n                }\n\n                selectedGroups = new kendo.data.Query(groupsByResource)\n                    .filter(filters)\n                    .toArray();\n            }\n\n            if (options.events && options.events.length) {\n                that._selectEvents(options.events, selectedGroups);\n                that._select();\n\n                return;\n            }\n\n            if (groups && (options.start && options.end)) {\n                var rangeStart = getDate(view._startDate);\n                var rangeEnd = kendo.date.addDays(getDate(view._endDate),1);\n                var group;\n                var ranges;\n\n                if (options.start < rangeEnd && rangeStart <= options.end) {\n                    if (selectedGroups && selectedGroups.length) {\n                        group = groups[selectedGroups[0].groupIndex];\n                    } else {\n                        group = groups[0];\n                    }\n\n                    if (!group.timeSlotCollectionCount()) {\n                        options.isAllDay = true;\n                    }\n\n                    ranges = group.ranges(options.start, options.end, options.isAllDay, false);\n\n                    if (ranges.length) {\n                        that._selection = {\n                            start: kendo.timezone.toLocalDate(ranges[0].start.start),\n                            end: kendo.timezone.toLocalDate(ranges[ranges.length - 1].end.end),\n                            groupIndex: ranges[0].start.groupIndex,\n                            index: ranges[0].start.index,\n                            isAllDay: ranges[0].start.isDaySlot,\n                            events: []\n                        };\n\n                        that._select();\n                    }\n                }\n            }\n        },\n\n        _selectEvents: function(eventsUids, selectedGroups) {\n            var that = this;\n            var idx;\n            var view = that.view();\n            var groups = view.groups;\n            var eventsLength = eventsUids.length;\n            var isGrouped = selectedGroups && selectedGroups.length;\n            var ctrlKey = that._ctrlKey;\n\n            that._ctrlKey = true;\n\n            for (idx = 0; idx < eventsLength; idx++) {\n                if (groups && isGrouped) {\n                    var currentGroup = groups[selectedGroups[0].groupIndex];\n                    var events = [];\n                    var timeSlotCollectionCount = currentGroup.timeSlotCollectionCount();\n                    var daySlotCollectionCount = currentGroup.daySlotCollectionCount();\n\n                    for (var collIdx = 0; collIdx < timeSlotCollectionCount; collIdx++) {\n                        events = events.concat(currentGroup.getTimeSlotCollection(collIdx).events());\n                    }\n\n                    for (var dayCollIdx = 0; dayCollIdx < daySlotCollectionCount; dayCollIdx++) {\n                        events = events.concat(currentGroup.getDaySlotCollection(dayCollIdx).events());\n                    }\n\n                    events = new kendo.data.Query(events)\n                        .filter({ field: event => event.element[0].getAttribute('data-uid'), operator: \"eq\", value: eventsUids[idx] })\n                        .toArray();\n\n                    if (events[0]) {\n                        that._createSelection(events[0].element);\n                    }\n                } else {\n                    var element = view.element.find(kendo.format(\".k-event[data-uid={0}], .k-task[data-uid={0}]\", eventsUids[idx]));\n\n                    if (element.length) {\n                        that._createSelection(element[0]);\n                    }\n                }\n            }\n\n            that._ctrlKey = ctrlKey;\n        },\n\n        _touchHandlers: function() {\n            var that = this;\n            var startX;\n            var startY;\n            var endX;\n            var endY;\n            var timeStamp;\n            var wrapper = that.wrapper;\n            var touchMoveHandler = that._touchMove.bind(that);\n\n            wrapper.on(TOUCHSTART + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                var content = that.wrapper.find(\".k-scheduler-content\");\n\n                if (!that._isTouch(e)) {\n                    return;\n                }\n\n                content.stop(true, false);\n\n                that._touchPosX = startX = that._tapPosition(e, 'X');\n                that._touchPosY = startY = that._tapPosition(e, 'Y');\n                that._userTouched = true;\n                that.view()._scrolling = false;\n                timeStamp = Date.now();\n\n                wrapper.on(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", touchMoveHandler);\n            });\n\n            wrapper.on(\"contextmenu\" + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                that._preventFocus = true;\n            });\n\n            wrapper.on(TOUCHEND + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                if (!that._isTouch(e)) {\n                    return;\n                }\n\n                var delta = Date.now() - timeStamp;\n                var content = that.wrapper.find(\".k-scheduler-content\");\n                var amplitude = -that._amplitude * (3000 / delta);\n\n                endX = that._tapPosition(e, 'X');\n                endY = that._tapPosition(e, 'Y');\n\n                if (that._dragging) {\n                    return;\n                }\n\n                if (that.options.selectable && (Math.abs(endX - startX) <= 10 || Math.abs(endY - startY) <= 10)) {\n                    that._mouseDownSelection(e);\n                }\n\n                if (!kendo.support.kineticScrollNeeded && delta < 200 && Math.abs(endX - startX) > 10) {\n                    content.animate({\n                        scrollTop: content[0].scrollTop + amplitude\n                    });\n                }\n\n                wrapper.off(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", touchMoveHandler);\n            });\n        },\n\n        _navigation: function() {\n            var that = this,\n                wrapper = that.wrapper;\n\n            wrapper.on(\"focus\" + NS, function() {\n                var selection = that._selection;\n\n                setTimeout(function() {\n                    if (!that._preventFocus) {\n                        if ((!selection ||\n                                (selection.events.length > 0 && wrapper.find(\"[data-uid='\" + selection.events[0] + \"']\").length === 0)) &&\n                            !that._userTouched &&\n                            !that._mouseDown) {\n                                that._initialFocus();\n                        } else {\n                            that._mouseDown = false;\n                        }\n\n                        that._select();\n                    } else {\n                        that._preventFocus = false;\n                    }\n                }, 300);\n            });\n\n            wrapper.on(\"focusout\" + NS, function() {\n                that._ctrlKey = that._shiftKey = false;\n            });\n\n            wrapper.on(\"keydown\" + NS, that._keydown.bind(that));\n\n            wrapper.on(\"keyup\" + NS, function(e) {\n                that._ctrlKey = e.ctrlKey;\n                that._shiftKey = e.shiftKey;\n            });\n        },\n\n        _selectable: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            if (!that.options.selectable) {\n                return;\n            }\n\n            wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event, .k-scheduler-body td .k-link\", function(e) {\n                if (that._isTouch(e)) {\n                    return;\n                }\n                that._mouseDownSelection(e);\n            });\n\n            var mouseMoveHandler = that._mouseMove.bind(that);\n\n            wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", function(e) {\n                var which = e.which;\n                var button = e.button;\n                var isRight = which && which === 3 || button && button == 2;\n\n                if (that._isTouch(e)) {\n                    return;\n                }\n\n                if (!isRight) {\n                    wrapper.on(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n                }\n            });\n\n            wrapper.on(\"mouseup\" + NS + \" mousecancel\" + NS, function() {\n                wrapper.off(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n            });\n        },\n\n        _mouseDownSelection: function(e) {\n            var which = e.which;\n            var button = e.button;\n            var isRight = which && which === 3 || button && button == 2;\n\n            if (!isRight) {\n                if (e.ctrlKey) {\n                    this._ctrlKey = e.ctrlKey;\n                }\n\n                if (e.shiftKey) {\n                    this._shiftKey = e.shiftKey;\n                }\n\n                this._mouseDown = true;\n                this._createSelection(e.currentTarget);\n\n                if ($(e.currentTarget).hasClass(\"k-event\")) {\n                    this._selection.eventElement = e.currentTarget;\n                }\n            }\n\n            if (this.view().name !== \"year\" && kendo._activeElement() !== this.wrapper.get(0)) {\n                kendo.focusElement(this.wrapper);\n            } else {\n                this._select();\n            }\n\n            if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            }\n        },\n\n        _selectFirstSlot: function() {\n            var firstAllDay = this.wrapper.find(\".k-scheduler-header-all-day\").find(\"td\").first(),\n                firstContent = this.wrapper.find(\".k-scheduler-content\").find(\"td\").first(),\n                firstSlot;\n\n            if (firstAllDay.length > 0) {\n                firstSlot = firstAllDay;\n            } else if (firstContent.length > 0) {\n                firstSlot = firstContent;\n            } else {\n                firstSlot = this.wrapper.find(\".k-scheduler-body\").find(\".k-link\").first();\n            }\n\n            this._createSelection(firstSlot);\n        },\n\n        _firstEvent: function() {\n            var firstEventInAllDay = this.wrapper.find(\".k-scheduler-header-wrap .k-event, .k-task\").first(),\n                firstEventInContent = this.wrapper.find(\".k-scheduler-content .k-event\").first(),\n                firstEvent, allDayEvent, contentEvent;\n\n            if (firstEventInAllDay.length > 0) {\n                if (firstEventInContent.length > 0) {\n                    allDayEvent = this.occurrenceByUid(firstEventInAllDay.data(\"uid\"));\n                    contentEvent = this.occurrenceByUid(firstEventInContent.data(\"uid\"));\n\n                    firstEvent = allDayEvent.start <= contentEvent.start ? firstEventInAllDay : firstEventInContent;\n                } else {\n                    firstEvent = firstEventInAllDay;\n                }\n            } else if (firstEventInContent) {\n                firstEvent = firstEventInContent;\n            }\n\n            return firstEvent;\n        },\n\n        _initialFocus: function() {\n            var firstEvent = this._firstEvent();\n\n            if (this.options.selectable) {\n                if (firstEvent && firstEvent.length > 0) {\n                    this._createSelection(firstEvent);\n                    this._selection.eventElement = firstEvent[0];\n                } else {\n                    this._selectFirstSlot();\n                }\n            } else if (this.toolbar && this.toolbar.find(\".\" + FOCUSEDSTATE).length === 0) {\n                this._focusToolbar();\n            } else if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            }\n        },\n\n        _select: function() {\n            var that = this;\n            var view = that.view();\n            var wrapper = that.wrapper;\n            var current = view.current();\n            var selection = that._selection;\n            var oldSelection = that._old ? that._old.selection : null;\n            var oldEventsLength = that._old ? that._old.eventsLength : null;\n            if (!selection) {\n                return;\n            }\n\n            if (current) {\n                current.removeAttribute(\"id\");\n                wrapper.removeAttr(\"aria-activedescendant\");\n            }\n\n            view.select(selection);\n            that._selection.eventElement = null;\n\n            current = view.current();\n            if (current) {\n                current.setAttribute(\"id\", that._ariaId);\n                wrapper.attr(\"aria-activedescendant\", that._ariaId);\n\n                if (oldSelection !== current || (selection.events && (oldEventsLength !== selection.events.length ))) {\n                    var currentUid = $(current).data(\"uid\");\n\n                    if (that._old && currentUid &&\n                        currentUid === $(that._old.selection).data(\"uid\") &&\n                        (selection.events && that._old.eventsLength === selection.events.length)) {\n                        return;\n                    }\n\n                    var events = that._selectedEvents();\n                    var slots = view._selectedSlots;\n\n                    that._old = {\n                        selection: current,\n                        eventsLength: events.length\n                    };\n\n                    that.trigger(CHANGE, {\n                        start: selection.start,\n                        end: selection.end,\n                        events: events,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    });\n                }\n            }\n        },\n\n        _selectedEvents: function() {\n            var uids = this._selection.events;\n            var length = uids.length;\n            var idx = 0;\n            var event;\n\n            var events = [];\n\n            for (; idx < length; idx++) {\n                event = this.occurrenceByUid(uids[idx]);\n                if (event) {\n                    events.push(event);\n                }\n            }\n\n            return events;\n        },\n\n        _tapPosition: function(event, coordinate) {\n            return /touch/.test(event.type) ? (event.originalEvent || event).changedTouches[0]['page' + coordinate] : event['page' + coordinate];\n        },\n\n        _touchMove: function(e) {\n            var that = this;\n            var content = that.wrapper.find(\".k-scheduler-content\");\n            var verticalScroll = content[0].scrollHeight > content[0].clientHeight;\n            var horizontalScroll = content[0].scrollWidth > content[0].clientWidth;\n            var endY = that._tapPosition(e, 'Y');\n            var endX = that._tapPosition(e, 'X');\n            var scrollTop = content[0].scrollTop - Math.round(endY - that._touchPosY);\n            var scrollLeft = content[0].scrollLeft - Math.round(endX - that._touchPosX);\n            var applyVerticalScroll = verticalScroll && Math.abs(endY - that._touchPosY) > 10;\n            var applyhorizontalScroll = horizontalScroll && Math.abs(endY - that._touchPosY) > 10;\n\n\n            if (that._dragging || kendo.support.kineticScrollNeeded || !that._isTouch(e)) {\n                return;\n            }\n\n            if (applyVerticalScroll || applyhorizontalScroll) {\n                that._amplitude = Math.round(endY - that._touchPosY);\n                that._touchPosY = endY;\n                that._touchPosX = endX;\n                content.animate({\n                    scrollTop: scrollTop,\n                    scrollLeft: scrollLeft\n                }, 0);\n                that.view()._scrolling = true;\n            }\n        },\n\n        _mouseMove: function(e) {\n            var that = this;\n            clearTimeout(that._moveTimer);\n\n            if (that._isTouch(e)) {\n                return;\n            }\n\n            that._moveTimer = setTimeout(function() {\n                var view = that.view();\n                var selection = that._selection;\n\n                if (selection) {\n                    var slot = view.selectionByElement($(e.currentTarget));\n\n                    if (slot && selection.groupIndex === slot.groupIndex) {\n                        var startDate = slot.startDate();\n                        var endDate = slot.endDate();\n\n                        if (startDate >= selection.end) {\n                            selection.backward = false;\n                        } else if (endDate <= selection.start) {\n                            selection.backward = true;\n                        }\n\n                        if (selection.backward) {\n                            selection.start = startDate;\n                        } else {\n                            selection.end = endDate;\n                        }\n\n                        that._select();\n                    }\n                }\n            }, 5);\n        },\n\n        _viewByIndex: function(index) {\n            var view, views = this.views;\n\n            for (view in views) {\n                if (!index) {\n                    return view;\n                }\n\n                index--;\n            }\n        },\n\n        _keydownToolbar: function(e) {\n            var key = e.keyCode;\n\n            if (e.altKey && key === keys.DOWN && this.toolbar.find(\".k-nav-current\").hasClass(FOCUSEDSTATE)) {\n                this._showCalendar();\n                e.preventDefault();\n                return;\n            } else if (key === keys.DOWN) {\n                if (this._selectedViewName === \"year\") {\n                    this.view().calendar.focus();\n                } else if (document.activeElement !== this.element[0]) {\n                    this.element.focus();\n                }\n\n                e.preventDefault();\n\n                return;\n            }\n        },\n\n        _keydownView: function(e) {\n            var key = e.keyCode,\n                isModifier = key === 16 || key === 18 || key === 17 || key === 91 || key === 92,\n                selection = this._selection,\n                view = this.view(),\n                editable = view.options.editable,\n                arrowKeys = [ keys.LEFT, keys.RIGHT, keys.UP, keys.DOWN ],\n                isRtl = kendo.support.isRtl(this.element),\n                previous, content, cell;\n\n            if (isModifier) {\n                return;\n            }\n\n            // slots selection via keyboard is no longer available\n            // see here: https://github.com/telerik/kendo-themes/blob/develop/docs/accessibility/Scheduler.md\n            if (!selection) {\n                return;\n            }\n\n            if (key === keys.ENTER) {\n                if (selection.events.length && editable) {\n                    if (editable.update !== false) {\n                        this.editEvent(selection.events[0]);\n                    }\n                }\n            } else if ((key === keys.DELETE || key === keys.BACKSPACE) && editable !== false && editable.destroy !== false) {\n                this.removeEvent(selection.events[0]);\n            } else if (arrowKeys.indexOf(key) > -1) {\n                previous = key === keys.UP || (key === keys.LEFT && !isRtl) || (key === keys.RIGHT && isRtl);\n\n                if (view.moveToEvent(selection, previous)) {\n                    this._select();\n\n                    // Focus the Scheduler element only if it not the currently focused element\n                    if (document.activeElement !== this.element[0]) {\n                        this.element.trigger(\"focus\");\n                    }\n\n                    e.preventDefault();\n                }\n            } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                    cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                    cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n            }\n        },\n\n        _keydownShortcut: function(key) {\n            var currentDate = new Date(),\n                timezone = this.options.timezone,\n                editable = this.view().options.editable;\n\n            if (key === 66 && !!this.view().toggleFullDay) {\n                this.view().toggleFullDay();\n            } else if (key === 67 && editable && editable.create !== false) {\n                this.addEvent(extend({}, {\n                    start: this.date(),\n                    end: this.date()\n                }));\n            } else if (key === 84) {\n                if (timezone) {\n                    var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                    date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                } else {\n                    date = currentDate;\n                }\n\n                if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: \"today\", date: date })) {\n                    this.date(date);\n                }\n            }\n        },\n\n        _keydownYearView: function(e) {\n            var view = this.view(),\n                selection = this._selection,\n                key = e.keyCode;\n\n            if (key === keys.TAB) {\n                return;\n            }\n\n            if (key === keys.F10) {\n                this._focusToolbar();\n                e.preventDefault();\n            } else {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                view.calendar.focus();\n            }\n\n            if (selection) {\n                this._adjustSelectedDate();\n            }\n\n            e.preventDefault();\n        },\n\n        _keydownAgendaView: function(e) {\n            var key = e.keyCode,\n                view = this.view(),\n                selection = this._selection,\n                content, cell;\n\n            if (view.move(selection, key)) {\n                e.preventDefault();\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                this._select();\n            } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                    cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                    cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n            }\n        },\n\n        _keydownChangeView: function(key) {\n            var viewIndex = key - 49,\n                viewByIndex;\n\n            if (viewIndex === -1) {\n                viewIndex = 9;\n            }\n\n            viewByIndex = this._viewByIndex(viewIndex);\n\n            if (viewByIndex && !this.trigger(\"navigate\", { view: viewByIndex, action: \"changeView\", date: this.date() })) {\n                this.view(viewByIndex);\n            }\n        },\n\n        _keydownChangeDate: function(key) {\n            var isRtl = kendo.support.isRtl(this.element),\n                direction = (isRtl && key === keys.LEFT) || (!isRtl && key === keys.RIGHT) ? \"next\" : \"previous\";\n\n            if (direction === \"next\") {\n                date = this.view().nextDate();\n            } else {\n                date = this.view().previousDate();\n            }\n\n            if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: direction, date: date })) {\n                this.date(date);\n                this._initialFocus();\n                this._select();\n            }\n        },\n\n        _keydown: function(e) {\n            var key = e.keyCode,\n                shortcutKeys = [66, 67, 84],\n                toolbarIsFocused = $(e.target).closest(\".k-toolbar\").length > 0,\n                altKey = e.altKey;\n\n            this._ctrlKey = e.ctrlKey;\n            this._shiftKey = e.shiftKey;\n\n            if (key === keys.ESC && this.popup && this.popup.visible()) {\n                this.popup.close();\n                e.preventDefault();\n                return;\n            }\n\n            if ((key === keys.LEFT || key === keys.RIGHT) && this._shiftKey) {\n                this._keydownChangeDate(key);\n                return;\n            }\n\n            if (altKey && key >= 48 && key <= 57) {\n                this._keydownChangeView(key);\n                return;\n            }\n\n            if (shortcutKeys.indexOf(key) > -1) {\n                if (!$(e.target).hasClass(\"k-scheduler-search-input\")) {\n                    this._keydownShortcut(key);\n                }\n\n                return;\n            }\n\n            if (toolbarIsFocused) {\n                this._keydownToolbar(e);\n            } else {\n                if (this._selectedViewName === \"year\") {\n                    this._keydownYearView(e);\n                    return;\n                }\n\n                if (key === keys.F10) {\n                    this._focusToolbar();\n                    e.preventDefault();\n                    return;\n                }\n\n                if (this._selectedViewName === \"agenda\") {\n                    this._keydownAgendaView(e);\n                    return;\n                }\n\n                this._keydownView(e);\n            }\n        },\n\n        _focusToolbar: function() {\n            this.toolbar.find(\"[tabindex=0]\").first()\n                .trigger(\"focus\")\n                .addClass(FOCUSEDSTATE);\n        },\n\n        _createSelection: function(item) {\n            var selection = this._selection,\n                uid, slot;\n\n            item = $(item);\n\n            if (item.is(\".k-event\")) {\n                uid = item.attr(kendo.attr(\"uid\"));\n\n                if (selection && selection.events.indexOf(uid) !== -1 && !this._ctrlKey) {\n                    return;\n                }\n            }\n\n            if (!selection || (!this._ctrlKey && !this._shiftKey)) {\n                selection = this._selection = {\n                    events: [],\n                    groupIndex: 0\n                };\n            }\n\n            slot = this.view().selectionByElement(item);\n\n            if (slot) {\n                selection.groupIndex = slot.groupIndex || 0;\n            }\n\n            if (uid) {\n                slot = getOccurrenceByUid(this._data, uid);\n            }\n\n            if (slot && slot.uid) {\n                uid = [slot.uid];\n            }\n\n            this._updateSelection(slot, uid);\n            this._adjustSelectedDate();\n        },\n\n        _updateSelection: function(dataItem, events, groupIndex) {\n            var selection = this._selection;\n\n            if (dataItem && selection) {\n                var view = this.view();\n\n                if (dataItem.uid) {\n                    dataItem = view._updateEventForSelection(dataItem);\n                }\n\n                if (this._shiftKey && selection.start && selection.end) {\n                    var backward = dataItem.end < selection.end;\n\n                    selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n\n                    if (backward && view._timeSlotInterval) {\n                        kendo.date.setTime(selection.end, -view._timeSlotInterval());\n                    }\n                } else {\n                    selection.start = dataItem.startDate ? dataItem.startDate() : dataItem.start;\n                    selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                }\n\n                if (\"isDaySlot\" in dataItem) {\n                    selection.isAllDay = dataItem.isDaySlot;\n                } else {\n                    selection.isAllDay = dataItem.isAllDay;\n                }\n\n                if (groupIndex !== null && groupIndex !== undefined$1) {\n                    selection.groupIndex = groupIndex;\n                }\n\n                selection.index = dataItem.index;\n                if (this._ctrlKey) {\n                    var indexOfEvent = (events && events.length) ? selection.events.indexOf(events[0]) : -1;\n\n                    if (indexOfEvent > -1) {\n                        selection.events.splice(indexOfEvent, 1);\n                    } else {\n                        selection.events = selection.events.concat(events || []);\n                    }\n                } else {\n                        selection.events = events || [];\n                }\n            }\n        },\n\n        options: {\n            name: \"Scheduler\",\n            date: TODAY,\n            editable: true,\n            autoBind: true,\n            snap: true,\n            mobile: false,\n            timezone: \"\",\n            allDaySlot: true,\n            min: new Date(1900, 0, 1),\n            max: new Date(2099, 11, 31),\n            toolbar: null,\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            workDays: null,\n            showWorkHours: false,\n            startTime: TODAY,\n            endTime: TODAY,\n            currentTimeMarker: {\n                updateInterval: 10000,\n                useLocalTimezone: true\n            },\n            ongoingEvents: {\n                cssClass: ONGOING_CLASS,\n                enabled: false,\n                updateInterval: 60000,\n                useLocalTimezone: true\n            },\n            footer: {},\n            messages: {\n                today: \"Today\",\n                pdf: \"Export to PDF\",\n                save: \"Save\",\n                cancel: \"Cancel\",\n                destroy: \"Delete\",\n                resetSeries: \"Reset Series\",\n                deleteWindowTitle: \"Delete event\",\n                next: \"Next\",\n                previous: \"Previous\",\n                refresh: \"Refresh\",\n                selectView: \"Select view\",\n                ariaSlotLabel: \"Selected from {0:t} to {1:t}\",\n                ariaEventLabel: {\n                    on: \"on\",\n                    at: \"at\",\n                    to: \"to\",\n                    allDay: \"(all day)\",\n                    prefix: \"\"\n                },\n                search: \"Search...\",\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    workWeek: \"Work Week\",\n                    agenda: \"Agenda\",\n                    month: \"Month\",\n                    timeline: \"Timeline\",\n                    timelineWeek: \"Timeline Week\",\n                    timelineWorkWeek: \"Timeline Work Week\",\n                    timelineMonth: \"Timeline Month\",\n                    year: \"Year\"\n                },\n                recurrenceMessages: {\n                    deleteWindowTitle: \"Delete Recurring Item\",\n                    resetSeriesWindowTitle: \"Reset Series\",\n                    deleteWindowOccurrence: \"Delete current occurrence\",\n                    deleteWindowSeries: \"Delete the series\",\n                    editWindowTitle: \"Edit Recurring Item\",\n                    editWindowOccurrence: \"Edit current occurrence\",\n                    editWindowSeries: \"Edit the series\"\n                },\n                editable: {\n                    confirmation: DELETECONFIRM\n                },\n                editor: {\n                    title: \"Title\",\n                    start: \"Start\",\n                    end: \"End\",\n                    allDayEvent: \"All day event\",\n                    description: \"Description\",\n                    repeat: \"Repeat\",\n                    timezone: \"Timezone\",\n                    startTimezone: \"Start timezone\",\n                    endTimezone: \"End timezone\",\n                    separateTimezones: \"Use separate start and end time zones\",\n                    timezoneEditorTitle: \"Timezones\",\n                    timezoneEditorButton: \"Time zone\",\n                    timezoneTitle: \"Time zones\",\n                    noTimezone: \"No timezone\",\n                    editorTitle: \"Event\"\n                }\n            },\n            height: null,\n            width: null,\n            resources: [],\n            group: {\n                resources: [],\n                orientation: \"horizontal\"\n            },\n            views: [],\n            selectable: false\n        },\n\n        events: [\n            REMOVE,\n            EDIT,\n            CANCEL,\n            SAVE,\n            \"add\",\n            \"dataBinding\",\n            \"dataBound\",\n            \"moveStart\",\n            \"move\",\n            \"moveEnd\",\n            \"resizeStart\",\n            \"resize\",\n            \"resizeEnd\",\n            \"navigate\",\n            CHANGE\n        ],\n\n        destroy: function() {\n            var that = this,\n                element;\n\n            Widget.fn.destroy.call(that);\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.dataSource.unbind(PROGRESS, that._progressHandler);\n                that.dataSource.unbind(ERROR, that._errorHandler);\n            }\n\n            if (that._resourceRefreshHandler) {\n                for (var idx = 0; idx < that.resources.length; idx++) {\n                    var resourceDS = that.resources[idx].dataSource;\n                    resourceDS.unbind(CHANGE, that._resourceRefreshHandler);\n                    resourceDS.unbind(PROGRESS, that._resourceProgressHandler);\n                    resourceDS.unbind(ERROR, that._resourceErrorHandler);\n                }\n            }\n\n            if (that.calendar) {\n                that.calendar.destroy();\n                that.popup.destroy();\n            }\n\n            if (that.view()) {\n                that.view().destroy();\n            }\n\n            if (that._editor) {\n                that._editor.destroy();\n            }\n\n            if (this._moveDraggable) {\n                this._moveDraggable.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            if (that.mediaQueryList) {\n                that.mediaQueryList.destroy();\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.toolbar)\n                .add(that.popup);\n\n            element.off(NS);\n\n            clearTimeout(that._moveTimer);\n\n            that._model = null;\n            that.toolbar = null;\n            that.element = null;\n\n            $(window).off(\"resize\" + NS, that._resizeHandler);\n\n            kendo.destroy(that.wrapper);\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n\n            this._dataSource();\n\n            if (this.options.autoBind && dataSource.fetch) {\n                dataSource.fetch();\n            } else if (isArray(dataSource)) {\n                this.view(this._selectedView);\n            }\n        },\n\n        items: function() {\n            var content = this.wrapper.find(\".k-scheduler-content\");\n            var view = this.view();\n\n            if (view && view.options.name === \"agenda\") {\n                return content.find(\".k-task\");\n            } else {\n                return content.find(\".k-event\")\n                              .add(this.wrapper.find(\".k-scheduler-header-wrap\")\n                                       .find(\".k-scheduler-header-all-day\").siblings());\n            }\n        },\n\n        _movable: function() {\n            var startSlot;\n            var endSlot;\n            var startResources;\n            var startTime;\n            var endTime;\n            var event;\n            var clonedEvent;\n            var that = this;\n            var originSlot;\n            var originStartTime;\n            var originalEvent;\n            var distance = 0;\n            var clonedEvents = [];\n            var cachedEvents = [];\n\n            var isMobile = that._isMobile();\n            var movable = that.options.editable && that.options.editable.move !== false;\n            var resizable = that.options.editable && that.options.editable.resize !== false;\n\n            if (movable || (resizable && isMobile)) {\n                that._dragging = false;\n                if (isMobile && kendo.support.mobileOS.android) {\n                    distance = 5;\n                }\n\n                that._moveDraggable = new kendo.ui.Draggable(that.element, {\n                    distance: distance,\n                    filter: \".k-event\",\n                    ignore: \".k-resize-handle\",\n                    holdToDrag: isMobile,\n                    autoScroll: true\n                });\n\n                if (movable) {\n                    that._moveDraggable.bind(\"dragstart\", function(e) {\n                        var view = that.view();\n                        var eventElement = e.currentTarget;\n                        var isTouch = that._isTouch(e);\n                        that._dragging = true;\n\n                        if (!view.options.editable || view.options.editable.move === false) {\n                            that._dragging = false;\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (isTouch && !eventElement.hasClass(\"k-event-active\")) {\n                            that._dragging = false;\n                            that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                            e.preventDefault();\n                            return;\n                        }\n\n                        event = that.occurrenceByUid(eventElement.attr(kendo.attr(\"uid\")));\n\n                        clonedEvent = event.clone();\n                        originalEvent = event.clone();\n\n                        clonedEvent.update(view._eventOptionsForMove(clonedEvent));\n\n                        clonedEvent.inverseColor = that._isInverseColor(eventElement);\n\n                        clonedEvents = [];\n                        if (that._selection) {\n                            var events = that._selection.events;\n\n                            for (var i = 0; i < events.length; i++) {\n                                var evtClone = that.occurrenceByUid(events[i]).clone();\n                                var evtCloneElement = this.element.find('div.k-event[data-uid=\"' + evtClone.uid + '\"]').eq(0);\n\n                                evtClone.update(view._eventOptionsForMove(evtClone));\n\n                                if (evtCloneElement.length) {\n                                    evtClone.inverseColor = that._isInverseColor(evtCloneElement);\n                                }\n\n                                clonedEvents.push(evtClone);\n                            }\n                        } else {\n                            clonedEvents.push(clonedEvent);\n                        }\n\n                        startSlot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                        startResources = view._resourceBySlot(startSlot);\n\n                        originStartTime = startTime = startSlot.startOffset(e.x.startLocation, e.y.startLocation, that.options.snap);\n\n                        endSlot = startSlot;\n\n                        originSlot = startSlot;\n\n                        if (!startSlot || that.trigger(\"moveStart\", { event: event })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"drag\", function(e) {\n                        var view = that.view();\n                        var slot = view._slotByPosition(e.x.location, e.y.location);\n                        var distance;\n                        var range;\n                        var i;\n\n                        if (!slot) {\n                            return;\n                        }\n\n                        endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n\n                        if (slot.isDaySlot !== startSlot.isDaySlot) {\n\n                            if (slot.isDaySlot !== originSlot.isDaySlot) {\n                                var slotIndex = $(startSlot.element).index();\n\n                                var targetSlotElement = $(slot.element).parent().children().eq(slotIndex);\n\n                                startSlot = view._slotByPosition(targetSlotElement.offset().left, targetSlotElement.offset().top);\n\n                                startTime = startSlot.startOffset(e.x.location, e.y.location, true);\n\n                                cachedEvents = clonedEvents.map(function(event) { return event.clone(); });\n\n                                for (i = 0; i < clonedEvents.length; i++) {\n                                    if (clonedEvents[i].isAllDay != slot.isDaySlot) {\n                                        clonedEvents[i].isAllDay = slot.isDaySlot;\n\n                                        clonedEvents[i].end = kendo.date.getDate(clonedEvents[i].start);\n                                        clonedEvents[i].start = kendo.date.getDate(clonedEvents[i].start);\n\n                                        if (!slot.isDaySlot) {\n                                            kendo.date.setTime(clonedEvents[i].start, kendo.date.getMilliseconds(view.startTime()));\n                                            kendo.date.setTime(clonedEvents[i].end, kendo.date.getMilliseconds(view.startTime()) + view._timeSlotInterval());\n                                        }\n                                    }\n                                }\n                            } else {\n                                startSlot = $.extend(true, { }, originSlot);\n                                startTime = originStartTime;\n\n                                clonedEvents = cachedEvents;\n                            }\n                        }\n\n                        distance = endTime - startTime;\n\n                        for (i = 0; i < clonedEvents.length; i++) {\n                            view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                        }\n\n                        range = moveEventRange(clonedEvent, distance);\n\n                        if (!that.trigger(\"move\", {\n                            event: event,\n                            slot: { element: slot.element, start: slot.startDate(), end: slot.endDate(), isDaySlot: slot.isDaySlot },\n                            resources: view._resourceBySlot(slot),\n                            start: range.start,\n                            end: range.end\n                        })) {\n                            endSlot = slot;\n                        } else {\n                            for (i = 0; i < clonedEvents.length; i++) {\n                                view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                            }\n                        }\n                    })\n                    .bind(\"dragend\", function(e) {\n                        that.view()._removeMoveHint();\n                        var distance = endTime - startTime;\n                        var range = moveEventRange(clonedEvent, distance);\n                        var start = range.start;\n                        var end = range.end;\n                        that._dragging = false;\n\n                        var endResources = that.view()._resourceBySlot(endSlot);\n\n                        var prevented = that.trigger(\"moveEnd\", {\n                            event: event,\n                            slot: { element: endSlot.element, start: endSlot.startDate(), end: endSlot.endDate() },\n                            start: start,\n                            end: end,\n                            resources: endResources\n                        });\n\n                        if (!prevented && (event.start.getTime() !== start.getTime() ||\n                            event.end.getTime() !== end.getTime() ||\n                            originSlot.isDaySlot !== endSlot.isDaySlot ||\n                            kendo.stringify(endResources) !== kendo.stringify(startResources))) {\n\n                            that._isMultiDrag = clonedEvents.length > 1;\n\n                            for (var i = 0; i < clonedEvents.length; i++) {\n                                var evt = clonedEvents[i];\n\n                                range = moveEventRange(evt, distance);\n\n                                var updatedEventOptions = that.view()._eventOptionsForMove(evt);\n                                var eventOptions = $.extend(\n                                    {\n                                        isAllDay: evt.isAllDay,\n                                        start: range.start,\n                                        end: range.end\n                                    },\n                                    updatedEventOptions,\n                                    endResources\n                                );\n\n                                that._updateEvent(null, evt, eventOptions);\n                            }\n\n                            if (that._isMultiDrag) {\n                                that.dataSource.sync();\n                                that._isMultiDrag = false;\n                            }\n                        }\n\n                        e.currentTarget.removeClass(\"k-event-active\");\n                        this.cancelHold();\n                        clonedEvents = [];\n                        cachedEvents = [];\n                    })\n                    .bind(\"dragcancel\", function() {\n                        that.view()._removeMoveHint();\n                        this.cancelHold();\n                        clonedEvents = [];\n                        cachedEvents = [];\n                    });\n                }\n\n                that._moveDraggable.bind(\"hold\", function(e) {\n                    if (that._isTouch(e)) {\n                        that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                        if (that.options.selectable) {\n                            that._createSelection(e.currentTarget);\n                        }\n                        e.currentTarget.addClass(\"k-event-active\");\n                    }\n                });\n            }\n        },\n\n        _resizable: function() {\n            var startTime;\n            var endTime;\n            var event;\n            var clonedEvent;\n            var slot;\n            var that = this;\n            var distance = 0;\n\n            function direction(handle) {\n                var directions = {\n                    \"k-resize-e\": \"east\",\n                    \"k-resize-w\": \"west\",\n                    \"k-resize-n\": \"north\",\n                    \"k-resize-s\": \"south\"\n                };\n\n                for (var key in directions) {\n                    if (handle.hasClass(key)) {\n                        return directions[key];\n                    }\n                }\n            }\n\n            if (that._isMobile() && kendo.support.mobileOS.android) {\n                distance = 5;\n            }\n\n            that._resizeDraggable = new kendo.ui.Draggable(that.element, {\n                distance: distance,\n                filter: \".k-resize-handle\",\n                autoScroll: true,\n                dragstart: function(e) {\n                    var dragHandle = $(e.currentTarget);\n\n                    var eventElement = dragHandle.closest(\".k-event\");\n\n                    var uid = eventElement.attr(kendo.attr(\"uid\"));\n\n                    var view = that.view();\n\n                    that._dragging = true;\n                    event = that.occurrenceByUid(uid);\n\n                    clonedEvent = event.clone();\n\n                    view._updateEventForResize(clonedEvent);\n\n                    slot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n\n                    if (that.trigger(\"resizeStart\", { event: event })) {\n                        e.preventDefault();\n                    }\n\n                    startTime = kendo.date.toUtcTime(clonedEvent.start);\n\n                    endTime = kendo.date.toUtcTime(clonedEvent.end);\n                },\n                drag: function(e) {\n                    if (!slot) {\n                        return;\n                    }\n\n                    var dragHandle = $(e.currentTarget);\n\n                    var dir = direction(dragHandle);\n\n                    var view = that.view();\n\n                    var currentSlot = view._slotByPosition(e.x.location, e.y.location);\n\n                    if (!currentSlot || slot.groupIndex != currentSlot.groupIndex) {\n                        return;\n                    }\n\n                    slot = currentSlot;\n\n                    var originalStart = startTime;\n\n                    var originalEnd = endTime;\n\n                    if (dir == \"south\") {\n                        if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                            if (clonedEvent.isAllDay) {\n                                endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        }\n                    } else if (dir == \"north\") {\n                        if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    } else if (dir == \"east\") {\n                        if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(slot.endDate())) >= kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.start))) {\n                            if (clonedEvent.isAllDay) {\n                                endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                            endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    } else if (dir == \"west\") {\n                        if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.end)) >= kendo.date.toUtcTime(kendo.date.getDate(slot.startDate()))) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        } else if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    }\n\n                    if (!that.trigger(\"resize\", {\n                        event: event,\n                        slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                        start: kendo.timezone.toLocalDate(startTime),\n                        end: kendo.timezone.toLocalDate(endTime),\n                        resources: view._resourceBySlot(slot)\n                    })) {\n                        view._updateResizeHint(clonedEvent, slot.groupIndex, startTime, endTime);\n                    } else {\n                        startTime = originalStart;\n                        endTime = originalEnd;\n                    }\n                },\n                dragend: function(e) {\n                    var dragHandle = $(e.currentTarget);\n                    var start = new Date(clonedEvent.start.getTime());\n                    var end = new Date(clonedEvent.end.getTime());\n                    var dir = direction(dragHandle);\n\n                    that._dragging = false;\n                    that.view()._removeResizeHint();\n\n                    if (dir == \"south\") {\n                        end = kendo.timezone.toLocalDate(endTime);\n                    } else if (dir == \"north\") {\n                        start = kendo.timezone.toLocalDate(startTime);\n                    } else if (dir == \"east\") {\n                        if (slot.isDaySlot) {\n                            end = kendo.date.getDate(kendo.timezone.toLocalDate(endTime));\n                        } else {\n                            end = kendo.timezone.toLocalDate(endTime);\n                        }\n                    } else if (dir == \"west\") {\n                        if (slot.isDaySlot) {\n                            start = new Date(kendo.timezone.toLocalDate(startTime));\n                            start.setHours(0);\n                            start.setMinutes(0);\n                        } else {\n                            start = kendo.timezone.toLocalDate(startTime);\n                        }\n                    }\n\n                    var prevented = that.trigger(\"resizeEnd\", {\n                        event: event,\n                        slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                        start: start,\n                        end: end,\n                        resources: that.view()._resourceBySlot(slot)\n                    });\n\n                    if (!prevented && end.getTime() >= start.getTime()) {\n                        if (clonedEvent.start.getTime() != start.getTime() || clonedEvent.end.getTime() != end.getTime()) {\n                            that.view()._updateEventForResize(event);\n                            that._updateEvent(dir, event, { start: start, end: end });\n                        }\n                    }\n\n                    slot = null;\n                    event = null;\n                },\n                dragcancel: function() {\n                    that._dragging = false;\n                    that.view()._removeResizeHint();\n\n                    slot = null;\n                    event = null;\n                }\n            });\n        },\n\n        _updateEvent: function(dir, event, eventInfo) {\n            var that = this;\n\n            var updateEvent = function(event, callback) {\n                var start;\n\n                try {\n                    that._preventRefresh = true;\n                    event.update(eventInfo);\n                    that._convertDates(event);\n                    start = event.start;\n\n                    if (dir && event.duration() % MS_PER_DAY === 0 && start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0 && start.getMilliseconds() === 0) {\n                        event.set(\"isAllDay\", true);\n                    }\n                } finally {\n                    that._preventRefresh = false;\n                }\n\n                if (!that.trigger(SAVE, { event: event })) {\n                    if (callback) {\n                        callback();\n                    }\n\n                    if (!that._isMultiDrag) {\n                        that.dataSource.sync();\n                    }\n                }\n            };\n\n            var recurrenceHead = function(event) {\n                if (event.recurrenceRule) {\n                    return that.dataSource.getByUid(event.uid);\n                } else {\n                    return that.dataSource.get(event.recurrenceId);\n                }\n            };\n\n            var updateSeries = function() {\n                var head = recurrenceHead(event);\n\n                if (dir == \"south\" || dir == \"north\") {\n                    if (eventInfo.start) {\n                        var start = kendo.date.getDate(head.start);\n                        kendo.date.setTime(start, getMilliseconds(eventInfo.start));\n                        eventInfo.start = start;\n                    }\n                    if (eventInfo.end) {\n                        var end = kendo.date.getDate(head.end);\n                        kendo.date.setTime(end, getMilliseconds(eventInfo.end));\n                        eventInfo.end = end;\n                    }\n                }\n\n                that.dataSource._removeExceptions(head);\n\n                updateEvent(head);\n            };\n\n            var updateOccurrence = function() {\n                var head = recurrenceHead(event);\n                var eventUid;\n\n                var callback = function() {\n                    that._convertDates(head);\n\n                    if (that._selection) {\n                        that._selection.events.push(eventUid);\n                    }\n                };\n\n                var exception = head.toOccurrence({ start: event.start, end: event.end });\n\n                eventUid = exception.uid;\n\n                updateEvent(that.dataSource.add(exception), callback);\n            };\n\n            if (event.recurrenceRule || event.isOccurrence()) {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n\n                that._showRecurringDialog(event, updateOccurrence, updateSeries,{\n                    title: recurrenceMessages.editWindowTitle,\n                    text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                    occurrenceText: recurrenceMessages.editWindowOccurrence,\n                    seriesText: recurrenceMessages.editWindowSeries\n                });\n            } else {\n                updateEvent(that.dataSource.getByUid(event.uid));\n            }\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n\n            return this.dataSource.getByUid(container.attr(kendo.attr(\"uid\")));\n        },\n\n        showDialog: function(options) {\n            this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            this._editor.showDialog(options);\n        },\n\n        focus: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        _confirmation: function(callback, model, isResetSeries) {\n            var editable = this.options.editable;\n\n            if (editable === true || editable.confirmation !== false) {\n                var messages = this.options.messages;\n                var title = messages.deleteWindowTitle;\n                var text = typeof editable.confirmation === STRING ? editable.confirmation : messages.editable.confirmation;\n\n                if (this._isEditorOpened() && model.isRecurring()) {\n                    var recurrenceMessages = this.options.messages.recurrenceMessages;\n                    title = recurrenceMessages.deleteWindowTitle;\n\n                    if (model.isException() || model.isNew()) {\n                        text = recurrenceMessages.deleteRecurringConfirmation ? recurrenceMessages.deleteRecurringConfirmation : DELETERECURRINGCONFIRM;\n                    } else {\n                        text = recurrenceMessages.deleteSeriesConfirmation ? recurrenceMessages.deleteSeriesConfirmation : DELETESERIESCONFIRM;\n                    }\n\n                    if (isResetSeries) {\n                        title = recurrenceMessages.resetSeriesWindowTitle;\n                        text = recurrenceMessages.resetSeriesConfirmation ? recurrenceMessages.resetSeriesConfirmation : RESETSERIESCONFIRM;\n                    }\n                }\n\n                var buttons = [\n                    { name: \"destroy\", text: isResetSeries ? messages.resetSeries : messages.destroy, click: function() { callback(); } }\n                ];\n\n                if (!(this._isMobile() && kendo.Pane)) {\n                    buttons.push({ name: \"canceledit\", text: messages.cancel, click: function() { callback(true); } });\n                }\n\n                this._unbindResize();\n\n                this.showDialog({\n                    model: model,\n                    text: text,\n                    title: title,\n                    buttons: buttons\n                });\n\n                this._bindResize();\n            } else {\n                callback();\n            }\n        },\n\n        addEvent: function(eventInfo) {\n            var editable = this._editor.editable;\n            var dataSource = this.dataSource;\n            var event;\n\n            eventInfo = eventInfo || {};\n\n            var prevented = this.trigger(\"add\", { event: eventInfo });\n\n            if (!prevented && ((editable && editable.end()) || !editable)) {\n                this.cancelEvent();\n\n                if (eventInfo && eventInfo.toJSON) {\n                    eventInfo = eventInfo.toJSON();\n                }\n\n                event = dataSource.add(eventInfo);\n\n                if (event) {\n                    this.cancelEvent();\n                    this._editEvent(event);\n                }\n            }\n       },\n\n       saveEvent: function() {\n            var that = this;\n            var editor = that._editor;\n            var dataSource = that.dataSource;\n\n            if (!editor) {\n                return;\n            }\n\n            var editable = editor.editable;\n            var container = editor.container;\n            var model = that._modelForContainer(container);\n            var events, i, event;\n\n            if (container && editable && editable.end() &&\n                !that.trigger(SAVE, { container: container, event: model } )) {\n\n                if (!model.isOccurrence() && !!model.recurrenceException && !model.recurrenceRule) {\n                    events = dataSource.data();\n\n                    for (i = events.length - 1; i >= 0; i -= 1) {\n                        event = events[i];\n                        if (event && event.recurrenceId === model.id) {\n                            dataSource.remove(event);\n                        }\n                    }\n\n                    model.set(\"recurrenceException\", \"\");\n                }\n\n                if (!model.dirty && !model.isOccurrence()) {\n                    that._convertDates(model, \"remove\");\n                }\n\n                dataSource.sync();\n            }\n        },\n\n        cancelEvent: function() {\n            var editor = this._editor;\n            var container = editor.container;\n            var model;\n\n            if (container) {\n                model = this._modelForContainer(container);\n\n                if (model && model.isOccurrence()) {\n                    this._convertDates(model, \"remove\");\n                    this._convertDates(this.dataSource.get(model.recurrenceId), \"remove\");\n                }\n\n                this.dataSource.cancelChanges(model);\n\n                //TODO: handle the cancel in UI\n\n                editor.close();\n            }\n        },\n\n        editEvent: function(uid) {\n            var model = typeof uid == \"string\" ? this.occurrenceByUid(uid) : uid;\n\n            if (!model) {\n                return;\n            }\n\n            this.cancelEvent();\n\n            if (model.isRecurring()) {\n                this._editRecurringDialog(model);\n            } else {\n                this._editEvent(model);\n            }\n        },\n\n        _editEvent: function(model) {\n            this._preventRefresh = true;\n            this._unbindResize();\n\n            this._createPopupEditor(model);\n            this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n            this._bindResize();\n        },\n\n        _editRecurringDialog: function(model) {\n            var that = this;\n\n            var editOccurrence = function() {\n                if (model.isException()) {\n                    that._editEvent(model);\n                } else {\n                    that.addEvent(model);\n                }\n            };\n\n            var editSeries = function() {\n                if (model.recurrenceId) {\n                    model = that.dataSource.get(model.recurrenceId);\n                }\n\n                that._editEvent(model);\n            };\n\n            var recurrenceMessages = that.options.messages.recurrenceMessages;\n            that._showRecurringDialog(model, editOccurrence, editSeries, {\n                title: recurrenceMessages.editWindowTitle,\n                text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                occurrenceText: recurrenceMessages.editWindowOccurrence,\n                seriesText: recurrenceMessages.editWindowSeries\n            });\n         },\n\n         _showRecurringDialog: function(model, editOccurrence, editSeries, messages) {\n             var editable = this.options.editable;\n             var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n             if (editRecurringMode === \"occurrence\" || this._isMultiDrag) {\n                 editOccurrence();\n             } else if (editRecurringMode === \"series\") {\n                 editSeries();\n             } else {\n                 this._unbindResize();\n\n                 this.showDialog({\n                     model: model,\n                     title: messages.title,\n                     text: messages.text,\n                     buttons: [\n                         { text: messages.occurrenceText, click: editOccurrence },\n                         { text: messages.seriesText, click: editSeries }\n                     ]\n                 });\n\n                 this._bindResize();\n             }\n        },\n\n        _createButton: function(command) {\n            var template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                options = { className: \"k-scheduler-\" + (commandName || \"\").replace(/\\s/g, \"\"), text: commandName, attr: \"\" };\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                if (command.className) {\n                    command.className += \" \" + options.className;\n                }\n\n                if (commandName === \"edit\" && isPlainObject(command.text)) {\n                    command = extend(true, {}, command);\n                    command.text = command.text.edit;\n                }\n\n                options = extend(true, options, defaultCommands[commandName], command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName]);\n            }\n\n            if (!options.className) {\n                options.className = \"k-button-solid-base\";\n            } else if (options.className.indexOf(\"k-button-solid-primary\") === -1) {\n                options.className += \" k-button-solid-base\";\n            }\n\n            return kendo.template(template)(options);\n        },\n\n        _convertDates: function(model, method) {\n            var timezone = this.dataSource.reader.timezone;\n            var startTimezone = model.startTimezone;\n            var endTimezone = model.endTimezone;\n            var start = model.start;\n            var end = model.start;\n\n            method = method || \"apply\";\n            startTimezone = startTimezone || endTimezone;\n            endTimezone = endTimezone || startTimezone;\n\n            if (startTimezone) {\n                if (timezone) {\n                    if (method === \"apply\") {\n                        start = kendo.timezone.convert(model.start, timezone, startTimezone);\n                        end = kendo.timezone.convert(model.end, timezone, endTimezone);\n                    } else {\n                        start = kendo.timezone.convert(model.start, startTimezone, timezone);\n                        end = kendo.timezone.convert(model.end, endTimezone, timezone);\n                    }\n                } else {\n                    start = kendo.timezone[method](model.start, startTimezone);\n                    end = kendo.timezone[method](model.end, endTimezone);\n                }\n\n                model._set(\"start\", start);\n                model._set(\"end\", end);\n            }\n        },\n\n        _createEditor: function() {\n            var that = this;\n\n            var editor;\n\n            if (this._isMobile() && kendo.Pane) {\n                editor = that._editor = new MobileEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    timezone: that.dataSource.reader.timezone,\n                    resources: that.resources,\n                    createButton: this._createButton.bind(this)\n                }));\n            } else {\n                editor = that._editor = new PopupEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    createButton: this._createButton.bind(this),\n                    timezone: that.dataSource.reader.timezone,\n                    resources: that.resources\n                }));\n            }\n\n            editor.bind(\"cancel\", function(e) {\n                if (that.trigger(\"cancel\", { container: e.container, event: e.model })) {\n                    e.preventDefault();\n                    return;\n                }\n                that._preventRefresh = false;\n                that.cancelEvent();\n\n                if (that._attemptRefresh) {\n                    that.refresh();\n                }\n\n                that.focus();\n            });\n\n            editor.bind(\"edit\", function(e) {\n                if (that.trigger(EDIT, { container: e.container, event: e.model })) {\n                    e.preventDefault();\n                }\n            });\n\n            editor.bind(\"save\", function() {\n                that._preventRefresh = false;\n                that.saveEvent();\n            });\n\n            editor.bind(\"remove\", function(e) {\n                that._preventRefresh = false;\n                that.removeEvent(e.model);\n            });\n\n            editor.bind(\"resetSeries\", function(e) {\n                that._confirmation(function(cancel) {\n                    that._preventRefresh = false;\n                    if (!cancel) {\n                        that.dataSource._removeExceptions(e.model);\n                        that.saveEvent();\n                    }\n                }, e.model, true);\n            });\n        },\n\n        _createPopupEditor: function(model) {\n            var editor = this._editor;\n\n            if (!model.isNew() || model.isOccurrence()) {\n                if (model.isOccurrence()) {\n                    this._convertDates(model.recurrenceId ? this.dataSource.get(model.recurrenceId) : model);\n                }\n                this._convertDates(model);\n            }\n\n            this.editable = editor.editEvent(model);\n        },\n\n        removeEvent: function(uid) {\n            var that = this,\n                model = typeof uid == \"string\" ? that.occurrenceByUid(uid) : uid;\n\n            if (!model) {\n                return;\n            }\n\n            if (model.isRecurring()) {\n                that._deleteRecurringDialog(model);\n            } else {\n                that._confirmation(function(cancel) {\n                    if (!cancel) {\n                        that._removeEvent(model);\n                    }\n                }, model);\n            }\n        },\n\n        occurrenceByUid: function(uid) {\n            var occurrence = this.dataSource.getByUid(uid);\n            if (!occurrence) {\n                occurrence = getOccurrenceByUid(this._data, uid);\n            }\n\n            return occurrence;\n        },\n\n        occurrencesInRange: function(start, end) {\n            return new kendo.data.Query(this._data).filter({\n                logic: \"or\",\n                filters: [\n                    {\n                        logic: \"and\",\n                        filters: [\n                            { field: \"start\", operator: \"gte\", value: start },\n                            { field: \"end\", operator: \"gte\", value: start },\n                            { field: \"start\", operator: \"lt\", value: end }\n                        ]\n                    },\n                    {\n                        logic: \"and\",\n                        filters: [\n                            { field: \"start\", operator: \"lte\", value: start },\n                            { field: \"end\", operator: \"gt\", value: start }\n                        ]\n                    }\n                ]\n            }).toArray();\n        },\n\n        _removeEvent: function(model) {\n            if (!this.trigger(REMOVE, { event: model })) {\n                if (this.dataSource.remove(model)) {\n                    this.dataSource.sync();\n                }\n            }\n        },\n\n        _deleteRecurringDialog: function(model) {\n            var that = this;\n            var currentModel = model;\n            var editable = that.options.editable;\n            var deleteOccurrence;\n            var deleteSeries;\n            var createException;\n            var deleteOccurrenceConfirmation;\n            var deleteSeriesConfirmation;\n            var createExceptionConfirmation;\n            var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n            deleteOccurrence = function() {\n                var occurrence = currentModel.recurrenceId ? currentModel : currentModel.toOccurrence();\n                var head = that.dataSource.get(occurrence.recurrenceId);\n\n                that._convertDates(head);\n                that._removeEvent(occurrence);\n            };\n\n            deleteSeries = function() {\n                if (currentModel.recurrenceId) {\n                    currentModel = that.dataSource.get(currentModel.recurrenceId);\n                }\n\n                that._removeEvent(currentModel);\n            };\n\n            createException = function() {\n                that.dataSource.remove(currentModel);\n                that.dataSource.sync();\n            };\n\n            if (editRecurringMode != \"dialog\" || that._isEditorOpened()) {\n                deleteOccurrenceConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            deleteOccurrence();\n                        }\n                    }, currentModel);\n                };\n\n                deleteSeriesConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            deleteSeries();\n                        }\n                    }, currentModel);\n                };\n\n                createExceptionConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            createException();\n                        }\n                    }, currentModel);\n                };\n            }\n\n            var seriesCallback = deleteSeriesConfirmation || deleteSeries;\n            var occurrenceCallback = deleteOccurrenceConfirmation || deleteOccurrence;\n            var exeptionCallback = createExceptionConfirmation || createException;\n\n            if (that._isEditorOpened()) {\n                if (model.isException()) {\n                    occurrenceCallback();\n                } else if (model.isNew()) {\n                    exeptionCallback();\n                } else {\n                    seriesCallback();\n                }\n            } else {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n                that._showRecurringDialog(model, occurrenceCallback, seriesCallback, {\n                    title: recurrenceMessages.deleteWindowTitle,\n                    text: recurrenceMessages.deleteRecurring ? recurrenceMessages.deleteRecurring : DELETERECURRING,\n                    occurrenceText: recurrenceMessages.deleteWindowOccurrence,\n                    seriesText: recurrenceMessages.deleteWindowSeries\n                });\n            }\n        },\n\n        _isEditorOpened: function() {\n            return !!this._editor.container;\n        },\n\n        _unbindView: function(view) {\n            var that = this;\n\n            view.destroy();\n        },\n\n        _bindView: function(view) {\n            var that = this;\n\n            if (that.options.editable) {\n                if (that._viewRemoveHandler) {\n                    view.unbind(REMOVE, that._viewRemoveHandler);\n                }\n\n                that._viewRemoveHandler = function(e) {\n                    that.removeEvent(e.uid);\n                };\n\n                view.bind(REMOVE, that._viewRemoveHandler);\n\n                if (that._viewAddHandler) {\n                    view.unbind(ADD, that._viewAddHandler);\n                }\n\n                that._viewAddHandler = function(e) {\n                    that.addEvent(e.eventInfo);\n                };\n\n                view.bind(ADD, this._viewAddHandler);\n\n                if (that._viewEditHandler) {\n                    view.unbind(EDIT, that._viewEditHandler);\n                }\n\n                that._viewEditHandler = function(e) {\n                    that.editEvent(e.uid);\n                };\n\n                view.bind(EDIT, this._viewEditHandler);\n            }\n\n            if (that._viewNavigateHandler) {\n                view.unbind(\"navigate\", that._viewNavigateHandler);\n            }\n\n            that._viewNavigateHandler = function(e) {\n                if (e.action) {\n                    if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: e.action, date: e.date })) {\n                        that.date(e.date);\n                    }\n                } else if (e.view) {\n                    var switchWorkDay = \"isWorkDay\" in e;\n                    var action = switchWorkDay ? \"changeWorkDay\" : \"changeView\";\n\n                    if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: action, date: e.date })) {\n                        if (switchWorkDay) {\n                            that._workDayMode = e.isWorkDay;\n                        }\n\n                        that._selectView(e.view);\n                        that.date(e.date);\n                    }\n                }\n            };\n\n            view.bind(\"navigate\", that._viewNavigateHandler);\n\n            if (that._viewActivateHandler) {\n                view.unbind(\"activate\", that._viewActivateHandler);\n            }\n\n            that._viewActivateHandler = function() {\n                var view = this;\n                if (that._selection) {\n                    view.constrainSelection(that._selection);\n\n                    if ($(document.activeElement).closest(\".k-scheduler-toolbar\").length === 0) {\n                        if (document.activeElement !== that.wrapper[0]) {\n                            that.element.trigger(\"focus\");\n                        } else {\n                            that._select();\n                        }\n                    }\n\n                    that._adjustSelectedDate();\n                }\n            };\n\n            view.bind(\"activate\", that._viewActivateHandler);\n        },\n\n        _selectView: function(name) {\n            var that = this;\n\n            if (name && that.views[name]) {\n                if (that._selectedView) {\n                    that._unbindView(that._selectedView);\n                }\n\n                that._selectedView = that._renderView(name);\n                that._selectedViewName = name;\n\n                if (this._initialSize) {\n                    this._initialSize = false;\n                    this._onMediaChange(window.matchMedia(MIN_SCREEN));\n                }\n\n                if (that._viewsCount > 1 && !that._isMobile()) {\n                    var viewElementToSelect = that.toolbar.find(\"[\" + kendo.attr(\"name\") + \"=\" + name + \"]\");\n                    var viewsDropdown = that.toolbar.find(\".k-views-dropdown\");\n                    var viewsGroupEl = viewElementToSelect.closest(\".k-button-group\");\n                    var viewsButtonGroup = viewsGroupEl.data(\"kendoButtonGroup\");\n\n                    viewsDropdown.val(name);\n\n                    if (viewsButtonGroup) {\n                        viewsButtonGroup.select(viewElementToSelect);\n                    }\n                } else if (that._viewsCount > 1) {\n                    var viewSelect = that.toolbar.find(\".k-scheduler-mobile-views\");\n\n                    viewSelect.find(\"[value=\" + name.replace(/\\./g, \"\\\\.\") + \"]\")\n                        .prop(\"selected\", \"selected\");\n                }\n            }\n        },\n\n        view: function(name) {\n            var that = this;\n\n            if (name) {\n                if (name === \"year\") {\n                    that.wrapper.removeAttr(\"tabindex\");\n                } else {\n                    that.wrapper.attr(\"tabindex\", 0);\n                }\n\n                that._selectView(name);\n                that.rebind();\n\n                return;\n            }\n\n            return that._selectedView;\n        },\n\n        viewName: function() {\n            return this.view().name;\n        },\n\n        _renderView: function(name) {\n            var view = this._initializeView(name);\n\n            this._bindView(view);\n\n            if (kendo.support.mouseAndTouchPresent || kendo.support.pointers) {\n                view.content.css(\"-ms-touch-action\", \"pinch-zoom\");\n                view.content.css(\"touch-action\", \"pinch-zoom\");\n            }\n\n            this._model.set(\"formattedDate\", view.dateForTitle());\n            this._model.set(\"formattedShortDate\", view.shortDateForTitle());\n            this._model.set(\"formattedMobileDate\", view.mobileDateForTitle ? view.mobileDateForTitle() : view.shortDateForTitle());\n            this._model.set(\"formattedYear\", view.mobileYearForTitle ? view.mobileYearForTitle() : kendo.format(\"{0:yyyy}\", view.startDate()));\n\n            return view;\n        },\n\n        resize: function(force) {\n            var size = this.getSize();\n            var currentSize = this._size;\n            var view = this.view();\n\n            if (!view || !view.groups) {\n                return;\n            }\n\n            if (force || !currentSize || size.width !== currentSize.width || size.height !== currentSize.height) {\n                this.refresh({ action: \"resize\" });\n                this._size = size;\n            }\n        },\n\n        _adjustSelectedDate: function() {\n            var date = this._model.selectedDate,\n                selection = this._selection,\n                start = selection.start;\n\n            if (start && !kendo.date.isInDateRange(date, getDate(start), getDate(selection.end))) {\n                date.setFullYear(start.getFullYear(), start.getMonth(), start.getDate());\n            }\n        },\n\n        _initializeView: function(name) {\n            var view = this.views[name];\n\n            if (view) {\n                var isSettings = isPlainObject(view),\n                    overrideOptions = {},\n                    type = view.type;\n\n                if (typeof type === STRING) {\n                    type = kendo.getter(view.type)(window);\n                }\n\n                if (isSettings && view.workDays && view.workDays.length) {\n                    overrideOptions.workDays = view.workDays;\n                }\n\n                if (type) {\n                    view = new type(this.wrapper, trimOptions(extend(true, {}, this.options, isSettings ? view : {}, {\n                        resources: this.resources,\n                        date: this.date(),\n                        startTime: kendo.parseDate(view.startTime) || kendo.parseDate(this.options.startTime),\n                        endTime: kendo.parseDate(view.endTime) || kendo.parseDate(this.options.endTime),\n                        showWorkHours: this._workDayMode\n                    }),overrideOptions));\n\n                } else {\n                    throw new Error(\"There is no such view\");\n                }\n            }\n\n            return view;\n        },\n\n        _views: function() {\n            var views = this.options.views;\n            var view;\n            var defaultView;\n            var selected;\n            var isSettings;\n            var name;\n            var type;\n            var idx;\n            var length;\n\n            this.views = {};\n            this._viewsCount = 0;\n\n            for (idx = 0, length = views.length; idx < length; idx++) {\n                var hasType = false;\n\n                view = views[idx];\n\n                isSettings = isPlainObject(view);\n\n                if (isSettings) {\n                    type = name = view.type ? view.type : view;\n                    if (typeof type !== STRING) {\n                        name = view.name || view.title;\n                        hasType = true;\n                    }\n                } else {\n                    type = name = view;\n                    view = {};\n                }\n\n                defaultView = defaultViews[name];\n\n                if (defaultView && !hasType) {\n                    view.type = defaultView.type;\n                    defaultView.title = this.options.messages.views[name];\n                    if (defaultView.type === \"day\") {\n                        defaultView.messages = { allDay: this.options.messages.allDay };\n                    } else if (defaultView.type === \"agenda\") {\n                        defaultView.messages = {\n                            event: this.options.messages.event,\n                            date: this.options.messages.date,\n                            time: this.options.messages.time\n                        };\n                    }\n                }\n\n                view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                if (name) {\n                    this.views[name] = view;\n                    this._viewsCount++;\n\n                    if (!selected || view.selected) {\n                        selected = name;\n                    }\n                }\n            }\n\n            if (selected) {\n                this._selectedViewName = selected; // toolbar is not rendered yet\n            }\n        },\n\n        rebind: function() {\n            var that = this,\n                resources = that.resources,\n                resourceFetchArray = [];\n\n            if (that._preventRebind) {\n                that._preventRebind = false;\n                return;\n            }\n\n            if (that.options.autoBind === false && resources && resources.length > 0) {\n                resources.forEach(function(resource) {\n                    if (resource.dataSource.data().length === 0) {\n                        that._preventRebind = true;\n                        resourceFetchArray.push(resource.dataSource.fetch());\n                    }\n                });\n\n                $.when.apply(null, resourceFetchArray).then(function() {\n                    that.dataSource.fetch();\n                    that._preventRebind = false;\n                });\n            } else {\n                that.dataSource.fetch();\n            }\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (options.timezone && !(dataSource instanceof SchedulerDataSource)) {\n                dataSource = extend(true, dataSource, { schema: { timezone: options.timezone } });\n            } else if (dataSource instanceof SchedulerDataSource) {\n                options.timezone = dataSource.options.schema ? dataSource.options.schema.timezone : \"\";\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource\n                    .unbind(CHANGE, that._refreshHandler)\n                    .unbind(PROGRESS, that._progressHandler)\n                    .unbind(ERROR, that._errorHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = kendo.data.SchedulerDataSource.create(dataSource)\n                .bind(CHANGE, that._refreshHandler)\n                .bind(PROGRESS, that._progressHandler)\n                .bind(ERROR, that._errorHandler);\n\n            that.options.dataSource = that.dataSource;\n        },\n\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _progress: function(toggle) {\n            var element = this.element.find(\".k-scheduler-content\");\n            kendo.ui.progress(element, toggle);\n        },\n\n        _resources: function() {\n            var that = this;\n            var resources = that.options.resources;\n            var resourcePromises = [];\n\n            for (var idx = 0; idx < resources.length; idx++) {\n                var resource = resources[idx];\n                var field = resource.field;\n                var name = resource.name || field;\n                var dataSource = resource.dataSource;\n\n                if (!field || !dataSource) {\n                    throw new Error('The \"field\" and \"dataSource\" options of the scheduler resource are mandatory.');\n                }\n\n                that.resources.push({\n                    field: field,\n                    name: name,\n                    title: resource.title || field,\n                    dataTextField: resource.dataTextField || \"text\",\n                    dataValueField: resource.dataValueField || \"value\",\n                    dataColorField: resource.dataColorField || \"color\",\n                    dataParentValueField: resource.dataParentValueField || \"parentValue\",\n                    valuePrimitive: resource.valuePrimitive != null ? resource.valuePrimitive : true,\n                    multiple: resource.multiple || false,\n                    dataSource: that._resourceDataSource(dataSource, name, resourcePromises)\n                });\n            }\n\n            if (!that.options.autoBind) {\n                that._selectView(that._selectedViewName);\n            } else {\n                $.when.apply(null, resourcePromises)\n                      .then(function() {\n                            that.view(that._selectedViewName);\n                        });\n            }\n        },\n\n        _resourceDataSource: function(resourceDS, groupName, promises) {\n            var that = this;\n            var dataSource = isArray(resourceDS) ? { data: resourceDS } : resourceDS;\n            var dataSourceInstance = kendo.data.DataSource.create(dataSource);\n\n            if (that.options.autoBind) {\n                promises.push(dataSourceInstance.fetch(function() {\n                    // 'this' is the DataSource instance not the Scheduler\n                    that._bindResourceEvents(this, groupName);\n                }));\n            } else {\n                that._bindResourceEvents(dataSourceInstance, groupName);\n            }\n\n            return dataSourceInstance;\n        },\n\n        _bindResourceEvents: function(resourceDS, groupName) {\n            var that = this;\n            var isGrouped = that.options.group && that.options.group.resources.length;\n            var isResourceGrouped = isGrouped && that.options.group.resources.indexOf(groupName) > -1;\n\n            if (!that._resourceRefreshHandler && isResourceGrouped) {\n                that._resourceRefreshHandler = that._refreshResource.bind(that);\n                that._resourceErrorHandler = that._error.bind(that);\n            }\n\n            if (isResourceGrouped) {\n                resourceDS.bind(CHANGE, that._resourceRefreshHandler)\n                    .bind(ERROR, that._resourceErrorHandler);\n            }\n        },\n\n        _refreshResource: function() {\n            var that = this;\n            var preventRefresh = (that._editor && that._editor.editable) || that._preventRefresh;\n\n            if (!preventRefresh) {\n                that.view(that._selectedViewName);\n            }\n        },\n\n        _initModel: function() {\n            var that = this;\n            that._model = kendo.observable({\n               selectedDate: new Date(this.options.date),\n               formattedDate: \"\",\n               formattedShortDate: \"\"\n           });\n\n           that._model.bind(CHANGE, function(e) {\n                if (e.field === \"selectedDate\") {\n                    that.view(that._selectedViewName);\n                }\n           });\n        },\n\n        _wrapper: function() {\n            var that = this;\n            var options = that.options;\n            var height = options.height;\n            var width = options.width;\n\n            that.wrapper = that.element.addClass(\"k-scheduler\");\n\n            if (that._isMobile()) {\n               that.wrapper.addClass(\"k-scheduler-mobile\");\n            }\n\n            if (height) {\n                that.wrapper.height(height);\n            }\n\n            if (width) {\n                that.wrapper.width(width);\n            }\n        },\n\n        date: function(value) {\n            if (value != null && getDate(value) >= getDate(this.options.min) && getDate(value) <= getDate(this.options.max)) {\n                this._model.set(\"selectedDate\", value);\n            }\n            return getDate(this._model.get(\"selectedDate\"));\n        },\n\n        _processHandlers: function(defaults) {\n            var that = this;\n\n            that._pdfClickHandler = (e) => {\n                e.preventDefault();\n                that.saveAsPDF();\n            };\n\n            that._createClickHandler = (e) => {\n                e.preventDefault();\n                that.addEvent();\n            };\n\n            that._calendarClickHandler = that._currentClickHandler = (e) => {\n                e.preventDefault();\n                that._showCalendar(e.target);\n            };\n\n            that._todayClickHandler = (e) => {\n                e.preventDefault();\n\n                var timezone = that.options.timezone,\n                    currentDate = new Date(),\n                    date;\n\n                if (timezone) {\n                    var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                    date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                } else {\n                    date = currentDate;\n                }\n\n                if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"today\", date: date })) {\n                    that.date(date);\n                }\n            };\n\n            that._previousClickHandler = (e) => {\n                e.preventDefault();\n\n                var date = that.view().previousDate();\n\n                if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"previous\", date: date })) {\n                    that.date(date);\n                }\n            };\n\n            that._nextClickHandler = (e) => {\n                e.preventDefault();\n\n                var date = that.view().nextDate();\n\n                if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"next\", date: date })) {\n                    that.date(date);\n                }\n            };\n\n            that._refreshClickHandler = (e) => {\n                e.preventDefault();\n\n                var name = that.view().name;\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            };\n\n            that._viewClickHandler = (e) => {\n                var name = e.target.attr(kendo.attr(\"name\"));\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            };\n\n            Object.values(defaults).map(t => {\n                if (t.name) {\n                    t.click = that[\"_\" + t.name + \"ClickHandler\"];\n                }\n            });\n        },\n\n        _processDefaults: function() {\n            var views = this.views,\n                defaults = $.extend(true, {}, DEFAULT_TOOLS),\n                viewsButtons = [],\n                isRtl = kendo.support.isRtl(this.wrapper),\n                viewsDdl, viewsMobile;\n\n            Object.keys(views).map(name => {\n                var current = $.extend(true, {}, defaults.view);\n\n                current.text = views[name].title;\n                const refAttribute = `ref-view-${name.toLowerCase()}`;\n                current.attributes = {\n                    [refAttribute]: '',\n                    \"data-name\": name\n                };\n\n                current.groupClass = \"k-scheduler-views\";\n                defaults[name] = current;\n\n                viewsButtons.push(name);\n            });\n\n            if (viewsButtons.length > 1) {\n                viewsDdl = VIEWS_DROPDOWN_TEMPLATE({ views: this.views, label: this.options.messages.selectView, type: \"k-views-dropdown\" });\n                viewsMobile = VIEWS_DROPDOWN_TEMPLATE({ views: this.views, label: this.options.messages.selectView, type: \"k-scheduler-mobile-views\" });\n            }\n\n            defaults.viewsDdl = {\n                template: viewsDdl\n            };\n\n            defaults.viewsMobile = {\n                template: viewsMobile\n            };\n\n            this._viewsButtons = viewsButtons;\n\n            if (isRtl) {\n                defaults.previous.icon = \"caret-alt-right\";\n                defaults.next.icon = \"caret-alt-left\";\n            }\n\n            return defaults;\n        },\n\n        _processToolbarArray: function() {\n            var options = this.options,\n                toolbarOptions = options.toolbar,\n                commands = [],\n                isMobile = this._isMobile(),\n                tools, pdf, search;\n\n            if (toolbarOptions) {\n                commands = Array.isArray(toolbarOptions) ? toolbarOptions : [toolbarOptions];\n            }\n\n            pdf = $.grep(commands, function(item) {\n                return item == \"pdf\" || item.name == \"pdf\";\n            }).length > 0;\n\n            search = $.grep(commands, function(item) {\n                return item == \"search\" || item.name == \"search\";\n            }).length > 0;\n\n            if (isMobile) {\n                tools = [...defaultMobileToolsFirst];\n\n                if (options.editable) {\n                    tools[0].push(\"create\");\n                }\n            } else {\n                tools = [...defaultDesktopTools];\n            }\n\n            if (search) {\n                tools.push(\"search\");\n            }\n\n            if (pdf) {\n                if (isMobile) {\n                    tools[0].unshift(\"pdfMobile\");\n                } else {\n                    tools.unshift(\"pdf\");\n                }\n            }\n\n            if (this._viewsCount === 1) {\n                tools.push(\"refresh\");\n            } else if (this._viewsCount > 1) {\n                if (isMobile) {\n                    tools.push(\"viewsMobile\");\n                } else {\n                    tools.push(\"viewsDdl\");\n                    tools.push(this._viewsButtons);\n                }\n            }\n\n            return tools;\n        },\n\n        _processViewTools: function(items) {\n            var result = items,\n                viewsIndex = -1;\n\n            items.some((item, index) => {\n                if (item === \"views\" || item.name === \"views\") {\n                    viewsIndex = index;\n                    return true;\n                }\n\n                return false;\n            });\n\n            if (viewsIndex > -1) {\n                result.splice(viewsIndex, 1, \"viewsDdl\", this._viewsButtons);\n            }\n\n            return result;\n        },\n\n        _processToolbarItems: function() {\n            var desktopItems = this.options.toolbar.items.desktop || this.options.toolbar.items,\n                mobileItems = this.options.toolbar.items.mobile || this.options.toolbar.items,\n                isMobile = this._isMobile();\n\n            if (!isMobile) {\n                if (desktopItems.main) {\n                    if (desktopItems.navigation) {\n                        desktopItems = desktopItems.main.concat(desktopItems.navigation);\n                    } else {\n                        desktopItems = desktopItems.main;\n                    }\n                }\n\n                return { tools: this._processViewTools(desktopItems) };\n            } else {\n                if (Array.isArray(mobileItems)) {\n                    return {\n                        tools: this._processViewTools(mobileItems),\n                        navigation: []\n                    };\n                } else {\n                    return {\n                        tools: this._processViewTools(mobileItems.main),\n                        navigation: this._processViewTools(mobileItems.navigation)\n                    };\n                }\n            }\n        },\n\n        _processTools: function() {\n            var options = this.options,\n                toolbarOptions = options.toolbar;\n\n            if (toolbarOptions && toolbarOptions.items) {\n                return this._processToolbarItems();\n            } else {\n                return { tools: this._processToolbarArray() };\n            }\n        },\n\n        _toolbar: function() {\n            var that = this;\n            var options = that.options;\n            var defaults = that._processDefaults();\n            var { tools, navigation } = that._processTools();\n            var toolbar = $(\"<div class='k-scheduler-toolbar'>\");\n            var secondToolbar;\n\n            that._processHandlers(defaults);\n            that.wrapper.append(toolbar);\n            that.toolbar = toolbar;\n\n            toolbar.kendoToolBar({\n                resizable: false,\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: options.messages\n            });\n\n            if (that._isMobile() && (!navigation || navigation.length !== 0)) {\n                secondToolbar = $(\"<div class='k-scheduler-toolbar'>\");\n                that.wrapper.append(secondToolbar);\n                that.toolbar = that.toolbar.add(secondToolbar);\n\n                secondToolbar.kendoToolBar({\n                    resizable: false,\n                    tools: navigation || [...defaultMobileToolsSecond],\n                    defaultTools: defaults,\n                    parentMessages: options.messages\n                });\n            }\n\n            that.toolbar.find(\".k-nav-current .k-button-text\").attr('data-' + kendo.ns + 'bind', \"text: formattedDate\");\n            that.toolbar.find(\".k-m-date-format\").attr('data-' + kendo.ns + 'bind', \"text: formattedMobileDate\");\n            that.toolbar.find(\".k-y-date-format\").attr('data-' + kendo.ns + 'bind', \"text: formattedYear\");\n\n            kendo.bind(that.toolbar, that._model);\n\n            that.toolbar.find(\".k-scheduler-search-input\").attr({\n                placeholder: options.messages.search,\n                title: options.messages.search\n            });\n\n            toolbar.on(\"input\" + NS, \".k-scheduler-search-input\", kendo.throttle(function(e) {\n                that.dataSource.filter({\n                    logic: \"or\",\n                    filters: [\n                        { field: \"title\", operator: \"contains\", value: e.target.value },\n                        { field: \"description\", operator: \"contains\", value: e.target.value }\n                    ]\n                });\n            }, 250));\n\n            toolbar.on(CHANGE + NS, \".k-views-dropdown, .k-scheduler-mobile-views\", function() {\n                var name = this.value;\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            });\n\n            that._initialSize = true;\n        },\n\n        _showCalendar: function(targetElm) {\n            var that = this,\n                target = targetElm || that.toolbar.find(\".k-nav-current\"),\n                html = $('<div class=\"k-calendar-container\"><div class=\"k-scheduler-calendar\"></div></div>');\n\n            if (!that.popup) {\n                that.popup = new Popup(html, {\n                    anchor: target,\n                    activate: function() {\n                        if (that.popup && that.calendar) {\n                            that.popup._toggleResize(false);\n                            that.calendar.element.find(\"table\").trigger(\"focus\");\n                            that.popup._toggleResize(true);\n                        }\n                    },\n                    open: function() {\n                        if (!that.calendar) {\n                            that.calendar = new Calendar(this.element.find(\".k-scheduler-calendar\"),\n                            {\n                                change: function() {\n                                    var date = this.value();\n                                    if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"changeDate\", date: date })) {\n                                        that.date(date);\n                                        that.popup.close();\n                                    }\n\n                                    if (!that._isMobile()) {\n                                        that._selectedView.element.trigger(\"focus\");\n                                        that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                                    }\n                                },\n                                min: that.options.min,\n                                max: that.options.max\n                            });\n                        }\n                        that.calendar.element.on(\"keydown\" + NS, function(e) {\n                            if (e.keyCode === keys.ESC || e.keyCode === keys.TAB) {\n                                that.popup.close();\n                                that._selectedView.element.trigger(\"focus\");\n                                that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                            }\n                        });\n\n                        that.calendar.setOptions({\n                            start: that._selectedViewName === \"year\" ? \"decade\" : \"month\",\n                            depth: that._selectedViewName === \"year\" ? \"decade\" : \"month\"\n                        });\n\n                        that.calendar.value(that.date());\n                    },\n                    copyAnchorStyles: false\n                });\n            }\n\n            that.popup.open();\n        },\n\n        refresh: function(e) {\n            var that = this;\n            var view = this.view();\n            var preventRefresh = (e && e.action === \"itemchange\" && (this._editor.editable || this._preventRefresh)) ||\n                                 (this.dataSource.options.type === \"signalr\" && this._preventRefresh);\n\n            this._progress(false);\n\n            e = e || {};\n\n            if (!view) {\n                return;\n            }\n\n            if (preventRefresh) { // skip rebinding if editing is in progress\n                this._attemptRefresh = true && this.dataSource.options.type === \"signalr\";\n                return;\n            }\n\n            if (this.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (!(e && e.action === \"resize\") && this._editor) {\n                this._editor.close();\n            }\n\n            this._data = this.dataSource.expand(view.startDate(), view.visibleEndDate());\n\n            view.refreshLayout();\n\n            view.render(this._data);\n\n            this.trigger(\"dataBound\");\n            this._attemptRefresh = false;\n        },\n\n        slotByPosition: function(x, y) {\n            var view = this.view();\n\n            if (!view._slotByPosition) {\n                return null;\n            }\n\n            var slot = view._slotByPosition(x, y);\n\n            if (!slot) {\n                return null;\n            }\n\n            return {\n                startDate: slot.startDate(),\n                endDate: slot.endDate(),\n                groupIndex: slot.groupIndex,\n                element: slot.element,\n                isDaySlot: slot.isDaySlot\n            };\n        },\n\n        slotByElement: function(element) {\n            var el = $(element),\n                offset = el.offset(),\n                width = el.width(),\n                height = el.height(),\n                centerX = offset.left + width / 2,\n                centerY = offset.top + height / 2,\n                offset = $(element).offset();\n\n            return this.slotByPosition(centerX, centerY);\n        },\n\n        resourcesBySlot: function(slot) {\n            return this.view()._resourceBySlot(slot);\n        }\n    });\n\n    var defaultViews = {\n        day: {\n            type: \"kendo.ui.DayView\"\n        },\n        week: {\n            type: \"kendo.ui.WeekView\"\n        },\n        workWeek: {\n            type: \"kendo.ui.WorkWeekView\"\n        },\n        agenda: {\n            type: \"kendo.ui.AgendaView\"\n        },\n        month: {\n            type: \"kendo.ui.MonthView\"\n        },\n        timeline: {\n            type: \"kendo.ui.TimelineView\"\n        },\n        timelineWeek: {\n            type: \"kendo.ui.TimelineWeekView\"\n        },\n        timelineWorkWeek: {\n            type: \"kendo.ui.TimelineWorkWeekView\"\n        },\n        timelineMonth: {\n            type: \"kendo.ui.TimelineMonthView\"\n        },\n        year: {\n            type: \"kendo.ui.YearView\"\n        }\n    };\n\n    ui.plugin(Scheduler);\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Scheduler.prototype);\n\n        var SCHEDULER_EXPORT = \"k-scheduler-pdf-export\";\n        Scheduler.fn._drawPDF = function(progress) {\n            var wrapper = this.wrapper;\n            var styles = wrapper[0].style.cssText;\n\n            wrapper.css({\n                width: wrapper.width(),\n                height: wrapper.height()\n            });\n\n            wrapper.addClass(SCHEDULER_EXPORT);\n\n            var scheduler = this;\n            var promise = new $.Deferred();\n            var table = wrapper.find(\".k-scheduler-content\").find(\"table\").css(\"table-layout\", \"auto\");\n\n            setTimeout(function() {\n                table.css(\"table-layout\", \"fixed\");\n                scheduler.resize(true);\n\n                scheduler._drawPDFShadow({}, {\n                    avoidLinks: scheduler.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var args = {\n                        page: group,\n                        pageNumber: 1,\n                        progress: 1,\n                        totalPages: 1\n                    };\n\n                    progress.notify(args);\n                    promise.resolve(args.page);\n                })\n                .fail(function(err) {\n                    promise.reject(err);\n                })\n                .always(function() {\n                    wrapper[0].style.cssText = styles;\n                    wrapper.removeClass(SCHEDULER_EXPORT);\n                    scheduler.resize(true);\n\n                    //Required because slot.offsetLeft is incorrect after first resize\n                    scheduler.resize(true);\n                });\n            });\n\n            return promise;\n        };\n    }\n\n    var TimezoneEditor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                zones = kendo.timezone.windows_zones;\n\n            if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            that._zonesQuery = new kendo.data.Query(zones);\n            that._zoneTitleId = kendo.guid();\n            that._zoneTitlePicker();\n            that._zonePicker();\n\n            that._zoneTitle.bind(\"cascade\", function() {\n                if (!this.value()) {\n                    that._zone.wrapper.hide();\n                }\n            });\n\n            that._zone.bind(\"cascade\", function() {\n                that._value = this.value();\n                that.trigger(CHANGE);\n            });\n\n            that.value(that.options.value);\n        },\n        options: {\n            name: \"TimezoneEditor\",\n            value: \"\",\n            optionLabel: \"No timezone\"\n        },\n        events: [ CHANGE ],\n\n        _zoneTitlePicker: function() {\n            var that = this,\n                zoneTitle = $('<input id=\"' + that._zoneTitleId + '\" aria-label=\"' + that.options.title + '\"/>').appendTo(that.wrapper);\n\n            that._zoneTitle = new kendo.ui.DropDownList(zoneTitle, {\n                dataSource: kendo.timezone.zones_titles,\n                dataValueField: \"other_zone\",\n                dataTextField: \"name\",\n                optionLabel: that.options.optionLabel\n            });\n        },\n\n        _zonePicker: function() {\n            var that = this,\n                zone = $('<input aria-label=\"' + that.options.title + '\"/>').appendTo(this.wrapper);\n\n            that._zone = new kendo.ui.DropDownList(zone, {\n                dataValueField: \"zone\",\n                dataTextField: \"territory\",\n                dataSource: that._zonesQuery.data,\n                cascadeFrom: that._zoneTitleId,\n                dataBound: function() {\n                    that._value = this.value();\n                    this.wrapper.toggle(this.dataSource.view().length > 1);\n                }\n            });\n\n            that._zone.wrapper.hide();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        value: function(value) {\n            var that = this,\n                zone;\n\n            if (value === undefined$1) {\n                return that._value;\n            }\n\n            zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n            if (zone) {\n                that._zoneTitle.value(zone.other_zone);\n                that._zone.value(zone.zone);\n            } else {\n                that._zoneTitle.select(0);\n            }\n\n        }\n    });\n\n    ui.plugin(TimezoneEditor);\n\n    var ZONETITLEOPTIONTEMPLATE = kendo.template(({ name, other_zone }) => `<option value=\"${other_zone}\">${name}</option>`);\n    var ZONEOPTIONTEMPLATE = kendo.template(({ zone, territory }) => `<option value=\"${zone}\">${territory}</option>`);\n\n    var MobileTimezoneEditor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                zones = kendo.timezone.windows_zones;\n\n            if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            that._zonesQuery = new kendo.data.Query(zones);\n            that._zoneTitlePicker();\n            that._zonePicker();\n\n            that.value(that.options.value);\n        },\n\n        options: {\n            name: \"MobileTimezoneEditor\",\n            optionLabel: \"No timezone\",\n            value: \"\"\n        },\n\n        events: [ CHANGE ],\n\n        _bindZones: function(value) {\n            var data = value ? this._filter(value) : [];\n\n            this._zone.html(this._options(data, ZONEOPTIONTEMPLATE));\n        },\n\n        _filter: function(value) {\n            return this._zonesQuery.filter({ field: \"other_zone\", operator: \"eq\", value: value }).data;\n        },\n\n        _options: function(data, template, optionLabel) {\n            var idx = 0;\n            var html = \"\";\n            var length = data.length;\n\n            if (optionLabel) {\n                html += template({ other_zone: \"\", name: optionLabel });\n            }\n\n            for (; idx < length; idx++) {\n                html += template(data[idx]);\n            }\n\n            return html;\n        },\n\n        _zoneTitlePicker: function() {\n            var that = this;\n            var options = that._options(kendo.timezone.zones_titles, ZONETITLEOPTIONTEMPLATE, that.options.optionLabel);\n\n            that._zoneTitle = $('<select>' + options + '</select>')\n                                .appendTo(that.wrapper)\n                                .on(\"change\", function() {\n                                    var value = this.value;\n                                    var zone = that._zonePickerLabel;\n                                    var zoneSelect = zone.find(\"select\");\n\n                                    that._bindZones(value);\n\n                                    if (value && zoneSelect.children().length > 1) {\n                                        zone.show();\n                                    } else {\n                                        zone.hide();\n                                    }\n\n                                    that._value = that._zone[0].value;\n\n                                    that.trigger(CHANGE);\n                                });\n        },\n\n        _zonePicker: function() {\n            var that = this;\n\n            that._zonePickerLabel = $(\"<li class='k-item k-listgroup-item k-zonepicker'>\" +\n                                        \"<label class='k-label k-listgroup-form-row'>\" +\n                                            \"<span class='k-item-title k-listgroup-form-field-label'></span>\" +\n                                            \"<div class='k-listgroup-form-field-wrapper'></div>\" +\n                                        \"</label>\" +\n                                    \"</li>\").hide();\n\n            that._zone = $('<select></select>')\n                            .appendTo(that._zonePickerLabel.find(\"div\"))\n                            .on(\"change\", function() {\n                                that._value = this.value;\n\n                                that.trigger(CHANGE);\n                            });\n\n            this.wrapper.closest(\".k-item\").after(that._zonePickerLabel);\n\n            that._bindZones(that._zoneTitle.val());\n            that._value = that._zone[0].value;\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        value: function(value) {\n            var that = this;\n            var zonePicker = that._zone;\n            var other_zone = \"\";\n            var zone_value = \"\";\n            var zone;\n\n            if (value === undefined$1) {\n                return that._value;\n            }\n\n            zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n            if (zone) {\n                zone_value = zone.zone;\n                other_zone = zone.other_zone;\n            }\n\n            that._zoneTitle.val(other_zone);\n            that._bindZones(other_zone);\n\n            zonePicker.val(zone_value);\n            zone_value = zonePicker[0].value;\n\n            if (zone_value && zonePicker.children.length > 1) {\n                that._zonePickerLabel.show();\n            } else {\n                that._zonePickerLabel.hide();\n            }\n\n            that._value = zone_value;\n        }\n    });\n\n    ui.plugin(MobileTimezoneEditor);\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { __meta__, kendo$1 as default };\n"]}