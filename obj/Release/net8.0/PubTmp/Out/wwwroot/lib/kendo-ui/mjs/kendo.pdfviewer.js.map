{"version":3,"file":"kendo.pdfviewer.js","names":["download","SearchService","goToNextSearchMatch","goToPreviousSearchMatch","reloadDocument","currentPage","calculateZoomLevel","print","DEFAULT_ZOOM_LEVEL","Scroller","loadPDF","renderPage","scrollToPage","isLoaded","window","pdfjsLib","GlobalWorkerOptions","workerSrc","pdfjsWorker","console","error","$","kendo","extend","DPLProcessor","Class","init","options","viewer","that","this","read","upload","fetchDocument","deferred","Deferred","errorMessages","messages","ajax","type","url","dataType","success","data","stringify","resolve","JSON","parse","xhr","_triggerError","responseText","message","parseError","fetchPageData","number","page","document","pages","pageField","geometries","length","downloadFile","fileName","location","fromJSON","json","_clearPages","total","_renderPages","resize","activatePage","pdfviewer","dpl","processor","jQuery","pdfjs","lib","parseJSON","progress","ui","UploadHelper","_initUpload","uploadElement","extendUploadOptions","uploadOptions","select","_onSelect","bind","_onSuccess","_onError","complete","_onComplete","showFileList","multiple","validation","allowedExtensions","async","saveUrl","autoUpload","saveField","kendoUpload","getKendoUpload","pageContainer","e","response","isPlainObject","XMLHttpRequest","notSupported","fileToUpload","files","trigger","file","extension","toLowerCase","reader","FileReader","onload","target","result","fromFile","onerror","readAsArrayBuffer","rawFile","noop","drawing","Group","Surface","geometryTypes","Path","MultiPath","Rect","Image","Text","Page","pageNumber","element","attr","_updatePageSize","width","height","ratio","pageElement","Math","min","size","destroy","render","BlankPage","_externalDropZoneId","_uploadHelper","_upload","find","dropZone","DPLPage","draw","group","surface","_drawGeometries","load","loaded","then","_initSurface","surfaceOptions","view","kGeometry","i","geometry","_drawPath","_drawRect","_drawImage","_drawText","append","rectGeo","point","transform","_getMatrix","fill","fillOptions","stroke","strokeOptions","imageRect","src","font","content","path","paths","subPath","segments","moveTo","apply","j","segment","points","lineTo","curveTo","closed","close","matrix","Object","create","Matrix","prototype","Command","OpenCommand","fn","call","exec","click","PageChangeCommand","current","targetPage","value","isNaN","_pageNum","numPages","Number","DownloadCommand","notFound","info","title","defaultFileName","_isDPLProcessor","pdf","blob","saveOptions","ExportCommand","dialog","_saveDialog","_initDialog","_updateModel","pagesCount","open","viewModel","exportImage","exportSVG","dialogs","ExportAsDialog","EnableSelectionCommand","_toggleSelection","EnablePanCommand","OpenSearchCommand","searchDialog","SearchDialog","pageContainerWrapper","position","top","offset","left","search","_open","next","_next","prev","_prev","_close","searchService","Promise","all","_loadAllPages","textContainers","get","changeHandler","_change","searchModel","toolbar","unbind","matches","matchIndex","_updateSearchModel","ev","text","matchCase","field","pdfScroller","scroller","model","set","_closeDialog","ZoomCommand","scale","processingLib","_calculateZoom","zoomScale","_setPageContainerScaleFactor","pdfDoc","zoom","dom","rootElement","loadOnDemand","done","pdfPages","currentPageIndex","_pageRenderPromise","_triggerZoomEnd","preventZoom","viewerOptions","scaleValue","_allowResize","_autoFit","zoomIn","zoomRate","zoomOut","_autoZoomScale","parseFloat","toString","match","parseInt","replace","zoomMin","zoomMax","updateComboBox","_updateZoomComboBox","PrintCommand","onPrintComplete","onPrintError","popupBlocked","encode","htmlEncode","Draggable","outerWidth","_outerWidth","EXTENSIONS","keys","ErrorDialog","actions","okText","_dialog","kendoDialog","getKendoDialog","center","fileFormats","description","exportAsDialog","png","svg","_initializeDialog","autoFocus","resizable","modal","preventScroll","maxWidth","template","labels","saveAsType","save","cancel","dialogMessages","kendoWindow","getKendoWindow","observable","name","dragHandle","icon","iconClass","inputLabel","of","previous","_showSearchDialog","_hideSearchDialog","css","innerWidth","kendoStop","kendoAnimate","effects","direction","fade","duration","properties","hide","dialogElm","prepend","_draggable","filter","axis","dragstart","wnd","containment","startPosition","x","client","getOffset","_innerWidth","clientWidth","support","scrollbar","maxLeft","drag","indexOf","max","userEvents","stopPropagation","boundValue","searchText","matchCaseClick","onKeyup","key","keyCode","navigationFn","shiftKey","ENTER","preventDefault","ESC","onInput","__meta__","id","category","depends","NS","PLUS","MINUS","ZERO","NUMPAD_ZERO","Widget","SCROLL","RENDER","ERROR","KEYDOWN","MOUSEWHEEL","UPDATE","PAGE_CHANGE","ZOOMCOMMAND","CHANGE","DISABLED","PROCESSORS","styles","PREDEFINED_ZOOM_VALUES","PDFViewer","deepExtend","_processMessages","_wrapper","_renderToolbar","_initProcessor","_renderPageContainer","_loadDPLDocument","_loadPdfJSDocument","notify","_showWatermarkOverlay","wrapper","events","pdfjsProcessing","dplProcessing","items","defaultPageSize","zoomLevel","actualWidth","autoWidth","fitToWidth","fitToPage","exportAs","toggleSelection","togglePan","defaultTools","pager","overflow","component","componentOptions","navigatable","_isToolbarItem","spacer","zoomInOut","fillMode","buttons","command","showText","enable","dataTextField","dataValueField","valuePrimitive","clearOnEscape","commandOn","togglable","selected","spacer2","exportAsTool","addClass","on","_keydown","_resizeHandler","onResize","plusShortcuts","NUMPAD_PLUS","minusShortcuts","NUMPAD_MINUS","zeroShortcuts","shouldExecute","args","ctrlKey","_blankPage","includes","execute","_handlePageChangeEvent","event","_pageChangeFromScroll","index","_showPagerInputLabels","inputElements","children","eq","add","is","show","_resizePager","responsive","pagerWidth","visibleToolbarItems","Array","from","containerWidth","visibleToolsWidth","gap","temp","elementsToShrink","hidden","removeClass","input","processingOptions","_hasPagerTool","tools","hasPager","tool","toolbarOptions","_processTools","pagerMessages","currentPagerOptions","parentMessages","toolbarElement","appendTo","ToolBar","_toolbarClick","update","_updateToolbar","flatMap","t","zoomLevels","percent","comboOptions","map","concat","dataSource","pageOptions","toolbarEl","zoomCombo","toFocus","first","_getAllItems","isBlank","action","updatePager","pageChangeFromScroll","_updatePager","_updateOnBlank","_resetTabIndex","parent","pagerDataSource","DataSource","pageSize","setDataSource","_togglePagerDisabledClass","totalPages","hasClass","isPredefined","round","currentTarget","val","_initErrorDialog","_errorDialog","dialogInstance","style","setProperty","pagesData","viewerPage","pageData","push","_attachContainerEvents","_getVisiblePagesCount","_renderBlankPage","_resize","clearTimeout","setTimeout","_resizePages","forEach","pageWidth","_pageInfo","emptyPage","currentRatio","_wheel","throttle","activeElement","_scroll","_onDemandScroll","pageToLoadNum","containerHeight","pageNum","pageIndex","_preventScroll","_scrollingStarted","nextPageIndex","_loadVisiblePages","loadPage","originalEvent","wheelDelta","detail","preventComboBoxChange","commandOptions","parentNode","enablePanEventsTracking","ArrayBuffer","arrayBuffer","loadOnDemandPageSize","notFoundError","alertMessage","_setPageNumberAttributes","each","el","preventTrigger","intervalId","setInterval","rendered","renderInProgress","clearInterval","_scrollToActivatedPage","loadedPagesHeight","updatedVisiblePagesCount","clientHeight","_visiblePagesCount","minVisiblePageNum","maxVisiblePageNum","_visiblePages","slice","promises","_updateDocument","rootGroup","background","fromRect","color","saveAs","dataURI","proxyURL","forceProxy","proxyTarget","setOptions","unbindResize","off","empty","disablePanEventsTracking","toggleClass","plugin","kendo$1"],"sources":["kendo.pdfviewer.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import './kendo.mobile.scroller.js';\nimport './kendo.toolbar.js';\nimport './kendo.pager.js';\nimport './kendo.combobox.js';\nimport './kendo.textbox.js';\nimport './kendo.core.js';\nimport './kendo.drawing.js';\nimport './kendo.upload.js';\nimport { d as download, S as SearchService, g as goToNextSearchMatch, a as goToPreviousSearchMatch, r as reloadDocument, c as currentPage, b as calculateZoomLevel, p as print, D as DEFAULT_ZOOM_LEVEL, e as Scroller, l as loadPDF, f as renderPage, s as scrollToPage } from './kendo.pdfviewer-common.cmn.chunk.js';\nimport './kendo.dialog.js';\nimport './kendo.window.js';\nimport './kendo.binder.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.dropdownlist.js';\nimport './kendo.icons.js';\nimport './kendo.draganddrop.js';\nimport './kendo.pdfjs.loader.js';\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        Class = kendo.Class;\n\n    var DPLProcessor = Class.extend({\n        init: function(options, viewer) {\n            var that = this;\n\n            that.options = options;\n            that.read = options.read;\n            that.upload = options.upload;\n            that.download = options.download;\n\n            that.viewer = viewer;\n        },\n        fetchDocument: function() {\n            var that = this,\n                deferred = $.Deferred(),\n                errorMessages = that.viewer.options.messages.errorMessages;\n\n            if (!that.read) {\n                return deferred.resolve();\n            }\n\n            $.ajax({\n                type: that.read.type,\n                url: that.read.url,\n                dataType: that.read.dataType,\n                success: function(data) {\n                    if (typeof data != \"string\") {\n                        data = kendo.stringify(data);\n                    }\n                    deferred.resolve(JSON.parse(data));\n                },\n                error: function(xhr) {\n                    that.viewer._triggerError({\n                        error: xhr.responseText,\n                        message: errorMessages.parseError\n                    });\n                }\n            });\n\n            return deferred;\n        },\n        fetchPageData: function(number) {\n            var that = this;\n            var deferred = $.Deferred();\n            var page = that.viewer.document.pages[number - 1];\n            var data = {};\n            data[that.read.pageField] = number;\n\n            if (!page.geometries.length) {\n                $.ajax({\n                    type: that.read.type,\n                    url: that.read.url,\n                    data: data,\n                    success: function(data) {\n                        deferred.resolve(JSON.parse(data));\n                    },\n                    error: function(xhr) {\n                        that.viewer._triggerError({\n                            error: xhr.responseText,\n                            message: that.viewer.options.messages.errorMessages.parseError\n                        });\n                    }\n                });\n            } else {\n                deferred.resolve(page);\n            }\n\n            return deferred;\n        },\n        downloadFile: function(fileName) {\n            window.location = this.download.url + \"?file=\" + fileName;\n        },\n\n        fromJSON: function(json)\n        {\n            var viewer = this.viewer;\n            viewer._clearPages();\n\n            viewer.document = json;\n            viewer.document.total = viewer.document.pages.length;\n\n            viewer._renderPages();\n            viewer.resize(true);\n\n            viewer.activatePage(1);\n        }\n    });\n\n    extend(kendo, {\n        pdfviewer: {\n            dpl: {\n                processor: DPLProcessor\n            }\n        }\n    });\n})(window.kendo.jQuery);\n\n/* eslint no-console: [\"error\", { allow: [\"warn\", \"error\"] }] */\n\nfunction isLoaded() {\n    if (!window.pdfjsLib) {\n        console?.error(`PDF.JS library is required. Make sure that it is properly loaded <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.3.136/pdf.mjs\" type=\"module\"></script>`);\n        return false;\n    }\n\n    if (!window.pdfjsLib?.GlobalWorkerOptions?.workerSrc && !window.pdfjsWorker) {\n        console?.error(`The pdf.worker.mjs script is not loaded. The PDF.JS library will not work correctly.\n    Either load the script:\n    \n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.3.136/pdf.worker.mjs\" type=\"module\"></script>\n    \n    Or set it to the GlobalWorkerOptions.workerSrc property:\n    \n    <script type=\"module\">\n        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.3.136/pdf.worker.mjs';\n    </script>`);\n    return false;\n    }\n\n    return true;\n}\n\nkendo.pdfviewer.pdfjs = { lib: window.pdfjsLib };\n\n(function($, undefined$1) {\n    var Class = kendo.Class,\n        extend = $.extend,\n        parseJSON = JSON.parse,\n        progress = kendo.ui.progress,\n        Class = kendo.Class,\n        OPEN = \"open\";\n\n    var UploadHelper = Class.extend({\n        init: function(viewer) {\n            this.viewer = viewer;\n            this.errorMessages = this.viewer.options.messages.errorMessages;\n            this.upload = this.viewer.processor && this.viewer.processor.upload;\n        },\n        _initUpload: function(uploadElement, extendUploadOptions) {\n            var uploadOptions = extend({\n                select: this._onSelect.bind(this),\n                success: this._onSuccess.bind(this),\n                error: this._onError.bind(this),\n                complete: this._onComplete.bind(this),\n                showFileList: false,\n                multiple: false,\n                validation: {\n                    allowedExtensions: [\".pdf\"]\n                }\n            }, extendUploadOptions || {});\n\n            if (this.upload) {\n                extend(uploadOptions, {\n                    async: {\n                        saveUrl: this.upload.url,\n                        autoUpload: true,\n                        saveField: this.upload.saveField\n                    }\n                });\n            }\n\n            var upload = (uploadElement || $('<input name=\"files\" accept=\".pdf\" type=\"file\" />')).kendoUpload(uploadOptions).getKendoUpload();\n\n            return upload;\n        },\n        _onComplete: function() {\n            progress(this.viewer.pageContainer, false);\n        },\n        _onSuccess: function(e) {\n            var json = parseJSON(e.response);\n\n            if ($.isPlainObject(json)) {\n                this.viewer.processor.fromJSON(json);\n            }\n            else {\n                this.viewer._triggerError({\n                    error: json,\n                    message: this.errorMessages.parseError\n                });\n            }\n        },\n        _onError: function(e) {\n            this.viewer._triggerError({\n                error: e.XMLHttpRequest.responseText,\n                message: this.errorMessages.notSupported\n            });\n        },\n        _onSelect: function(e) {\n            var that = this;\n            var fileToUpload = e.files[0];\n\n            progress(that.viewer.pageContainer, true);\n\n            if (that.viewer.trigger(OPEN, { file: fileToUpload }) || that.upload) {\n                return;\n            } else if (fileToUpload.extension.toLowerCase() !== \".pdf\") {\n                that.viewer._triggerError({\n                    error: fileToUpload,\n                    message: that.errorMessages.notSupported\n                });\n                return;\n            }\n\n            var reader = new FileReader();\n            reader.onload = function(e) {\n                var document = e.target.result;\n                that.viewer.fromFile(document);\n            };\n            reader.onerror = function() {\n                that.viewer._triggerError({\n                    error: fileToUpload,\n                    message: that.errorMessages.parseError\n                });\n            };\n\n            reader.readAsArrayBuffer(fileToUpload.rawFile);\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        UploadHelper: UploadHelper\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var extend = $.extend,\n        noop = $.noop,\n        drawing = kendo.drawing,\n        Group = drawing.Group,\n        Surface = drawing.Surface,\n        RENDER = \"render\",\n        Class = kendo.Class,\n        UploadHelper = kendo.pdfviewer.UploadHelper,\n\n        DEFAULT_DPR = 2;\n\n    var geometryTypes = {\n        Path: \"path\",\n        MultiPath: \"multipath\",\n        Rect: \"rect\",\n        Image: \"image\",\n        Text: \"text\"\n    };\n\n    var BLANK_PAGE_TEMPLATE = (dropzoneId) => `<div class=\"k-page k-blank-page\">\n        <div id=\"${dropzoneId}\" class=\"k-external-dropzone\">\n            <div class=\"k-dropzone-inner\">\n                <span class=\"k-dropzone-icon k-icon k-svg-icon k-icon-xxxl k-svg-i-upload\">\n                    <svg aria-hidden=\"true\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n                        <path d=\"M32 384v96h448v-96H32zm192-64h64V192h96L256 32 128 192h96v128z\"></path>\n                    </svg>\n                </span>\n                <span class=\"k-dropzone-hint\">Drag and drop files here to upload</span>\n            </div>\n        </div>\n        <input name=\"files\" accept=\".pdf\" type=\"file\" ref-pdfviewer-blank-page-upload>\n    </div>`;\n\n    var Page = Class.extend({\n        init: function(options, viewer) {\n            this.viewer = viewer;\n            this.processor = options.processor;\n            this.options = options;\n            this.pageNumber = options.number;\n\n            this.element = $(\"<div class='k-page' />\");\n            this.element.attr(kendo.attr(\"number\"), this.pageNumber);\n\n            this._updatePageSize(options);\n            this.width = options.width;\n            this.height = options.height;\n        },\n        resize: function(ratio) {\n            var pageElement = this.element;\n\n            this._updatePageSize({\n                width: Math.min(pageElement.width() * ratio, this.width),\n                height: Math.min(pageElement.height() * ratio, this.height)\n            });\n        },\n        _updatePageSize: function(size) {\n            this.element\n                    .width(size.width)\n                    .height(size.height);\n        },\n        destroy: function() {\n            kendo.destroy(this.element);\n        },\n        render: noop\n    });\n\n    var BlankPage = Page.extend({\n        init: function(options, viewer) {\n            this.viewer = viewer;\n            this.options = options;\n            this._externalDropZoneId = `${viewer.element.attr(\"id\")}-external-dropzone`;\n            this.element = $(BLANK_PAGE_TEMPLATE(this._externalDropZoneId));\n            this._uploadHelper = new UploadHelper(viewer);\n        },\n        _initUpload: function() {\n            this._upload = this._uploadHelper._initUpload(this.element.find(\"input[ref-pdfviewer-blank-page-upload]\"), {\n                dropZone: `#${this._externalDropZoneId}`,\n                showFileList: false,\n                async: {\n                    autoUpload: false,\n                    saveUrl: \"save\"\n                }\n            });\n        },\n        resize: noop,\n        _updatePageSize: noop,\n        destroy: function() {\n            if (this._upload) {\n                this._upload.destroy();\n            }\n\n            kendo.destroy(this.element);\n        },\n        render: noop\n    });\n\n    var DPLPage = Page.extend({\n        draw: function() {\n            var that = this,\n                geometries = that.options.geometries;\n\n            that.group = new Group();\n            that.surface.draw(that.group);\n\n            that._drawGeometries(geometries);\n\n            that.viewer.trigger(RENDER, { page: this });\n            kendo.ui.progress(that.element, false);\n        },\n        load: function() {\n            var that = this;\n\n            if (that.loaded || !that.processor)\n            {\n                return;\n            }\n\n            that.processor.fetchPageData(that.pageNumber).then(function(data) {\n                that.options = data;\n                that._initSurface();\n                that.draw();\n            });\n\n            that.loaded = true;\n        },\n        _initSurface: function() {\n            var size = {\n                width: this.element.width(),\n                height: this.element.height()\n            };\n            var surfaceOptions = extend({ width: this.width, height: this.height }, this.viewer.options.view);\n            this.surface = new Surface(this.element, surfaceOptions);\n            this._updatePageSize(size);\n        },\n        _drawGeometries: function(geometries) {\n            var that = this,\n                kGeometry;\n\n            if (!geometries) {\n                return;\n            }\n\n            for (var i = 0; i <= geometries.length; i++) {\n                var geometry = geometries[i];\n\n                if (!geometry) {\n                    continue;\n                }\n\n                switch (geometry.type) {\n                    case geometryTypes.Path:\n                    case geometryTypes.MultiPath:\n                        kGeometry = that._drawPath(geometry);\n                        break;\n                    case geometryTypes.Rect:\n                        kGeometry = that._drawRect(geometry);\n                        break;\n                    case geometryTypes.Image:\n                        kGeometry = that._drawImage(geometry);\n                        break;\n                    case geometryTypes.Text:\n                        kGeometry = that._drawText(geometry);\n                        break;\n                    default:\n                        kGeometry = null;\n                        break;\n                }\n\n                if (kGeometry)\n                {\n                    that.group.append(kGeometry);\n                }\n            }\n        },\n        _drawRect: function(geometry)\n        {\n            var rectGeo = new kendo.geometry.Rect(geometry.point, geometry.size);\n\n            return new drawing.Rect(rectGeo, {\n                transform: this._getMatrix(geometry.transform),\n                fill: geometry.fillOptions,\n                stroke: geometry.strokeOptions\n            });\n        },\n\n        _drawImage: function(geometry)\n        {\n            var imageRect = new kendo.geometry.Rect(geometry.point, geometry.size);\n            return new drawing.Image(geometry.src, imageRect, {\n                transform: this._getMatrix(geometry.transform)\n            });\n        },\n\n        _drawText: function(geometry)\n        {\n            var options = {\n                transform: this._getMatrix(geometry.transform),\n                stroke: geometry.strokeOptions,\n                fill: geometry.fillOptions,\n                font: geometry.font\n            };\n            return new kendo.drawing.Text(geometry.content, geometry.point, options);\n        },\n\n        _drawPath: function(geometry)\n        {\n            var options = {\n                transform: this._getMatrix(geometry.transform),\n                stroke: geometry.strokeOptions,\n                fill: geometry.fillOptions\n            };\n            var path = new drawing.MultiPath(options);\n\n            for (var i = 0; i < geometry.paths.length; i++) {\n                var subPath = geometry.paths[i];\n\n                if (!subPath.segments)\n                {\n                    return;\n                }\n\n                path.moveTo.apply(path, subPath.point);\n\n                for (var j = 0; j < subPath.segments.length; j++) {\n                    var segment = subPath.segments[j];\n                    var drawAction = segment.points.length === 1 ? path.lineTo : path.curveTo;\n                    drawAction.apply(path, segment.points);\n                }\n\n                if (subPath.closed) {\n                    path.close();\n                }\n            }\n\n            return path;\n        },\n\n        _getMatrix: function(transform) {\n            var matrix = Object.create(kendo.geometry.Matrix.prototype);\n            kendo.geometry.Matrix.apply(matrix, transform);\n            return matrix;\n        }\n    });\n\n    extend(kendo.pdfviewer.dpl, {\n        geometryTypes: geometryTypes,\n        Page: DPLPage\n    });\n    extend(kendo.pdfviewer, {\n        BlankPage: BlankPage\n    });\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        parseJSON = JSON.parse,\n        progress = kendo.ui.progress,\n        Class = kendo.Class,\n        UploadHelper = kendo.pdfviewer.UploadHelper,\n        OPEN = \"open\",\n        ZOOMSTART = \"zoomStart\",\n        ZOOMEND = \"zoomEnd\";\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.viewer = options.viewer;\n            this.errorMessages = this.viewer.options.messages.errorMessages;\n        }\n    });\n\n    var OpenCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n            this._uploadHelper = new UploadHelper(this.viewer);\n        },\n        exec: function() {\n            this.viewer._upload = this.viewer._upload || this._uploadHelper._initUpload();\n            this.viewer._upload.element.click();\n        },\n    });\n\n    var PageChangeCommand = Command.extend({\n        exec: function() {\n            var targetPage = this.options.value,\n                viewer = this.viewer,\n                current, total;\n\n            if (isNaN(targetPage)) {\n                current = viewer._pageNum;\n                total = viewer.document.total || viewer.document.numPages;\n\n                switch (targetPage) {\n                    case \"first\": targetPage = 1;\n                        break;\n                    case \"prev\": targetPage = current > 1 ? current - 1 : 1;\n                        break;\n                    case \"next\": targetPage = current < total ? current + 1 : total;\n                        break;\n                    case \"last\": targetPage = total;\n                        break;\n                }\n            } else {\n                targetPage = Number(targetPage);\n            }\n\n            viewer.activatePage(targetPage, false);\n        }\n    });\n\n    var DownloadCommand = Command.extend({\n        exec: function() {\n            const that = this;\n            if (!that.viewer.document) {\n                that.viewer._triggerError({\n                    message: that.errorMessages.notFound\n                });\n                return;\n            }\n\n            const fileName = (that.viewer.document.info && that.viewer.document.info.title) ||\n            that.viewer.options.messages.defaultFileName;\n\n            if (that.viewer._isDPLProcessor()) {\n                that.viewer.processor.downloadFile(fileName);\n            } else {\n                download(\n                    { pdf: this.viewer.document, error: (e) => { that.viewer._triggerError({ message: e.message }); } },\n                    fileName,\n                    {},\n                    (blob, fileName, saveOptions) => false\n                );\n            }\n        }\n    });\n\n    var ExportCommand = Command.extend({\n        init: function(options) {\n            options = $.extend(options, this.options);\n            Command.fn.init.call(this, options);\n        },\n        exec: function() {\n            var dialog = (this.viewer._saveDialog || this._initDialog());\n\n            dialog._updateModel({\n                pagesCount: (this.viewer.document && this.viewer.document.total) || 1,\n                page: this.viewer.options.page\n            });\n\n            dialog.open();\n        },\n        apply: function(viewModel) {\n            var extension = viewModel.extension;\n\n            if (extension === \".png\") {\n                this.viewer.exportImage(viewModel);\n            } else if (extension === \".svg\") {\n                this.viewer.exportSVG(viewModel);\n            }\n        },\n        _initDialog: function() {\n            this.viewer._saveDialog = new kendo.pdfviewer.dialogs.ExportAsDialog({\n                apply: this.apply.bind(this),\n                pagesCount: (this.viewer.document && this.viewer.document.total) || 1,\n                messages: this.viewer.options.messages\n            });\n            return this.viewer._saveDialog;\n        }\n    });\n\n    var EnableSelectionCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                viewer = that.viewer;\n\n                viewer._toggleSelection(true);\n        }\n    });\n\n    var EnablePanCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                viewer = that.viewer;\n\n                viewer._toggleSelection(false);\n        }\n    });\n\n    const OpenSearchCommand = Command.extend({\n        init: function(options) {\n            const that = this;\n\n            that.viewer = options.viewer;\n\n            if (!that.viewer.searchDialog) {\n                that.viewer.searchDialog = new kendo.pdfviewer.dialogs.SearchDialog({\n                    pageContainer: that.viewer.pageContainerWrapper,\n                    position: {\n                        top: that.viewer.pageContainer.offset().top,\n                        left: that.viewer.pageContainer.offset().left\n                    },\n                    messages: that.viewer.options.messages.dialogs.search,\n                    open: that._open.bind(that),\n                    next: that._next.bind(that),\n                    prev: that._prev.bind(that),\n                    close: that._close.bind(that)\n                });\n            }\n\n            Command.fn.init.call(that, options);\n        },\n        exec: function() {\n            const that = this;\n\n            that.viewer.searchDialog.open();\n        },\n        _open: function() {\n            const that = this;\n\n            if (!that.searchService) {\n                Promise.all(that.viewer._loadAllPages()).then(() => {\n                    // Pages, On success, On error\n                    that.searchService = new SearchService({\n                        textContainers: that.viewer.pageContainer.find('.k-text-layer').get() || []\n                    });\n\n                    that.changeHandler = that._change.bind(that);\n                    that.viewer.searchDialog.searchModel.bind(\"change\", that.changeHandler);\n                });\n            }\n        },\n        _close: function() {\n            const that = this;\n            that.searchService.destroy();\n            that.searchService = null;\n            that.viewer.toolbar.element.find(\"[tabindex=0]\").trigger(\"focus\");\n            that.viewer.searchDialog.searchModel.unbind(\"change\", that.changeHandler);\n            that.matches = [];\n            that.matchIndex = null;\n            that._updateSearchModel();\n        },\n        _change: function(ev) {\n            const that = this,\n                text = that.viewer.searchDialog.searchModel[\"searchText\"],\n                matchCase = that.viewer.searchDialog.searchModel[\"matchCase\"];\n\n            if (ev.field === \"searchText\" || ev.field === \"matchCase\") {\n                that.matches = that.searchService.search({ text: text, matchCase: matchCase });\n                that.matchIndex = that.matches.length ? 1 : 0;\n                that._updateSearchModel();\n            }\n        },\n        _next: function() {\n            const that = this,\n                pdfScroller = that.viewer.pdfScroller;\n\n            goToNextSearchMatch({ search: that.searchService, scroller: pdfScroller });\n            that.matchIndex = that.matchIndex + 1 > that.matches.length ? 1 : that.matchIndex + 1;\n            that._updateSearchModel();\n        },\n        _prev: function() {\n            const that = this,\n                pdfScroller = that.viewer.pdfScroller;\n\n            goToPreviousSearchMatch({ search: that.searchService, scroller: pdfScroller });\n            that.matchIndex = that.matchIndex - 1 < 1 ? that.matches.length : that.matchIndex - 1;\n            that._updateSearchModel();\n        },\n        _updateSearchModel: function() {\n            const that = this,\n                model = that.viewer.searchDialog.searchModel;\n\n            if (that.matches && that.matches.length) {\n                model.set(\"matches\", that.matches.length);\n                model.set(\"matchIndex\", that.matchIndex);\n            } else {\n                model.set(\"searchText\", \"\");\n                model.set(\"matches\", 0);\n                model.set(\"matchIndex\", 0);\n            }\n        },\n        _closeDialog: function() {\n            const that = this;\n            that.viewer.searchDialog.close();\n        }\n    });\n\n    var ZoomCommand = Command.extend({\n        exec: function() {\n            const that = this,\n                options = that.options,\n                viewer = that.viewer;\n            let scale = options.value || options.scale;\n\n            if (viewer.processingLib === \"dpl\") {\n                return;\n            }\n\n            scale = that._calculateZoom();\n\n            if (!scale) {\n                return;\n            }\n\n            viewer.zoomScale = scale;\n\n            viewer._setPageContainerScaleFactor(scale);\n\n            if (that.viewer.document) {\n                reloadDocument({\n                    pdfDoc: viewer.document,\n                    zoom: scale,\n                    dom: viewer.pageContainer[0],\n                    rootElement: viewer.element[0],\n                    loadOnDemand: true,\n                    done: (pdfPages) => {\n                        const currentPageIndex = currentPage(viewer.element[0]);\n                        viewer._pageRenderPromise(pdfPages[currentPageIndex], true);\n                        that._triggerZoomEnd(scale);\n                    },\n                    error: (e) => {\n                        that._triggerZoomEnd(scale);\n                    }\n                });\n            }\n        },\n\n        _calculateZoom: function() {\n            var options = this.options,\n                viewer = this.viewer,\n                viewerOptions = viewer.options,\n                pageContainer = viewer.pageContainer,\n                scale = options.value || options.scale,\n                scaleValue = scale,\n                preventZoom;\n\n            viewer._allowResize = false;\n            viewer._autoFit = false;\n\n            if (options.zoomIn) {\n                scaleValue = scale = viewer.zoomScale + viewerOptions.zoomRate;\n            } else if (options.zoomOut) {\n                scaleValue = scale = viewer.zoomScale - viewerOptions.zoomRate;\n            } else if (scale === \"auto\") {\n                viewer._allowResize = true;\n                scaleValue = viewer._autoZoomScale;\n            } else if (typeof scale === \"string\" && !kendo.parseFloat(scale)) {\n                scaleValue = calculateZoomLevel(0, scale, viewer.zoomScale, pageContainer[0]);\n            } else if (scale && scale.toString().match(/^[0-9]+%?$/)) {\n                scale = parseInt(scale.replace('%', ''), 10) / 100;\n                scaleValue = scale;\n            } else {\n                preventZoom = isNaN(scale);\n            }\n\n            if (!preventZoom) {\n                preventZoom = scale < viewerOptions.zoomMin || scale > viewerOptions.zoomMax;\n            }\n\n            if (preventZoom || viewer.trigger(ZOOMSTART, { scale: scale })) {\n                return;\n            }\n\n            if (options.updateComboBox && viewer.toolbar)\n            {\n                viewer._updateZoomComboBox(scale);\n            }\n\n            return scaleValue;\n        },\n\n        _triggerZoomEnd: function(scale) {\n            var that = this,\n                viewer = that.viewer;\n\n            viewer.trigger(ZOOMEND, { scale: scale });\n        }\n    });\n\n    var PrintCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n        exec: function() {\n            const that = this;\n\n             if (!that.viewer.document) {\n                that.viewer._triggerError({\n                    message: this.errorMessages.notFound\n                });\n                return;\n            }\n\n            progress(that.viewer.pageContainer, true);\n            Promise.all(that.viewer._loadAllPages()).then(() => {\n                // Pages, On success, On error\n                print(that.viewer.pages, that.onPrintComplete.bind(that), that.onPrintError.bind(that));\n            });\n        },\n        onPrintComplete: function() {\n            const that = this;\n            progress(that.viewer.pageContainer, false);\n        },\n        onPrintError: function() {\n            const that = this;\n            progress(that.viewer.pageContainer, false);\n\n            that.viewer._triggerError({\n                message: that.errorMessages.popupBlocked\n            });\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        OpenCommand: OpenCommand,\n        PageChangeCommand: PageChangeCommand,\n        DownloadCommand: DownloadCommand,\n        EnableSelectionCommand: EnableSelectionCommand,\n        EnablePanCommand: EnablePanCommand,\n        ExportCommand: ExportCommand,\n        PrintCommand: PrintCommand,\n        OpenSearchCommand: OpenSearchCommand,\n        ZoomCommand: ZoomCommand\n    });\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        extend = $.extend,\n        Class = kendo.Class,\n        Draggable = kendo.ui.Draggable,\n        outerWidth = kendo._outerWidth,\n        EXTENSIONS = {\n            svg: \".svg\",\n            png: \".png\"\n        },\n        keys = kendo.keys;\n\n    var ErrorDialog = Class.extend({\n        init: function(options) {\n            this.options = extend(options, {\n                actions: [{\n                    text: options.messages.dialogs.okText\n                }]\n            });\n            this._dialog = $(\"<div />\")\n                    .kendoDialog(this.options)\n                    .getKendoDialog();\n        },\n        open: function() {\n            this._dialog.center().open();\n        }\n    });\n\n    var ExportAsDialog = Class.extend({\n        init: function(options) {\n            this.options = extend(options, this.options, {\n                fileFormats: [{\n                    description: options.messages.dialogs.exportAsDialog.png,\n                    extension: EXTENSIONS.png\n                }, {\n                    description: options.messages.dialogs.exportAsDialog.svg,\n                    extension: EXTENSIONS.svg\n                }],\n                title: options.messages.dialogs.exportAsDialog.title,\n                open: function() {\n                    this.center();\n                }\n            });\n            this._initializeDialog();\n            return this;\n        },\n        options: {\n            extension: EXTENSIONS.png,\n            autoFocus: true,\n            resizable: false,\n            modal: {\n                preventScroll: true\n            },\n            width: \"90%\",\n            maxWidth: 520,\n            template: ({ messages, total }) =>\n                `<div class='k-edit-label'><label>${encode(messages.exportAsDialog.labels.fileName)}:</label></div>` +\n                \"<div class='k-edit-field'>\" +\n                    \"<span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input class='k-input-inner' data-bind='value: name' /></span>\" +\n                \"</div>\" +\n                \"<div>\" +\n                    `<div class='k-edit-label'><label>${encode(messages.exportAsDialog.labels.saveAsType)}:</label></div>` +\n                    \"<div class='k-edit-field'>\" +\n                    \"<select data-role='dropdownlist' class='k-file-format' \" +\n                        \"data-text-field='description' \" +\n                        \"data-value-field='extension' \" +\n                        \"data-bind='value: extension, source: fileFormats'></select>\" +\n                    \"</div>\" +\n                \"</div>\" +\n                `<div class='k-edit-label'><label>${encode(messages.exportAsDialog.labels.page)}:</label></div>` +\n                \"<div class='k-edit-field'>\" +\n                    `<input data-role='numerictextbox' data-format='n0' data-min='1' data-max='${encode(total)}' data-bind='value: page' />` +\n                \"</div>\" +\n                \"<div class='k-actions'>\" +\n                    `<button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary' data-bind='click: apply'><span class='k-button-text'>${encode(messages.save)}</span></button>` +\n                    `<button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base' data-bind='click: close'><span class='k-button-text'>${encode(messages.cancel)}</span></button>` +\n                \"</div>\"\n        },\n        _updateModel: function(options) {\n            if (options.pagesCount) {\n                this.viewModel.set(\"pagesCount\", options.pagesCount);\n            }\n            if (options.page) {\n                this.viewModel.set(\"page\", options.page);\n            }\n        },\n        _initializeDialog: function() {\n            var that = this;\n            var options = that.options;\n            var dialogMessages = options.messages.dialogs;\n            var dialog = $(\"<div class='k-pdf-viewer-window k-action-window k-popup-edit-form' />\")\n                    .append(kendo.template(options.template)({\n                        total: options.pagesCount,\n                        messages: dialogMessages\n                    }))\n                    .kendoWindow(options)\n                    .getKendoWindow();\n\n            that.viewModel = kendo.observable({\n                title: dialogMessages.exportAsDialog.title,\n                name: dialogMessages.exportAsDialog.defaultFileName,\n                extension: options.extension,\n                fileFormats: options.fileFormats,\n                pagesCount: options.pagesCount,\n                page: 1,\n                apply: that.apply.bind(this),\n                close: function() {\n                    dialog.close();\n                }\n            });\n\n            that._dialog = dialog;\n\n            kendo.bind(dialog.element, that.viewModel);\n            return dialog;\n        },\n        open: function() {\n            this._dialog.center().open();\n        },\n        apply: function() {\n            this._dialog.close();\n            this.options.apply({\n                fileName: this.viewModel.name + this.viewModel.extension,\n                extension: this.viewModel.extension,\n                page: this.viewModel.page\n            });\n        }\n    });\n\n    var SearchDialog = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, options, that.options);\n        },\n        options: {\n            resizable: false,\n            template: ({ messages }) => '<div class=\"k-search-panel k-pos-sticky k-top-center\">' +\n                          `<button aria-label='${encode(messages.dragHandle)}' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-search-dialog-draghandle'>${kendo.ui.icon({ icon: \"handle-drag\", iconClass: \"k-button-icon\" })}</button>` +\n                          \"<span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'>\" +\n                              `<input class='k-search-dialog-input k-input-inner' data-bind='value: boundValue, events: { keyup: onKeyup, input: onInput }' aria-label='${encode( messages.inputLabel)}' title='${encode(messages.inputLabel)}' />` +\n                              `<span class='k-input-suffix'><button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-match-case-button k-match-case-button' data-bind='css: {k-selected: matchCase}, click: matchCaseClick' aria-label='${encode(messages.matchCase)}' title='${encode(messages.matchCase)}'>${kendo.ui.icon({ icon: \"convert-lowercase\", iconClass: \"k-button-icon\" })}</button></span>` +\n                          \"</span>\" +\n                          `<span class='k-search-matches'><span data-bind='text: matchIndex'></span> ${encode(messages.of)} <span data-bind='text: matches'></span></span>` +\n                          `<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: prev' aria-label='${encode(messages.previous)}' title='${encode(messages.previous)}'>${kendo.ui.icon({ icon: \"arrow-up\", iconClass: \"k-button-icon\" })}</button>` +\n                          `<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: next' aria-label='${encode(messages.next)}' title='${encode(messages.next)}'>${kendo.ui.icon({ icon: \"arrow-down\", iconClass: \"k-button-icon\" })}</button>` +\n                          `<button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: close' aria-label='${encode(messages.close)}' title='${encode(messages.close)}'>${kendo.ui.icon({ icon: \"x\", iconClass: \"k-button-icon\" })}</button>` +\n                      \"</div>\"\n        },\n        open: function() {\n            var that = this;\n\n            if (!that.dialog) {\n                that._initializeDialog();\n            }\n\n            that.options.open();\n            that._showSearchDialog();\n        },\n        close: function() {\n            var that = this;\n            that.options.close();\n            that._hideSearchDialog();\n        },\n        _showSearchDialog: function() {\n            var that = this;\n\n            that.dialog.css(\"left\",`${(that.options.pageContainer.innerWidth() / 2) - (outerWidth(that.dialog, true) / 2)}px`);\n\n            that.dialog.kendoStop().kendoAnimate({\n                effects: { zoom: { direction: \"in\" }, fade: { direction: \"in\" } },\n                duration: 350,\n                complete: function(ev) {\n                    that.dialog.find(\".k-search-dialog-input\").trigger(\"focus\");\n                }\n            });\n        },\n        _hideSearchDialog: function() {\n            var that = this;\n\n            that.dialog.kendoStop().kendoAnimate({\n                effects: { zoom: { direction: \"out\", properties: { scale: 0.7 } }, fade: { direction: \"out\" } },\n                duration: 350,\n                hide: true\n            });\n        },\n        _initializeDialog: function() {\n            var that = this;\n            var template = kendo.template(that.options.template);\n            var dialogElm = $(template({\n                messages: that.options.messages\n            }));\n\n            that.options.pageContainer.prepend(dialogElm);\n            that.dialog = dialogElm;\n\n            that._draggable = new Draggable(dialogElm, {\n                filter: \".k-search-dialog-draghandle\",\n                axis: \"x\",\n                dragstart: function(e) {\n                    var wnd = that.dialog;\n                    var containment = that.options.pageContainer;\n\n                    wnd.startPosition = {\n                        left: e.x.client - kendo.getOffset(wnd, \"position\").left,\n                    };\n\n                    if (!containment) {\n                        return null;\n                    }\n\n                    containment._innerWidth = containment.innerWidth();\n\n                    if (parseInt(containment._innerWidth, 10) > containment[0].clientWidth) {\n                        containment._innerWidth -= kendo.support.scrollbar();\n                    }\n\n                    wnd.maxLeft = containment._innerWidth - outerWidth(wnd, true);\n                },\n                drag: function(e) {\n                    var wnd = that.dialog;\n                    var position = {};\n                    var left;\n\n                    left = e.x.client - wnd.startPosition.left;\n\n                    if (left && isNaN(left) && left.toString().indexOf(\"px\") < 0) {\n                        position.left = left;\n                    } else {\n                        position.left = Math.max(\n                            Math.min(parseInt(left, 10), parseInt(wnd.maxLeft, 10)),\n                            0\n                        );\n                    }\n\n                    wnd.css(position);\n                },\n            });\n\n            that._draggable.userEvents.stopPropagation = false;\n\n            that.searchModel = kendo.observable({\n                boundValue: \"\",\n                searchText: \"\",\n                matchCase: false,\n                matchIndex: 0,\n                matches: 0,\n                matchCaseClick: function() {\n                    this.set(\"matchCase\", !this.matchCase);\n                },\n                next: that.options.next,\n                prev: that.options.prev,\n                close: function() {\n                    this.set(\"boundValue\", \"\");\n                    that.close();\n                },\n                onKeyup: function(ev) {\n                    var key = ev.keyCode;\n                    var navigationFn = ev.shiftKey ? this.prev : this.next;\n\n                    if (key === keys.ENTER) {\n                        navigationFn();\n                        ev.preventDefault();\n                    } else if (key == keys.ESC) {\n                        this.close();\n                    }\n                },\n                onInput: function(ev) {\n                    this.set(\"searchText\", ev.target.value);\n                }\n            });\n\n            kendo.bind(dialogElm, that.searchModel);\n        }\n    });\n\n    extend(kendo.pdfviewer, {\n        dialogs: {\n            ErrorDialog: ErrorDialog,\n            ExportAsDialog: ExportAsDialog,\n            SearchDialog: SearchDialog\n        }\n    });\n})(window.kendo.jQuery);\n\nconst __meta__ = {\n    id: \"pdfviewer\",\n    name: \"PDFViewer\",\n    category: \"web\",\n    description: \"PDFViewer to display pdfs in the browser\",\n    depends: [\"core\", \"window\", \"dialog\", \"toolbar\", \"draganddrop\", \"upload\", \"combobox\", \"drawing\", \"binder\", \"dropdownlist\", \"numerictextbox\", \"textbox\", \"pager\", \"pdfviewer-common.cmn.chunk\"]\n};\n\n(function($, undefined$1) {\n    var NS = \".kendoPDFViewer\",\n        kendo = window.kendo,\n        ui = kendo.ui,\n        extend = $.extend,\n        drawing = kendo.drawing,\n        keys = $.extend({ PLUS: 187, MINUS: 189, ZERO: 48, NUMPAD_ZERO: 96 }, kendo.keys),\n        Page,\n        BlankPage = kendo.pdfviewer.BlankPage,\n        Widget = ui.Widget,\n        progress = kendo.ui.progress,\n        SCROLL = \"scroll\",\n        RENDER = \"render\",\n        OPEN = \"open\",\n        ERROR = \"error\",\n        KEYDOWN = \"keydown\" + NS,\n        MOUSEWHEEL = \"DOMMouseScroll\" + NS + \" mousewheel\" + NS,\n        UPDATE = \"update\",\n        PAGE_CHANGE = \"pagechange\",\n        ZOOMSTART = \"zoomStart\",\n        ZOOMEND = \"zoomEnd\",\n        ZOOMCOMMAND = \"ZoomCommand\",\n        WHITECOLOR = \"#ffffff\",\n        TABINDEX = \"tabindex\",\n        CLICK = \"click\",\n        CHANGE = \"change\",\n        TOGGLE = \"toggle\",\n        DISABLED = 'k-disabled',\n        PROCESSORS = {\n            pdfjs: \"pdfjs\",\n            dpl: \"dpl\"\n        },\n        styles = {\n            viewer: \"k-pdf-viewer\",\n            scroller: \"k-canvas k-pdf-viewer-canvas k-pos-relative k-overflow-auto\",\n            enableTextSelection: \"k-enable-text-select\",\n            enablePanning: \"k-enable-panning\",\n            highlightClass: \"k-search-highlight\",\n            highlightMarkClass: \"k-search-highlight-mark\",\n            charClass: \"k-text-char\"\n        },\n        PREDEFINED_ZOOM_VALUES = {\n            auto: \"auto\",\n            actual: \"ActualWidth\",\n            fitToWidth: \"FitToWidth\",\n            fitToPage: \"FitToPage\"\n        };\n\n    var PDFViewer = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, kendo.deepExtend({}, this.options, options));\n\n            that._processMessages();\n\n            that._wrapper();\n\n            if (that.options.toolbar) {\n                that._renderToolbar();\n            }\n\n            that._initProcessor(options || {});\n            that._renderPageContainer();\n\n            if (that._isDPLProcessor()) {\n                that._loadDPLDocument();\n            } else {\n                that._loadPdfJSDocument();\n            }\n\n            kendo.notify(that, kendo.ui);\n\n            if (that._showWatermarkOverlay) {\n                that._showWatermarkOverlay(that.wrapper[0]);\n            }\n        },\n\n        events: [\n            RENDER,\n            OPEN,\n            ERROR,\n            ZOOMSTART,\n            ZOOMEND\n        ],\n\n        options: {\n            name: \"PDFViewer\",\n            view: {\n                type: \"canvas\"\n            },\n            pdfjsProcessing: {\n                file: null,\n                loadOnDemand: true\n            },\n            dplProcessing: {\n                read: {\n                    url: null,\n                    type: \"GET\",\n                    dataType: \"json\",\n                    pageField: \"pageNumber\"\n                },\n                upload: {\n                    url: null,\n                    saveField: \"file\"\n                },\n                download: {\n                    url: null\n                },\n                loadOnDemand: false\n            },\n            toolbar: {\n                items: []\n            },\n            width: 1000,\n            height: 1200,\n            page: 1,\n            defaultPageSize: {\n                width: 794,\n                height: 1123\n            },\n            scale: null,\n            zoomMin: 0.5,\n            zoomMax: 4,\n            zoomRate: 0.25,\n            messages: {\n                defaultFileName: \"Document\",\n                toolbar: {\n                    zoom: {\n                        zoomLevel: \"zoom level\",\n                        zoomOut: \"Zoom Out\",\n                        zoomIn: \"Zoom In\",\n                        actualWidth: \"Actual Width\",\n                        autoWidth: \"Automatic Width\",\n                        fitToWidth: \"Fit to Width\",\n                        fitToPage: \"Fit to Page\"\n                    },\n                    open: \"Open\",\n                    exportAs: \"Export\",\n                    download: \"Download\",\n                    print: \"Print\",\n                    toggleSelection: \"Enable Selection\",\n                    togglePan: \"Enable Panning\",\n                    search: \"Search\"\n                },\n                errorMessages: {\n                    notSupported: \"Only pdf files allowed.\",\n                    parseError: \"PDF file fails to process.\",\n                    notFound: \"File is not found.\",\n                    popupBlocked: \"Popup is blocked.\"\n                },\n                dialogs: {\n                    exportAsDialog: {\n                        title: \"Export...\",\n                        defaultFileName: \"Document\",\n                        pdf: \"Portable Document Format (.pdf)\",\n                        png: \"Portable Network Graphics (.png)\",\n                        svg: \"Scalable Vector Graphics (.svg)\",\n                        labels: {\n                            fileName: \"File name\",\n                            saveAsType: \"Save as\",\n                            page: \"Page\"\n                        }\n                    },\n                    okText: \"OK\",\n                    save: \"Save\",\n                    cancel: \"Cancel\",\n                    search: {\n                        inputLabel: \"Search Text\",\n                        matchCase: \"Match Case\",\n                        next: \"Next Match\",\n                        previous: \"Previous Match\",\n                        close: \"Close\",\n                        of: \"of\",\n                        dragHandle: \"Drag search\"\n                    }\n                }\n            }\n        },\n\n        defaultTools: {\n            pager: {\n                type: \"component\",\n                name: \"pager\",\n                overflow: \"never\",\n                component: \"Pager\",\n                element: '<div></div>',\n                componentOptions: {\n                    navigatable: true,\n                    _isToolbarItem: true,\n                }\n            },\n            spacer: { type: \"spacer\" },\n            zoomInOut: {\n                type: \"buttonGroup\",\n                fillMode: \"flat\",\n                buttons: [\n                    { type: \"button\", icon: \"zoom-out\", name: \"zoomOut\", command: \"ZoomCommand\", showText: \"overflow\", options: \"{ \\\"zoomOut\\\": true, \\\"updateComboBox\\\": true }\", fillMode: \"flat\" },\n                    { type: \"button\", icon: \"zoom-in\", name: \"zoomIn\", command: \"ZoomCommand\", showText: \"overflow\", options: \"{ \\\"zoomIn\\\": true, \\\"updateComboBox\\\": true }\", fillMode: \"flat\" },\n                ]\n            },\n            zoom: {\n                type: \"component\",\n                name: \"zoom\",\n                command: \"ZoomCommand\",\n                overflow: \"never\",\n                component: \"ComboBox\",\n                data: [50, 100, 150, 200, 300, 400],\n                componentOptions: {\n                    enable: false,\n                    dataTextField: \"text\",\n                    dataValueField: \"percent\",\n                    valuePrimitive: true,\n                    clearOnEscape: false,\n                    commandOn: \"change\",\n                    fillMode: 'flat',\n                }\n            },\n            toggleSelection: {\n                type: \"buttonGroup\",\n                fillMode: \"flat\",\n                buttons: [\n                    {\n                        togglable: true,\n                        command: \"EnableSelectionCommand\",\n                        icon: \"pointer\",\n                        showText: \"overflow\",\n                        name: \"toggleSelection\",\n                        group: \"toggle-pan\",\n                        fillMode: \"flat\"\n                    }, {\n                        togglable: true,\n                        command: \"EnablePanCommand\",\n                        icon: \"hand\",\n                        showText: \"overflow\",\n                        name: \"togglePan\",\n                        group: \"toggle-pan\",\n                        selected: true,\n                        fillMode: \"flat\"\n                    }\n                ]\n            },\n            spacer2: { type: \"spacer\" },\n            search: {\n                type: \"button\",\n                command: \"OpenSearchCommand\",\n                icon: \"search\",\n                name: \"search\",\n                showText: \"overflow\",\n                enable: false,\n                fillMode: \"flat\"\n            },\n            open: {\n                type: \"button\",\n                showText: \"overflow\",\n                name: \"open\",\n                icon: \"folder-open\",\n                command: \"OpenCommand\",\n                fillMode: \"flat\"\n            },\n            download: {\n                type: \"button\",\n                showText: \"overflow\",\n                name: \"download\",\n                icon: \"download\",\n                command: \"DownloadCommand\",\n                enable: false,\n                fillMode: \"flat\"\n            },\n            print: {\n                type: \"button\",\n                showText: \"overflow\",\n                name: \"print\",\n                icon: \"print\",\n                command: \"PrintCommand\",\n                enable: false,\n                fillMode: \"flat\"\n            }\n        },\n\n        exportAsTool: {\n            exportAs: { type: \"button\", showText: \"overflow\", name: \"exportAs\", icon: \"image-export\", command: \"ExportCommand\", fillMode: \"flat\" }\n        },\n\n\n        _processMessages: function() {\n            var messages = this.options.messages.toolbar,\n                zoom = messages.zoom;\n\n            if ($.isPlainObject(zoom)) {\n                this.options.messages.toolbar = $.extend({}, this.options.messages.toolbar, zoom);\n                this.options.messages.toolbar.zoom = zoom.zoomLevel || this.options.messages.toolbar.zoom;\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                options = that.options;\n\n            that.wrapper = that.element;\n\n            that.wrapper\n                    .width(options.width)\n                    .height(options.height)\n                    .addClass(styles.viewer)\n                    .on(KEYDOWN, that._keydown.bind(that));\n\n            that._allowResize = that.options.scale === null;\n            that._autoZoomScale = DEFAULT_ZOOM_LEVEL;\n            that.zoomScale = that.options.scale || that._autoZoomScale;\n\n            that._resizeHandler = kendo.onResize(function() {\n                that.resize();\n            });\n\n            that._pageNum = that.options.page;\n        },\n\n        _keydown: function(e) {\n            var plusShortcuts = [keys.PLUS, keys.NUMPAD_PLUS],\n                minusShortcuts = [keys.MINUS, keys.NUMPAD_MINUS],\n                zeroShortcuts = [keys.ZERO, keys.NUMPAD_ZERO],\n                shouldExecute = false,\n                args = {\n                    command: ZOOMCOMMAND,\n                    options: { updateComboBox: true }\n                };\n\n            if (!e.ctrlKey || this._blankPage || this.processingLib === PROCESSORS.dpl) {\n                return;\n            }\n\n            if (plusShortcuts.includes(e.keyCode)) {\n                args.options.zoomIn = true;\n                shouldExecute = true;\n            } else if (minusShortcuts.includes(e.keyCode)) {\n                args.options.zoomOut = true;\n                shouldExecute = true;\n            } else if (zeroShortcuts.includes(e.keyCode)) {\n                args.options.value = DEFAULT_ZOOM_LEVEL;\n                shouldExecute = true;\n            }\n\n            if (shouldExecute) {\n                this.execute(args);\n                e.preventDefault();\n            }\n        },\n\n        _handlePageChangeEvent: function(event) {\n            const that = this;\n\n            if (!that._pageChangeFromScroll) {\n                this.activatePage(event.index, false);\n                that._showPagerInputLabels();\n            }\n\n            delete that._pageChangeFromScroll;\n        },\n\n        _showPagerInputLabels: function() {\n            const that = this;\n            const inputElements = that.pager.element.find(\".k-pager-input\").children();\n            if (inputElements) {\n                const labels = inputElements.eq(0).add(inputElements.eq(2));\n\n                if (!$(labels).is(\":visible\")) {\n                    labels.show();\n                }\n            }\n        },\n\n        _resizePager: function() {\n            const that = this;\n\n            if (!that.pager || !that.pager.options.responsive) {\n                return;\n            }\n\n            const pagerWidth = kendo._outerWidth(that.pager.element);\n            const visibleToolbarItems = Array.from(that.toolbar.element.children(':not(.k-hidden):not(:has(.k-pager))'));\n            const containerWidth = kendo._outerWidth(that.element);\n\n            let visibleToolsWidth = 0;\n\n            const pattern = /(em|ex|%|px|cm|mm|in|pt|pc|ch|rem|vh|vw|vmin|vmax)$/;\n            const gap = Number(that.toolbar.element.css(\"gap\").replace(pattern,''));\n\n            if (visibleToolbarItems.length > 0) {\n                let temp = 0;\n                for (let i = 0; i < visibleToolbarItems.length; i++) {\n                    temp += kendo._outerWidth(visibleToolbarItems[i]) + gap;\n                }\n                if (temp) {\n                    visibleToolsWidth = temp;\n                }\n            }\n\n            const elementsToShrink = that.pager.element.find(\".k-pager-nav\");\n\n            if ((pagerWidth + visibleToolsWidth + gap) > containerWidth) {\n\n                for (var i = elementsToShrink.length - 1; i >= 0; i--) {\n                    const element = elementsToShrink.eq(i);\n                        element.addClass(\"k-hidden\");\n                }\n            }\n\n            if ((pagerWidth + visibleToolsWidth + gap) < containerWidth) {\n                const hidden = that.pager.element.find(\".k-hidden\");\n\n                for (var i = 0; i < hidden.length; i++) {\n                    const hiddenElement = hidden.eq(i);\n\n                    hiddenElement.removeClass('k-hidden');\n                }\n            }\n\n            if (that.pager.options.input) {\n                that._showPagerInputLabels();\n            }\n        },\n\n        _initProcessor: function(options) {\n            var that = this,\n                processingOptions;\n\n            processingOptions = options.dplProcessing ? that.options.dplProcessing : that.options.pdfjsProcessing;\n            that.processingLib = options.dplProcessing ? PROCESSORS.dpl : PROCESSORS.pdfjs;\n\n            if (that._isDPLProcessor()) {\n                that.processor = new kendo.pdfviewer[that.processingLib].processor(processingOptions, that);\n                Page = kendo.pdfviewer[that.processingLib].Page;\n            } else {\n                isLoaded();\n            }\n        },\n\n        _isDPLProcessor: function() {\n            return this.processingLib === PROCESSORS.dpl;\n        },\n\n        _hasPagerTool: function(tools) {\n            let hasPager = false;\n            let index;\n\n            for (let i = 0; i < tools.length; i++) {\n                const tool = tools[i];\n                if (typeof tool === 'string') {\n                    hasPager = tool.toLowerCase() === 'pager';\n                    index = i;\n                } else {\n                    if (tool.type) {\n                        hasPager = tool.type.toLowerCase() === 'pager';\n                        index = i;\n                    } else if (tool.name) {\n                        hasPager = tool.name.toLowerCase() === 'pager';\n                        if (hasPager) {\n                            delete tool.name;\n                        }\n                        index = i;\n                    }\n                }\n\n                if (hasPager) {\n                    break;\n                }\n            }\n\n            return {\n                hasPager,\n                index\n            };\n        },\n\n        _renderToolbar: function() {\n            var that = this,\n                options = that.options,\n                toolbarOptions = extend({}, options.toolbar),\n                tools = toolbarOptions.items && toolbarOptions.items.length ? toolbarOptions.items : Object.keys(that.defaultTools);\n\n\n            const { hasPager, index } = that._hasPagerTool(tools);\n\n\n            tools = that._processTools(tools);\n\n            if (hasPager) {\n                let pagerMessages = that.options.messages.toolbar.pager;\n\n                if (pagerMessages) {\n                    if (pagerMessages.of) {\n                        pagerMessages.of = `${pagerMessages.of} {0}`;\n                        if (pagerMessages.pages) {\n                            pagerMessages.of = pagerMessages.of + ' ' + pagerMessages.pages;\n                            delete pagerMessages.pages;\n                        }\n                    }\n                }\n                that.defaultTools.pager.componentOptions.messages = pagerMessages;\n                options.messages.toolbar.pager = \"Pager\";\n\n                const currentPagerOptions = that.defaultTools.pager.componentOptions;\n                if (typeof tools[index] !== 'string') {\n                    that.defaultTools.pager.componentOptions = $.extend(tools[index], currentPagerOptions);\n\n                    tools[index] = that.defaultTools.pager;\n                }\n            }\n\n            toolbarOptions = {\n                defaultTools: $.extend({}, that.defaultTools, that.exportAsTool),\n                parentMessages: options.messages.toolbar,\n                tools: tools,\n                resizable: true,\n                fillMode: 'flat'\n            };\n\n            var toolbarElement = $(\"<div />\");\n\n            toolbarElement.appendTo(that.element);\n            that.toolbar = new kendo.ui.ToolBar(toolbarElement, toolbarOptions);\n            that.options.toolbar = that.toolbar.options;\n\n            that.toolbar.bind(TOGGLE, that._toolbarClick.bind(that));\n            that.toolbar.bind(CLICK, that._toolbarClick.bind(that));\n            that.toolbar.bind(CHANGE, that._toolbarClick.bind(that));\n\n            if (hasPager) {\n                that.pager = that.toolbar.element.find('.k-pager');\n                if (that.pager.length > 0) {\n                    that.pager = that.pager.data('kendoPager');\n                }\n                that.pager.bind(CHANGE, that._handlePageChangeEvent.bind(that));\n            }\n\n            that.bind({\n                update: that._updateToolbar.bind(that)\n            });\n\n            return that.toolbar;\n        },\n\n        _processTools: function(tools) {\n            var that = this,\n                messages = that.options.messages.toolbar;\n\n            tools = tools.flatMap(t => {\n                if (t === \"zoom\") {\n                    t = that.defaultTools.zoom;\n                }\n\n                if (t.name === \"zoom\") {\n                    t = $.extend({}, that.defaultTools.zoom, t);\n\n                    var zoomLevels = [{\n                        percent: PREDEFINED_ZOOM_VALUES.auto,\n                        text: messages.autoWidth\n                    }, {\n                        percent: PREDEFINED_ZOOM_VALUES.actual,\n                        text: messages.actualWidth\n                    }, {\n                        percent: PREDEFINED_ZOOM_VALUES.fitToWidth,\n                        text: messages.fitToWidth\n                    }, {\n                        percent: PREDEFINED_ZOOM_VALUES.fitToPage,\n                        text: messages.fitToPage\n                    }];\n\n                    // eslint-disable-next-line\n                    var comboOptions = t.data.map(i => { return { percent: i, text: i + \"%\" } });\n                    var value = that.options.scale ? that.options.scale * 100 + \"%\" : \"auto\";\n\n                    zoomLevels = zoomLevels.concat(comboOptions);\n                    t.componentOptions.dataSource = zoomLevels;\n                    t.componentOptions.value = value;\n                }\n\n                return t;\n            });\n\n            return tools;\n        },\n\n        _updateToolbar: function(e) {\n            var pageOptions = {\n                    page: e.page || 1,\n                    total: e.total || 1\n                },\n                toolbar = this.toolbar,\n                toolbarEl = toolbar.element,\n                zoomCombo = toolbarEl.find(\"[data-command=ZoomCommand][data-role=combobox]\").data(\"kendoComboBox\"),\n                toFocus = toolbarEl.find(\".k-focus\");\n\n            if (toFocus.length === 0) {\n                toFocus = toolbarEl.find(\"[tabindex=0]\").first();\n\n                if (toFocus.length === 0) {\n                    toFocus = toolbar._getAllItems().first();\n                }\n            }\n\n            if (zoomCombo) {\n                zoomCombo.enable(!e.isBlank);\n                if (e.action === \"zoom\") {\n                    this._updateZoomComboBox(e.zoom);\n                }\n            }\n\n            if (((e.action === \"pagechange\" && e.updatePager !== false) || e.isBlank) && this.pager) {\n                if (e.updatePager) {\n                    pageOptions.updatePager = true;\n                }\n\n                if (e.pageChangeFromScroll) {\n                    pageOptions.pageChangeFromScroll = true;\n                }\n\n                this._updatePager(pageOptions);\n            }\n\n            this._updateOnBlank(e.isBlank);\n\n            toolbar._resetTabIndex(toFocus);\n        },\n\n        _updateOnBlank: function(isBlank) {\n            var toolbar = this.toolbar,\n                toolbarEl = toolbar.element;\n\n            toolbar.enable(toolbarEl.find(\"[data-command=EnableSelectionCommand]\").parent(), !isBlank);\n            toolbar.enable(toolbarEl.find(\"[data-command=ZoomCommand][role=button]\").parent(), !isBlank);\n\n            toolbar.enable(toolbarEl.find(\"[data-command='OpenSearchCommand']\"), !isBlank);\n            toolbar.enable(toolbarEl.find(\"[data-command='DownloadCommand']\"), !isBlank);\n            toolbar.enable(toolbarEl.find(\"[data-command='PrintCommand']\"), !isBlank);\n        },\n\n        _updatePager: function(options) {\n            const that = this;\n            if (options.updatePager) {\n                const isDPLProcessed = that.processingLib === 'dpl';\n\n                const data = isDPLProcessed ? (that.document && that.document.pages ? that.document.pages : []) : that.pages ?? [];\n\n                const pagerDataSource = new kendo.data.DataSource({\n                data: data ?? [],\n                pageSize: 1\n            });\n                that.pager.setDataSource(pagerDataSource);\n                that._resizePager();\n            } else {\n                const current = that.pager.page();\n\n                if (current !== options.page) {\n                    if (options.pageChangeFromScroll) {\n                        that._pageChangeFromScroll = true;\n                    }\n                    that.pager.page(options.page);\n                }\n            }\n            that._showPagerInputLabels();\n            that._togglePagerDisabledClass();\n        },\n\n        _togglePagerDisabledClass: function() {\n            const that = this;\n            const pager = that.pager;\n\n            if (pager.totalPages() <= 1 ) {\n                pager.element.addClass(DISABLED);\n            } else if (pager.element.hasClass(DISABLED)) {\n                pager.element.removeClass(DISABLED);\n            }\n        },\n\n        _updateZoomComboBox: function(value) {\n            var isPredefined = value === PREDEFINED_ZOOM_VALUES.auto ||\n                value === PREDEFINED_ZOOM_VALUES.actual ||\n                value === PREDEFINED_ZOOM_VALUES.fitToPage ||\n                value === PREDEFINED_ZOOM_VALUES.fitToWidth,\n                zoomCombo = this.toolbar.element.find(\"[data-command=ZoomCommand][data-role=combobox]\").data(\"kendoComboBox\");\n\n            if (!isPredefined) {\n                value = Math.round(value * 100) + '%';\n            }\n\n            if (zoomCombo) {\n                zoomCombo.value(value);\n            }\n        },\n\n        _toolbarClick: function(ev) {\n            let target = $(ev.target),\n                command = target.data(\"command\"),\n                options = target.data(\"options\");\n\n            if (!command && !options) {\n                target = $(ev.currentTarget);\n                command = target.data(\"command\");\n                options = target.data(\"options\");\n            }\n\n            options = extend({}, { value: target.val() }, options);\n\n            if (!command) {\n                return;\n            }\n\n            this.execute({\n                command: command,\n                options: options\n            });\n        },\n\n        _initErrorDialog: function(options) {\n            var that = this;\n\n            if (!that._errorDialog) {\n                options = extend(options, {\n                    messages: that.options.messages\n                });\n                var dialogInstance = new kendo.pdfviewer.dialogs.ErrorDialog(options);\n                that._errorDialog = dialogInstance._dialog;\n            }\n            return that._errorDialog;\n        },\n\n        _renderPageContainer: function() {\n            var that = this;\n\n            if (!that.pageContainer) {\n                that.pageContainerWrapper = $(\"<div />\");\n                that.pageContainerWrapper.addClass(styles.scroller);\n\n                that.pageContainer = $(`<div class=\"k-pdf-viewer-pages\" />`);\n                that.pageContainer[0].style.setProperty(\"--scale-factor\", that.zoomScale);\n                that.pageContainer.attr(TABINDEX, 0);\n\n                that.pageContainerWrapper.append(that.pageContainer);\n                that.wrapper.append(that.pageContainerWrapper);\n            }\n        },\n\n        _setPageContainerScaleFactor(scale) {\n            var that = this;\n\n            if (that.pageContainer) {\n                that.pageContainer[0].style.setProperty(\"--scale-factor\", scale);\n            }\n        },\n\n        _triggerError: function(options) {\n            var dialog = this._initErrorDialog();\n            extend(options, {\n                dialog: dialog\n            });\n            if (this.pageContainer) {\n                progress(this.pageContainer, false);\n            }\n\n            if (this.trigger(ERROR, options))\n            {\n                return;\n            }\n\n            dialog.open().content(options.message);\n        },\n\n        _renderPages: function() {\n            var that = this,\n                document = that.document,\n                pagesData;\n\n            that.pages = [];\n\n            if (!document || !document.total) {\n                that._renderBlankPage();\n                return;\n            }\n\n            pagesData = document.pages;\n\n            for (var i = 1; i <= document.total; i++) {\n                var viewerPage,\n                    pageData = {\n                        processor: that.processor,\n                        number: i\n                    };\n\n                if (pagesData && pagesData.length) {\n                    pageData = extend(pageData, pagesData[i - 1]);\n                }\n\n                viewerPage = new Page(pageData, that);\n                that.pages.push(viewerPage);\n                that.pageContainer.append(viewerPage.element);\n            }\n\n            that._attachContainerEvents();\n            that._getVisiblePagesCount();\n            that._updatePager({ updatePager: true });\n        },\n\n        _renderBlankPage: function() {\n            this._blankPage = new BlankPage(this.options.defaultPageSize, this);\n\n            this.pageContainer.append(this._blankPage.element);\n\n            this._blankPage._initUpload();\n            this.trigger(UPDATE, { isBlank: true });\n        },\n\n        _resize: function() {\n            var that = this,\n                containerWidth,\n                ratio;\n\n            if (!that._allowResize) {\n                return;\n            }\n\n            if (!that.pages || !that.pages.length) {\n                if (that._blankPage) {\n                    ratio = containerWidth / that._blankPage.element.width();\n                    that._blankPage.resize(ratio);\n                }\n                return;\n            }\n\n            if (that.toolbar) {\n                that.toolbar.resize(true);\n            }\n\n\n            if (that._resizeHandler) {\n                clearTimeout(that._resizeHandler);\n            }\n            that._resizeHandler = setTimeout(that._resizePages.bind(that), 100);\n        },\n\n        _resizePages: function() {\n            const that = this,\n                containerWidth = that.pageContainer[0].clientWidth;\n            let ratio = 0;\n\n            that.pages.forEach(function(page) {\n                const pageWidth = page.element ? page.element.width() : $(page._pageInfo.emptyPage.pageElement).width();\n                const currentRatio = containerWidth / pageWidth;\n\n                if (currentRatio > ratio) {\n                    ratio = currentRatio;\n                }\n            });\n\n\n            if (that._autoFit) {\n                that.zoom(that._autoFit, true);\n                return;\n            }\n\n            ratio = Math.min(Math.max(ratio, that.options.zoomMin), DEFAULT_ZOOM_LEVEL);\n            if (ratio != that.zoomScale) {\n                that.zoom(ratio, true);\n                that.zoomScale = ratio;\n                that._allowResize = true;\n            }\n\n            if (that.pager && that.pager.element) {\n                that._resizePager();\n            }\n        },\n\n        _attachContainerEvents: function() {\n            var that = this;\n\n            that._wheel = kendo.throttle(\n                that._wheel.bind(that),\n                300\n            );\n\n            if (that.processingLib !== PROCESSORS.dpl) {\n                that.pageContainer.on(MOUSEWHEEL, function(e) {\n                    if (!e.ctrlKey) {\n                        return;\n                    }\n\n                    if (document.activeElement !== that.pageContainer[0]) {\n                        that.pageContainer.trigger(\"focus\");\n                    }\n\n                    that._wheel(e);\n                    e.preventDefault();\n                });\n            }\n\n            that.pageContainer.addClass(styles.enablePanning);\n            if (that._isDPLProcessor()) {\n                that.pageContainerWrapper.bind(SCROLL, that._scroll.bind(that));\n            } else {\n                that.pageContainerWrapper.bind(SCROLL, that._onDemandScroll.bind(that));\n            }\n        },\n\n        _scroll: function(e) {\n            var that = this,\n                containerHeight = that.pageContainerWrapper.height(),\n                total = that.pages.length,\n                pageNum = that._pageNum,\n                pageIndex = pageNum - 1,\n                pageToLoadNum = pageNum,\n                pageToLoad,\n                currentPage$1;\n\n                if (that._preventScroll || !total) {\n                    that._preventScroll = false;\n                    return;\n                }\n\n                that._scrollingStarted = true;\n                const nextPageIndex = currentPage(that.element[0]);\n                currentPage$1 = that.pages[pageIndex];\n                pageToLoadNum = pageNum + nextPageIndex - pageIndex;\n\n                if (pageNum !== pageToLoadNum && pageToLoadNum >= 1 && pageToLoadNum <= total) {\n                    pageToLoad = that.pages[pageToLoadNum - 1].element;\n\n                    if (pageToLoad.offset().top > containerHeight) {\n                        return;\n                    }\n\n                    that._pageNum = pageToLoadNum;\n                    that._loadVisiblePages();\n\n                    that.trigger(UPDATE, { action: PAGE_CHANGE, page: pageToLoadNum, total: total, pageChangeFromScroll: true });\n                }\n        },\n\n        _onDemandScroll: function(e) {\n            const that = this,\n                currentPageIndex = currentPage(that.element[0]) + 1;\n\n            // Render the current and surrounding pages if they have not been rendered already.\n            // We are using +1/-1 twice because the loadPage method treats the parameter as a page number, not page index.\n            that.loadPage(currentPageIndex);\n            that.loadPage(currentPageIndex + 1);\n            that.loadPage(currentPageIndex - 1);\n\n            that.trigger(UPDATE, { action: PAGE_CHANGE, page: currentPageIndex, total: that.pages.length, pageChangeFromScroll: true });\n        },\n\n        _wheel: function(e) {\n            var originalEvent = e.originalEvent,\n                delta = originalEvent.wheelDelta ? -originalEvent.wheelDelta : originalEvent.detail,\n                zoomIn = delta < 0;\n\n            this.execute({\n                command: ZOOMCOMMAND,\n                options: {\n                    zoomIn: zoomIn,\n                    zoomOut: !zoomIn,\n                    updateComboBox: true\n                }\n            });\n\n            e.preventDefault();\n        },\n\n        zoom: function(scale, preventComboBoxChange) {\n            var that = this;\n            if (!scale) {\n                return that.zoomScale;\n            }\n\n            return that.execute({\n                command: ZOOMCOMMAND,\n                options: {\n                    value: scale,\n                    updateComboBox: !preventComboBoxChange\n                }\n            });\n        },\n\n        execute: function(options) {\n            var commandOptions = extend({ viewer: this }, options.options);\n            var command = new kendo.pdfviewer[options.command](commandOptions);\n            return command.exec();\n        },\n\n        _loadDPLDocument: function() {\n            var that = this;\n            var page = that.options.page;\n\n            progress(that.pageContainer, true);\n            that.processor.fetchDocument().done(function(document) {\n                that._clearPages();\n                that.document = document;\n\n                that._renderPages();\n                that.resize(true);\n                if (document) {\n                    page = page >= 1 && page <= document.total ? page : 1;\n                    that.activatePage(page, true);\n                }\n\n                if (that.pdfScroller) {\n                    that.pdfScroller.destroy();\n                }\n\n                that.pdfScroller = new Scroller(that.pageContainer[0].parentNode, {\n                    filter: '.k-page',\n                    events: {}\n                });\n\n                that.pdfScroller.enablePanEventsTracking();\n\n                progress(that.pageContainer, false);\n            });\n        },\n\n        _loadPdfJSDocument: function(data) {\n            const that = this;\n            const options = that.options;\n            const page = options.page;\n            let file;\n\n            if (data) {\n                file = data;\n            } else {\n                file = options.pdfjsProcessing.file;\n            }\n\n            if (!file) {\n                that._renderBlankPage();\n                return;\n            }\n\n            if (typeof file === \"string\") {\n                file = {\n                    url: file\n                };\n            } else if (file instanceof ArrayBuffer) {\n                file = {\n                    arrayBuffer: file\n                };\n            }\n\n            progress(that.pageContainer, true);\n            loadPDF($.extend({}, {\n                rootElement: that.element[0],\n                dom: that.pageContainer[0],\n                zoom: that.zoomScale,\n                loadOnDemandPageSize: 1,\n                done: (e) => {\n                    that.document = e.pdfDoc;\n                    that.pages = e.pdfPages;\n\n                    if (that.pdfScroller) {\n                        that.pdfScroller.destroy();\n                    }\n\n                    that.pdfScroller = new Scroller(that.pageContainer[0].parentNode, {\n                        filter: '.k-page',\n                        events: {}\n                    });\n\n                    that._attachContainerEvents();\n\n                    that.pdfScroller.enablePanEventsTracking();\n                    that._pageRenderPromise(that.pages[0]);\n                    that.activatePage(page, true);\n\n                    that.trigger(UPDATE);\n                    progress(that.pageContainer, false);\n                },\n                error: (e) => {\n                    const notFoundError = e.name.includes(\"Missing\"),\n                        messages = that.options.messages.errorMessages,\n                        alertMessage = notFoundError ? messages.notFound : messages.parseError;\n\n                    that._triggerError({\n                        error: e.message,\n                        message: alertMessage\n                    });\n                },\n                loadOnDemand: that.options.pdfjsProcessing.loadOnDemand\n            }, file));\n        },\n\n        _setPageNumberAttributes: function() {\n            const that = this;\n\n            that.pageContainer.find('.k-page').each((i, el) => {\n                $(el).attr(kendo.attr(\"number\"), i + 1);\n            });\n        },\n\n        _pageRenderPromise: function(page, preventTrigger) {\n            const that = this;\n            return new Promise(resolve => {\n                const intervalId = setInterval(() => {\n                  if (page._pageInfo.rendered && !page._pageInfo.renderInProgress) {\n                    clearInterval(intervalId);\n                    that._setPageNumberAttributes();\n                    if (!preventTrigger) {\n                        that.trigger(RENDER, { page });\n                    }\n                    resolve();\n                  }\n                }, 100);\n              });\n        },\n\n        loadPage: function(number) {\n            const that = this,\n                messages = that.options.messages.errorMessages,\n                page = that.pages && that.pages[number - 1];\n\n            if (!page) {\n                return;\n            }\n\n            if (that._isDPLProcessor()) {\n                return page.load(that.zoomScale);\n            } else if (!page._pageInfo.rendered && !page._pageInfo.renderInProgress) {\n                renderPage(page, page._pageInfo.emptyPage, (e) => {\n                    that._triggerError({\n                        error: e.message,\n                        message: messages.parseError\n                    });\n                });\n\n                return that._pageRenderPromise(page);\n            }\n\n            return Promise.resolve();\n        },\n\n        activatePage: function(number, updatePager) {\n            const that = this,\n                page = that.pages && that.pages[number - 1];\n\n            if (!page) {\n                return;\n            }\n\n            that._pageNum = number;\n\n            if (that._isDPLProcessor()) {\n                that._loadVisiblePages();\n                that._scrollToActivatedPage(number, updatePager);\n            } else {\n                that.loadPage(number).then(() => {\n                    that._scrollToActivatedPage(number, updatePager);\n                });\n            }\n        },\n\n        _scrollToActivatedPage: function(number, updatePager) {\n            const that = this,\n                pageContainer = that.pageContainerWrapper;\n\n            that._preventScroll = true;\n            scrollToPage(pageContainer[0], number - 1);\n            that.trigger(UPDATE, { action: PAGE_CHANGE, page: number, total: that.pages.length, updatePager: updatePager });\n        },\n\n        _getVisiblePagesCount: function() {\n            var that = this,\n                loadedPagesHeight = 0,\n                updatedVisiblePagesCount = 0,\n                containerHeight = that.pageContainer[0].clientHeight,\n                index = 0;\n\n            while (loadedPagesHeight <= containerHeight && index < that.pages.length)\n            {\n                loadedPagesHeight += that.pages[index].element.height();\n                updatedVisiblePagesCount++;\n                index++;\n            }\n\n            that._visiblePagesCount = updatedVisiblePagesCount;\n        },\n\n        _loadVisiblePages: function() {\n            var pagesCount = this.pages && this.pages.length,\n                minVisiblePageNum = Math.max(this._pageNum - this._visiblePagesCount, 1),\n                maxVisiblePageNum = Math.min(this._pageNum + this._visiblePagesCount, pagesCount);\n\n            this._visiblePages = this.pages.slice(minVisiblePageNum - 1, maxVisiblePageNum);\n\n            for (var i = minVisiblePageNum; i <= maxVisiblePageNum; i++)\n            {\n                this.loadPage(i);\n            }\n        },\n\n        _loadAllPages: function() {\n            const pagesCount = this.pages && this.pages.length;\n            const promises = [];\n\n            for (var i = 0; i <= pagesCount; i++)\n            {\n                promises.push(this.loadPage(i));\n            }\n\n            return promises;\n        },\n\n        fromFile: function(file) {\n            const that = this;\n            if (that._isDPLProcessor()) {\n                that.zoomScale = that.options.scale || DEFAULT_ZOOM_LEVEL;\n                that.zoom(that.zoomScale, true);\n                that.trigger(UPDATE, { action: \"zoom\", zoom: that.options.scale || \"auto\" });\n\n                that.processor._updateDocument(file);\n                that._loadDPLDocument();\n            } else {\n                that._loadPdfJSDocument(file);\n            }\n        },\n\n        exportImage: function(options) {\n            var that = this;\n            var pageNumber = options.page;\n            var page = that.pages[pageNumber - 1] || that._blankPage;\n            var rootGroup = new drawing.Group();\n\n            page.load();\n\n            var background = kendo.drawing.Path.fromRect(new kendo.geometry.Rect([0, 0], [page.width, page.height]), {\n                fill: {\n                    color: WHITECOLOR\n                },\n                stroke: null\n            });\n\n            progress(that.pageContainer, true);\n            rootGroup.append(background, page.group);\n\n            drawing.exportImage(rootGroup).done(function(data) {\n                progress(that.pageContainer, false);\n                kendo.saveAs({\n                    dataURI: data,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL || \"\",\n                    forceProxy: options.forceProxy,\n                    proxyTarget: options.proxyTarget\n                });\n            });\n        },\n\n        exportSVG: function(options) {\n            var that = this;\n            var pageNumber = options.page;\n            var page = that.pages[pageNumber - 1] || that._blankPage;\n\n            progress(that.pageContainer, true);\n\n            page.load();\n\n            drawing.exportSVG(page.group).done(function(data) {\n                progress(that.pageContainer, false);\n                kendo.saveAs({\n                    dataURI: data,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL || \"\",\n                    forceProxy: options.forceProxy,\n                    proxyTarget: options.proxyTarget\n                });\n            });\n        },\n\n        setOptions: function(options)\n        {\n            var that = this;\n\n            if (options.pdfjsProcessing || options.dplProcessing) {\n                that._initProcessor(options || {});\n            }\n\n            options = $.extend(that.options, options);\n\n            Widget.fn.setOptions.call(that, options);\n\n            if (options.page) {\n                that._pageNum = options.page;\n                that.activatePage(options.page, false);\n            }\n\n            if (options.width) {\n                that.element.width(options.width);\n            }\n\n            if (options.height) {\n                that.element.height(options.height);\n            }\n        },\n\n        destroy: function()\n        {\n            if (this._resizeHandler)\n            {\n                kendo.unbindResize(this._resizeHandler);\n            }\n\n            //destroy nested components\n            if (this._errorDialog) {\n                this._errorDialog.destroy();\n            }\n\n            if (this._saveDialog) {\n                this._saveDialog.destroy();\n            }\n\n            if (this._upload) {\n                this._upload.destroy();\n            }\n\n            if (this.pager) {\n                this.pager.destroy();\n            }\n\n            if (this.toolbar) {\n                this.toolbar.unbind();\n                this.toolbar.destroy();\n                this.toolbar = null;\n            }\n\n            if (this.pages && this.pages.length && this._isDPLProcessor()) {\n                this.pages.forEach(function(page) {\n                    page.destroy();\n                });\n                this.pages = [];\n            }\n\n            if (this.pdfScroller) {\n                this.pdfScroller.destroy();\n            }\n            this.pageContainer.off(NS);\n            this.pageContainerWrapper.off(NS);\n\n            Widget.fn.destroy.call(this);\n        },\n\n        _clearPages: function() {\n            this.pages = [];\n            this.document = null;\n            this._pageNum = 1;\n\n            this.pageContainer.off(NS);\n            this.pageContainer.empty();\n\n            if (this.pdfScroller)\n            {\n                this.pdfScroller.destroy();\n            }\n        },\n\n        _toggleSelection: function(enable) {\n            var that = this;\n\n            if (enable === undefined$1) {\n                enable = true;\n            }\n\n            if (that.pdfScroller) {\n                enable ? that.pdfScroller.disablePanEventsTracking() : that.pdfScroller.enablePanEventsTracking();\n            }\n\n            that.pageContainer.toggleClass(styles.enableTextSelection, enable);\n            that.pageContainer.toggleClass(styles.enablePanning, !enable);\n        },\n    });\n\n    ui.plugin(PDFViewer);\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { __meta__, kendo$1 as default };\n"]}