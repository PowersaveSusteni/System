{"version":3,"file":"kendo.editor.js","names":["kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","$","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","outerWidth","_outerWidth","outerHeight","_outerHeight","FORMATTING_MARKS_STYLE_ID","FORMATTING_MARKS_OVERLAY_ID","FORMATTING_MARKS_OVERLAY_WRAPPER_ID","SELECT","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","NATIVE_TOOLS","EditorUtils","editorWrapperTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","icon","cssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableProperties","tableCellProperties","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","pdf","nameToKebab","replace","toLowerCase","registerTool","toolName","tool","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","basic","scripts","alignment","lines","symbols","links","lists","dent","tablesWizard","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","formatPainter","__suppressEditableCheck","element","toolbarContainer","type","domElement","that","editorNS","editor","dom","Dom","_registerHandler","closest","update","bind","_setupType","_initToolbar","_setupHeight","_resizable","_initializeContentElement","_setupKeyboard","clipboard","Clipboard","undoRedoStack","_populateValue","mousedown","_endTyping","mouseup","e","_mouseup","_handleSpaceAndNewLines","_initializeImmutables","_ariaLabel","wrapper","find","toolbar","resize","_initInlineOverflowWrapper","notify","_showWatermarkOverlay","messages","auto","bold","italic","underline","strikethrough","fitToCell","lineHeight","formattingMarks","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableWizard","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","topPadding","leftPadding","bottomPadding","rightPadding","independentCellPaddings","cellMargin","captionAlignment","position","background","tableBackground","id","border","borderStyle","borderWidth","borderColor","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","applyToColumn","applyToRow","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","placeholder","nonce","unsafeInline","encoded","formattingMarksRefreshDelay","domain","resizable","deserialization","custom","serialization","entities","semantic","optimizeTags","keepEOL","pasteCleanup","all","css","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","stylesheets","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","navigateOnTab","text","value","tools","destroy","_deregisterHandlers","clearTimeout","_spellCorrectTimeout","_focusOutside","windowInstance","tablePopup","_destroyUploadWidget","interSectionObserver","disconnect","resizeObserver","_destroyResizings","_destroyFormattingMarksOverlay","setOptions","_setOptionsTools","_initializePlaceholder","createRange","RangeUtils","encodedValue","encode","exec","params","range","Error","body","getAttribute","keyboard","isTypingInProgress","_focusBody","selectRange","_range","getRange","Object","map","key","immutables","test","execCommand","async","change","_commandChange","_selectionChange","managesUndoRedo","focus","restoreSelection","selection","getSelection","rangeCount","getRangeAt","doc","startContainer","endContainer","startOffset","endOffset","setStart","collapse","SelectionUtils","selectionFromDocument","paste","html","InsertHtmlCommand","refresh","textarea","val","remove","selectionRestorePoint","toRange","saveSelection","container","commonAncestorContainer","contains","RestorePoint","selectedHtml","Serializer","domToXhtml","cloneContents","removeAllRanges","addRange","state","textNodes","finder","collapsed","getFormat","isFormatted","_togglePlaceholder","trim","_oldValue","currentHtml","htmlToDom","_refreshTools","_bindTools","unbind","filter","el","each","initialize","_blur","old","_containsRange","isAncestorOrSelf","_createContentElement","iframe","wnd","lang","specifiedDomain","domainScript","src","hide","title","frameBorder","addClass","attr","tabIndex","insertBefore","location","hostname","contentWindow","contentDocument","observer","IntersectionObserver","entries","entry","isIntersecting","_decorateFormatting","unobserve","observe","getElementsByTagName","open","write","isRtl","ios","edge","chrome","href","join","close","_deleteSavedRange","component","dataSource","items","tag","className","formattingElement","getKendoDropDownList","data","list","getEffectiveBackground","inlineStyle","_appendFormattingMarksStyles","elementId","$head","head","append","_appendFormattingMarksOverlay","_formattingMarksOverlayWrapper","_formattingMarksOverlay","appendTo","_bodyTopBottomPaddings","parseFloat","_isInlineEditor","insertAfter","_updateFormattingMarksOverlayHeight","scrollHeight","inlineHeight","_inlineOverflowWrapper","wrap","parent","handlers","_handlers","h","off","handler","_uploadWidget","endTyping","scrollTop","activeElement","_activeElement","clientHeight","msie","left","top","opacity","_handleToolbarClick","target","_immutablesContext","Immutables","immutablesContext","editableTextNodes","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","last","clearInterval","setTimeout","_mousedown","touch","keydown","_spellCorrect","parentElement","nodeName","_cachedHeight","restoreHeight","keyCode","BACKSPACE","DELETE","F10","first","preventPopupHide","preventDefault","LEFT","RIGHT","offset","next","nextChar","nodeType","nodeValue","toolFromShortcut","toolOptions","keyPressCommand","_runPostContentKeyCommands","keypress","_showElementResizeHandles","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","selectNode","focusin","hasAttribute","_showWindow","focusout","active","popup","toolbarContainerElement","get","_toolbarFocused","hasClass","removeClass","_hideWindow","_initializeColumnResizing","_initializeRowResizing","_initializeElementResizing","defaults","toolbarOptions","_processToolbarItems","_setNativeTools","parentMessages","toggle","evaluateTemplates","ToolBar","on","is","_initToolbarWindow","toolbarEl","prepend","kendoWindow","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_selectionStarted","parents","stopPropagation","gecko","which","tagName","defaultValue","deserializedRoot","getAllComments","innerHTML","_resetGroups","current","result","optionsTools","j","t","guidGroupName","flatDefaultTools","processedObject","currentGroups","Array","isArray","guid","_processToolOptions","gr","includes","values","group","g","to","_processDefaultTool","isPlainObject","view","shortcuts","uiOptions","originalOptions","palette","template","showText","showIcon","tooltip","attributes","ColorTool","componentOptions","views","preview","input","buttons","_shortcutSequence","nodes","filterBy","htmlIndentSpace","_updateImmutablesState","eventNames","NS","hasOwnProperty","applyEventMap","split","toolsFromShortcut","o","changesContent","refreshDelay","applyFormattingMarks","clearFormattingMarksOverlay","_toggledFormattingMarks","children","_formattingMarksTimeout","empty","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","_wrapTextarea","res","ctrl","shift","alt","beforeCorrection","falseTrigger","contextmenu","one","mozilla","_finishUpdate","show","$body","toggleClass","overflowPopup","uiElement","trackImmutables","toolsToBeUpdated","w","editorWrap","editArea","isResizable","resizableMin","min","resizableMax","max","maxHeight","minWidth","maxWidth","ResizeObserver","_resizeTimeOut","_destroyElementResizing","ElementResizingFactory","dispose","_destroyRowResizing","RowResizing","_destroyColumnResizing","ColumnResizing","create","_showElementResizeHandlesProxy","elementResizing","parentNode","showResizeHandles","columnResizing","rowResizing","_getWindowWidth","editorElement","_overlapsWindow","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","editorOffset","Math","plugin","Tool","commandArguments","noop","UndoTool","enable","removeAttr","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","len","obj","nonListBlockElements","blockElements","concat","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","getTextNodes","lastTextNode","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","sibling","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isImg","isBr","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","unwrap","isChildOfBaseContainer","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","unstyle","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","count","arguments","paths","minPathLength","Infinity","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","invert","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tagMap","start","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","delta","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","select","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","serialized","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","postExec","_actionButtonsTemplate","insertButtonIcon","cancelButtonIcon","renderButton","themeColor","GenericCommand","endRestorePoint","ViewHtmlCommand","cmd","dialog","_footerTemplate","_footerMessages","center","FormatCommand","FormatTool","getKendoToolBar","getKendoToggleButton","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","activate","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","setDataSource","sender","newRange","ENTER","_widget","getKendoColorPicker","storedRange","_inputFocused","_popup","unselectable","_value","toCssRgba","fontWeight","togglable","fontStyle","overflow","toolIcon","commandOn","closeOnSelect","dataValueField","dataTextField","valuePrimitive","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","a","ref","UnlinkCommand","LinkCommand","url","_initialText","img","_close","_form","_createForm","_apply","_keydown","linkUrl","_dialog","formElement","form","kendoForm","renderButtons","field","label","editorOptions","after","ESC","textInput","anchor","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","isLink","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","display","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","decorate","optionLabel","dataItem","toJSON","dataBound","getFormattingValue","n","selectBox","_ancestor","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","highlightFirst","autoWidth","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","applied","isIE","showBrowser","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","InsertHtmlTool","initialValue","autoSize","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","_exec","itemTemplate","valueTemplate","iconClass","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","headingDomName","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","btn","popupTemplate","kendoPopup","copyAnchorStyles","_open","_activate","_toggle","_editor","TableWizardTool","TableWizardCommand","insertNewTable","kendoButton","_setTableSize","InsertTableTool","cols","cellWidth","cellHeight","firstCell","eq","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_valid","status","initiallyVisible","button","selectedRows","selectedColumns","changed","tableSize","stopImmediatePropagation","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","DeleteRowCommand","focusElement","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","nonSplittableTagsOnPaste","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","margin","padding","fontVariant","lineSpacing","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","preventSplit","unwrapPasted","applicable","splitter","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","LineHeightCommand","LineHeightFormatTool","getKendoComboBox","closeHandler","mouseDownHandler","keyDownHandler","currentRange","prefixOptions","DOM","createMark","character","scrollableWrapper","clonedRange","domRect","y","parentRect","getBoundingClientRect","createElementNS","setAttributeNS","appendSvgMarks","overlay","isInlineEditor","FormattingMarksCommand","global","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","constrain","lowerBound","upperBound","getScrollBarWidth","scrollbar","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","currentTarget","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","draggableElement","onResizeStart","onResize","resizeend","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","initialDelta","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","factory","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","isTableCellWizard","tableCellWizard","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","topCellPadding","_getNumericValue","leftCellPadding","bottomCellPadding","rightCellPadding","tableData","paddingTop","paddingLeft","paddingBottom","paddingRight","captionContent","deleteCaption","createCaption","_getAlignmentData","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","whiteSpace","widthUnit","heightUnit","backgroundColor","bgColor","borderCollapse","_getTablePositionData","tStyle","captionClone","tableAlignment","_getAlignment","tablePosition","_getTablePosition","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","TableCellWizardEditTool","FORM_FIELD_CLASS","INVISIBLE_CLASS","DOT","numericTextBoxSettings","borderStyles","textWrapDropDownSettings","tablePositionDropDownSettings","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","tablePropertiesDialogTemplate","cellPropertiesDialogTemplate","_openTablePropertiesDialog","_dialogTemplate","collectTableDialogValues","components","_initTabStripComponent","_tablePropertiesForm","_createTablePropertiesForm","_accessibilityPropertiesForm","_createAccessibilityPropertiesForm","_openCellPropertiesDialog","collectCellDialogValues","_cellPropertiesForm","_createCellPropertiesForm","isCellProperties","tabStrip","kendoTabStrip","_collectTableViewValues","_collectAccessibilityViewValues","_collectCellViewValues","tableView","check","cellView","wrapTextValue","accessibilityView","_addUnit","_initNumericTextbox","storage","settings","kendoNumericTextBox","_initDropDownList","kendoDropDownList","_setComponentValue","_initBorderStyleDropDown","_initTablePositionDropDown","_initPositionDropDown","_initTableAlignmentDropDown","_initAlignmentDropDown","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initTextWrapDropDown","_initAssociationDropDown","_initColorPicker","kendoColorPicker","clearButton","_initInput","kendoTextBox","_initCheckbox","kendoCheckBox","_initTextArea","kendoTextArea","_destroyComponents","dialogTemplate","_onPaddingTopChange","viewType","topCellPaddingNumeric","topCellPaddingValue","leftCellPaddingNumeric","bottomCellPaddingNumeric","rightCellPaddingNumeric","_cachedPadding","_onPaddingCheckChange","checked","bottomCellPaddingValue","leftCellPaddingValue","rightCellPaddingValue","_onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","_onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","layout","grid","gutter","layoutWrapper","hint","optional","__meta__","category","description","depends","features","kendo$1"],"sources":["kendo.editor.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import './kendo.combobox.js';\nimport './kendo.dropdownlist.js';\nimport './kendo.resizable.js';\nimport './kendo.window.js';\nimport './kendo.colorpicker.js';\nimport './kendo.imagebrowser.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.textarea.js';\nimport './kendo.core.js';\nimport './kendo.toolbar.js';\nimport './kendo.icons.js';\nimport './kendo.form.js';\nimport './kendo.filebrowser.js';\nimport './kendo.draganddrop.js';\nimport './kendo.html.button.js';\nimport './kendo.tabstrip.js';\n\n(function(kendo) {\n    var UndoRedoStack = kendo.Observable.extend({\n        init: function(options) {\n            kendo.Observable.fn.init.call(this, options);\n            this.clear();\n        },\n        events: [ \"undo\", \"redo\" ],\n        push: function (command) {\n            this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n            this.currentCommandIndex = this.stack.push(command) - 1;\n        },\n        undo: function () {\n            if (this.canUndo()) {\n                var command = this.stack[this.currentCommandIndex--];\n                command.undo();\n                this.trigger(\"undo\", { command: command });\n            }\n        },\n        redo: function () {\n            if (this.canRedo()) {\n                var command = this.stack[++this.currentCommandIndex];\n                command.redo();\n                this.trigger(\"redo\", { command: command });\n            }\n        },\n        clear: function() {\n            this.stack = [];\n            this.currentCommandIndex = -1;\n        },\n        canUndo: function () {\n            return this.currentCommandIndex >= 0;\n        },\n        canRedo: function () {\n            return this.currentCommandIndex != this.stack.length - 1;\n        }\n    });\n\n    kendo.deepExtend(kendo, {\n        util: {\n            UndoRedoStack: UndoRedoStack\n        }\n    });\n})(kendo);\n\n(function($,undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        os = kendo.support.mobileOS,\n        browser = kendo.support.browser,\n        extend = $.extend,\n        deepExtend = kendo.deepExtend,\n        keys = kendo.keys,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        NS = \".kendoEditor\";\n\n    const FORMATTING_MARKS_STYLE_ID = \"formatting-marks-style\",\n          FORMATTING_MARKS_OVERLAY_ID = \"formatting-marks-overlay\",\n          FORMATTING_MARKS_OVERLAY_WRAPPER_ID = \"formatting-marks-overlay-wrapper\";\n\n    var SELECT = \"select\";\n    var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n    var PLACEHOLDER_CLASS = \"k-placeholder\";\n    var PLACEHOLDER_TAG_ID = \"placeholder\";\n    var REFRESH_INTERVAL = 200;\n    var DEFAULT_LANGUAGE = \"en\";\n\n    var NATIVE_TOOLS = [\n        \"insertLineBreak\",\n        \"insertParagraph\",\n        \"redo\",\n        \"undo\",\n        \"autoLink\"\n    ];\n\n    const TOOLBAR_ALLOWED_CLOSE_SELECTORS = \".k-icon,.k-svg-icon,svg,path,.k-editor-window,.k-editor-toolbar,.k-editortoolbar-dragHandle,[ref-toolbar-tool],[ref-toolbar-tool] *\";\n\n    var EditorUtils = {\n        editorWrapperTemplate: () =>\n            '<div class=\"k-editor\">' +\n                '<div class=\"k-editor-toolbar\" role=\"toolbar\"></div>' +\n                '<div class=\"k-editable-area k-editor-content\"></div>' +\n            '</div>',\n\n        formatByName: function(name, format) {\n            for (var i = 0; i < format.length; i++) {\n                if ($.inArray(name, format[i].tags) >= 0) {\n                    return format[i];\n                }\n            }\n        },\n\n        getToolCssClass: function(name, icon) {\n            var toolCssClassNames = {\n                superscript: \"supscript\",\n                subscript: \"subscript\",\n                justifyLeft: \"align-left\",\n                justifyCenter: \"align-center\",\n                justifyRight: \"align-right\",\n                justifyFull: \"align-justify\",\n                insertUnorderedList: \"list-unordered\",\n                insertOrderedList: \"list-ordered\",\n                insertUpperRomanList: \"list-roman-upper\",\n                insertLowerRomanList: \"list-roman-lower\",\n                \"import\": \"import\",\n                indent: \"indent\",\n                outdent: \"outdent\",\n                createLink: \"link\",\n                unlink: \"unlink\",\n                insertImage: \"image\",\n                insertFile: \"file-add\",\n                viewHtml: \"code\",\n                foreColor: \"foreground-color\",\n                backColor: \"droplet\",\n                createTable: \"table-add\",\n                addColumnLeft: \"table-column-insert-left\",\n                addColumnRight: \"table-column-insert-right\",\n                addRowAbove: \"table-row-insert-above\",\n                addRowBelow: \"table-row-insert-below\",\n                deleteRow: \"table-row-delete\",\n                deleteColumn: \"table-column-delete\",\n                mergeCellsHorizontally: \"cells-merge-horizontally\",\n                mergeCellsVertically: \"cells-merge-vertically\",\n                splitCellHorizontally: \"cell-split-horizontally\",\n                splitCellVertically: \"cell-split-vertically\",\n                tableProperties: \"table-properties\",\n                tableCellProperties: \"table-cell-properties\",\n                tableWizardInsert: \"table-wizard\",\n                tableAlignLeft: \"table-position-start\",\n                tableAlignCenter: \"table-position-center\",\n                tableAlignRight: \"table-position-end\",\n                cleanFormatting: \"clear-css\",\n                copyFormat: \"copy-format\",\n                applyFormat: \"apply-format\",\n                pdf: \"file-pdf\"\n            };\n\n            var cssClass = toolCssClassNames[name];\n\n            if (cssClass) {\n                return cssClass;\n            }\n\n            if (icon) {\n                return icon;\n            }\n\n            return EditorUtils.nameToKebab(name);\n        },\n\n        nameToKebab: function(name) {\n            return name.replace(/([a-z])([A-Z])/g, \"$1-$2\")\n                .replace(/[\\s_]+/g, '-')\n                .toLowerCase();\n        },\n\n        registerTool: function(toolName, tool) {\n            if (!tool.name) {\n                tool.options.name = toolName;\n                tool.name = toolName.toLowerCase();\n            }\n\n            if (!tool.options.ui) {\n                tool.options.ui = {};\n            }\n\n            tool.options.ui.command = toolName;\n\n            Editor.defaultTools[toolName] = tool;\n        },\n\n        registerFormat: function(formatName, format) {\n            Editor.fn.options.formats[formatName] = format;\n        },\n\n        cacheComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(comments[index], \"{\" + index + \"}\");\n            }\n            return content;\n        },\n\n        retrieveComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(\"{\" + index + \"}\", comments[index]);\n            }\n            return content;\n        }\n    };\n\n    var messages = {\n        auto: \"Auto\",\n        bold: \"Bold\",\n        italic: \"Italic\",\n        underline: \"Underline\",\n        strikethrough: \"Strikethrough\",\n        superscript: \"Superscript\",\n        subscript: \"Subscript\",\n        fitToCell: \"Fit to cell\",\n        justifyCenter: \"Center text\",\n        justifyLeft: \"Align text left\",\n        justifyRight: \"Align text right\",\n        justifyFull: \"Justify\",\n        insertUnorderedList: \"Insert unordered list\",\n        insertOrderedList: \"Insert ordered list\",\n        lineHeight: \"Set line height\",\n        formattingMarks: \"Toggle formatting marks\",\n        indent: \"Indent\",\n        outdent: \"Outdent\",\n        createLink: \"Insert hyperlink\",\n        unlink: \"Remove hyperlink\",\n        insertImage: \"Insert image\",\n        insertFile: \"Insert file\",\n        insertHtml: \"Insert HTML\",\n        viewHtml: \"View HTML\",\n        fontName: \"Select font family\",\n        fontNameInherit: \"(inherited font)\",\n        fontSize: \"Select font size\",\n        fontSizeInherit: \"(inherited size)\",\n        formatBlock: \"Format\",\n        formatting: \"Format\",\n        foreColor: \"Color\",\n        backColor: \"Background color\",\n        style: \"Styles\",\n        emptyFolder: \"Empty Folder\",\n        editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n        uploadFile: \"Upload\",\n        overflowAnchor: \"More tools\",\n        orderBy: \"Arrange by:\",\n        orderBySize: \"Size\",\n        orderByName: \"Name\",\n        invalidFileType: \"The selected file {0} is not valid. Supported file types are {1}.\",\n        deleteFile: 'Are you sure you want to delete {0}?',\n        overwriteFile: 'A file with name {0} already exists in the current directory. Do you want to overwrite it?',\n        directoryNotFound: \"A directory with this name was not found.\",\n        imageWebAddress: \"Web address\",\n        imageAltText: \"Alternate text\",\n        imageWidth: \"Width (px)\",\n        imageHeight: \"Height (px)\",\n        fileWebAddress: \"Web address\",\n        fileTitle: \"Title\",\n        fileText: \"Text\",\n        linkWebAddress: \"Web address\",\n        linkText: \"Text\",\n        linkToolTip: \"ToolTip\",\n        linkOpenInNewWindow: \"Open link in new window\",\n        dialogUpdate: \"Update\",\n        dialogInsert: \"Insert\",\n        dialogOk: \"Confirm\",\n        dialogCancel: \"Cancel\",\n        cleanFormatting: \"Clean formatting\",\n        createTable: \"Create a table\",\n        createTableHint: \"Create a {0} x {1} table\",\n        addColumnLeft: \"Add column on the left\",\n        addColumnRight: \"Add column on the right\",\n        addRowAbove: \"Add row above\",\n        addRowBelow: \"Add row below\",\n        deleteRow: \"Delete row\",\n        deleteColumn: \"Delete column\",\n        mergeCellsHorizontally: \"Merge cells horizontally\",\n        mergeCellsVertically: \"Merge cells vertically\",\n        splitCellHorizontally: \"Split cells horizontally\",\n        splitCellVertically: \"Split cells vertically\",\n        tableAlignLeft: \"Table Align Left\",\n        tableAlignCenter: \"Table Align Center\",\n        tableAlignRight: \"Table Align Right\",\n        tableWizard: \"Table Wizard\",\n        tableProperties: \"Table Properties\",\n        tableCellProperties: \"Cell Properties\",\n        tableTab: \"General\",\n        cellTab: \"Cell\",\n        accessibilityTab: \"Advanced\",\n        caption: \"Caption\",\n        summary: \"Summary\",\n        width: \"Width\",\n        height: \"Height\",\n        units: \"Units\",\n        cellSpacing: \"Cell Spacing\",\n        cellPadding: \"Cell Padding\",\n        topPadding: \"Top\",\n        leftPadding: \"Left\",\n        bottomPadding: \"Bottom\",\n        rightPadding: \"Right\",\n        independentCellPaddings: \"Independent Cell Paddings\",\n        cellMargin: \"Cell Margin\",\n        alignment: \"Alignment\",\n        captionAlignment: \"Caption alignment\",\n        position: \"Position\",\n        background: \"Background\",\n        tableBackground: \"Table background\",\n        cssClass: \"CSS Class\",\n        id: \"ID\",\n        border: \"Border\",\n        borderStyle: \"Border Style\",\n        borderWidth: \"Border Width\",\n        borderColor: \"Border Color\",\n        collapseBorders: \"Collapse borders\",\n        wrapText: \"Wrap text\",\n        associateCellsWithHeaders: \"Associate headers\",\n        alignLeft: \"Align Left\",\n        alignCenter: \"Align Center\",\n        alignRight: \"Align Right\",\n        alignLeftTop: \"Align Left Top\",\n        alignCenterTop: \"Align Center Top\",\n        alignRightTop: \"Align Right Top\",\n        alignLeftMiddle: \"Align Left Middle\",\n        alignCenterMiddle: \"Align Center Middle\",\n        alignRightMiddle: \"Align Right Middle\",\n        alignLeftBottom: \"Align Left Bottom\",\n        alignCenterBottom: \"Align Center Bottom\",\n        alignRightBottom: \"Align Right Bottom\",\n        alignRemove: \"Remove Alignment\",\n        columns: \"Columns\",\n        rows: \"Rows\",\n        selectAllCells: \"Apply to all cells\",\n        applyToColumn: \"apply to column\",\n        applyToRow: \"apply to row\",\n        exportAs: \"Export As\",\n        \"import\": \"Import\",\n        print: \"Print\",\n        headerRows: \"Header Rows\",\n        headerColumns: \"Header Cols\",\n        tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n        associateNone: \"None\",\n        associateScope: \"Associate using 'scope' attribute\",\n        associateIds: \"Associate using Ids\",\n        copyFormat: \"Copy format\",\n        applyFormat: \"Apply format\",\n        borderNone: \"None\",\n        undo: \"Undo\",\n        redo: \"Redo\"\n    };\n\n    var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n    var toolGroups = {\n        basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n        undo: [\"undo\", \"redo\"],\n        scripts: [\"subscript\", \"superscript\" ],\n        alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n        lines: [\"lineHeight\"],\n        symbols: [\"formattingMarks\"],\n        links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n        lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\",],\n        dent: [\"indent\", \"outdent\"],\n        tablesWizard: [\"tableProperties\", \"tableCellProperties\"],\n        tablesInsert: [\"createTable\"],\n        tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n        tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n        tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n        formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n    };\n\n    var Editor = Widget.extend({\n        __suppressEditableCheck: false,\n        init: function(element, options) {\n            var that = this,\n                editorNS = kendo.ui.editor,\n                dom = editorNS.Dom,\n                toolbarContainer,\n                type, domElement;\n\n\n            /* suppress initialization in devices w/o proper contenteditable support */\n            if (!supportedContentEditable && !that.__suppressEditableCheck) {\n                return;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.options = deepExtend({}, that.options, options);\n\n            element = that.element;\n            domElement = element[0];\n            type = dom.name(domElement);\n\n            this._registerHandler(\n                element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n            );\n\n            toolbarContainer = that._setupType(element);\n\n            that._initToolbar(toolbarContainer);\n            that._setupHeight(type);\n            that._resizable();\n            that._initializeContentElement(that);\n            that._setupKeyboard();\n\n            that.clipboard = new editorNS.Clipboard(this);\n            that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n            that._populateValue(options, domElement);\n\n            that._registerHandler(document, {\n                \"mousedown\": function() { that._endTyping(); },\n                \"mouseup\": function(e) { that._mouseup(e); }\n            });\n\n            that._registerHandler(window, \"resize\", that._handleSpaceAndNewLines.bind(that));\n\n            that._initializeImmutables();\n\n            if (type == \"textarea\") {\n                that._ariaLabel(that.wrapper.find(\"iframe\"));\n            }\n\n            that.toolbar.resize();\n\n            that._initInlineOverflowWrapper();\n\n            kendo.notify(that);\n\n            if (that._showWatermarkOverlay) {\n                that._showWatermarkOverlay((that.wrapper && that.wrapper[0]) || that.element[0]);\n            }\n        },\n\n        events: [\n            \"select\",\n            \"change\",\n            \"execute\",\n            \"error\",\n            \"paste\",\n            \"keydown\",\n            \"keyup\"\n        ],\n\n        options: {\n            name: \"Editor\",\n            messages: messages,\n            placeholder: \"\",\n            nonce: \"\",\n            unsafeInline: true,\n            formats: {},\n            encoded: true,\n            formattingMarksRefreshDelay: 250,\n            domain: null,\n            resizable: false,\n            deserialization: {\n                custom: null\n            },\n            serialization: {\n                entities: true,\n                semantic: true,\n                scripts: false,\n                optimizeTags: false,\n                keepEOL: false\n            },\n            pasteCleanup: {\n                all: false,\n                css: false,\n                custom: null,\n                keepNewLines: false,\n                msAllFormatting: false,\n                msConvertLists: true,\n                msTags: true,\n                none: false,\n                span: false\n            },\n            stylesheets: [],\n            dialogOptions: {\n                modal: true, resizable: false, draggable: true,\n                animation: false\n            },\n            imageBrowser: null,\n            fileBrowser: null,\n            navigateOnTab: false,\n            fontName: [\n                { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                { text: \"Georgia\", value: \"Georgia, serif\" },\n                { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n            ],\n            fontSize: [\n                { text: \"1 (8pt)\", value: \"xx-small\" },\n                { text: \"2 (10pt)\", value: \"x-small\" },\n                { text: \"3 (12pt)\", value: \"small\" },\n                { text: \"4 (14pt)\", value: \"medium\" },\n                { text: \"5 (18pt)\", value: \"large\" },\n                { text: \"6 (24pt)\", value: \"x-large\" },\n                { text: \"7 (36pt)\", value: \"xx-large\" }\n            ],\n            formatBlock: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            tools: [\n                \"formatting\",\n                \"bold\",\n                \"italic\",\n                \"underline\",\n                \"undo\",\n                \"redo\",\n                \"justifyLeft\",\n                \"justifyCenter\",\n                \"justifyRight\",\n                \"copyFormat\",\n                \"applyFormat\",\n                \"insertUnorderedList\",\n                \"insertOrderedList\",\n                \"indent\",\n                \"outdent\",\n                \"createLink\",\n                \"unlink\",\n                \"insertImage\",\n                \"tableProperties\",\n                \"tableCellProperties\",\n                \"createTable\",\n                \"addRowAbove\",\n                \"addRowBelow\",\n                \"addColumnLeft\",\n                \"addColumnRight\",\n                \"deleteRow\",\n                \"deleteColumn\",\n                \"mergeCellsHorizontally\",\n                \"mergeCellsVertically\",\n                \"splitCellHorizontally\",\n                \"splitCellVertically\",\n                \"tableAlignLeft\",\n                \"tableAlignCenter\",\n                \"tableAlignRight\"\n            ]\n        },\n\n        destroy: function() {\n            var editor = this;\n\n            Widget.fn.destroy.call(this);\n\n            this._endTyping(true);\n\n            this._deregisterHandlers();\n\n            clearTimeout(this._spellCorrectTimeout);\n\n            this._focusOutside();\n\n            this.toolbar.destroy();\n\n            if (this.windowInstance) {\n                this.windowInstance.destroy();\n            }\n            if (this.tablePopup) {\n                this.tablePopup.destroy();\n            }\n\n            editor._destroyUploadWidget();\n\n            if (this.interSectionObserver) {\n                this.interSectionObserver.disconnect();\n                this.interSectionObserver = null;\n            }\n\n            if (this.resizeObserver) {\n                this.resizeObserver.disconnect();\n                this.resizeObserver = null;\n                this.wrapper.css(\"min-height\", \"\");\n                this.wrapper.css(\"max-height\", \"\");\n            }\n\n            editor._destroyResizings();\n\n            editor._destroyFormattingMarksOverlay();\n\n            kendo.destroy(this.wrapper);\n        },\n\n        setOptions: function(options) {\n            var editor = this;\n\n            Widget.fn.setOptions.call(editor, options);\n\n            if (options.tools) {\n                this._setOptionsTools(options.tools);\n            }\n\n            this._initializePlaceholder();\n        },\n\n        createRange: function(document) {\n            return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n        },\n\n        encodedValue: function() {\n            return kendo.ui.editor.Dom.encode(this.value());\n        },\n\n        exec: function(name, params) {\n            var that = this;\n            var command = null;\n            var defaultTools = kendo.ui.Editor.defaultTools;\n            var range, tool, prevented;\n\n            if (!name) {\n                throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n            }\n\n            if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                name !== \"print\" &&\n                name !== \"pdf\" &&\n                name !== \"exportAs\") {\n                return false;\n            }\n\n            if (!that.keyboard.isTypingInProgress()) {\n                that._focusBody();\n                that.selectRange(that._range || that.getRange());\n            }\n\n            tool = that.tools[name] || defaultTools[name];\n\n            if (!tool) {\n                Object.keys(defaultTools).map(key => {\n                    if (key.toLowerCase() === name) {\n                        tool = defaultTools[key];\n                    }\n                });\n            }\n\n            if (tool) {\n                range = that.getRange();\n\n                if (tool.command) {\n                    command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                }\n\n                prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                if (prevented) {\n                    return;\n                }\n\n                if (/^(undo|redo)$/i.test(name)) {\n                    that.undoRedoStack[name]();\n                } else if (command) {\n                    that.execCommand(command);\n\n                    if (command.async) {\n                        command.change = that._commandChange.bind(that);\n                        return;\n                    }\n                }\n\n                // Prevent double execution when the formatting marks tool is used.\n                if (name !== \"formattingMarks\") {\n                    that._handleSpaceAndNewLines();\n                }\n                that._selectionChange();\n            }\n        },\n\n        _commandChange: function() {\n            const that = this;\n            that._selectionChange();\n            that._handleSpaceAndNewLines();\n        },\n\n        execCommand: function(command) {\n            if (!command.managesUndoRedo) {\n                this.undoRedoStack.push(command);\n            }\n\n            command.editor = this;\n            command.exec();\n        },\n\n        focus: function() {\n            this.restoreSelection();\n        },\n\n        getRange: function() {\n            var selection = this.getSelection(),\n                range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                doc = this.document;\n\n            if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                range.setStart(this.body, 0);\n                range.collapse(true);\n            }\n\n            return range;\n        },\n\n        getSelection: function() {\n            return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n        },\n\n        paste: function(html, options) {\n            this.focus();\n\n            var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                range: this.getRange(),\n                html: html\n            }, options));\n\n            command.editor = this;\n\n            command.exec();\n        },\n\n        refresh: function() {\n            var that = this;\n\n            if (that.textarea) {\n                that._destroyResizings();\n                // preserve updated value before re-initializing\n                // don't use update() to prevent the editor from encoding the content too early\n                var value = that.value();\n                that.textarea.val(value);\n                that.wrapper.find(\"iframe\").remove();\n                that._initializeContentElement(that);\n                that.value(value);\n            }\n        },\n\n        restoreSelection: function() {\n            this._focusBody();\n\n            if (this.selectionRestorePoint) {\n                this.selectRange(this.selectionRestorePoint.toRange());\n            }\n        },\n\n        saveSelection: function(range) {\n            range = range || this.getRange();\n            var container = range.commonAncestorContainer,\n                body = this.body;\n\n            if (container == body || $.contains(body, container)) {\n                this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n            }\n        },\n\n        selectedHtml: function() {\n            return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n        },\n\n        selectRange: function(range) {\n            this._focusBody();\n            var selection = this.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.saveSelection(range);\n        },\n\n        state: function(toolName) {\n            var tool = kendo.ui.Editor.defaultTools[toolName];\n            var finder = tool && (tool.options.finder || tool.finder);\n            var RangeUtils = kendo.ui.editor.RangeUtils;\n            var range, textNodes;\n\n            if (finder) {\n                range = this.getRange();\n\n                textNodes = RangeUtils.textNodes(range);\n\n                if (!textNodes.length && range.collapsed) {\n                    textNodes = [range.startContainer];\n                }\n\n                return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n            }\n\n            return false;\n        },\n\n        update: function(value) {\n            value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n            if (this.textarea) {\n                this.textarea.val(value);\n                this._togglePlaceholder(!value.trim());\n            } else {\n                this._oldValue = value;\n            }\n        },\n\n        value: function(html) {\n            var body = this.body,\n                editorNS = kendo.ui.editor,\n                options = this.options,\n                currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n            if (html === undefined$1) {\n                return currentHtml;\n            }\n\n            if (html == currentHtml) {\n                return;\n            }\n\n            editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n            this.selectionRestorePoint = null;\n            this.update();\n            this._refreshTools();\n        },\n\n        _bindTools: function() {\n            var that = this,\n                defaultTools = this.tools;\n\n            that.unbind(\"select\", that.toolbar.resize.bind(that.toolbar));\n\n            that.toolbar.element.find(\"[data-command]\")\n                .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                .each((i, el) => {\n                    var toolName = el.getAttribute(\"data-command\"),\n                        tool = defaultTools[toolName];\n\n                    if (tool && tool.initialize) {\n                        tool.initialize($(el), that);\n                    }\n                });\n\n            that.bind(\"select\", that.toolbar.resize.bind(that.toolbar));\n        },\n\n        _blur: function() {\n            var textarea = this.textarea;\n            var old = textarea ? textarea.val() : this._oldValue;\n            var value = this.options.encoded ? this.encodedValue() : this.value();\n\n            this.update();\n\n            if (textarea) {\n                textarea.trigger(\"blur\");\n            }\n\n            if (value != old) {\n                this.trigger(\"change\");\n                if (textarea) {\n                    textarea.trigger(\"change\");\n                }\n            }\n        },\n\n        _containsRange: function(range) {\n            var dom = kendo.ui.editor.Dom;\n            var body = this.body;\n            return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                dom.isAncestorOrSelf(body, range.endContainer);\n        },\n\n        _createContentElement: function(stylesheets) {\n            var editor = this;\n            var iframe, wnd, doc;\n            var textarea = editor.textarea;\n            var specifiedDomain = editor.options.domain;\n            var domain = specifiedDomain || document.domain;\n            var domainScript = \"\";\n            var src = 'javascript:\"\"';\n            var lang = \"\";\n\n            textarea.hide();\n\n            iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n            $(iframe)\n                .css(\"display\", \"\")\n                .addClass(\"k-content k-iframe\")\n                .attr(\"tabindex\", textarea[0].tabIndex)\n                .insertBefore(textarea);\n\n            // automatically relax same-origin policy if document.domain != location.hostname,\n            // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n            if (specifiedDomain || domain != location.hostname) {\n                // relax same-origin policy\n                domainScript = `<script ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>document.domain=\"${domain}\"</script>`;\n                src = \"javascript:document.write('\" + domainScript + \"')\";\n                iframe.src = src;\n            }\n\n            if (!iframe.src) {\n                iframe.src = \"\";\n            }\n\n            wnd = iframe.contentWindow || iframe;\n            doc = wnd.document || iframe.contentDocument;\n\n            // https://github.com/telerik/kendo-ui-core/issues/7561\n            const observer = editor.interSectionObserver = new IntersectionObserver(entries => {\n                for (const entry of entries) {\n                    if (entry.isIntersecting) {\n                        editor._decorateFormatting(doc.body);\n                        observer.unobserve(iframe);\n                    }\n                }\n            });\n            observer.observe(iframe);\n\n            lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n            doc.open();\n            doc.write(\n                \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                \"<meta charset='utf-8' />\" +\n                \"<title>Kendo UI Editor content</title>\" +\n                `<style ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>` +\n                    \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                    \"body{padding:0;margin:0;}\" +\n                    \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                    \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                    (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                    (os.ios ? \"word-break:keep-all;\" : \"\") +\n                    (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                    \"}\" +\n                    \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                    \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                    \"ul,ol{padding-left:2.5em}\" +\n                    \"span{-ms-high-contrast-adjust:none;}\" +\n                    \"a{color:#00a}\" +\n                    \"code{font-size:1.23em}\" +\n                    \"telerik\\\\3Ascript{display: none;}\" +\n                    \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                    \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                    \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                    \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                    \".k-table p{margin:0;padding:0;}\" +\n                    \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                    \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                    \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                    \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                    \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                    \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                    \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                    \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                    \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                    \".k-table.k-element-resizing{opacity:0.6;}\" +\n                    \".k-placeholder{color:grey}\" +\n                    \"k\\\\:script{display:none;}\" +\n                \"</style>\" +\n                domainScript +\n                $.map(stylesheets, function(href) {\n                    return `<link rel='stylesheet' href='${href}' ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>`;\n                }).join(\"\") +\n                `</head><body id='${editor.element.attr(\"id\")}' autocorrect='off' contenteditable='true'></body></html>`\n            );\n            doc.close();\n\n            return wnd;\n        },\n\n        _deleteSavedRange: function() {\n            if (\"_range\" in this) {\n                delete this._range;\n            }\n        },\n\n        _decorateFormatting: function(body) {\n            var formattingElement = this.toolbar.element.find(\"input[data-command=formatting]\"),\n                dom = kendo.ui.editor.Dom,\n                component, dataSource, items, i, tag, className, style;\n\n            if (formattingElement.length) {\n                component = formattingElement.getKendoDropDownList();\n                if (!component) {\n                    return;\n                }\n                dataSource = component.dataSource;\n                items = dataSource.data();\n\n                if (body) {\n                    component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n                }\n\n                if (this.options.unsafeInline !== false) {\n\n                    for (i = 0; i < items.length; i++) {\n                        tag = items[i].tag || \"span\";\n                        className = items[i].className;\n\n                        style = dom.inlineStyle(body, tag, { className: className });\n                        style = style.replace(/\"/g, \"'\");\n\n                        items[i].style = style + \";display:inline-block\";\n                    }\n                }\n\n                dataSource.trigger(\"change\");\n            }\n        },\n\n        _appendFormattingMarksStyles: function() {\n            const that = this,\n                elementId = that.element.attr(\"id\");\n\n            let style, $head;\n\n            style = `<style id='${FORMATTING_MARKS_STYLE_ID + \"-\" + elementId}' ${that.options.nonce ? `nonce=\"${that.options.nonce}\"` : \"\" } >\n                #${elementId} p::after,\n                #${elementId} li::after,\n                #${elementId} h1::after,\n                #${elementId} h2::after,\n                #${elementId} h3::after,\n                #${elementId} h4::after,\n                #${elementId} h5::after,\n                #${elementId} h6::after {content: '\\\\00B6'; color: #6098f2;}\n                #${FORMATTING_MARKS_OVERLAY_WRAPPER_ID + \"-\" + elementId} {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    z-index: 9999;\n                    pointer-events: none;\n                }\n                #${FORMATTING_MARKS_OVERLAY_ID + \"-\" + elementId} {\n                    width: 100%;\n                    height: 100%;\n                  }\n            </style>`;\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + FORMATTING_MARKS_STYLE_ID + \"-\" + elementId).remove();\n            $head.append(style);\n        },\n\n        _appendFormattingMarksOverlay: function() {\n            const that = this,\n                elementId = that.element.attr(\"id\");\n\n            that._formattingMarksOverlayWrapper = $(`<div id='${FORMATTING_MARKS_OVERLAY_WRAPPER_ID + \"-\" + elementId}'></div>`);\n            that._formattingMarksOverlay = $(`<svg id='${FORMATTING_MARKS_OVERLAY_ID + \"-\" + elementId}'></svg>`).appendTo(that._formattingMarksOverlayWrapper);\n            that._bodyTopBottomPaddings = parseFloat($(that.body).css(\"padding-top\")) + parseFloat($(that.body).css(\"padding-bottom\"));\n\n            if (that._isInlineEditor()) {\n                that._formattingMarksOverlayWrapper.insertAfter(that.element);\n            } else {\n                that._formattingMarksOverlayWrapper.appendTo($(that.document).find(\"html\"));\n            }\n        },\n\n        _destroyFormattingMarksOverlay: function() {\n            const that = this,\n                elementId = that.element.attr(\"id\");\n\n            $(that.document).find(\"#\" + FORMATTING_MARKS_OVERLAY_WRAPPER_ID + \"-\" + elementId).remove();\n            $(that.document.head).find(\"#\" + FORMATTING_MARKS_STYLE_ID + \"-\" + elementId).remove();\n        },\n\n        _updateFormattingMarksOverlayHeight: function() {\n            const that = this;\n\n            if (that._isInlineEditor()) {\n                that._formattingMarksOverlayWrapper.height($(that.body).outerHeight());\n            } else {\n                that._formattingMarksOverlayWrapper.height(that.body.scrollHeight - that._bodyTopBottomPaddings);\n            }\n        },\n\n        _initInlineOverflowWrapper: function() {\n            const that = this,\n                inlineHeight = that.options.inlineHeight;\n\n            if (that._isInlineEditor() && inlineHeight > -1) {\n                that._inlineOverflowWrapper = that.element.wrap(`<div class='k-inline-editor-overflow-wrapper k-pos-relative k-overflow-auto'></div>`).parent();\n                that._inlineOverflowWrapper.height(inlineHeight);\n            }\n        },\n\n        _deregisterHandlers: function() {\n            var handlers = this._handlers;\n\n            for (var i = 0; i < handlers.length; i++) {\n                var h = handlers[i];\n                h.element.off(h.type, h.handler);\n            }\n\n            this._handlers = [];\n        },\n\n        _destroyUploadWidget: function() {\n            var editor = this;\n            if (editor._uploadWidget) {\n                editor._uploadWidget.destroy();\n                editor._uploadWidget = null;\n            }\n        },\n\n        _endTyping: function() {\n            var keyboard = this.keyboard;\n\n            try {\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                    this.saveSelection();\n                }\n            } catch (e) { }\n        },\n\n        _focusBody: function() {\n            var body = this.body;\n            var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n            var documentElement = this.document.documentElement;\n            var activeElement = kendo._activeElement();\n            var scrollTop;\n\n\n            if (!iframe && body.scrollHeight > body.clientHeight) {\n                scrollTop = body.scrollTop;\n                body.focus();\n                body.scrollTop = scrollTop;\n\n            } else if (activeElement != body && activeElement != iframe) {\n                scrollTop = documentElement.scrollTop;\n                body.focus();\n                documentElement.scrollTop = scrollTop;\n            }\n        },\n\n        _focusOutside: function() {\n            // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n            if (kendo.support.browser.msie && this.textarea) {\n                var tempInput = $(\"<input />\")\n                    .css({\n                        position: \"fixed\",\n                        left: \"1px\",\n                        top: \"1px\",\n                        width: \"1px\",\n                        height: \"1px\",\n                        \"font-size\": \"0\",\n                        border: \"0\",\n                        opacity: \"0\"\n                })\n                .appendTo(document.body).trigger(\"focus\");\n                tempInput.trigger(\"blur\").remove();\n            }\n        },\n\n        _handleToolbarClick: function(e) {\n            var toolName = e.target.data(\"command\");\n\n            if (toolName && toolName !== \"createTable\") {\n                this.exec(toolName);\n            }\n        },\n\n        _immutablesContext: function(range) {\n            var editorNS = kendo.ui.editor;\n\n            if (this.options.immutables) {\n                if (range.collapsed) {\n                    return editorNS.Immutables.immutablesContext(range);\n                } else {\n                    return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                }\n            }\n        },\n\n        _initializeContentElement: function() {\n            var editor = this;\n            var doc;\n            var blurTrigger;\n            var mousedownTrigger;\n\n            if (editor.textarea) {\n                editor.window = editor._createContentElement(editor.options.stylesheets);\n                doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                // https://github.com/telerik/kendo-ui-core/issues/3515\n                if (!doc.body) {\n                    var body = doc.createElement(\"body\");\n                    body.setAttribute(\"contenteditable\", \"true\");\n                    body.setAttribute(\"autocorrect\", \"off\");\n                    doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                    var interval = setInterval(function() {\n                        if ($(editor.document).find(\"body\").length > 1) {\n                            $(editor.document).find(\"body\").last().remove();\n                            window.clearInterval(interval);\n                        }\n                    },10);\n                }\n\n                editor.body = doc.body;\n\n                blurTrigger = editor.window;\n                mousedownTrigger = doc;\n\n                this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n            } else {\n                editor.window = window;\n                doc = editor.document = document;\n                editor.body = editor.element[0];\n\n                blurTrigger = editor.body;\n                mousedownTrigger = editor.body;\n\n                setTimeout(() => {\n                    editor._decorateFormatting(editor.body);\n                });\n            }\n\n            this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n            editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n            try {\n                doc.execCommand(\"enableInlineTableEditing\", null, false);\n            } catch (e) { }\n\n            if (kendo.support.touch) {\n                this._registerHandler(doc, {\n                    \"keydown\": function() {\n                        // necessary in iOS when touch events are bound to the page\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    }\n                });\n            }\n\n            this._initializePlaceholder();\n\n            this._spellCorrect(editor);\n\n            this._registerHandler(editor.document, {\n                \"mouseover dragenter\": function(e) {\n                    var height = $(editor.body).height();\n                    var htmlHeight = $(editor.body.parentElement).height();\n\n                    if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                        editor._cachedHeight = \"\" + editor.body.style.height;\n                        editor.body.style.height = \"100%\";\n                    }\n                },\n                \"mouseout dragleave drop contextmenu\": function(e) {\n                    var restoreHeight = function() {\n                        if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                            editor.body.style.height = editor._cachedHeight;\n                            delete editor._cachedHeight;\n                        }\n                    };\n\n                    if (e.type === \"contextmenu\") {\n                        setTimeout(function() {\n                            restoreHeight();\n                        }, 10);\n                    } else {\n                        restoreHeight();\n                    }\n\n                }\n            });\n\n            this._registerHandler(editor.body, {\n                \"keydown\": function(e) {\n                    var range;\n\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                        return false;\n                    }\n\n                    if (e.keyCode === keys.F10) {\n                        editor.toolbar.element.find(\"[tabindex=0]\").first().trigger(\"focus\");\n                        editor.toolbar.preventPopupHide = true;\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        // skip bom nodes when navigating with arrows\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? \"startContainer\" : \"endContainer\"];\n                        var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                        var direction = left ? -1 : 1;\n\n                        var next = offset + direction;\n                        var nextChar = left ? next : offset;\n\n                        if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                            range.setStart(container, next);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n\n                    var tools = editor.tools;\n                    var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                    var toolOptions = toolName ? tools[toolName].options : {};\n\n                    if (toolName && !toolOptions.keyPressCommand) {\n                        e.preventDefault();\n\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n\n                        editor.trigger(\"keydown\", e);\n                        editor.exec(toolName);\n                        editor._runPostContentKeyCommands(e);\n\n                        return false;\n                    }\n\n                    editor.keyboard.clearTimeout();\n\n                    editor.keyboard.keydown(e);\n                },\n                \"keypress\": function(e) {\n                    setTimeout(function() {\n                        editor._runPostContentKeyCommands(e);\n                        editor._showElementResizeHandles();\n                    }, 0);\n                },\n                \"keyup\": function(e) {\n                    var selectionCodes = [\n                       keys.BACKSPACE,\n                       keys.TAB,\n                       keys.PAGEUP,\n                       keys.PAGEDOWN,\n                       keys.END,\n                       keys.HOME,\n                       keys.LEFT,\n                       keys.UP,\n                       keys.RIGHT,\n                       keys.DOWN,\n                       keys.INSERT,\n                       keys.DELETE\n                    ];\n\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                        window.clearTimeout(this._refreshInterval);\n                        this._refreshInterval = window.setTimeout(function() {\n                            editor._selectionChange();\n                        }, REFRESH_INTERVAL);\n                    }\n\n                    if (e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) {\n                        editor._handleSpaceAndNewLines();\n                    }\n\n                    editor.keyboard.keyup(e);\n                },\n                \"click\": function(e) {\n                    var dom = kendo.ui.editor.Dom, range;\n\n                    if (dom.name(e.target) === \"img\") {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                },\n                \"cut copy paste drop dragover\": function(e) {\n                    editor.clipboard[\"on\" + e.type](e);\n                    editor._handleSpaceAndNewLines();\n                },\n                \"focusin\": function() {\n                    if (editor.body.hasAttribute(\"contenteditable\")) {\n                        $(this).addClass(\"k-active\");\n                        // To be moved to the Editor\n                        editor._showWindow();\n                        editor._togglePlaceholder(false);\n                    }\n                },\n                \"focusout\": function() {\n                    setTimeout(function() {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        // All below to be moved to the Editor\n                        var toolbar = editor.toolbar;\n\n                        if (toolbar.options.popup) {\n                            var toolbarContainerElement = editor.windowInstance.element.get(0);\n                            if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                toolbar.preventPopupHide = false;\n                            }\n                        }\n\n                        if (active != body && !$.contains(body, active) && !editor._toolbarFocused() && !toolbar.preventPopupHide && !$(active).hasClass(\"k-context-menu\") && !$(active).hasClass(\"k-colorpalette\")) {\n                            $(body).removeClass(\"k-active\");\n                            editor._hideWindow();\n                        }\n\n                        editor._togglePlaceholder(!editor.value().trim());\n                    }, 10);\n                }\n            });\n\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n\n        _initializeImmutables: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            if (that.options.immutables) {\n                that.immutables = new editorNS.Immutables(that);\n            }\n        },\n\n        _initializePlaceholder: function() {\n            var that = this,\n                placeholder = that.options.placeholder,\n                style, $head;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            style = `<style id='${PLACEHOLDER_TAG_ID}' ${that.options.nonce ? `nonce=\"${that.options.nonce}\"` : \"\" } >.` +\n                        PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                    \"</style>\";\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n            $head.append(style);\n\n            that._togglePlaceholder(!that.value().trim());\n        },\n\n        _initToolbar: function(toolbarContainer) {\n            var that = this,\n                tools, defaults, toolbarOptions;\n\n            that.tools = [];\n            [tools, defaults] = that._processToolbarItems(that.options.tools);\n            that._setNativeTools();\n\n            toolbarOptions = {\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: that.options.messages,\n                resizable: that.options.resizable && that.options.resizable.toolbar,\n                toggle: that._handleToolbarClick.bind(this),\n                click: that._handleToolbarClick.bind(this),\n                navigateOnTab: that.options.navigateOnTab,\n                evaluateTemplates: true\n            };\n\n            that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n            that._bindTools();\n            that.bind(\"select\", that._refreshTools.bind(that));\n\n            toolbarContainer.on(\"mousedown\" + NS, \"[ref-toolbar-tool]\", function(e) {\n                if (!$(e.target).is(\"input\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if (!that.textarea) {\n                that._initToolbarWindow(toolbarContainer);\n            }\n        },\n\n        _initToolbarWindow: function(toolbarEl) {\n            var that = this;\n\n            this.windowInstance = toolbarEl\n                .wrap(\"<div class='editorToolbarWindow k-editor-window' />\")\n                .parent()\n                .prepend(\"<span class='k-editortoolbar-dragHandle'>\" + kendo.ui.icon(\"handle-drag\") + \"</span>\")\n                .kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: {\n                        dragHandle: \".k-editortoolbar-dragHandle\"\n                    },\n                    animation: {\n                        open: { effects: \"fade:in\" },\n                        close: { effects: \"fade:out\" }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function() {\n                        this._moved = true;\n                    }\n                })\n                .on(\"mousedown\", function(e) {\n                    if (!$(e.target).is(TOOLBAR_ALLOWED_CLOSE_SELECTORS)) {\n                        that.toolbar.preventPopupHide = true;\n                    }\n                })\n                .on(\"focusout\", function() {\n                    that.element.focusout();\n                })\n                .data(\"kendoWindow\");\n        },\n\n        _mousedown: function(e) {\n            var editor = this;\n            editor._selectionStarted = true;\n\n            if ($(editor.body).parents('.k-window').length) {\n                e.stopPropagation();\n            }\n\n            // handle middle-click and ctrl-click on links\n            if (browser.gecko) {\n                return;\n            }\n\n            var target = $(e.target).closest(\"a[href]\");\n\n            if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                window.open(target.attr(\"href\"), \"_new\");\n            }\n\n            if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                setTimeout(function() {\n                    editor.body.focus();\n                }, 0);\n            }\n        },\n\n        _mouseup: function(e) {\n            var that = this;\n\n            if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                return;\n            }\n\n            if (that._selectionStarted) {\n                setTimeout(function() {\n                    that._selectionChange();\n                }, 1);\n            }\n        },\n\n        _populateValue: function(options, domElement) {\n            var that = this,\n                editorNS = kendo.ui.editor,\n                dom = editorNS.Dom,\n                value, comments;\n\n            if (options && options.value) {\n                value = options.value;\n            } else if (that.textarea) {\n                // indented HTML introduces problematic ranges in IE\n                value = domElement.value;\n\n                if (!value.replace(/\\s/g, '').length) {\n                    value = value.replace(/\\s/g, '');\n                }\n\n                // revert encoding of value when content is fetched from cache\n                if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                    value = domElement.defaultValue;\n                }\n\n                var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                comments = dom.getAllComments(deserializedRoot);\n                value = EditorUtils.cacheComments(value, comments);\n                value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                value = EditorUtils.retrieveComments(value, comments);\n            } else {\n                value = domElement.innerHTML;\n            }\n\n            that.value(value || '\\ufeff');\n        },\n\n        _resetGroups: function(current) {\n            var result = {};\n\n            Object.keys(current).map(key => {\n                result[key + \"_\"] = current[key];\n            });\n\n            return result;\n        },\n\n        _processToolbarItems: function(optionsTools) {\n            var flatDefaultTools = {},\n                processedObject = {},\n                tools = [],\n                currentGroups = $.extend(true, {}, toolGroups),\n                i, j, t, name, guidGroupName;\n\n            for (i = 0; i < optionsTools.length; i++) {\n                t = optionsTools[i];\n\n                if (Array.isArray(t)) {\n                    guidGroupName = kendo.guid();\n\n                    for (j = 0; j < t.length; j++) {\n                        [flatDefaultTools, name] = this._processToolOptions(t[j], flatDefaultTools);\n\n                        if (!name) {\n                            continue;\n                        }\n\n                        flatDefaultTools[name].gr = guidGroupName;\n                    }\n                } else {\n                    [flatDefaultTools, name] = this._processToolOptions(t, flatDefaultTools);\n\n                    if (!name) {\n                        continue;\n                    } else if (name === \"separator\") {\n                        currentGroups = this._resetGroups(currentGroups);\n                    }\n\n                    Object.keys(currentGroups).map(key => {\n                        var group = currentGroups[key];\n\n                        if (group.includes(name)) {\n                            flatDefaultTools[name].gr = key;\n                        }\n                    });\n                }\n            }\n\n            Object.values(flatDefaultTools).map((tool) => {\n                var group = tool.gr;\n\n                delete tool.gr;\n\n                if (group === undefined$1) {\n                    processedObject[tool.name] = tool;\n                } else {\n                    if (!processedObject[group]) {\n                        processedObject[group] = [];\n                    }\n\n                    processedObject[group].push(tool);\n                }\n            });\n\n            tools = Object.values(processedObject).map((g) => {\n                var result;\n\n                if (g.length) {\n                    result = g.map((to) => to.name);\n                } else {\n                    result = g.name;\n                }\n\n                if (result.length === 1) {\n                    result = result[0];\n                }\n\n                return result;\n            });\n\n            return [tools, flatDefaultTools];\n        },\n\n        _processDefaultTool: function(tool, defaultTools) {\n            var name = tool.name,\n                result = {},\n                options;\n\n            if ($.isPlainObject(tool)) {\n                if (name && defaultTools[name]) {\n                    // configured tool\n                    result = extend({}, defaultTools[name]);\n                    extend(result.options, tool);\n                } else {\n                    // custom tool\n                    options = extend({ icon: \"gear\", type: \"button\" }, tool);\n\n                    if (!options.name) {\n                        options.name = \"custom\";\n                    }\n\n                    options.cssClass = \"k-\" + options.name;\n\n                    result = {\n                        options: options\n                    };\n\n                    name = options.name;\n                }\n            } else if (defaultTools[tool]) {\n                name = tool;\n                result = defaultTools[name];\n            } else {\n                return null;\n            }\n\n            this.tools[name] = result;\n\n            return result;\n        },\n\n        _processToolOptions: function(t, flatDefaultTools) {\n            var that = this,\n                defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                tool, name, view, shortcuts, options, uiOptions, icon, toolOptions, originalOptions, palette;\n\n            tool = this._processDefaultTool(t, defaultTools);\n\n            if (!tool) {\n                return [flatDefaultTools, null];\n            }\n\n            options = tool.options;\n            name = options.name;\n            uiOptions = options.ui || {};\n            icon = EditorUtils.getToolCssClass(options.name, options.icon);\n\n            // We want to preserve any custom properties from the original tool object.\n            originalOptions = $.isPlainObject(t) ? $.extend({}, t) : {};\n            delete originalOptions.items;\n\n            toolOptions = $.extend({\n                name: options.name,\n                command: options.command,\n                template: options.template,\n                type: \"button\",\n                icon: icon,\n                showText: \"overflow\",\n                showIcon: \"both\"\n            }, uiOptions, originalOptions);\n\n            if (options.tooltip) {\n                if (!toolOptions.attributes) {\n                    toolOptions.attributes = {};\n                }\n\n                toolOptions.attributes.title = options.tooltip;\n            }\n            if (options.exec) {\n                toolOptions.click = options.exec.bind(that);\n                delete toolOptions.exec;\n            }\n\n            if (toolOptions.component === \"ColorPicker\") {\n                if (options.palette !== undefined$1 || uiOptions.palette !== kendo.ui.editor.ColorTool.fn.options.palette) {\n                    palette = options.palette || kendo.ui.editor.ColorTool.fn.options.palette;\n                    view = options.palette !== undefined$1 && !options.palette ? \"gradient\" : \"palette\";\n                    toolOptions.componentOptions.palette = view === \"palette\" ? palette : undefined$1;\n                    toolOptions.componentOptions.views = [view];\n                    toolOptions.componentOptions.preview = view === \"gradient\";\n                    toolOptions.componentOptions.input = view === \"gradient\";\n                    toolOptions.componentOptions.buttons = view === \"gradient\";\n\n                    if (view === \"gradient\") {\n                        delete toolOptions.componentOptions.columns;\n                    }\n                }\n                if (view === \"palette\" && options.columns) {\n                    toolOptions.componentOptions.columns = options.columns;\n                }\n            }\n\n            if (toolOptions.component === \"DropDownList\" || toolOptions.component === \"ComboBox\") {\n                if (!toolOptions.componentOptions) {\n                    toolOptions.componentOptions = {};\n                }\n\n                if (!toolOptions.componentOptions.dataSource) {\n                    if (that.options[name] && Array.isArray(that.options[name])) {\n                        toolOptions.componentOptions.dataSource = that.options[name];\n                    } else {\n                        toolOptions.componentOptions.dataSource = options.items;\n                    }\n                }\n            }\n            if (toolOptions.template) {\n                delete toolOptions.type;\n            }\n\n            shortcuts = this._shortcutSequence(name);\n\n            if (shortcuts !== \"\") {\n                if (!toolOptions.attributes) {\n                    toolOptions.attributes = {};\n                }\n\n                toolOptions.attributes[\"aria-keyshortcuts\"] = shortcuts;\n            }\n\n            flatDefaultTools[name] = toolOptions;\n\n            return [flatDefaultTools, name];\n        },\n\n        _refreshTools: function() {\n            var that = this,\n                range = that.getRange(),\n                editorNS = kendo.ui.editor,\n                rangeUtils = editorNS.RangeUtils,\n                nodes = rangeUtils.textNodes(range),\n                immutables = that.options.immutables,\n                immutablesContext = that._immutablesContext(range),\n                defaultTools = that.tools;\n\n            nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n            if (!nodes.length) {\n                nodes = [range.startContainer];\n            }\n\n            that.toolbar.element.find(\"[data-command]\")\n                .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                .each(function() {\n                    var toolName = this.getAttribute(\"data-command\"),\n                        tool = defaultTools[toolName],\n                        ui;\n\n                    if (tool) {\n                        ui = $(this);\n\n                        if (tool.update) {\n                            tool.update(ui, nodes, that.undoRedoStack);\n                        }\n\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n        },\n\n        _registerHandler: function(element, type, handler) {\n            var editor = this;\n            var NS = \".kendoEditor\";\n            var eventNames;\n            var i;\n\n            element = $(element);\n\n            if (!this._handlers) {\n                this._handlers = [];\n            }\n\n            if (element.length) {\n                if ($.isPlainObject(type)) {\n                    for (var t in type) {\n                        if (type.hasOwnProperty(t)) {\n                            this._registerHandler(element, t, type[t]);\n                        }\n                    }\n                } else {\n                    //map the original event to handle interaction on mobile platforms\n                    eventNames = kendo.applyEventMap(type).split(\" \");\n\n                    for (i = 0; i < eventNames.length; i++) {\n                        editor._handlers.push({\n                            element: element,\n                            type: eventNames[i] + NS,\n                            handler: handler\n                        });\n\n                        element.on(eventNames[i] + NS, handler);\n                    }\n                }\n            }\n        },\n\n        _runPostContentKeyCommands: function(e) {\n            var range = this.getRange();\n            var tools = this.keyboard.toolsFromShortcut(this.tools, e);\n\n            for (var i = 0; i < tools.length; i++) {\n                var tool = tools[i];\n                var o = tool.options;\n                if (!o.keyPressCommand) {\n                    continue;\n                }\n\n                var cmd = new o.command({ range: range });\n                if (cmd.changesContent()) {\n                    this.keyboard.endTyping(true);\n                    this.exec(tool.name);\n                }\n            }\n\n            this._handleSpaceAndNewLines();\n        },\n\n        _handleSpaceAndNewLines: function() {\n            const that = this,\n                refreshDelay = that.options.formattingMarksRefreshDelay,\n                editorNS = kendo.ui.editor,\n                applyFormattingMarks = editorNS.applyFormattingMarks,\n                clearFormattingMarksOverlay = editorNS.clearFormattingMarksOverlay;\n\n            if (that._toggledFormattingMarks) {\n                if (that._formattingMarksOverlay.children().length) {\n                    clearFormattingMarksOverlay(that);\n                }\n\n                if (refreshDelay) {\n                    clearTimeout(that._formattingMarksTimeout);\n                    that._formattingMarksTimeout = setTimeout(() => applyFormattingMarks(that), refreshDelay);\n                } else {\n                    applyFormattingMarks(that);\n                }\n\n            }\n        },\n\n        _selectionChange: function() {\n            this._selectionStarted = false;\n            this.saveSelection();\n            this.trigger(\"select\", {});\n        },\n\n        _setOptionsTools: function(optionsTools) {\n            var that = this,\n                toolbar = that.toolbar,\n                toolbarContainer = toolbar.element,\n                tools, defaults, toolbarOptions;\n\n            toolbar.destroy();\n            toolbarContainer.empty();\n\n            that.tools = [];\n            [tools, defaults] = that._processToolbarItems(optionsTools);\n            that._setNativeTools();\n\n            toolbarOptions = {\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: that.options.messages,\n                resizable: that.options.resizable && that.options.resizable.toolbar,\n                toggle: that._handleToolbarClick.bind(this),\n                click: that._handleToolbarClick.bind(this)\n            };\n\n            that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n            that._bindTools();\n        },\n\n        _setNativeTools: function() {\n            var defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                i;\n\n            for (i = 0; i < NATIVE_TOOLS.length; i++) {\n                if (!this.tools[NATIVE_TOOLS[i]]) {\n                    this.tools[NATIVE_TOOLS[i]] = defaultTools[NATIVE_TOOLS[i]];\n                }\n            }\n        },\n\n        _setupHeight: function(type) {\n            var that = this;\n\n            if (type == \"textarea\") {\n                setTimeout(function() {\n                    var heightStyle = that.wrapper[0].style.height;\n                    var expectedHeight = parseInt(heightStyle, 10);\n                    var actualHeight = that.wrapper.height();\n                    if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                        that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                    }\n                });\n            }\n        },\n\n        _setupKeyboard: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            that.keyboard = new editorNS.Keyboard([\n                new editorNS.BackspaceHandler(that),\n                new editorNS.TypingHandler(that),\n                new editorNS.SystemHandler(that),\n                new editorNS.SelectAllHandler(that)\n            ]);\n        },\n\n        _setupType: function(element) {\n            var domElement = element[0],\n                type = kendo.ui.editor.Dom.name(domElement),\n                id = domElement.id,\n                toolbarContainer;\n\n            if (!id) {\n                id = kendo.guid();\n                domElement.setAttribute(\"id\", id);\n            }\n\n            if (type == \"textarea\") {\n                this._wrapTextarea();\n\n                toolbarContainer = this.wrapper.find(\".k-editor-toolbar\");\n                toolbarContainer.attr(\"aria-controls\", id);\n            } else {\n                $(domElement).attr(\"contenteditable\", true).addClass(\"k-editor k-editor-inline\");\n                toolbarContainer = $('<div class=\"k-editor-toolbar\"/>').insertBefore(element);\n            }\n\n            return toolbarContainer;\n        },\n\n        _isInlineEditor: function() {\n            return this.element.hasClass(\"k-editor-inline\");\n        },\n\n        _shortcutSequence: function(name) {\n            var tool = kendo.ui.Editor.defaultTools[name],\n                res = \"\",\n                options;\n\n            if (!tool || !tool.options) {\n                return res;\n            }\n\n            options = tool.options;\n\n            if (options.ctrl) {\n                res += \"Ctrl+\";\n            }\n\n            if (options.shift) {\n                res += \"Shift+\";\n            }\n\n            if (options.alt) {\n                res += \"Alt+\";\n            }\n\n            if (options.key) {\n                res += options.key;\n            }\n\n            return res;\n        },\n\n        _spellCorrect: function(editor) {\n            var beforeCorrection;\n            var falseTrigger = false;\n\n            this._registerHandler(editor.body, {\n                \"contextmenu\": function() {\n                    editor.one(\"select\", function() {\n                        beforeCorrection = null;\n                    });\n\n                    editor._spellCorrectTimeout = setTimeout(function() {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                        falseTrigger = false;\n                    }, 10);\n                },\n                \"input\": function() {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                }\n            });\n        },\n\n        _togglePlaceholder: function(show) {\n            var that = this,\n                body = that.body,\n                $body = $(body),\n                placeholder = that.options.placeholder;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            $body.attr('aria-label', function() {\n                return show ? placeholder : \"\";\n            });\n\n            $body.toggleClass(PLACEHOLDER_CLASS, show);\n        },\n\n        _toolbarFocused: function() {\n            var active = kendo._activeElement(),\n                popup = this.windowInstance,\n                overflowPopup = this.overflowPopup;\n\n            return (popup && $(active).closest(popup.wrapper).length) ||\n                (overflowPopup && overflowPopup.visible());\n        },\n\n        _updateImmutablesState: function(tool, ui, immutablesContext) {\n            var toolbar = this.toolbar,\n                name = tool.name,\n                uiElement = ui.closest(\"[ref-toolbar-tool]\"),\n                trackImmutables = tool.options.trackImmutables,\n                editorNS = kendo.ui.editor;\n\n            if (trackImmutables === undefined$1) {\n                trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n            }\n\n            if (trackImmutables) {\n                if (immutablesContext) {\n                    toolbar.hide(uiElement);\n                } else {\n                    toolbar.show(uiElement);\n                }\n            }\n        },\n\n        _wrapTextarea: function() {\n            var that = this,\n                textarea = that.element,\n                w = textarea[0].style.width,\n                h = textarea[0].style.height,\n                template = EditorUtils.editorWrapperTemplate(),\n                editorWrap = $(template).insertBefore(textarea),\n                editArea = editorWrap.find(\".k-editable-area\");\n\n            editorWrap.css({\n                \"width\": w,\n                \"height\": h\n            });\n\n            textarea.attr(\"autocomplete\", \"off\")\n                .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n            that.textarea = textarea;\n            that.wrapper = editorWrap;\n        },\n\n        // Resizing methods\n        _resizable: function() {\n            let that = this;\n            let resizable = this.options.resizable;\n            let isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n            let resizableMin = $.isPlainObject(resizable.min) ? resizable.min : { minHeight: resizable.min };\n            let resizableMax = $.isPlainObject(resizable.max) ? resizable.max : { maxHeight: resizable.max };\n\n            if (isResizable && this.textarea) {\n                that.wrapper.addClass('k-editor-resizable');\n\n                if (resizableMin.minHeight) {\n                    that.wrapper.css(\"min-height\", resizableMin.minHeight);\n                }\n\n                if (resizableMax.maxHeight) {\n                    that.wrapper.css(\"max-height\", resizableMax.maxHeight);\n                }\n\n                if (resizableMin.minWidth) {\n                    that.wrapper.css(\"min-width\", resizableMin.minWidth);\n                }\n\n                if (resizableMax.maxWidth) {\n                    that.wrapper.css(\"max-width\", resizableMax.maxWidth);\n                }\n\n                that.resizeObserver = new ResizeObserver(() => {\n                    clearTimeout(that._resizeTimeOut);\n\n                    that._resizeTimeOut = setTimeout(function() {\n                        that.toolbar.resize();\n                        that._handleSpaceAndNewLines();\n                    }, 50);\n\n                });\n                that.resizeObserver.observe(that.wrapper[0]);\n            }\n        },\n\n        _destroyResizings: function() {\n            var editor = this;\n\n            editor._destroyElementResizing();\n            kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n            editor._destroyRowResizing();\n            kendo.ui.editor.RowResizing.dispose(editor);\n            editor._destroyColumnResizing();\n            kendo.ui.editor.ColumnResizing.dispose(editor);\n        },\n\n        _initializeElementResizing: function() {\n            var editor = this;\n\n            kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n            editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n            editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n        },\n\n        _destroyElementResizing: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing) {\n                elementResizing.destroy();\n                editor.elementResizing = null;\n            }\n\n            if (editor._showElementResizeHandlesProxy) {\n                editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n            }\n        },\n\n        _showElementResizeHandles: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                elementResizing.showResizeHandles();\n            } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                editor._destroyElementResizing();\n            }\n        },\n\n        _initializeColumnResizing: function() {\n            kendo.ui.editor.ColumnResizing.create(this);\n        },\n\n        _destroyColumnResizing: function() {\n            var editor = this;\n\n            if (editor.columnResizing) {\n                editor.columnResizing.destroy();\n                editor.columnResizing = null;\n            }\n        },\n\n        _initializeRowResizing: function() {\n            kendo.ui.editor.RowResizing.create(this);\n        },\n\n        _destroyRowResizing: function() {\n            var editor = this;\n\n            if (editor.rowResizing) {\n                editor.rowResizing.destroy();\n                editor.rowResizing = null;\n            }\n        },\n\n        // ToolBar Window methods\n        _getWindowWidth: function() {\n            var that = this,\n                wrapper = that.windowInstance.wrapper,\n                editorElement = that.element;\n\n            return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n        },\n\n        _hideWindow: function() {\n            if (this.windowInstance) {\n                this.windowInstance.close();\n            }\n        },\n\n        _overlapsWindow: function(box) {\n            var toolbarWrapper = this.windowInstance.wrapper,\n                toolbarWrapperOffset = toolbarWrapper.offset(),\n                toolbarWrapperLeft = toolbarWrapperOffset.left,\n                toolbarWrapperTop = toolbarWrapperOffset.top,\n                boxOffset = box.offset(),\n                boxOffsetLeft = boxOffset.left,\n                boxOffsetTop = boxOffset.top;\n\n            return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                    boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                    boxOffsetTop + box.height() < toolbarWrapperTop ||\n                    boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n        },\n\n        _showWindow: function() {\n            var that = this,\n                windowInstance = that.windowInstance,\n                wrapper, editorElement, editorOffset,\n                browser = kendo.support.browser;\n\n            if (windowInstance) {\n                wrapper = windowInstance.wrapper;\n                editorElement = that.element;\n\n                if (!wrapper.is(\":visible\") || !that.windowInstance.options.visible) {\n\n                    if (!wrapper[0].style.width) {\n                        wrapper.width(this._getWindowWidth());\n                    }\n\n                    // track content position when other parts of page change\n                    if (!windowInstance._moved) {\n                        editorOffset = editorElement.offset();\n                        wrapper.css({\n                            top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.windowInstance.element.css(\"padding-bottom\"), 10)),\n                            left: Math.max(0, parseInt(editorOffset.left, 10))\n                        });\n                    }\n\n                    if ((browser.msie || browser.edge) && that._overlapsWindow(editorElement)) {\n                        setTimeout(function() {\n                            windowInstance.open();\n                        }, 0);\n                    } else {\n                        windowInstance.open();\n                    }\n                }\n            }\n        }\n    });\n\n    Editor.defaultTools = {};\n\n    kendo.ui.plugin(Editor);\n\n    var Tool = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        command: function(commandArguments) {\n            return new this.options.command(commandArguments);\n        },\n\n        update: $.noop\n    });\n\n    Tool.exec = function(editor, name, value) {\n        editor.exec(name, { value: value });\n    };\n\n    var UndoTool = Tool.extend({\n        command: $.noop,\n        update: function(ui, nodes, undoRedoStack) {\n            var that = this,\n                name = that.options.name,\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n            switch (name) {\n                case \"undo\":\n                    toolbar.enable(ui, undoRedoStack.canUndo());\n                    break;\n                case \"redo\":\n                    toolbar.enable(ui, undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n            }\n\n            ui.removeAttr(\"disabled\");\n        }\n    });\n\n    EditorUtils.registerTool(\"separator\", new Tool({ ui: { type: \"separator\" } }));\n    EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true }));\n    EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true }));\n\n    // Exports ================================================================\n\n    var emptyElementContent = '\\ufeff';\n    var emptyTableCellContent = emptyElementContent;\n\n    if (browser.msie || browser.edge) {\n        emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n    }\n\n    extend(kendo.ui, {\n        editor: {\n            EditorUtils: EditorUtils,\n            Tool: Tool,\n            emptyElementContent: emptyElementContent,\n            emptyTableCellContent: emptyTableCellContent\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Editor.prototype);\n        Editor.prototype._drawPDF = function() {\n            return kendo.drawing.drawDOM(this.body, this.options.pdf);\n        };\n        Editor.prototype.saveAsPDF = function() {\n            var progress = new $.Deferred();\n            var promise = progress.promise();\n            var args = { promise: promise };\n\n            if (this.trigger(\"pdfExport\", args)) {\n                return;\n            }\n\n            var options = this.options.pdf;\n\n            this._drawPDF(progress)\n            .then(function(root) {\n                return kendo.drawing.exportPDF(root, options);\n            })\n            .done(function(dataURI) {\n                kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL,\n                    proxyTarget: options.proxyTarget,\n                    forceProxy: options.forceProxy\n                });\n                progress.resolve();\n            })\n            .fail(function(err) {\n                progress.reject(err);\n            });\n\n            return promise;\n        };\n    }\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    map = $.map,\n    extend = $.extend,\n    browser = kendo.support.browser,\n    STYLE = \"style\",\n    FLOAT = \"float\",\n    CSSFLOAT = \"cssFloat\",\n    STYLEFLOAT = \"styleFloat\",\n    CLASS = \"class\",\n    KMARKER = \"k-marker\";\n\nfunction makeMap(items) {\n    var obj = {},\n        i, len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n        obj[items[i]] = true;\n    }\n    return obj;\n}\n\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n    nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n    blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n    block = makeMap(blockElements),\n    selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n    inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n    inline = makeMap(inlineElements),\n    fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n    nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\nvar normalize = function(node) {\n    if (node.nodeType == 1) {\n        node.normalize();\n    }\n};\n\nif (browser.msie && browser.version >= 8) {\n    normalize = function(parent) {\n        if (parent.nodeType == 1 && parent.firstChild) {\n            var prev = parent.firstChild,\n                node = prev;\n\n            normalize(node);\n\n            while (true) {\n                node = node.nextSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                normalize(node);\n\n                if (node.nodeType == 3 && prev.nodeType == 3) {\n                    node.nodeValue = prev.nodeValue + node.nodeValue;\n                    Dom.remove(prev);\n                }\n\n                prev = node;\n            }\n        }\n    };\n}\n\nvar whitespace = /^\\s+$/,\n    emptyspace = /^[\\n\\r\\t]+$/,\n    rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n    bom = /\\ufeff/g,\n    whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n    persistedScrollTop,\n    cssAttributes =\n           (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n            \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n            \"border-top-style,border-top-width,border-top-color,\" +\n            \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n            \"border-left-style,border-left-width,border-left-color,\" +\n            \"border-right-style,border-right-width,border-right-color,\" +\n            \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n           ).split(\",\"),\n    htmlRe = /[<>&]/g,\n    entityRe = /[\\u00A0-\\u2666<>&]/g,\n    entityTable = {\n            34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n            160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n            165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n            170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n            175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n            180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n            185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n            190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n            195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n            200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n            205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n            210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n            215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n            220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n            225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n            230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n            235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n            240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n            245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n            250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n            255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n            916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n            921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n            926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n            932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n            937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n            949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n            954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n            959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n            964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n            969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n            8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n            8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n            8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n            8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n            8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n            8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n            8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n            8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n            8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n            8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n            8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n            8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n            8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n            9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n            338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n            710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n            8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n            8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n            8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n            8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n        };\n\nvar Dom = {\n    block: block,\n    inline: inline,\n\n    findNodeIndex: function(node, skipText) {\n        var i = 0;\n\n        if (!node) {\n            return -1;\n        }\n\n        while (true) {\n            node = node.previousSibling;\n\n            if (!node) {\n                break;\n            }\n\n            if (!(skipText && node.nodeType == 3)) {\n                i++;\n            }\n        }\n\n        return i;\n    },\n\n    isDataNode: function(node) {\n        return node && node.nodeValue !== null && node.data !== null;\n    },\n\n    isAncestorOf: function(parent, node) {\n        try {\n            return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    isAncestorOrSelf: function(root, node) {\n        return Dom.isAncestorOf(root, node) || root == node;\n    },\n\n    findClosestAncestor: function(root, node) {\n        if (Dom.isAncestorOf(root, node)) {\n            while (node && node.parentNode != root) {\n                node = node.parentNode;\n            }\n        }\n\n        return node;\n    },\n\n    getAllComments: function(rootElem) {\n        var comments = [];\n        // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n        var iterator = document.createNodeIterator(rootElem,\n            NodeFilter.SHOW_COMMENT,\n            function() {\n                return NodeFilter.FILTER_ACCEPT;\n            }, false);\n\n        var curNode = iterator.nextNode();\n        while (curNode) {\n            comments.push(curNode.nodeValue);\n            curNode = iterator.nextNode();\n        }\n        return comments;\n    },\n\n    getNodeLength: function(node) {\n        return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n    },\n\n    splitDataNode: function(node, offset) {\n        var newNode = node.cloneNode(false);\n        var denormalizedText = \"\";\n        var iterator = node.nextSibling;\n        var temp;\n\n        while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n            denormalizedText += iterator.nodeValue;\n            temp = iterator;\n            iterator = iterator.nextSibling;\n            Dom.remove(temp);\n        }\n\n        node.deleteData(offset, node.length);\n        newNode.deleteData(0, offset);\n        newNode.nodeValue += denormalizedText;\n        Dom.insertAfter(newNode, node);\n    },\n\n    attrEquals: function(node, attributes) {\n        for (var key in attributes) {\n            var value = node[key];\n\n            if (key == FLOAT) {\n                value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n            }\n\n            if (typeof value == \"object\") {\n                if (!Dom.attrEquals(value, attributes[key])) {\n                    return false;\n                }\n            } else if (value != attributes[key]) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    blockParentOrBody: function(node) {\n        return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n    },\n\n    blockParents: function(nodes) {\n        var blocks = [],\n            i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n            if (block && $.inArray(block, blocks) < 0) {\n                blocks.push(block);\n            }\n        }\n\n        return blocks;\n    },\n\n    windowFromDocument: function(document) {\n        return document.defaultView || document.parentWindow;\n    },\n\n    normalize: normalize,\n    blockElements: blockElements,\n    nonListBlockElements: nonListBlockElements,\n    inlineElements: inlineElements,\n    empty: empty,\n    fillAttrs: fillAttrs,\n    nodeTypes: {\n        ELEMENT_NODE: 1,\n        ATTRIBUTE_NODE: 2,\n        TEXT_NODE: 3,\n        CDATA_SECTION_NODE: 4,\n        ENTITY_REFERENCE_NODE: 5,\n        ENTITY_NODE: 6,\n        PROCESSING_INSTRUCTION_NODE: 7,\n        COMMENT_NODE: 8,\n        DOCUMENT_NODE: 9,\n        DOCUMENT_TYPE_NODE: 10,\n        DOCUMENT_FRAGMENT_NODE: 11,\n        NOTATION_NODE: 12\n    },\n\n    toHex: function(color) {\n        var matches = rgb.exec(color);\n\n        if (!matches) {\n            return color;\n        }\n\n        return \"#\" + map(matches.slice(1), function(x) {\n            x = parseInt(x, 10).toString(16);\n            return x.length > 1 ? x : \"0\" + x;\n        }).join(\"\");\n    },\n\n    encode: function(value, options) {\n        var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n        return value.replace(encodableChars, function(c) {\n            var charCode = c.charCodeAt(0);\n            var entity = entityTable[charCode];\n            return entity ? '&' + entity + ';' : c;\n        });\n    },\n    isBom: function(node) {\n        return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n    },\n    stripBom: function(text) {\n        return (text || \"\").replace(bom, \"\");\n    },\n\n    stripBomNode: function(node) {\n        if (Dom.isBom(node)) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    insignificant: function(node) {\n        var attr = node.attributes;\n\n        return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n    },\n    tableCell: function(node) {\n        return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n    },\n    significantNodes: function(nodes) {\n        return $.grep(nodes, function(child) {\n            var name = Dom.name(child);\n\n            if (name == 'br' || Dom.insignificant(child) || Dom.emptyTextNode(child) || (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child))) {\n                return false;\n            }\n            return true;\n        });\n    },\n\n    emptyTextNode: function(node) {\n        return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n    },\n\n    emptyNode: function(node) {\n        return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n    },\n\n    name: function(node) {\n        return node.nodeName.toLowerCase();\n    },\n\n    significantChildNodes: function(node) {\n        return $.grep(node.childNodes, function(child) {\n            return child.nodeType != 3 || !Dom.isWhitespace(child);\n        });\n    },\n\n    getTextNodes: function(body, nodes) {\n        const childNodes = body.childNodes;\n        nodes = nodes || [];\n\n        for (const node of childNodes) {\n            if (node.nodeType === this.nodeTypes.TEXT_NODE &&\n                (blockElements.includes(Dom.name(node.parentNode)) ||\n                inlineElements.includes(Dom.name(node.parentNode)) ||\n                node.parentNode === body)) {\n                nodes.push(node);\n            } else if (node.nodeType === this.nodeTypes.ELEMENT_NODE) {\n                this.getTextNodes(node, nodes);\n            }\n        }\n\n        return nodes;\n    },\n\n    lastTextNode: function(node) {\n        var result = null;\n\n        if (node.nodeType == 3) {\n            return node;\n        }\n\n        for (var child = node.lastChild; child; child = child.previousSibling) {\n            result = Dom.lastTextNode(child);\n\n            if (result) {\n                return result;\n            }\n        }\n\n        return result;\n    },\n\n    is: function(node, nodeName) {\n        return node && Dom.name(node) == nodeName;\n    },\n\n    isMarker: function(node) {\n        return node.className == KMARKER;\n    },\n\n    isWhitespace: function(node) {\n        return whitespace.test(node.nodeValue);\n    },\n\n    allowsTextContent: function(node) {\n        var result = true;\n\n        nonEmptyNonTextContentElements.every(function(name) {\n            if (Dom.is(node, name)) {\n                result = false;\n                return false;\n            } else {\n                return true;\n            }\n        });\n\n        return result;\n    },\n\n    allWhitespaceContent: function(node) {\n        var child = node.firstChild;\n        while (child && Dom.isWhitespace(child)) {\n            child = child.nextSibling;\n        }\n\n        return !child;\n    },\n\n    isEmptyspace: function(node) {\n        return emptyspace.test(node.nodeValue);\n    },\n\n    htmlIndentSpace: function(node) {\n        if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n            return false;\n        }\n\n        if (emptyspace.test(node.nodeValue)) {\n            return true;\n        }\n\n        var sibling = function(el, direction) {\n            while (el[direction]) {\n                el = el[direction];\n                if (Dom.significantNodes([el]).length > 0) {\n                    return el;\n                }\n            }\n        };\n\n        var parent = node.parentNode;\n        var prev = sibling(node, \"previousSibling\");\n        var next = sibling(node, \"nextSibling\");\n\n        if (bom.test(node.nodeValue)) {\n            return !!(prev || next);\n        }\n\n        if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n            return true;\n        }\n\n        if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n            var isPrevBlock = prev && Dom.isBlock(prev);\n            var isNextBlock = next && Dom.isBlock(next);\n            if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    isBlock: function(node) {\n        return block[Dom.name(node)];\n    },\n\n    isSelfClosing: function(node) {\n        return selfClosing[Dom.name(node)];\n    },\n\n    isEmpty: function(node) {\n        return empty[Dom.name(node)];\n    },\n\n    isInline: function(node) {\n        return inline[Dom.name(node)];\n    },\n\n    isImg: function(node) {\n        return Dom.name(node) == \"img\";\n    },\n\n    isBr: function(node) {\n        return Dom.name(node) == \"br\";\n    },\n\n    list: function(node) {\n        var name = node ? Dom.name(node) : \"\";\n        return name == \"ul\" || name == \"ol\" || name == \"dl\";\n    },\n\n    scrollContainer: function(doc) {\n        var wnd = Dom.windowFromDocument(doc),\n            scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n        if (scrollContainer.compatMode == 'BackCompat') {\n            scrollContainer = scrollContainer.body;\n        } else {\n            scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n        }\n\n        return scrollContainer;\n    },\n\n    scrollTo: function(node, toStart) {\n        var doc = node.ownerDocument;\n        var wnd = Dom.windowFromDocument(doc);\n        var windowHeight = wnd.innerHeight;\n        var scrollContainer = Dom.scrollContainer(doc);\n        var element, elementTop, elementHeight, marker;\n\n        if (Dom.isDataNode(node)) {\n            if (toStart) {\n                marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                Dom.insertBefore(marker, node);\n                element = $(marker);\n            } else {\n                element = $(node.parentNode);\n            }\n        } else {\n            element = $(node);\n        }\n\n        elementTop = element.offset().top;\n        elementHeight = element[0].offsetHeight;\n\n        if (toStart || !elementHeight) {\n            elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                            Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                            15;\n        }\n\n        if (marker) {\n            Dom.remove(marker);\n        }\n\n        if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n            scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n        }\n    },\n\n    persistScrollTop: function(doc) {\n        persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n    },\n\n    offset: function(target, offsetParent) {\n        var result = { top: target.offsetTop, left: target.offsetLeft };\n        var parent = target.offsetParent;\n\n        while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n            result.top += parent.offsetTop;\n            result.left += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n\n        return result;\n    },\n\n    restoreScrollTop: function(doc) {\n        if (typeof persistedScrollTop == \"number\") {\n            Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            persistedScrollTop = undefined;\n        }\n    },\n\n    insertAt: function(parent, newElement, position) {\n        parent.insertBefore(newElement, parent.childNodes[position] || null);\n    },\n\n    insertBefore: function(newElement, referenceElement) {\n        if (referenceElement.parentNode) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n        } else {\n            return referenceElement;\n        }\n    },\n\n    insertAfter: function(newElement, referenceElement) {\n        return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n    },\n\n    remove: function(node) {\n        if (node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    removeChildren: function(node) {\n        while (node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n    },\n\n    removeTextSiblings: function(node) {\n        var parentNode = node.parentNode;\n\n        while (node.nextSibling && node.nextSibling.nodeType == 3) {\n            parentNode.removeChild(node.nextSibling);\n        }\n\n        while (node.previousSibling && node.previousSibling.nodeType == 3) {\n            parentNode.removeChild(node.previousSibling);\n        }\n    },\n\n    trim: function(parent) {\n        for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n            var node = parent.childNodes[i];\n            if (Dom.isDataNode(node)) {\n                if (!Dom.stripBom(node.nodeValue).length) {\n                    Dom.remove(node);\n                }\n            } else if (node.className != KMARKER) {\n                Dom.trim(node);\n\n                if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                    (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                    Dom.remove(node);\n                }\n            }\n        }\n\n        return parent;\n    },\n\n    closest: function(node, tags) {\n        if (typeof tags === \"string\") {\n            tags = [tags];\n        }\n\n        while (node && tags.indexOf(Dom.name(node)) < 0) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    closestBy: function(node, condition, rootCondition) {\n        while (node && !condition(node)) {\n            if (rootCondition && rootCondition(node)) {\n                return null;\n            }\n            node = node.parentNode;\n        }\n        return node;\n    },\n\n    sibling: function(node, direction) {\n        do {\n            node = node[direction];\n        } while (node && node.nodeType != 1);\n\n        return node;\n    },\n\n    next: function(node) {\n        return Dom.sibling(node, \"nextSibling\");\n    },\n\n    prev: function(node) {\n        return Dom.sibling(node, \"previousSibling\");\n    },\n\n    parentOfType: function(node, tags) {\n        do {\n            node = node.parentNode;\n        } while (node && !(Dom.ofType(node, tags)));\n\n        return node;\n    },\n\n    ofType: function(node, tags) {\n        return $.inArray(Dom.name(node), tags) >= 0;\n    },\n\n    changeTag: function(referenceElement, tagName, skipAttributes) {\n        var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n            attributes = referenceElement.attributes,\n            i, len, name, value, attribute;\n\n        if (!skipAttributes) {\n            for (i = 0, len = attributes.length; i < len; i++) {\n                attribute = attributes[i];\n                if (attribute.specified) {\n                    // IE < 8 cannot set class or style via setAttribute\n                    name = attribute.nodeName;\n                    value = attribute.nodeValue;\n                    if (name == CLASS) {\n                        newElement.className = value;\n                    } else if (name == STYLE) {\n                        newElement.style.cssText = referenceElement.style.cssText;\n                    } else {\n                        newElement.setAttribute(name, value);\n                    }\n                }\n            }\n        }\n\n        while (referenceElement.firstChild) {\n            newElement.appendChild(referenceElement.firstChild);\n        }\n\n        Dom.insertBefore(newElement, referenceElement);\n        Dom.remove(referenceElement);\n        return newElement;\n    },\n\n    editableParent: function(node) {\n        while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    wrap: function(node, wrapper) {\n        Dom.insertBefore(wrapper, node);\n        wrapper.appendChild(node);\n        return wrapper;\n    },\n\n    unwrap: function(node) {\n        var parent = node.parentNode;\n        while (node.firstChild) {\n            parent.insertBefore(node.firstChild, node);\n        }\n\n        parent.removeChild(node);\n    },\n\n    wrapper: function(node) {\n        var wrapper = Dom.closestBy(node, function(el) {\n            return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n        });\n\n        return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n    },\n\n    isChildOfBaseContainer: function(node) {\n        return $(node).parent().is(\"body,.k-editor\");\n    },\n\n    create: function(document, tagName, attributes) {\n        return Dom.attr(document.createElement(tagName), attributes);\n    },\n\n    createEmptyNode: function(document, tagName, attributes) {\n        var node = Dom.attr(document.createElement(tagName), attributes);\n        node.innerHTML = \"\\ufeff\";\n        return node;\n    },\n\n    attr: function(element, attributes) {\n        attributes = extend({}, attributes);\n\n        if (attributes && STYLE in attributes) {\n            Dom.style(element, attributes.style);\n            delete attributes.style;\n        }\n\n        for (var attr in attributes) {\n            if (attributes[attr] === null) {\n                element.removeAttribute(attr);\n                delete attributes[attr];\n            } else if (attr == \"className\") {\n                element[attr] = attributes[attr];\n            }\n        }\n\n        return extend(element, attributes);\n    },\n\n    mergeAttributes: function(origin, target, traverseCss) {\n        if (!origin.attributes.length) {\n            return;\n        }\n\n        $.each(origin.attributes, function() {\n            if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                $(target).attr(this.name, this.value);\n            }\n\n            if (traverseCss && this.name === STYLE) {\n                $.each(origin.style, function() {\n                    target.style[this] = origin.style[this];\n                });\n            }\n        });\n    },\n\n    style: function(node, value) {\n        $(node).css(value || {});\n    },\n\n    unstyle: function(node, value) {\n        for (var key in value) {\n            if (key == FLOAT) {\n                node.style[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT] = \"\";\n            } else {\n                node.style[key] = \"\";\n            }\n        }\n\n        if (node.style.cssText === \"\") {\n            node.removeAttribute(STYLE);\n        }\n    },\n\n    inlineStyle: function(body, name, attributes) {\n        var span = $(Dom.create(body.ownerDocument, name, attributes)),\n            style;\n\n        body.appendChild(span[0]);\n\n        style = map(cssAttributes, function(value) {\n            if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                return \"line-height:1.5\";\n            } else {\n                return value + \":\" + span.css(value);\n            }\n        }).join(\";\");\n\n        span.remove();\n\n        return style;\n    },\n\n    getEffectiveBackground: function(element) {\n        var backgroundStyle = element.css(\"background-color\") || \"\";\n\n        if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n            return backgroundStyle;\n        } else if (element[0].tagName.toLowerCase() === \"html\") {\n            return \"Window\";\n        } else {\n            return Dom.getEffectiveBackground(element.parent());\n        }\n    },\n\n    innerText: function(node) {\n        var text = node.innerHTML;\n        text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n        text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n        return text;\n    },\n\n    removeClass: function(node, classNames) {\n        var className = \" \" + node.className + \" \",\n            classes = classNames.split(\" \"),\n            i, len;\n\n        for (i = 0, len = classes.length; i < len; i++) {\n            className = className.replace(\" \" + classes[i] + \" \", \" \");\n        }\n\n        className = kendo.trim(className);\n\n        if (className.length) {\n            node.className = className;\n        } else {\n            node.removeAttribute(CLASS);\n        }\n    },\n\n    commonAncestor: function() {\n        var count = arguments.length,\n            paths = [],\n            minPathLength = Infinity,\n            output = null,\n            i, ancestors, node, first, j;\n\n        if (!count) {\n            return null;\n        }\n\n        if (count == 1) {\n            return arguments[0];\n        }\n\n        for (i = 0; i < count; i++) {\n            ancestors = [];\n            node = arguments[i];\n            while (node) {\n                ancestors.push(node);\n                node = node.parentNode;\n            }\n            paths.push(ancestors.reverse());\n            minPathLength = Math.min(minPathLength, ancestors.length);\n        }\n\n        if (count == 1) {\n            return paths[0][0];\n        }\n\n        for (i = 0; i < minPathLength; i++) {\n            first = paths[0][i];\n\n            for (j = 1; j < count; j++) {\n                if (first != paths[j][i]) {\n                    return output;\n                }\n            }\n\n            output = first;\n        }\n        return output;\n    },\n\n    closestSplittableParent: function(nodes) {\n        var result;\n\n        if (nodes.length == 1) {\n            result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n        } else {\n            result = Dom.commonAncestor.apply(null, nodes);\n        }\n\n        if (!result) {\n            result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n        }\n\n        if (Dom.isInline(result)) {\n            result = Dom.blockParentOrBody(result);\n        }\n\n        var editableParents = map(nodes, Dom.editableParent);\n        var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n        if ($.contains(result, editableAncestor)) {\n            result = editableAncestor;\n        }\n\n        return result;\n    },\n\n    closestEditable: function(node, types) {\n        var closest;\n        var editable = Dom.editableParent(node);\n\n        if (Dom.ofType(node, types)) {\n            closest = node;\n        } else {\n            closest = Dom.parentOfType(node, types);\n        }\n\n        if ((closest && editable && $.contains(closest, editable)) || (!closest && editable)) {\n            closest = editable;\n        }\n\n        return closest;\n    },\n\n    closestEditableOfType: function(node, types) {\n        var editable = Dom.closestEditable(node, types);\n\n        if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n            return editable;\n        }\n    },\n\n    filter: function(tagName, nodes, invert) {\n        var filterFn = function(node) {\n            return Dom.name(node) == tagName;\n        };\n\n        return Dom.filterBy(nodes, filterFn, invert);\n    },\n\n    filterBy: function(nodes, condition, invert) {\n        var i = 0;\n        var len = nodes.length;\n        var result = [];\n        var match;\n\n        for (; i < len; i++) {\n            match = condition(nodes[i]);\n            if ((match && !invert) || (!match && invert)) {\n                result.push(nodes[i]);\n            }\n        }\n\n        return result;\n    },\n\n    ensureTrailingBreaks: function(node) {\n        var elements = $(node).find(\"p,td,th\");\n        var length = elements.length;\n        var i = 0;\n\n        if (length) {\n            for (; i < length; i++) {\n                Dom.ensureTrailingBreak(elements[i]);\n            }\n        } else {\n            Dom.ensureTrailingBreak(node);\n        }\n    },\n\n    removeTrailingBreak: function(node) {\n        $(node).find(\"br[type=_moz],.k-br\").remove();\n    },\n\n    ensureTrailingBreak: function(node) {\n        Dom.removeTrailingBreak(node);\n\n        var lastChild = node.lastChild;\n        var name = lastChild && Dom.name(lastChild);\n        var br;\n\n        if (!name ||\n            (name != \"br\" && name != \"img\") ||\n            (name == \"br\" && lastChild.className != \"k-br\")) {\n            br = node.ownerDocument.createElement(\"br\");\n            br.className = \"k-br\";\n            node.appendChild(br);\n        }\n    },\n\n    // Start: Table Utilities\n\n    reMapTableColumns: function(table, colAttr) {\n        Dom._mapColIndices(table, colAttr);\n    },\n\n    clearTableMappings: function(table, colAttr) {\n        $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n    },\n\n    _mapColIndices: function(table, colAttr) {\n        var registeredColumns = {};\n\n        for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            var cells = table.rows[rowIndex].cells;\n            var colIndex = 0;\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++) {\n                var cell = cells[cellIndex];\n\n                if (cell.rowSpan > 1) {\n                    this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][colIndex]) {\n                        colIndex++;\n                    }\n                }\n\n                cell.setAttribute(colAttr, colIndex);\n\n                if (cell.colSpan > 1) {\n                    colIndex = colIndex + cell.colSpan - 1;\n                }\n                colIndex++;\n            }\n        }\n    },\n\n    _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n        var rowSpan = cell.rowSpan,\n            colSpan = cell.colSpan,\n            index;\n\n        for (var ci = 0; ci < colSpan; ci++) {\n            index = colIndex + ci;\n\n            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                if (!registeredColumns[ri]) {\n                    registeredColumns[ri] = {};\n                    registeredColumns[ri].length = 0;\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][index]) {\n                        index++;\n                    }\n                }\n\n                registeredColumns[ri][index] = true;\n                registeredColumns[ri].length++;\n            }\n        }\n\n    },\n\n    associateWithIds: function(table) {\n        var that = this;\n        var numberOfTheadRows = 0;\n        var tableRows = table.rows;\n        var numberOfTableRows = tableRows.length;\n        var theadMatrix = [];\n        var tbodyMatrix = [];\n        var theadRows, i;\n\n        if (table.tHead) {\n            theadRows = table.tHead.rows;\n            numberOfTheadRows = theadRows.length;\n        } else {\n            numberOfTheadRows = that._getNumberOfHeaderRows(table);\n            theadRows = [];\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadRows.push(tableRows[i]);\n            }\n        }\n        for (i = 0; i < numberOfTheadRows; i++) {\n            theadMatrix.push([]);\n        }\n        for (i = 0; i < numberOfTableRows; i++) {\n            tbodyMatrix.push([]);\n        }\n\n        that._generateIdsForColumns(theadMatrix, theadRows);\n        that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n    },\n\n    _generateIdsForColumns: function(theadMatrix, theadRows) {\n        var timestamp = new Date().getTime();\n        var numberOfTheadRows = theadRows ? theadRows.length : 0;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n        for (i = 0; i < numberOfTheadRows; i++) {\n            row = theadRows[i];\n            cells = row.cells;\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (theadMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        theadMatrix[i + k][j + col + l] = id;\n                    }\n                }\n            }\n        }\n    },\n\n    _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var timestamp = new Date().getTime();\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"th\");\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (tbodyMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        tbodyMatrix[i + k][j + col + l] = id;\n                    }\n                }\n\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = [];\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, i, j, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"td\");\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = tbodyMatrix[i].slice();\n\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _getNumberOfColumns: function(table) {\n        var cells = $(table).find(\"th, td\");\n        var numberOfCols = 0;\n        var cell, i, currentIndex;\n\n        for (i = 0; i < cells.length; i++) {\n            cell = cells[i];\n            currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n            if (currentIndex > numberOfCols) {\n                numberOfCols = currentIndex;\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n        var rows = table.rows;\n        var numberOfCols = 0;\n        var currentIndex, row, i, j, cell;\n\n        for (i = numberOfHeaderRows; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (this.is(cell, \"th\")) {\n                    currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderRows: function(table) {\n        var rows = table.rows;\n        var thead = table.tHead;\n        var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n        var j, row, cell, length;\n\n        if (number === 0) {\n            row = rows[0];\n            length = row.cells && row.cells.length;\n\n            while (row && length && this.is(row.cells[0], \"th\")) {\n                for (j = 0; j < length; j++) {\n                    cell = row ? row.cells[j] : null;\n\n                    if (!this.is(cell, \"th\")) {\n                        row = null;\n                    }\n                }\n\n                if (row) {\n                    number += 1;\n                    row = this.next(row);\n                    length = row && row.cells && row.cells.length;\n                }\n            }\n        }\n\n        return number;\n    },\n\n    // End: Table Utilities\n\n    _onlyUnique: function(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n};\n\nkendo.ui.editor.Dom = Dom;\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo;\nvar Editor = kendo.ui.editor;\nvar dom = Editor.Dom;\nvar extend = $.extend;\n\nvar fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\nvar quoteRe = /\"/g; //\"\nvar brRe = /<br[^>]*>/i;\nvar pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\nvar emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\nvar cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\nvar sizzleAttr = /^sizzle-\\d+/i;\nvar scriptAttr = /^k-script-/i;\nvar onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\nvar br = '<br class=\"k-br\">';\nvar bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\nvar div = document.createElement(\"div\");\ndiv.innerHTML = \" <hr>\";\nvar supportsLeadingWhitespace = div.firstChild.nodeType === 3;\ndiv = null;\nvar isFunction = kendo.isFunction;\n\nvar TD = \"td\";\n\nvar Serializer = {\n    toEditableHtml: function(html) {\n        return (html || \"\")\n            .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n            .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n            .replace(/<img([^>]*)>/ig, function(match) {\n                return match.replace(onerrorRe, \"\");\n            })\n            .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n            .replace(/^<(table|blockquote)/i, br + '<$1')\n            .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n            .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n    },\n\n    _toEditableImmutables: function(body) {\n        var immutable = Editor.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    _fillEmptyElements: function(body) {\n        // fills empty elements to allow them to be focused\n        $(body).find(\"p,td\").each(function() {\n            var p = $(this);\n            if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                var node = this;\n                while (node.children[0] && node.children[0].nodeType != 3) {\n                    node = node.children[0];\n                }\n\n                if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                    if (dom.is(node, \"td\")) {\n                        node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                    }\n                    else {\n                        node.innerHTML = kendo.ui.editor.emptyElementContent;\n                    }\n                }\n            }\n        });\n    },\n\n    _removeSystemElements: function(body) {\n        // removes persisted system elements\n        $(\".k-paste-container\", body).remove();\n    },\n\n    _resetOrderedLists: function(root) {\n        // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n        var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n        for (i = 0; i < ols.length; i++) {\n            ol = ols[i];\n            originalStart = ol.getAttribute(\"start\");\n\n            ol.setAttribute(\"start\", 1);\n\n            if (originalStart) {\n                ol.setAttribute(\"start\", originalStart);\n            } else {\n                ol.removeAttribute(originalStart);\n            }\n        }\n    },\n\n    _preventScriptExecution: function(root) {\n        $(root).find(\"*\").each(function() {\n            var attributes = this.attributes;\n            var attribute, i, l, name;\n            var attributesToRemove = [];\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n\n                if (attribute.specified && /^on/i.test(name)) {\n                    this.setAttribute(\"k-script-\" + name, attribute.value);\n                    attributesToRemove.push(name);\n                }\n            }\n\n            for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                this.removeAttribute(attributesToRemove[i]);\n            }\n        });\n    },\n\n    htmlToDom: function(html, root, options) {\n        var browser = kendo.support.browser;\n        var msie = browser.msie;\n        var o = options || {};\n        var immutables = o.immutables;\n\n        html = Serializer.toEditableHtml(html);\n\n        if (isFunction(o.custom)) {\n            html = o.custom(html) || html;\n        }\n        root.innerHTML = html;\n\n        if (immutables) {\n            immutables.deserialize(root);\n        }\n\n        if (msie) {\n            // unicode characters denormalize the DOM tree in IE9\n            dom.normalize(root);\n\n            Serializer._resetOrderedLists(root);\n        }\n\n        Serializer._preventScriptExecution(root);\n\n        Serializer._fillEmptyElements(root);\n\n        Serializer._removeSystemElements(root);\n\n        Serializer._toEditableImmutables(root);\n\n        // add k-table class to all tables\n        $(\"table\", root).addClass(\"k-table\");\n\n        return root;\n    },\n\n    domToXhtml: function(root, options) {\n        var result = [];\n        var immutables = options && options.immutables;\n\n        function semanticFilter(attributes) {\n            return $.grep(attributes, function(attr) {\n                return attr.name != \"style\";\n            });\n        }\n\n        function mapStart(node, tag) {\n            result.push('<' + tag);\n            attr(node);\n            result.push('>');\n        }\n\n        var tagMap = {\n            iframe: {\n                start: function(node) { mapStart(node, \"iframe\"); },\n                end: function() { result.push('</iframe>'); }\n            },\n            'k:script': {\n                start: function(node) { mapStart(node, \"script\"); },\n                end: function() { result.push('</script>'); },\n                skipEncoding: true\n            },\n            span: {\n                canOptimize: true,\n                semantic: true,\n                start: function(node) {\n                    var style = node.style;\n\n                    var attributes = specifiedAttributes(node);\n                    var semanticAttributes = semanticFilter(attributes);\n\n                    if (semanticAttributes.length) {\n                        result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"<u>\");\n                    }\n\n                    var font = [];\n                    if (style.color) {\n                        font.push('color=\"' + dom.toHex(style.color) + '\"');\n                    }\n\n                    if (style.fontFamily) {\n                        font.push('face=\"' + style.fontFamily + '\"');\n                    }\n\n                    if (style.fontSize) {\n                        var size = $.inArray(style.fontSize, fontSizeMappings);\n                        font.push('size=\"' + size + '\"');\n                    }\n\n                    // Apply the rest of the inline styles back\n                    var inlineStyles = [];\n                    var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                    for (let i = 0; i < style.length; i++) {\n                        var inlineStyle = style[i];\n\n                        if (ignoredStylePrefixes.filter(prop => inlineStyle.startsWith(prop)).length <= 0) {\n                            inlineStyles.push(`${inlineStyle}: ${style[inlineStyle]}`);\n                        }\n                    }\n\n                    if (inlineStyles.length) {\n                        font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                    }\n\n                    if (font.length) {\n                        result.push(\"<font \" + font.join(\" \") + \">\");\n                    }\n                },\n                end: function(node) {\n                    var style = node.style;\n\n                    if (style.color || style.fontFamily || style.fontSize) {\n                        result.push(\"</font>\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"</u>\");\n                    }\n\n                    if (semanticFilter(specifiedAttributes(node)).length) {\n                        result.push(\"</span>\");\n                    }\n                }\n            },\n            strong: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"b\"); },\n                end: function() { result.push('</b>'); }\n            },\n            em: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"i\"); },\n                end: function() { result.push('</i>'); }\n            },\n            b: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"strong\"); },\n                end: function() { result.push('</strong>'); }\n            },\n            i: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"em\"); },\n                end: function() { result.push('</em>'); }\n            },\n            u: {\n                semantic: false,\n                start: function(node) {\n                    result.push('<span');\n\n                    var attributes = specifiedAttributes(node);\n                    var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                    var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                    if (style) {\n                        styleObj.value = style.value;\n                        if (!/text-decoration/i.test(styleObj.value)) {\n                            styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                        }\n                        attributes.splice($.inArray(style, attributes), 1);\n                    }\n                    attributes.push(styleObj);\n\n                    attr(node, attributes);\n                    result.push('>');\n                },\n                end: function() { result.push('</span>'); }\n            },\n            font: {\n                canOptimize: true,\n                semantic: false,\n                start: function(node) {\n                    result.push('<span style=\"');\n\n                    var color = node.getAttribute('color');\n                    var size = fontSizeMappings[node.getAttribute('size')];\n                    var face = node.getAttribute('face');\n\n                    if (color) {\n                        result.push('color:');\n                        result.push(dom.toHex(color));\n                        result.push(';');\n                    }\n\n                    if (face) {\n                        result.push('font-family:');\n                        result.push(face);\n                        result.push(';');\n                    }\n\n                    if (size) {\n                        result.push('font-size:');\n                        result.push(size);\n                        result.push(';');\n                    }\n\n                    result.push('\">');\n                },\n                end: function() {\n                    result.push('</span>');\n                }\n            }\n        };\n\n        tagMap.script = tagMap[\"k:script\"];\n\n        options = options || {};\n\n        if (typeof options.semantic == \"undefined\") {\n            options.semantic = true;\n        }\n\n        function cssProperties(cssText) {\n            var trim = kendo.trim;\n            var css = trim(cssText);\n            var match;\n            var property, value;\n            var properties = [];\n\n            cssDeclaration.lastIndex = 0;\n\n            while (true) {\n                match = cssDeclaration.exec(css);\n\n                if (!match) {\n                    break;\n                }\n\n                property = trim(match[1].toLowerCase());\n                value = trim(match[2]);\n\n                if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                    continue;\n                }\n\n                if (property.indexOf('color') >= 0) {\n                    value = dom.toHex(value);\n                } else if (property.indexOf('font') >= 0) {\n                    value = value.replace(quoteRe, \"'\");\n                } else if (/\\burl\\(/g.test(value)) {\n                    value = value.replace(quoteRe, \"\");\n                }\n\n                properties.push({ property: property, value: value });\n            }\n\n            return properties;\n        }\n\n        function styleAttr(cssText) {\n            var properties = cssProperties(cssText);\n            var i;\n\n            for (i = 0; i < properties.length; i++) {\n                result.push(properties[i].property);\n                result.push(':');\n                result.push(properties[i].value);\n                result.push(';');\n            }\n        }\n\n        function specifiedAttributes(node) {\n            var result = [];\n            var attributes = node.attributes;\n            var attribute, i, l;\n            var name, value, specified;\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n\n                name = attribute.nodeName;\n                value = attribute.value;\n                specified = attribute.specified;\n\n                // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                if (name == 'value' && 'value' in node && node.value) {\n                    specified = true;\n                } else if (name == 'type' && value == 'text') {\n                    specified = true;\n                } else if (name == \"class\" && !value) {\n                    specified = false;\n                } else if (sizzleAttr.test(name)) {\n                    specified = false;\n                } else if (name == 'complete') {\n                    specified = false;\n                } else if (name == 'altHtml') {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ul\")) {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                    specified = false;\n                } else if (name.indexOf('_moz') >= 0) {\n                    specified = false;\n                } else if (scriptAttr.test(name)) {\n                    specified = !!options.scripts;\n                } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                    specified = false;\n                }\n\n                if (specified) {\n                    result.push(attribute);\n                }\n            }\n\n            return result;\n        }\n\n        function attr(node, attributes) {\n            var i, l, attribute, name, value;\n\n            attributes = attributes || specifiedAttributes(node);\n\n            if (dom.is(node, 'img')) {\n                var width = node.style.width,\n                    height = node.style.height,\n                    $node = $(node);\n\n                if (width && pixelRe.test(width)) {\n                    $node.attr('width', parseInt(width, 10));\n                    dom.unstyle(node, { width: undefined$1 });\n                }\n\n                if (height && pixelRe.test(height)) {\n                    $node.attr('height', parseInt(height, 10));\n                    dom.unstyle(node, { height: undefined$1 });\n                }\n            }\n\n            if (!attributes.length) {\n                return;\n            }\n\n            // Remove the following if everything seems to be in order.\n            // https://github.com/telerik/kendo-ui-core/issues/3639\n            // attributes.sort(function (a, b) {\n            //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n            // });\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                value = attribute.value;\n\n                if (name == \"class\" && value == \"k-table\") {\n                    continue;\n                }\n\n                name = name.replace(scriptAttr, \"\");\n\n                result.push(' ');\n                result.push(name);\n                result.push('=\"');\n\n                if (name == 'style') {\n                    styleAttr(value || node.style.cssText);\n                } else if (name == 'src' || name == 'href') {\n                    result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                } else {\n                    result.push(dom.fillAttrs[name] ? name : value);\n                }\n\n                result.push('\"');\n            }\n        }\n\n        function children(node, skip, skipEncoding) {\n            for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                child(childNode, skip, skipEncoding);\n            }\n        }\n\n        function text(node) {\n            return node.nodeValue.replace(/\\ufeff/g, \"\");\n        }\n\n        function isEmptyBomNode(node) {\n            if (dom.isBom(node)) {\n                do {\n                    node = node.parentNode;\n\n                    if (dom.is(node, TD) && node.childNodes.length === 1) {\n                        return true;\n                    }\n\n                    if (node.childNodes.length !== 1) {\n                        return false;\n                    }\n                } while (!dom.isBlock(node));\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function child(node, skip, skipEncoding) {\n            var nodeType = node.nodeType,\n                tagName, mapper,\n                parent, value, previous, jqNode;\n\n            if (immutables && Editor.Immutables.immutable(node)) {\n                result.push(immutables.serialize(node));\n            } else if (nodeType == 1) {\n                tagName = dom.name(node);\n                jqNode = $(node);\n\n                if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                    return;\n                }\n\n                if (!tagName || dom.insignificant(node)) {\n                    return;\n                }\n\n                if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                    return;\n                }\n\n                mapper = tagMap[tagName];\n\n                if (mapper) {\n                    if (mapper.canOptimize &&\n                        options.optimizeTags &&\n                        shouldOptimize(node)) {\n                            children(node, false, mapper.skipEncoding);\n                        return;\n                    }\n\n                    if (typeof mapper.semantic == \"undefined\" ||\n                        (options.semantic ^ mapper.semantic)) {\n                        mapper.start(node);\n                        children(node, false, mapper.skipEncoding);\n                        mapper.end(node);\n                        return;\n                    }\n                }\n\n                result.push('<');\n                result.push(tagName);\n\n                attr(node);\n\n                if (dom.empty[tagName]) {\n                    result.push(' />');\n                } else {\n                    result.push('>');\n                    children(node, skip || dom.is(node, 'pre'));\n                    result.push('</');\n                    result.push(tagName);\n                    result.push('>');\n                }\n            } else if (nodeType == 3) {\n                if (isEmptyBomNode(node)) {\n                    result.push('&nbsp;');\n                    return;\n                }\n\n                value = text(node);\n\n                if (!skip && supportsLeadingWhitespace) {\n                    parent = node.parentNode;\n                    previous = node.previousSibling;\n\n                    if (!previous) {\n                         previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                    }\n\n                    if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                        if (options.keepEOL) {\n                            value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                        } else {\n                            value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                        }\n                    }\n\n                    value = value.replace(/ +/, ' ');\n                }\n\n                result.push(skipEncoding ? value : dom.encode(value, options));\n\n            } else if (nodeType == 4) {\n                result.push('<![CDATA[');\n                result.push(node.data);\n                result.push(']]>');\n            } else if (nodeType == 8) {\n                if (node.data.indexOf('[CDATA[') < 0) {\n                    result.push('<!--');\n                    result.push(node.data);\n                    result.push('-->');\n                } else {\n                    result.push('<!');\n                    result.push(node.data);\n                    result.push('>');\n                }\n            }\n        }\n\n        function shouldOptimize(node) {\n            return node.attributes.length === 0;\n        }\n\n        function textOnly(root) {\n            var childrenCount = root.childNodes.length;\n            var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n            return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n        }\n\n        function runCustom() {\n            if (kendo.isFunction(options.custom)) {\n                result = options.custom(result) || result;\n            }\n        }\n\n        if (textOnly(root)) {\n            result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n            runCustom();\n\n            return result;\n        }\n\n        children(root);\n        result = result.join('');\n        runCustom();\n\n        // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n        if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n            return \"\";\n        }\n\n        return result;\n    }\n\n};\n\nextend(Editor, {\n    Serializer: Serializer\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        browser = kendo.support.browser,\n        dom = Editor.Dom,\n        findNodeIndex = dom.findNodeIndex,\n        isDataNode = dom.isDataNode,\n        findClosestAncestor = dom.findClosestAncestor,\n        getNodeLength = dom.getNodeLength,\n        normalize = dom.normalize;\n\nvar SelectionUtils = {\n    selectionFromWindow: function(window) {\n        if (!window) {\n            return;\n        }\n\n        if (!(\"getSelection\" in window)) {\n            return new W3CSelection(window.document);\n        }\n\n        return window.getSelection();\n    },\n\n    selectionFromRange: function(range) {\n        var rangeDocument = RangeUtils.documentFromRange(range);\n        return SelectionUtils.selectionFromDocument(rangeDocument);\n    },\n\n    selectionFromDocument: function(document) {\n        return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n    }\n};\n\nvar W3CRange = Class.extend({\n    init: function(doc) {\n        $.extend(this, {\n            ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n            startContainer: doc,\n            endContainer: doc,\n            commonAncestorContainer: doc,\n            startOffset: 0,\n            endOffset: 0,\n            collapsed: true\n        });\n    },\n\n    // Positioning Methods\n    setStart: function(node, offset) {\n        this.startContainer = node;\n        this.startOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, true);\n    },\n\n    setEnd: function(node, offset) {\n        this.endContainer = node;\n        this.endOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, false);\n    },\n\n    setStartBefore: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node));\n    },\n\n    setStartAfter: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    setEndBefore: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node));\n    },\n\n    setEndAfter: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    selectNode: function(node) {\n        this.setStartBefore(node);\n        this.setEndAfter(node);\n    },\n\n    selectNodeContents: function(node) {\n        this.setStart(node, 0);\n        this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n    },\n\n    collapse: function(toStart) {\n        var that = this;\n\n        if (toStart) {\n            that.setEnd(that.startContainer, that.startOffset);\n        } else {\n            that.setStart(that.endContainer, that.endOffset);\n        }\n    },\n\n    // Editing Methods\n\n    deleteContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        (function deleteSubtree(iterator) {\n            while (iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    deleteSubtree(iterator.getSubtreeIterator());\n                } else {\n                    iterator.remove();\n                }\n            }\n        })(new RangeIterator(range));\n    },\n\n    cloneContents: function() {\n        // clone subtree\n        var document = RangeUtils.documentFromRange(this);\n        return (function cloneSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                    if (iterator.hasPartialSubtree()) {\n                        node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n        })(new RangeIterator(this));\n    },\n\n    extractContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        var document = RangeUtils.documentFromRange(that);\n\n        return (function extractSubtree(iterator) {\n            var node, frag = document.createDocumentFragment();\n\n            while (node = iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    node = node.cloneNode(false);\n                    node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                } else {\n                    iterator.remove(that.originalRange);\n                }\n\n                frag.appendChild(node);\n            }\n\n            return frag;\n        })(new RangeIterator(range));\n    },\n\n    insertNode: function(node) {\n        var that = this;\n\n        if (isDataNode(that.startContainer)) {\n            if (that.startOffset != that.startContainer.nodeValue.length) {\n                dom.splitDataNode(that.startContainer, that.startOffset);\n            }\n\n            dom.insertAfter(node, that.startContainer);\n        } else {\n            dom.insertAt(that.startContainer, node, that.startOffset);\n        }\n\n        that.setStart(that.startContainer, that.startOffset);\n    },\n\n    cloneRange: function() {\n        // fast copy\n        return $.extend(new W3CRange(this.ownerDocument), {\n            startContainer: this.startContainer,\n            endContainer: this.endContainer,\n            commonAncestorContainer: this.commonAncestorContainer,\n            startOffset: this.startOffset,\n            endOffset: this.endOffset,\n            collapsed: this.collapsed,\n\n            originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n        });\n    },\n\n    // used for debug purposes\n    toString: function() {\n        var startNodeName = this.startContainer.nodeName,\n            endNodeName = this.endContainer.nodeName;\n\n        return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n    }\n});\n\nW3CRange.fromNode = function(node) {\n    return new W3CRange(node.ownerDocument);\n};\n\n/* can be used in Range.compareBoundaryPoints if we need it one day */\nfunction compareBoundaries(start, end, startOffset, endOffset) {\n    if (start == end) {\n        return endOffset - startOffset;\n    }\n\n    // end is child of start\n    var container = end;\n    while (container && container.parentNode != start) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return findNodeIndex(container) - startOffset;\n    }\n\n    // start is child of end\n    container = start;\n    while (container && container.parentNode != end) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return endOffset - findNodeIndex(container) - 1;\n    }\n\n    // deep traversal\n    var root = dom.commonAncestor(start, end);\n    var startAncestor = start;\n\n    while (startAncestor && startAncestor.parentNode != root) {\n        startAncestor = startAncestor.parentNode;\n    }\n\n    if (!startAncestor) {\n        startAncestor = root;\n    }\n\n    var endAncestor = end;\n    while (endAncestor && endAncestor.parentNode != root) {\n        endAncestor = endAncestor.parentNode;\n    }\n\n    if (!endAncestor) {\n        endAncestor = root;\n    }\n\n    if (startAncestor == endAncestor) {\n        return 0;\n    }\n\n    return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n}\n\nfunction fixIvalidRange(range, toStart) {\n    function isInvalidRange(range) {\n        try {\n            return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n        } catch (ex) {\n            // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n            return true;\n        }\n    }\n\n    if (isInvalidRange(range)) {\n        if (toStart) {\n            range.commonAncestorContainer = range.endContainer = range.startContainer;\n            range.endOffset = range.startOffset;\n        } else {\n            range.commonAncestorContainer = range.startContainer = range.endContainer;\n            range.startOffset = range.endOffset;\n        }\n\n        range.collapsed = true;\n    }\n}\n\nfunction updateRangeProperties(range) {\n    range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n    var node = range.startContainer;\n    while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n        node = node.parentNode;\n    }\n\n    range.commonAncestorContainer = node;\n}\n\nvar RangeIterator = Class.extend({\n    init: function(range) {\n        $.extend(this, {\n            range: range,\n            _current: null,\n            _next: null,\n            _end: null\n        });\n\n        if (range.collapsed) {\n            return;\n        }\n\n        var root = range.commonAncestorContainer;\n\n        this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n        range.startContainer.childNodes[range.startOffset] :\n        findClosestAncestor(root, range.startContainer);\n\n        this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n        range.endContainer.childNodes[range.endOffset] :\n        findClosestAncestor(root, range.endContainer).nextSibling;\n    },\n\n    hasNext: function() {\n        return !!this._next;\n    },\n\n    next: function() {\n        var that = this,\n            current = that._current = that._next;\n        that._next = that._current && that._current.nextSibling != that._end ?\n        that._current.nextSibling : null;\n\n        if (isDataNode(that._current)) {\n            if (that.range.endContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n            }\n\n            if (that.range.startContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(0, that.range.startOffset);\n            }\n        }\n\n        return current;\n    },\n\n    traverse: function(callback) {\n        var that = this,\n            current;\n\n        function next() {\n            that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n            return that._current;\n        }\n\n        while (current = next()) {\n            if (that.hasPartialSubtree()) {\n                that.getSubtreeIterator().traverse(callback);\n            } else {\n                callback(current);\n            }\n        }\n\n        return current;\n    },\n\n    remove: function(originalRange) {\n        var that = this,\n            inStartContainer = that.range.startContainer == that._current,\n            inEndContainer = that.range.endContainer == that._current,\n            start, end, delta;\n\n        if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n            start = inStartContainer ? that.range.startOffset : 0;\n            end = inEndContainer ? that.range.endOffset : that._current.length;\n            delta = end - start;\n\n            if (originalRange && (inStartContainer || inEndContainer)) {\n                if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                    originalRange.startOffset -= delta;\n                }\n\n                if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                    originalRange.endOffset -= delta;\n                }\n            }\n\n            that._current.deleteData(start, delta);\n        } else {\n            var parent = that._current.parentNode;\n\n            if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                var nodeIndex = findNodeIndex(that._current);\n\n                if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                    originalRange.startOffset -= 1;\n                }\n\n                if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                    originalRange.endOffset -= 1;\n                }\n            }\n\n            dom.remove(that._current);\n        }\n    },\n\n    hasPartialSubtree: function() {\n        return !isDataNode(this._current) &&\n        (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n            dom.isAncestorOrSelf(this._current, this.range.endContainer));\n    },\n\n    getSubtreeIterator: function() {\n        return new RangeIterator(this.getSubRange());\n    },\n\n    getSubRange: function() {\n        var that = this,\n            subRange = that.range.cloneRange();\n        subRange.selectNodeContents(that._current);\n        if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n            subRange.setStart(that.range.startContainer, that.range.startOffset);\n        }\n        if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n            subRange.setEnd(that.range.endContainer, that.range.endOffset);\n        }\n\n        return subRange;\n    }\n});\n\nvar W3CSelection = Class.extend({\n    init: function(doc) {\n        this.ownerDocument = doc;\n        this.rangeCount = 1;\n    },\n\n    addRange: function(range) {\n        var textRange = this.ownerDocument.body.createTextRange();\n\n        // end container should be adopted first in order to prevent selection with negative length\n        adoptContainer(textRange, range, false);\n        adoptContainer(textRange, range, true);\n\n        textRange.select();\n    },\n\n    removeAllRanges: function() {\n        var selection = this.ownerDocument.selection;\n\n        if (selection.type != \"None\") {\n            selection.empty();\n        }\n    },\n\n    getRangeAt: function() {\n        var textRange,\n            range = new W3CRange(this.ownerDocument),\n            selection = this.ownerDocument.selection,\n            element, commonAncestor;\n\n        try {\n            textRange = selection.createRange();\n            element = textRange.item ? textRange.item(0) : textRange.parentElement();\n            if (element.ownerDocument != this.ownerDocument) {\n                return range;\n            }\n        } catch (ex) {\n            return range;\n        }\n\n        if (selection.type == \"Control\") {\n            range.selectNode(textRange.item(0));\n        } else {\n            commonAncestor = textRangeContainer(textRange);\n            adoptEndPoint(textRange, range, commonAncestor, true);\n            adoptEndPoint(textRange, range, commonAncestor, false);\n\n            if (range.startContainer.nodeType == 9) {\n                range.setStart(range.endContainer, range.startOffset);\n            }\n\n            if (range.endContainer.nodeType == 9) {\n                range.setEnd(range.startContainer, range.endOffset);\n            }\n\n            if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                range.collapse(false);\n            }\n\n            var startContainer = range.startContainer,\n                endContainer = range.endContainer,\n                body = this.ownerDocument.body;\n\n            if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                var movedStart = false,\n                    movedEnd = false;\n\n                while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                    startContainer = startContainer.parentNode;\n                    movedStart = true;\n                }\n\n                while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                    endContainer = endContainer.parentNode;\n                    movedEnd = true;\n                }\n\n                if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                    range.setStart(startContainer, 0);\n                    range.setEnd(endContainer, getNodeLength(body));\n                }\n            }\n        }\n\n        return range;\n    }\n});\n\nfunction textRangeContainer(textRange) {\n    var left = textRange.duplicate(),\n        right = textRange.duplicate();\n\n    left.collapse(true);\n    right.collapse(false);\n\n    return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n}\n\nfunction adoptContainer(textRange, range, start) {\n    // find anchor node and offset\n    var container = range[start ? \"startContainer\" : \"endContainer\"],\n        offset = range[start ? \"startOffset\" : \"endOffset\"],\n        textOffset = 0,\n        isData = isDataNode(container),\n        anchorNode = isData ? container : container.childNodes[offset] || null,\n        anchorParent = isData ? container.parentNode : container,\n        doc = range.ownerDocument,\n        cursor = doc.body.createTextRange(),\n        cursorNode;\n\n    // visible data nodes need a text offset\n    if (container.nodeType == 3 || container.nodeType == 4) {\n        textOffset = offset;\n    }\n\n    if (!anchorParent) {\n        anchorParent = doc.body;\n    }\n\n    if (anchorParent.nodeName.toLowerCase() == \"img\") {\n        cursor.moveToElementText(anchorParent);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    } else {\n        // create a cursor element node to position range (since we can't select text nodes)\n        cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n        cursor.moveToElementText(cursorNode);\n        dom.remove(cursorNode);\n        cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    }\n}\n\nfunction adoptEndPoint(textRange, range, commonAncestor, start) {\n    var cursorNode = dom.create(range.ownerDocument, \"a\"),\n        cursor = textRange.duplicate(),\n        comparison = start ? \"StartToStart\" : \"StartToEnd\",\n        result, parent, target,\n        previous, next,\n        args, index,\n        appended = false;\n\n    cursorNode.innerHTML = \"\\ufeff\";\n    cursor.collapse(start);\n\n    parent = cursor.parentElement();\n\n    if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n        parent = commonAncestor;\n    }\n\n    // detect range end points\n    // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n    do {\n        if (appended) {\n            parent.insertBefore(cursorNode, cursorNode.previousSibling);\n        } else {\n            parent.appendChild(cursorNode);\n            appended = true;\n        }\n        cursor.moveToElementText(cursorNode);\n    } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n    target = cursorNode.nextSibling;\n\n    if (result == -1 && isDataNode(target)) {\n        cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n        dom.remove(cursorNode);\n\n        args = [target, cursor.text.length];\n    } else {\n        previous = !start && cursorNode.previousSibling;\n        next = start && cursorNode.nextSibling;\n\n        if (isDataNode(next)) {\n            args = [next, 0];\n        } else if (isDataNode(previous)) {\n            args = [previous, previous.length];\n        } else {\n            index = findNodeIndex(cursorNode);\n\n            if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                args = [parent.nextSibling, 0];\n            } else {\n                args = [parent, index];\n            }\n        }\n\n        dom.remove(cursorNode);\n    }\n\n    range[start ? \"setStart\" : \"setEnd\"](...args);\n}\n\nvar RangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n\n            function visit(node) {\n                if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                    nodes.push(node);\n                } else {\n                    node = node.firstChild;\n                    while (node) {\n                        visit(node);\n                        node = node.nextSibling;\n                    }\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar ImmutablesRangeIterator = RangeIterator.extend({\n    hasPartialSubtree: function() {\n        var immutable = Editor.Immutables && Editor.Immutables.immutable;\n        return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n    },\n\n    getSubtreeIterator: function() {\n        return new ImmutablesRangeIterator(this.getSubRange());\n    }\n});\n\nvar ImmutablesRangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            function visit(node) {\n                if (immutable && !immutable(node)) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n            }\n\n            new ImmutablesRangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar RestorePoint = Class.extend({\n    init: function(range, body, options) {\n        var that = this;\n        that.range = range;\n        that.rootNode = RangeUtils.documentFromRange(range);\n        that.body = body || that.getEditable(range);\n        if (dom.name(that.body) != \"body\") {\n            that.rootNode = that.body;\n        }\n\n        that.startContainer = that.nodeToPath(range.startContainer);\n        that.endContainer = that.nodeToPath(range.endContainer);\n        that.startOffset = that.offset(range.startContainer, range.startOffset);\n        that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n        that.immutables = options && options.immutables;\n\n        if (that.immutables) {\n            that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n        }\n\n        that.html = that.body.innerHTML;\n\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    index: function(node) {\n        var result = 0,\n            lastType = node.nodeType;\n\n        while (node = node.previousSibling) {\n            var nodeType = node.nodeType;\n\n            if (nodeType != 3 || lastType != nodeType) {\n                result ++;\n            }\n\n            lastType = nodeType;\n        }\n\n        return result;\n    },\n\n    getEditable: function(range) {\n        var root = range.commonAncestorContainer;\n\n        while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n            root = root.parentNode;\n        }\n\n        return root;\n    },\n\n    restoreHtml: function() {\n        var that = this;\n\n        dom.removeChildren(that.body);\n        that.body.innerHTML = that.html;\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    offset: function(node, value) {\n        if (node.nodeType == 3) {\n            while ((node = node.previousSibling) && node.nodeType == 3) {\n                value += node.nodeValue.length;\n            }\n        }\n\n        return value;\n    },\n\n    nodeToPath: function(node) {\n        var path = [];\n\n        while (node != this.rootNode) {\n            path.push(this.index(node));\n            node = node.parentNode;\n        }\n\n        return path;\n    },\n\n    toRangePoint: function(range, start, path, denormalizedOffset) {\n        var node = this.rootNode,\n            length = path.length,\n            offset = denormalizedOffset;\n\n        while (length-- && node) {\n            node = node.childNodes[path[length]];\n        }\n\n        while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n            offset -= node.nodeValue.length;\n            node = node.nextSibling;\n        }\n\n        if (node && offset >= 0) {\n            range[start ? 'setStart' : 'setEnd'](node, offset);\n        }\n    },\n\n    toRange: function() {\n        var that = this,\n            result = that.range.cloneRange();\n\n        that.toRangePoint(result, true, that.startContainer, that.startOffset);\n        that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n        return result;\n    }\n\n});\n\nvar Marker = Class.extend({\n    init: function() {\n        this.caret = null;\n    },\n\n    addCaret: function(range) {\n        var that = this;\n        var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n        range.insertNode(caret);\n\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n\n        range.selectNode(caret);\n        return caret;\n    },\n\n    removeCaret: function(range) {\n        var that = this,\n            previous = that.caret.previousSibling,\n            startOffset = 0;\n\n        if (previous) {\n            startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n        }\n\n        var container = that.caret.parentNode;\n        var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n        dom.remove(that.caret);\n        normalize(container);\n\n        var node = container.childNodes[containerIndex];\n\n        if (isDataNode(node)) {\n            range.setStart(node, startOffset);\n        } else if (node) {\n            var textNode = dom.lastTextNode(node);\n            if (textNode) {\n                range.setStart(textNode, textNode.nodeValue.length);\n            } else {\n                range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n            }\n        } else {\n            if (!browser.msie && !container.innerHTML) {\n                container.innerHTML = '<br _moz_dirty=\"\" />';\n            }\n\n            range.selectNodeContents(container);\n        }\n        range.collapse(true);\n    },\n\n    add: function(range, expand) {\n        var that = this;\n\n        var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (expand && range.collapsed) {\n            that.addCaret(range);\n            range = RangeUtils.expand(range);\n        }\n\n        var rangeBoundary = range.cloneRange();\n\n        rangeBoundary.collapse(false);\n        that.end = dom.create(doc, 'span', { className: 'k-marker' });\n        rangeBoundary.insertNode(that.end);\n\n        rangeBoundary = range.cloneRange();\n        rangeBoundary.collapse(true);\n        that.start = that.end.cloneNode(true);\n        rangeBoundary.insertNode(that.start);\n\n        that._removeDeadMarkers(that.start, that.end);\n\n        if (collapsed) {\n            var bom = doc.createTextNode(\"\\ufeff\");\n            dom.insertAfter(bom.cloneNode(), that.start);\n            dom.insertBefore(bom, that.end);\n        }\n\n        normalize(range.commonAncestorContainer);\n\n        range.setStartBefore(that.start);\n        range.setEndAfter(that.end);\n\n        return range;\n    },\n\n    _removeDeadMarkers: function(start, end) {\n        if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(start.previousSibling);\n        }\n\n        if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(end.nextSibling);\n        }\n    },\n\n    _normalizedIndex: function(node) {\n        var index = findNodeIndex(node);\n        var pointer = node;\n\n        while (pointer.previousSibling) {\n            if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                index--;\n            }\n\n            pointer = pointer.previousSibling;\n        }\n\n        return index;\n    },\n\n    remove: function(range) {\n        var that = this,\n            start = that.start,\n            end = that.end,\n            shouldNormalizeStart,\n            shouldNormalizeEnd,\n            shouldNormalize;\n\n        normalize(range.commonAncestorContainer);\n\n        while (!start.nextSibling && start.parentNode) {\n            start = start.parentNode;\n        }\n\n        while (!end.previousSibling && end.parentNode) {\n            end = end.parentNode;\n        }\n\n        // merely accessing the siblings will solve range issues in IE\n        shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                               (start.nextSibling && start.nextSibling.nodeType == 3);\n\n        shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                             (end.nextSibling && end.nextSibling.nodeType == 3);\n\n        shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n        start = start.nextSibling;\n        end = end.previousSibling;\n\n        var isBomSelected = start === end && dom.isBom(start);\n        if (isBomSelected && start.length > 1) {\n            start.nodeValue = start.nodeValue.charAt(0);\n        }\n\n        var collapsed = isBomSelected;\n        var collapsedToStart = false;\n        // collapsed range\n        if (start == that.end) {\n            collapsedToStart = !!that.start.previousSibling;\n            start = end = that.start.previousSibling || that.end.nextSibling;\n            collapsed = true;\n        }\n\n        dom.remove(that.start);\n        dom.remove(that.end);\n\n        if (!start || !end) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            range.collapse(true);\n            return;\n        }\n\n        var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n        var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n        if (start.nodeType == 3) {\n            while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                start = start.previousSibling;\n                startOffset += start.nodeValue.length;\n            }\n        }\n\n        if (end.nodeType == 3) {\n            while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                end = end.previousSibling;\n                endOffset += end.nodeValue.length;\n            }\n        }\n\n        var startParent = start.parentNode;\n        var endParent = end.parentNode;\n        var startIndex = this._normalizedIndex(start);\n        var endIndex = this._normalizedIndex(end);\n\n        normalize(startParent);\n        if (start.nodeType == 3) {\n            start = startParent.childNodes[startIndex];\n        }\n\n        normalize(endParent);\n        if (end.nodeType == 3) {\n            end = endParent.childNodes[endIndex];\n        }\n\n        if (collapsed) {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n            }\n\n            range.collapse(true);\n\n        } else {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range.setStartBefore(start);\n            }\n\n            if (end.nodeType == 3) {\n                range.setEnd(end, endOffset);\n            } else {\n                range.setEndAfter(end);\n            }\n        }\n\n        if (that.caret) {\n            that.removeCaret(range);\n        }\n    }\n});\n\nvar boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\nvar RangeUtils = {\n    nodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n        return nodes;\n    },\n\n    textNodes: function(range) {\n        var allNodes = new RangeEnumerator(range).enumerate(),\n            result = allNodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n\n        return result;\n    },\n\n    editableTextNodes: function(range) {\n        var nodes = [],\n            immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n            result = [];\n\n        if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n            nodes = new ImmutablesRangeEnumerator(range).enumerate();\n            result = nodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n        }\n\n        return result;\n    },\n\n    documentFromRange: function(range) {\n        var startContainer = range.startContainer;\n        return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n    },\n\n    createRange: function(document) {\n        return document.createRange();\n    },\n\n    selectRange: function(range) {\n        var image = RangeUtils.image(range);\n        if (image) {\n            range.setStartAfter(image);\n            range.setEndAfter(image);\n        }\n        var selection = SelectionUtils.selectionFromRange(range);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    },\n\n    stringify: function(range) {\n        return kendo.format(\n            \"{0}:{1} - {2}:{3}\",\n            dom.name(range.startContainer), range.startOffset,\n            dom.name(range.endContainer), range.endOffset\n        );\n    },\n\n    split: function(range, node, trim) {\n        function partition(start) {\n            var partitionRange = range.cloneRange();\n            partitionRange.collapse(start);\n            partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n            var contents = partitionRange.extractContents();\n            if (trim) {\n                contents = dom.trim(contents);\n            }\n            dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n        }\n        partition(true);\n        partition(false);\n    },\n\n    mapAll: function(range, map) {\n        var nodes = [];\n\n        new RangeIterator(range).traverse(function(node) {\n            var mapped = map(node);\n\n            if (mapped && $.inArray(mapped, nodes) < 0) {\n                nodes.push(mapped);\n            }\n        });\n\n        return nodes;\n    },\n\n    getAll: function(range, predicate) {\n        var selector = predicate;\n\n        if (typeof predicate == \"string\") {\n            predicate = function(node) {\n                return dom.is(node, selector);\n            };\n        }\n\n        return RangeUtils.mapAll(range, function(node) {\n            if (predicate(node)) {\n                return node;\n            }\n        });\n    },\n\n    getMarkers: function(range) {\n        return RangeUtils.getAll(range, function(node) {\n            return node.className == 'k-marker';\n        });\n    },\n\n    image: function(range) {\n        var nodes = RangeUtils.getAll(range, \"img\");\n\n        if (nodes.length == 1) {\n            return nodes[0];\n        }\n    },\n\n    isStartOf: function(originalRange, node) {\n        if (originalRange.startOffset !== 0) {\n            return false;\n        }\n\n        var range = originalRange.cloneRange();\n\n        while (range.startOffset === 0 && range.startContainer != node) {\n            var index = dom.findNodeIndex(range.startContainer);\n            var parent = range.startContainer.parentNode;\n\n            while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                index--;\n            }\n\n            range.setStart(parent, index);\n        }\n\n        return range.startOffset === 0 && range.startContainer == node;\n    },\n\n    isEndOf: function(originalRange, node) {\n        var range = originalRange.cloneRange();\n\n        range.collapse(false);\n\n        var start = range.startContainer;\n\n        if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n            range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n            range.collapse(true);\n        }\n\n        range.setEnd(node, dom.getNodeLength(node));\n\n        var nodes = [];\n\n        function visit(node) {\n            if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                nodes.push(node);\n            }\n        }\n\n        new RangeIterator(range).traverse(visit);\n\n        return !nodes.length;\n    },\n\n    wrapSelectedElements: function(range) {\n        var startEditable = dom.editableParent(range.startContainer);\n        var endEditable = dom.editableParent(range.endContainer);\n\n        while (range.startOffset === 0 && range.startContainer != startEditable) {\n            range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n        }\n\n        function isEnd(offset, container) {\n            var length = dom.getNodeLength(container);\n\n            if (offset == length) {\n                return true;\n            }\n\n            for (var i = offset; i < length; i++) {\n                if (!dom.insignificant(container.childNodes[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n            range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n        }\n\n        return range;\n    },\n\n    expand: function(range) {\n        var result = range.cloneRange();\n\n        var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n        var endContainer = result.endContainer.childNodes[result.endOffset];\n\n        if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n            return result;\n        }\n\n        var beforeCaret = startContainer.nodeValue;\n        var afterCaret = endContainer.nodeValue;\n\n        if (!beforeCaret || !afterCaret) {\n            return result;\n        }\n\n        var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        var endOffset = afterCaret.search(boundary);\n\n        if (!startOffset || !endOffset) {\n            return result;\n        }\n\n        endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n        startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n        result.setStart(startContainer, startOffset);\n        result.setEnd(endContainer, endOffset);\n\n        return result;\n    },\n\n    isExpandable: function(range) {\n        var node = range.startContainer;\n        var rangeDocument = RangeUtils.documentFromRange(range);\n\n        if (node == rangeDocument || node == rangeDocument.body) {\n            return false;\n        }\n\n        var result = range.cloneRange();\n\n        var value = node.nodeValue;\n        if (!value) {\n            return false;\n        }\n\n        var beforeCaret = value.substring(0, result.startOffset);\n        var afterCaret = value.substring(result.startOffset);\n\n        var startOffset = 0, endOffset = 0;\n\n        if (beforeCaret) {\n            startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        }\n\n        if (afterCaret) {\n            endOffset = afterCaret.search(boundary);\n        }\n\n        return startOffset && endOffset;\n    }\n};\n\nextend(Editor, {\n    SelectionUtils: SelectionUtils,\n    W3CRange: W3CRange,\n    RangeIterator: RangeIterator,\n    W3CSelection: W3CSelection,\n    RangeEnumerator: RangeEnumerator,\n    RestorePoint: RestorePoint,\n    Marker: Marker,\n    RangeUtils: RangeUtils\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        template = kendo.template,\n        RangeUtils = Editor.RangeUtils,\n        complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n        toolsToBeUpdated = [\n            \"bold\",\n            \"italic\",\n            \"underline\",\n            \"strikethrough\",\n            \"superscript\",\n            \"subscript\",\n            \"forecolor\",\n            \"backcolor\",\n            \"fontname\",\n            \"fontsize\",\n            \"createlink\",\n            \"unlink\",\n            \"autolink\",\n            \"addcolumnleft\",\n            \"addcolumnright\",\n            \"addrowabove\",\n            \"addrowbelow\",\n            \"deleterow\",\n            \"deletecolumn\",\n            \"mergecells\",\n            \"formatting\",\n            \"cleanformatting\" ],\n        IMMUTABALE = \"k-immutable\",\n        IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n        IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n    var rootCondition = function(node) {\n        return $(node).is(\"body,.k-editor\");\n    };\n\n    var immutable = function(node) {\n        return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n    };\n\n    var immutableParent = function(node) {\n        return dom.closestBy(node, immutable, rootCondition);\n    };\n\n    var expandImmutablesIn = function(range) {\n        var startImmutableParent = immutableParent(range.startContainer);\n        var endImmutableParent = immutableParent(range.endContainer);\n\n        if (startImmutableParent || endImmutableParent) {\n            if (startImmutableParent) {\n                range.setStartBefore(startImmutableParent);\n            }\n            if (endImmutableParent) {\n                range.setEndAfter(endImmutableParent);\n            }\n        }\n    };\n\n    var immutablesContext = function(range) {\n        if (immutableParent(range.commonAncestorContainer)) {\n            return true;\n        } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n            var editableNodes = RangeUtils.editableTextNodes(range);\n            if (editableNodes.length === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    var randomId = function(length) {\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = length || 10; i > 0; --i) {\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n        }\n        return result;\n    };\n\n    var removeImmutables = function(root) {\n        var serializedImmutables = { empty: true }, nodeName, id, serialized;\n         $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n            nodeName = dom.name(node);\n            id = randomId();\n            serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n            serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n            serializedImmutables.empty = false;\n            $(node).replaceWith(serialized);\n        });\n\n        return serializedImmutables;\n    };\n\n    var restoreImmutables = function(root, serializedImmutables) {\n        var id, immutable;\n        $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n            id = node.getAttribute(IMMUTABALE);\n            immutable = serializedImmutables[id];\n            $(node).replaceWith(immutable.node);\n            if (immutable.style != $(immutable.node).attr(\"style\")) {\n                $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n            }\n        });\n    };\n\n    var deletingKey = function(keyCode) {\n        var keys = kendo.keys;\n        return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n    };\n    var updateToolOptions = function(tool) {\n        var options = tool ? tool.options : undefined$1;\n        if (options && options.finder) {\n            options.finder._initOptions({ immutables: true });\n        }\n    };\n\n    var Immutables = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.serializedImmutables = {};\n            this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n            var tools = kendo.ui.Editor.defaultTools;\n            updateToolOptions(tools.justifyLeft);\n            updateToolOptions(tools.justifyCenter);\n            updateToolOptions(tools.justifyRight);\n            updateToolOptions(tools.justifyFull);\n        },\n\n        serialize: function(node) {\n            var result = this._toHtml(node),\n                id;\n\n            if (result.indexOf(IMMUTABALE) === -1) {\n                id = this.randomId();\n                result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n            } else {\n                id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n            }\n\n            this.serializedImmutables[id] = node;\n            return result;\n        },\n\n        _toHtml: function(node) {\n            var serialization = this.options.serialization;\n            var serializationType = typeof serialization;\n            var nodeName;\n\n            switch (serializationType) {\n                case \"string\":\n                    return template(serialization)(node);\n                case \"function\":\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return \"<\" + nodeName + \"></\" + nodeName + \">\";\n            }\n        },\n\n        deserialize: function(node) {\n            var that = this;\n            var deserialization = this.options.deserialization;\n\n            $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                var id = this.getAttribute(IMMUTABALE);\n                var immutable = that.serializedImmutables[id];\n                if (kendo.isFunction(deserialization)) {\n                    deserialization(this, immutable);\n                }\n                $(this).replaceWith(immutable);\n            });\n\n            that.serializedImmutables = {};\n        },\n\n        randomId: function(length) {\n            return randomId(length);\n        },\n\n        keydown: function(e, range) {\n            var isDeleting = deletingKey(e.keyCode);\n            var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                (!isDeleting && this._cancelTyping(e, range));\n\n            if (shouldCancelEvent) {\n                e.preventDefault();\n                return true;\n            }\n        },\n\n        _cancelTyping: function(e, range) {\n            var editor = this.editor;\n            var keyboard = editor.keyboard;\n\n            return range.collapsed && !keyboard.typingInProgress &&\n                keyboard.isTypingKey(e) && immutablesContext(range);\n        },\n\n        _cancelDeleting: function(e, range) {\n            var keys = kendo.keys;\n            var backspace = e.keyCode === keys.BACKSPACE;\n            var del = e.keyCode == keys.DELETE;\n\n            if (!backspace && !del) {\n                return false;\n            }\n            var cancelDeleting = false;\n            if (range.collapsed) {\n                if (immutablesContext(range)) {\n                    return true;\n                }\n                var immutable = this.nextImmutable(range, del);\n                if (immutable && backspace) {\n                    var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                    if (closestSelectionLi) {\n                        var closestImmutableLi = dom.closest(immutable, \"li\");\n                        if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                            return cancelDeleting;\n                        }\n                    }\n                }\n                if (immutable && !dom.tableCell(immutable)) {\n                    if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                        while (immutable && immutable.parentNode.childNodes.length == 1) {\n                            immutable = immutable.parentNode;\n                        }\n                        if (dom.tableCell(immutable)) {\n                            return cancelDeleting;\n                        }\n                        this._removeImmutable(immutable, range);\n                    }\n                    cancelDeleting = true;\n                }\n            }\n            return cancelDeleting;\n        },\n\n        nextImmutable: function(range, forwards) {\n            var commonContainer = range.commonAncestorContainer;\n            if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                var next = this._nextNode(commonContainer, forwards);\n                if (next && dom.isBlock(next) && !immutableParent(next)) {\n                    while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                        next = next.children[forwards ? 0 : next.children.length - 1];\n                    }\n                }\n                return immutableParent(next);\n            }\n        },\n\n        _removeImmutable: function(immutable, range) {\n            var editor = this.editor;\n            var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n            dom.remove(immutable);\n            Editor._finishUpdate(editor, startRestorePoint);\n        },\n\n        _nextNode: function(node, forwards) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n            var current = node, next;\n            while (current && !next && !dom.isChildOfBaseContainer(current)) {\n                next = current[sibling];\n                if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                    current = next;\n                    next = current[sibling];\n                }\n                if (!next) {\n                    current = current.parentNode;\n                }\n            }\n            return next;\n        }\n    });\n\n    Immutables.immutable = immutable;\n    Immutables.immutableParent = immutableParent;\n    Immutables.expandImmutablesIn = expandImmutablesIn;\n    Immutables.immutablesContext = immutablesContext;\n    Immutables.toolsToBeUpdated = toolsToBeUpdated;\n    Immutables.removeImmutables = removeImmutables;\n    Immutables.restoreImmutables = restoreImmutables;\n\n    Editor.Immutables = Immutables;\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        extend = $.extend;\n\nfunction finishUpdate(editor, startRestorePoint) {\n    var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n    var command = new GenericCommand(startRestorePoint, endRestorePoint);\n    command.editor = editor;\n\n    editor.undoRedoStack.push(command);\n    editor._refreshTools();\n\n    return endRestorePoint;\n}\n\nvar Command = Class.extend({\n    init: function(options) {\n        this.options = options;\n        this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n        this.marker = new Marker();\n        this.formatter = options.formatter;\n    },\n\n    getRange: function() {\n        return this.restorePoint.toRange();\n    },\n\n    lockRange: function(expand) {\n        return this.marker.add(this.getRange(), expand);\n    },\n\n    releaseRange: function(range) {\n        this.marker.remove(range);\n        this.editor.selectRange(range);\n    },\n\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n        this.editor.selectRange(point.toRange());\n    },\n\n    redo: function() {\n        this.exec();\n    },\n\n    createDialog: function(content, options) {\n        var editor = this.editor;\n\n        return $(content).appendTo(document.body)\n            .kendoWindow(extend({}, editor.options.dialogOptions, options))\n            .closest(\".k-window\")\n            .addClass(\"k-editor-window\")\n            .toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.formatter.editor = this.editor;\n        this.formatter.toggle(range);\n        this.releaseRange(range);\n    },\n\n    postExec: function() {\n        this.editor._handleSpaceAndNewLines();\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    expandImmutablesIn: function(range) {\n        if (this.immutables()) {\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            this.restorePoint = new RestorePoint(range, this.editor.body);\n        }\n    },\n\n    _actionButtonsTemplate: function({ messages, insertButtonIcon, cancelButtonIcon }) {\n        return '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n        kendo.html.renderButton(`<button class=\"k-dialog-insert\">${messages.dialogInsert}</button>`, { themeColor: \"primary\", icon: insertButtonIcon }) +\n        kendo.html.renderButton(`<button class=\"k-dialog-close\">${messages.dialogCancel}</button>`, { icon: cancelButtonIcon }) +\n    '</div>';\n    }\n});\n\nvar GenericCommand = Class.extend({\n    init: function(startRestorePoint, endRestorePoint) {\n        this.body = startRestorePoint.body;\n        this.startRestorePoint = startRestorePoint;\n        this.endRestorePoint = endRestorePoint;\n    },\n\n    redo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.endRestorePoint.html;\n        this.editor.selectRange(this.endRestorePoint.toRange());\n    },\n\n    undo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.startRestorePoint.html;\n        this.editor.selectRange(this.startRestorePoint.toRange());\n    }\n});\n\nextend(editorNS, {\n    _finishUpdate: finishUpdate,\n    Command: Command,\n    GenericCommand: GenericCommand\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    dom = Editor.Dom;\n\nvar ViewHtmlCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.async = true;\n    },\n\n    exec: function() {\n        var that = this,\n            editor = that.editor,\n            options = editor.options,\n            messages = editor.options.messages,\n            dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n            textarea = \".k-editor-textarea > textarea\",\n            content, comments;\n\n        options.serialization.immutables = editor.immutables;\n\n        comments = dom.getAllComments(editor.body);\n\n        content = EditorUtils.cacheComments(editor.value(), comments);\n        content = ViewHtmlCommand.indent(content);\n        content = EditorUtils.retrieveComments(content, comments);\n\n        options.serialization.immutables = undefined$1;\n\n        function apply(e) {\n            options.deserialization.immutables = editor.immutables;\n            editor.value(dialog.find(textarea).val());\n            options.deserialization.immutables = undefined$1;\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            editor.trigger(\"change\");\n        }\n\n        function close(e) {\n            e.preventDefault();\n\n            dialog.data(\"kendoWindow\").destroy();\n\n            if (editor.immutables) {\n                editor.immutables.serializedImmutables = {};\n            }\n\n            editor.focus();\n        }\n\n        let window = this.createDialog(dialog, {\n            title: messages.viewHtml,\n            _footerTemplate: ViewHtmlCommand._footerTemplate,\n            _footerMessages: messages,\n            width: 600,\n            height: 400,\n            resizable: true,\n            close: close,\n            visible: false\n        })\n            .find(textarea).val(content).end()\n            .data(\"kendoWindow\");\n\n            window.center().open();\n\n            window.wrapper.find(\".k-dialog-update\").on(\"click\", apply).end();\n            window.wrapper.find(\".k-dialog-close\").on(\"click\", close).end();\n        dialog.find(textarea).trigger(\"focus\");\n    }\n});\n\nextend(ViewHtmlCommand, {\n    template: () =>\n    '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n        '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n    '</div>',\n    _footerTemplate: ({ dialogUpdate, dialogCancel }) =>\n    `<div class=\"k-actions k-actions-start k-actions-horizontal k-window-actions\">` +\n        kendo.html.renderButton(`<button class=\"k-dialog-update\">${kendo.htmlEncode(dialogUpdate)}</button>`, { themeColor: \"primary\", icon: \"check\" }) +\n        kendo.html.renderButton(`<button class=\"k-dialog-close\">${kendo.htmlEncode(dialogCancel)}</button>`, { icon: \"cancel-outline\" }) +\n    `</div>`,\n    indent: function(content) {\n        return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                      .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                      .replace(/<br \\/>/ig, \"<br />\\n\")\n                      .replace(/\\n$/, \"\");\n    }\n});\n\nkendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\nEditor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils;\n\nvar FormatCommand = Command.extend({\n    init: function(options) {\n        options.formatter = options.formatter();\n        var finder = options.formatter.finder;\n        if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n            finder._initOptions({ immutables: options.immutables });\n            options.finder && options.finder._initOptions({ immutables: options.immutables });\n        }\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar FormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        var that = this;\n\n        return new FormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter,\n            finder: that.options.finder\n        }));\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = this.options.finder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (toolbar && ui.getKendoToggleButton()) {\n            toolbar.toggle(ui, isFormatted);\n        }\n    }\n});\n\n$.extend(Editor, {\n    FormatCommand: FormatCommand,\n    FormatTool: FormatTool\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    Tool = Editor.Tool,\n    FormatTool = Editor.FormatTool,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    extend = $.extend,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n    KEYDOWN_NS = \"keydown.kendoEditor\",\n    KMARKER = \"k-marker\";\n\nvar InlineFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    numberOfSiblings: function(referenceNode) {\n        var textNodesCount = 0,\n            elementNodesCount = 0,\n            markerCount = 0,\n            parentNode = referenceNode.parentNode,\n            node;\n\n        for (node = parentNode.firstChild; node; node = node.nextSibling) {\n            if (node != referenceNode) {\n                if (node.className == KMARKER) {\n                    markerCount++;\n                } else if (node.nodeType == 3) {\n                    textNodesCount++;\n                } else {\n                    elementNodesCount++;\n                }\n            }\n        }\n\n        if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n            // full node selection\n            return 0;\n        } else {\n            return elementNodesCount + textNodesCount;\n        }\n    },\n\n    findSuitable: function(sourceNode, skip) {\n        if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n            return null;\n        }\n\n        var node = sourceNode.parentNode;\n        var tags = this.format[0].tags;\n\n        while (!dom.ofType(node, tags)) {\n            if (this.numberOfSiblings(node) > 0) {\n                return null;\n            }\n\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    findFormat: function(sourceNode) {\n        var format = this.format,\n            attrEquals = dom.attrEquals,\n            i, len, node, tags, attributes;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                return node;\n            }\n\n            while (node) {\n                node = dom.parentOfType(node, tags);\n                if (node && attrEquals(node, attributes)) {\n                    return node;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    isFormatted: function(nodes) {\n        var i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            if (this.findFormat(nodes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n});\n\nvar InlineFormatter = Class.extend({\n    init: function(format, values) {\n        this.finder = new InlineFormatFinder(format);\n        this.attributes = extend({}, format[0].attr, values);\n        this.tag = format[0].tags[0];\n    },\n\n    wrap: function(node) {\n        return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n    },\n\n    activate: function(range, nodes) {\n        if (this.finder.isFormatted(nodes)) {\n            this.split(range);\n            this.remove(nodes);\n        } else {\n            this.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n        var nodes = textNodes(range);\n\n        if (nodes.length > 0) {\n            this.activate(range, nodes);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    apply: function(nodes) {\n        var formatNodes = [];\n        var i, l, node, formatNode;\n\n        if (nodes.length > 1) {\n            for (i = 0, l = nodes.length; i < l; i++) {\n                node = nodes[i];\n                formatNode = this.format(node, true);\n                formatNodes.push(formatNode);\n\n            }\n        } else {\n            node = nodes[0];\n            this.format(node, false);\n        }\n\n        this.consolidate(formatNodes);\n    },\n\n    format: function(node, outerMostInline) {\n        var formatNode = this.finder.findSuitable(node);\n        var attributes = this.attributes;\n        var styleAttr = attributes ? attributes.style || {} : {};\n\n        if (formatNode) {\n            if (dom.is(formatNode, \"font\")) {\n                if (styleAttr.color) {\n                    formatNode.removeAttribute(\"color\");\n                }\n                if (styleAttr.fontName) {\n                    formatNode.removeAttribute(\"face\");\n                }\n                if (styleAttr.fontSize) {\n                    formatNode.removeAttribute(\"size\");\n                }\n            }\n            dom.attr(formatNode, attributes);\n        } else {\n            if (outerMostInline) {\n                while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true') {\n                    node = node.parentNode;\n                }\n            }\n\n            formatNode = this.wrap(node);\n        }\n\n        return formatNode;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                if (this.attributes && this.attributes.style) {\n                    dom.unstyle(formatNode, this.attributes.style);\n                    if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                        dom.unwrap(formatNode);\n                    }\n                } else {\n                    dom.unwrap(formatNode);\n                }\n            }\n        }\n    },\n\n    split: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        var l = nodes.length;\n        var i, formatNode;\n\n        if (l > 0) {\n            for (i = 0; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    RangeUtils.split(range, formatNode, true);\n                }\n            }\n        }\n    },\n\n    consolidate: function(nodes) {\n        var node, last;\n\n        while (nodes.length > 1) {\n            node = nodes.pop();\n            last = nodes[nodes.length - 1];\n\n            if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                last.appendChild(node.previousSibling);\n            }\n\n            if (node.tagName == last.tagName &&\n                node.previousSibling == last &&\n                node.style.cssText == last.style.cssText &&\n                node.className === last.className) {\n\n                while (node.firstChild) {\n                    last.appendChild(node.firstChild);\n                }\n\n                dom.remove(node);\n            }\n        }\n    }\n});\n\nvar GreedyInlineFormatFinder = InlineFormatFinder.extend({\n    init: function(format, greedyProperty, fontAttr, defaultValue) {\n        this.format = format;\n        this.greedyProperty = greedyProperty;\n        this.fontAttr = fontAttr;\n        this.defaultValue = defaultValue;\n        InlineFormatFinder.fn.init.call(this, format);\n    },\n\n    getInlineCssValue: function(node) {\n        var attributes = node.attributes;\n        var trim = kendo.trim;\n        var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n        var propertyAndValue, property, value;\n\n        if (!attributes) {\n            return;\n        }\n\n        for (i = 0, l = attributes.length; i < l; i++) {\n            attribute = attributes[i];\n            name = attribute.nodeName;\n            attributeValue = attribute.nodeValue;\n\n            if (attribute.specified && name == \"style\") {\n\n                css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                    pair = css[cssIndex];\n                    if (pair.length) {\n                        propertyAndValue = pair.split(\":\");\n                        property = trim(propertyAndValue[0].toLowerCase());\n                        value = trim(propertyAndValue[1]);\n\n                        if (property != this.greedyProperty) {\n                            continue;\n                        }\n\n                        return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            }\n\n            if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                property = attribute.nodeValue;\n                value = attribute.nodeValue;\n\n                return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n            }\n        }\n    },\n\n    getFormatInner: function(node) {\n        var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n        var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n        var i, len, value;\n\n        for (i = 0, len = parents.length; i < len; i++) {\n            value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n            if (value) {\n                return value;\n            }\n        }\n\n        return this.defaultValue || \"inherit\";\n    },\n\n    getFormat: function(nodes) {\n        var result = this.getFormatInner(nodes[0]), i, len;\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != this.getFormatInner(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result;\n    },\n\n    isFormatted: function(nodes) {\n        return this.getFormat(nodes) !== \"\";\n    }\n});\n\nvar GreedyInlineFormatter = InlineFormatter.extend({\n    init: function(format, values, greedyProperty) {\n        InlineFormatter.fn.init.call(this, format, values);\n\n        this.values = values;\n        this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n        if (greedyProperty) {\n            this.greedyProperty = kendo.toCamelCase(greedyProperty);\n        }\n\n    },\n\n    activate: function(range, nodes) {\n        var greedyProperty = this.greedyProperty;\n        var action = \"apply\";\n\n        this.split(range);\n\n        if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n            action = \"remove\";\n        }\n\n        this[action](nodes);\n    }\n});\n\nvar InlineFormatTool = FormatTool.extend({\n    init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new InlineFormatFinder(options.format),\n            formatter: function() { return new InlineFormatter(options.format); }\n        }));\n    }\n});\n\nvar DelayedExecutionTool = Tool.extend({\n    update: function(ui, nodes) {\n        var list = ui.data(this.type);\n\n        list.close();\n        list.value(this.finder.getFormat(nodes));\n    }\n});\n\nvar FontTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        // IE has single selection hence we are using select box instead of combobox\n        this.type = \"kendoComboBox\";\n        this.format = [{ tags: [\"span\", \"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, editor) {\n        var options = this.options,\n            toolName = options.name,\n            dataSource,\n            range,\n            widget = ui.data(\"kendoComboBox\"),\n            defaultValue = [];\n\n        if (!widget) {\n            return;\n        }\n\n        if (options.defaultValue) {\n           defaultValue = [{\n                text: editor.options.messages[options.defaultValue[0].text],\n                value: options.defaultValue[0].value\n           }];\n        }\n\n        dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n        widget.setDataSource(dataSource);\n\n        widget.bind(\"change\", (e) => {\n            editor._range = range;\n            if (e.sender.value() !== \"\") {\n                Tool.exec(editor, toolName, e.sender.value());\n            }\n        });\n\n        widget.bind(\"close\", () => {\n            setTimeout(function() {\n                editor._deleteSavedRange();\n            },0);\n        });\n\n        widget.value(\"inherit\");\n\n        widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n            var newRange = editor.getRange();\n            range = editor._containsRange(newRange) ? newRange : range;\n        })\n        .on(KEYDOWN_NS, function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                editor._deleteSavedRange();\n                e.preventDefault();\n            }\n        });\n    }\n\n});\n\nvar ColorTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.format = [{ tags: [\"span\",\"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n    },\n\n    options: {\n        palette: \"websafe\",\n        columns: 18\n    },\n\n    update: function() {\n        this._widget.close();\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, editor) {\n        var that = this,\n            toolName = that.options.name,\n            component = this._widget = ui.getKendoColorPicker();\n\n        if (!component) {\n            return;\n        }\n\n        component.bind(\"change\", () => {\n            var color = component.value();\n\n            if (color) {\n                Tool.exec(editor, toolName, color);\n            }\n\n            delete that.storedRange;\n            delete that._inputFocused;\n\n            editor.focus();\n        });\n\n        component.bind(\"open\", () => {\n            that.storedRange = editor.getRange();\n\n            component._popup.element.on(MOUSEDOWN_NS, function(e) {\n                if (!$(e.target).is(\"input.k-color-value\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if (!component._popup.element.is(\"[unselectable='on']\")) {\n                component._popup.element\n                    .attr({ unselectable: \"on\" })\n                    .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                    .end().find(\"input\").on(\"focus\", function() {\n                        that._inputFocused = true;\n                    });\n            }\n\n            component._popup.one(\"activate\", () => {\n                component._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n            });\n        });\n\n        component.bind(\"close\", (e) => {\n            component._popup.element.off(MOUSEDOWN_NS);\n        });\n\n        component.unbind(\"activate\").bind(\"activate\", (e) => {\n            if (!component._value || component._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                return;\n            }\n\n            component.trigger(\"change\");\n        });\n\n        component.wrapper\n            .attr({ unselectable: \"on\" })\n            .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n        component.value(\"transparent\");\n    }\n});\n\nextend(Editor, {\n    InlineFormatFinder: InlineFormatFinder,\n    InlineFormatter: InlineFormatter,\n    DelayedExecutionTool: DelayedExecutionTool,\n    GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n    GreedyInlineFormatter: GreedyInlineFormatter,\n    InlineFormatTool: InlineFormatTool,\n    FontTool: FontTool,\n    ColorTool: ColorTool\n});\n\nregisterFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\nregisterTool(\"bold\", new InlineFormatTool({\n    key: \"B\",\n    ctrl: true,\n    format: formats.bold,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\nregisterTool(\"italic\", new InlineFormatTool({\n    key: \"I\",\n    ctrl: true,\n    format: formats.italic,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\nregisterTool(\"underline\", new InlineFormatTool({\n    key: \"U\",\n    ctrl: true,\n    format: formats.underline,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\nregisterTool(\"strikethrough\", new InlineFormatTool({\n    format: formats.strikethrough,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\nregisterTool(\"superscript\", new InlineFormatTool({\n    format: formats.superscript,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\nregisterTool(\"subscript\", new InlineFormatTool({\n    format: formats.subscript,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterTool(\"foreColor\", new ColorTool({\n    cssAttr: \"color\",\n    fontAttr: \"color\",\n    domAttr: \"color\",\n    name: \"foreColor\",\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"ColorPicker\",\n        componentOptions: {\n            views: [\"palette\"],\n            toolIcon: \"foreground-color\",\n            palette: \"websafe\",\n            columns: 18,\n            preview: false,\n            input: false,\n            buttons: false,\n            commandOn: \"change\",\n            closeOnSelect: true\n        }\n    }\n}));\n\nregisterTool(\"backColor\", new ColorTool({\n    cssAttr: \"background-color\",\n    domAttr: \"backgroundColor\",\n    name: \"backColor\",\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"ColorPicker\",\n        componentOptions: {\n            views: [\"palette\"],\n            toolIcon: \"droplet\",\n            palette: \"websafe\",\n            columns: 18,\n            preview: false,\n            input: false,\n            buttons: false,\n            commandOn: \"change\",\n            closeOnSelect: true\n        }\n    }\n}));\n\nregisterTool(\"fontName\", new FontTool({\n    cssAttr: \"font-family\",\n    fontAttr: \"face\",\n    domAttr: \"fontFamily\",\n    name: \"fontName\",\n    defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }],\n    ui: {\n        type: \"component\",\n        component: \"ComboBox\",\n        componentOptions: {\n            dataValueField: \"value\",\n            dataTextField: \"text\",\n            valuePrimitive: true\n        },\n        overflow: \"never\"\n    }\n}));\n\nregisterTool(\"fontSize\", new FontTool({\n    cssAttr: \"font-size\",\n    fontAttr: \"size\",\n    domAttr: \"fontSize\",\n    name: \"fontSize\",\n    defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }],\n    ui: {\n        type: \"component\",\n        component: \"ComboBox\",\n        componentOptions: {\n            dataValueField: \"value\",\n            dataTextField: \"text\",\n            valuePrimitive: true\n        },\n        overflow: \"never\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    InlineFormatter = Editor.InlineFormatter,\n    InlineFormatFinder = Editor.InlineFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    editableTextNodes = RangeUtils.editableTextNodes,\n    registerTool = Editor.EditorUtils.registerTool,\n    keys = kendo.keys;\n\nvar HTTP_PROTOCOL = \"http://\";\nvar protocolRegExp = /^\\w*:\\/\\//;\nvar endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\nvar LinkFormatFinder = Class.extend({\n    findSuitable: function(sourceNode) {\n        return dom.parentOfType(sourceNode, [\"a\"]);\n    }\n});\n\nvar LinkFormatter = Class.extend({\n    init: function() {\n        this.finder = new LinkFormatFinder();\n    },\n\n    apply: function(range, attributes) {\n        var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n        var markers, doc, formatter, a, parent;\n\n        if (attributes.innerText) {\n            doc = RangeUtils.documentFromRange(range);\n            markers = RangeUtils.getMarkers(range);\n\n            range.deleteContents();\n            a = dom.create(doc, \"a\", attributes);\n            range.insertNode(a);\n\n            parent = a.parentNode;\n            if (dom.name(parent) == \"a\") {\n                dom.insertAfter(a, parent);\n            }\n\n            if (dom.emptyNode(parent)) {\n                dom.remove(parent);\n            }\n\n            // move range and markers after inserted link\n            var ref = a;\n            for (var i = 0; i < markers.length; i++) {\n                dom.insertAfter(markers[i], ref);\n                ref = markers[i];\n            }\n\n            if (markers.length) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                range.setStartBefore(markers[0]);\n                range.setEndAfter(markers[markers.length - 1]);\n            }\n        } else {\n            formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n            formatter.finder = this.finder;\n            formatter.apply(nodes);\n        }\n    }\n});\n\nvar UnlinkCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: function(range) {\n                var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n            }\n        };\n        this.options = options;\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar LinkCommand = Command.extend({\n    init: function(options) {\n        var that;\n        this.options = options;\n        Command.fn.init.call(this, options);\n        this.formatter = new LinkFormatter();\n\n        if (!options.url) {\n            this.attributes = null;\n            this.async = true;\n        } else {\n            this.exec = function() {\n                this.formatter.immutables = that && that.immutables();\n                this.formatter.apply(options.range, {\n                    href: options.url,\n                    innerText: options.text || options.url,\n                    target: options.target\n                });\n            };\n        }\n    },\n\n    exec: function() {\n        var messages = this.editor.options.messages;\n        this._initialText = \"\";\n        this._range = this.lockRange(true);\n        this.formatter.immutables = this.immutables();\n\n        var nodes = textNodes(this._range);\n        var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n        var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n        var dialog = this.createDialog(\"<div/>\", {\n            title: messages.createLink,\n            minWidth: 340,\n            close: this._close.bind(this),\n            visible: false\n        }).data(\"kendoWindow\");\n\n        this._form = this._createForm(dialog);\n\n        if (a) {\n            this._range.selectNodeContents(a);\n            nodes = textNodes(this._range);\n        }\n\n        this._initialText = this.linkText(nodes);\n\n        dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n            .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n            .find(\".k-form-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n            .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n            .find(\"#k-editor-link-text\").val(this._initialText).end()\n            .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n            .find(\"#k-editor-link-target\").prop(\"checked\", a ? a.target == \"_blank\" : false).end()\n            .find(\".k-editor-link-text-row\").toggle(!img);\n\n        this._dialog = dialog.center().open();\n\n        $(\"#k-editor-link-url\", dialog.element).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-link-url\",\n                    label: encode(messages.linkWebAddress),\n                    title: encode(messages.linkWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-text\",\n                    label: encode(messages.linkText),\n                    title: encode(messages.linkText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-title\",\n                    label: encode(messages.linkToolTip),\n                    title: encode(messages.linkToolTip),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-target\",\n                    editorOptions: {\n                        label: encode(messages.linkOpenInNewWindow)\n                    },\n                    label: \"\",\n                    title: encode(messages.linkOpenInNewWindow),\n                    editor: \"CheckBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        formElement.find(\"#k-editor-link-text\").parents(\".k-form-field\").addClass(\"k-editor-link-text-row\");\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"link\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    },\n\n    _keydown: function(e) {\n        var keys = kendo.keys;\n\n        if (e.keyCode == keys.ENTER) {\n            this._apply(e);\n        } else if (e.keyCode == keys.ESC) {\n            this._close(e);\n        }\n    },\n\n    _apply: function(e) {\n        var element = this._dialog.element;\n        var href = $(\"#k-editor-link-url\", element).val();\n        var title, text, target;\n        var textInput = $(\"#k-editor-link-text\", element);\n\n        if (href && href != HTTP_PROTOCOL) {\n\n            if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                href = \"mailto:\" + href;\n            }\n\n            this.attributes = { href: href };\n\n            title = $(\"#k-editor-link-title\", element).val();\n            if (title) {\n                this.attributes.title = title;\n            }\n\n            if (textInput.is(\":visible\")) {\n                text = kendo.trim(textInput.val());\n                if (!text && !this._initialText) {\n                    this.attributes.innerText = href;\n                } else if (text && (text !== this._initialText)) {\n                    this.attributes.innerText = dom.stripBom(text);\n                }\n            }\n\n            target = $(\"#k-editor-link-target\", element).is(\":checked\");\n            this.attributes.target = target ? \"_blank\" : null;\n\n            this.formatter.apply(this._range, this.attributes);\n        }\n\n        this._close(e);\n\n        if (this.change) {\n            this.change();\n        }\n    },\n\n    _close: function(e) {\n        e.preventDefault();\n        this._form.destroy();\n        this._dialog.destroy();\n\n        dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n        this.releaseRange(this._range);\n    },\n\n    linkUrl: function(anchor) {\n        if (anchor) {\n            // IE < 8 returns absolute url if getAttribute is not used\n            return anchor.getAttribute(\"href\", 2);\n        }\n\n        return HTTP_PROTOCOL;\n    },\n\n    linkText: function(nodes) {\n        var text = \"\";\n        var i;\n\n        for (i = 0; i < nodes.length; i++) {\n            text += nodes[i].nodeValue;\n        }\n\n        return dom.stripBom(text || \"\");\n    },\n\n    redo: function() {\n        var range = this.lockRange(true);\n\n        this.formatter.apply(range, this.attributes);\n        this.releaseRange(range);\n    }\n\n});\n\nvar AutoLinkCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.formatter = new LinkFormatter();\n    },\n\n    exec: function() {\n        var detectedLink = this.detectLink();\n        if (!detectedLink) {\n            return;\n        }\n\n        var range = this.getRange();\n        var linkMarker = new kendo.ui.editor.Marker();\n        var linkRange = range.cloneRange();\n\n        linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n        linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n        range = this.lockRange();\n        linkMarker.add(linkRange);\n\n        this.formatter.apply(linkRange, {\n            href: this._ensureWebProtocol(detectedLink.text)\n        });\n\n        linkMarker.remove(linkRange);\n        this.releaseRange(range);\n    },\n\n    detectLink: function() {\n        var range = this.getRange();\n        var startNode = range.startContainer;\n        var startOffset = range.startOffset;\n        var prev = startNode.previousSibling;\n        if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n            startNode = startNode.parentNode;\n            startOffset = 0;\n        }\n        var traverser = new LeftDomTextTraverser({\n            node: startNode,\n            offset: startOffset,\n            cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n        });\n\n        var detection = new DomTextLinkDetection(traverser);\n        return detection.detectLink();\n    },\n\n    changesContent: function() {\n        return !!this.detectLink();\n    },\n\n    _ensureWebProtocol: function(linkText) {\n        var hasProtocol = this._hasProtocolPrefix(linkText);\n        return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n    },\n\n    _hasProtocolPrefix: function(linkText) {\n        return protocolRegExp.test(linkText);\n    },\n\n    _prefixWithWebProtocol: function(linkText) {\n        return HTTP_PROTOCOL + linkText;\n    }\n});\n\nvar UnlinkTool = Tool.extend({\n    init: function(options) {\n        this.options = options;\n        this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n        Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n    },\n\n    update: function(ui, nodes) {\n        var isLink = this.finder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n        if (isLink) {\n            toolbar.enable(ui, true);\n        } else {\n            toolbar.enable(ui, false);\n        }\n    }\n});\n\nvar DomTextLinkDetection = Class.extend({\n    init: function(traverser) {\n        this.traverser = traverser;\n        this.start = DomPos();\n        this.end = DomPos();\n        this.text = \"\";\n    },\n\n    detectLink: function() {\n        var node = this.traverser.node;\n        var offset = this.traverser.offset;\n        if (dom.isDataNode(node)) {\n            var text = node.data.substring(0, offset);\n            if (/\\s{2}$/.test(dom.stripBom(text))) {\n                return;\n            }\n        } else if (offset === 0) {//heuristic for new line\n            var p = dom.closestEditableOfType(node, dom.blockElements);\n            if (p && p.previousSibling) {\n                this.traverser.init({\n                    node: p.previousSibling\n                });\n            }\n        }\n\n        this.traverser.traverse(this._detectEnd.bind(this));\n        if (!this.end.blank()) {\n            this.traverser = this.traverser.clone(this.end);\n            this.traverser.traverse(this._detectStart.bind(this));\n\n            if (!this._isLinkDetected()) {\n                var puntuationOptions = this.traverser.extendOptions(this.start);\n                var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                if (!this._isLinkDetected()) {\n                    this.start = DomPos();\n                }\n            }\n        }\n\n        if (this.start.blank()) {\n            return null;\n        } else {\n            return {\n                start: this.start,\n                end: this.end,\n                text: this.text\n            };\n        }\n    },\n\n    _isLinkDetected: function() {\n        return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n    },\n\n    _detectEnd: function(text, node) {\n        var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n        if (i > -1) {\n            this.end.node = node;\n            this.end.offset = i + 1;\n\n            return false;\n        }\n    },\n\n    _detectStart: function(text, node) {\n        var i = lastIndexOfRegExp(text, /\\s/);\n        var ii = i + 1;\n        this.text = text.substring(ii) + this.text;\n\n        this.start.node = node;\n        this.start.offset = ii;\n\n        if (i > -1) {\n            return false;\n        }\n    },\n\n    _skipStartPuntuation: function(text, node, offset) {\n        var i = indexOfRegExp(text, /\\w/);\n        var ii = i;\n        if (i === -1) {\n            ii = text.length;\n        }\n\n        this.text = this.text.substring(ii);\n        this.start.node = node;\n        this.start.offset = ii + (offset | 0);\n\n        if (i > -1) {\n            return false;\n        }\n    }\n});\n\nfunction lastIndexOfRegExp(str, search) {\n    var i = str.length;\n    while (i-- && !search.test(str[i])) {}\n\n    return i;\n}\nfunction indexOfRegExp(str, search) {\n    var r = search.exec(str);\n\n    return r ? r.index : -1;\n}\n\nvar DomPos = function() {\n    return {\n        node: null,\n        offset: null,\n        blank: function() {\n            return this.node === null && this.offset === null;\n        }\n    };\n};\n\nvar DomTextTraverser = Class.extend({\n    init: function(options) {\n        this.node = options.node;\n        this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n        this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n    },\n\n    traverse: function(callback) {\n        if (!callback) {\n            return;\n        }\n        this.cancel = false;\n        this._traverse(callback, this.node, this.offset);\n    },\n\n    _traverse: function(callback, node, offset) {\n        if (!node || this.cancel) {\n            return;\n        }\n        if (node.nodeType === 3) {\n            var text = node.data;\n            if (offset !== undefined$1) {\n                text = this.subText(text, offset);\n            }\n            this.cancel = (callback(text, node, offset) === false);\n        }\n        else {\n            var edgeNode = this.edgeNode(node);\n            this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n            return this._traverse(callback, edgeNode);\n        }\n\n        var next = this.next(node);\n        if (!next) {\n            var parent = node.parentNode;\n            while (!next && dom.isInline(parent)) {\n                next = this.next(parent);\n                parent = parent.parentNode;\n            }\n        }\n        this.cancel = this.cancel || this.cancelAtNode(next);\n        this._traverse(callback, next);\n    },\n\n    extendOptions: function(o) {\n        return $.extend({\n            node: this.node,\n            offset: this.offset,\n            cancelAtNode: this.cancelAtNode\n        }, o || {});\n    },\n\n    edgeNode: function(node) {},\n    next: function(node) {},\n    subText: function(text, offset) {}\n\n});\n\nvar LeftDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(0, splitIndex);\n    },\n\n    next: function(node) {\n        return node.previousSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.lastChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new LeftDomTextTraverser(o);\n    }\n});\n\nvar RightDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(splitIndex);\n    },\n\n    next: function(node) {\n        return node.nextSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.firstChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new RightDomTextTraverser(o);\n    }\n});\n\nextend(kendo.ui.editor, {\n    LinkFormatFinder: LinkFormatFinder,\n    LinkFormatter: LinkFormatter,\n    UnlinkCommand: UnlinkCommand,\n    LinkCommand: LinkCommand,\n    AutoLinkCommand: AutoLinkCommand,\n    UnlinkTool: UnlinkTool,\n    DomTextLinkDetection: DomTextLinkDetection,\n    LeftDomTextTraverser: LeftDomTextTraverser,\n    RightDomTextTraverser: RightDomTextTraverser\n});\n\nregisterTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand }));\nregisterTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, ui: { enable: false } }));\nregisterTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    dom = Editor.Dom,\n    FormatTool = Editor.FormatTool,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    registerFormat = EditorUtils.registerFormat,\n    RangeUtils = Editor.RangeUtils;\n\nvar BlockFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    contains: function(node, children) {\n        var i, len, child;\n\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (!child || !dom.isAncestorOrSelf(node, child)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var format = this.format,\n            suitable = [],\n            i, len, candidate;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            for (var f = format.length - 1; f >= 0; f--) {\n                candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                if (candidate) {\n                    break;\n                }\n            }\n\n            if (!candidate || candidate.contentEditable === 'true') {\n                return [];\n            }\n\n            if ($.inArray(candidate, suitable) < 0) {\n                suitable.push(candidate);\n            }\n        }\n\n        this._resolveListsItems(suitable);\n\n        for (i = 0, len = suitable.length; i < len; i++) {\n            if (this.contains(suitable[i], suitable)) {\n                return [suitable[i]];\n            }\n        }\n\n        return suitable;\n    },\n    _resolveListsItems: function(nodes) {\n        var i, node, wrapper;\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n            wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n            if (dom.is(wrapper, \"li\")) {\n                nodes[i] = wrapper;\n            }\n        }\n    },\n\n    findFormat: function(sourceNode, until) {\n        var format = this.format,\n            i, len, node, tags, attributes;\n        var editableParent = dom.editableParent(sourceNode);\n        var immutables = this.options && this.options.immutables;\n        var ImmutablesNS = Editor.Immutables;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (immutables && tags && tags[0] == \"immutable\") {\n                var immutable = ImmutablesNS.immutableParent(node);\n                if (immutable && dom.attrEquals(immutable, attributes)) {\n                    return node;\n                }\n            }\n\n            while (node && dom.isAncestorOf(editableParent, node)) {\n                if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                if (until && until(node)) {\n                    break;\n                }\n\n                node = node.parentNode;\n            }\n        }\n        return null;\n    },\n\n    getFormat: function(nodes) {\n        var that = this,\n            findFormat = function(node) {\n                    return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                },\n            result = findFormat(nodes[0]),\n            i, len;\n\n        if (!result) {\n            return \"\";\n        }\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != findFormat(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result.nodeName.toLowerCase();\n    },\n\n    isFormatted: function(nodes, until) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            if (!this.findFormat(nodes[i], until)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n});\n\nvar BlockFormatter = Class.extend({\n    init: function(format, values) {\n        this.format = format;\n        this.values = values;\n        this.finder = new BlockFormatFinder(format);\n    },\n\n    wrap: function(tag, attributes, nodes) {\n\n        var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n        if (dom.isInline(commonAncestor)) {\n            commonAncestor = dom.blockParentOrBody(commonAncestor);\n        }\n\n        var ancestors = dom.significantChildNodes(commonAncestor),\n            position = dom.findNodeIndex(ancestors[0]),\n            wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n            i, ancestor;\n\n        for (i = 0; i < ancestors.length; i++) {\n            ancestor = ancestors[i];\n            if (dom.isBlock(ancestor)) {\n                dom.attr(ancestor, attributes);\n\n                if (wrapper.childNodes.length) {\n                    dom.insertBefore(wrapper, ancestor);\n                    wrapper = wrapper.cloneNode(false);\n                }\n\n                position = dom.findNodeIndex(ancestor) + 1;\n\n                continue;\n            }\n\n            wrapper.appendChild(ancestor);\n        }\n\n        if (wrapper.firstChild) {\n            dom.insertAt(commonAncestor, wrapper, position);\n        }\n    },\n\n    apply: function(nodes) {\n        var format, values = this.values;\n\n        function attributes(format) {\n            return extend({}, format && format.attr, values);\n        }\n\n        this._handleImmutables(nodes, true);\n\n        var images = dom.filter(\"img\", nodes);\n        var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n        var imageAttributes = attributes(imageFormat);\n        $.each(images, function() {\n            dom.attr(this, imageAttributes);\n        });\n\n        // only images were selected, no need to wrap\n        if (images.length == nodes.length) {\n            return;\n        }\n\n        var nonImages = dom.filter(\"img\", nodes, true);\n        var formatNodes = this.finder.findSuitable(nonImages);\n\n        if (formatNodes.length) {\n            for (var i = 0, len = formatNodes.length; i < len; i++) {\n                format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                dom.attr(formatNodes[i], attributes(format));\n            }\n        } else {\n            format = this.format[0];\n            this.wrap(format.tags[0], attributes(format), nonImages);\n        }\n    },\n\n    _handleImmutables: function(nodes, applyFormatting) {\n        if (!this.immutables()) {\n            return;\n        }\n        var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n        if (!immutableFormat) {\n            return;\n        }\n        var ImmutablesNS = Editor.Immutables;\n        var l = nodes.length - 1;\n        for (var i = l; i >= 0; i--) {\n            var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n            if (!immutableParent) {\n                continue;\n            }\n            if (immutableParent !== nodes[i + 1]) {\n                if (applyFormatting) {\n                    dom.attr(immutableParent, immutableFormat.attr);\n                } else {\n                    dom.unstyle(immutableParent, immutableFormat.attr.style);\n                }\n            }\n            nodes.splice(i, 1);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode, namedFormat, name;\n\n        this._handleImmutables(nodes, false);\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                name = dom.name(formatNode);\n                namedFormat = EditorUtils.formatByName(name, this.format);\n                if (namedFormat.attr.style) {\n                    dom.unstyle(formatNode, namedFormat.attr.style);\n                }\n                if (namedFormat.attr.className) {\n                    dom.removeClass(formatNode, namedFormat.attr.className);\n                }\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n        if (that.finder.isFormatted(nodes)) {\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n});\n\nvar GreedyBlockFormatter = Class.extend({\n    init: function(format, values) {\n        var that = this;\n        that.format = format;\n        that.values = values;\n        that.finder = new BlockFormatFinder(format);\n    },\n\n    apply: function(nodes) {\n        var format = this.format;\n        var blocks = dom.blockParents(nodes);\n        var formatTag = format[0].tags[0];\n        var i, len, list, formatter, range;\n        var element;\n        var tagName;\n        var block;\n        var immutalbeParent;\n\n        if (blocks.length) {\n            for (i = 0, len = blocks.length; i < len; i++) {\n                block = blocks[i];\n                immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                if (!immutalbeParent) {\n                    tagName = dom.name(block);\n\n                    if (tagName == \"li\") {\n                        list = block.parentNode;\n                        formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                        range = this.editor.createRange();\n                        range.selectNode(blocks[i]);\n                        formatter.toggle(range);\n                    } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                        new BlockFormatter(format, this.values).apply(block.childNodes);\n                    } else {\n                        element = dom.changeTag(block, formatTag);\n                        dom.attr(element, format[0].attr);\n                    }\n                }\n            }\n        } else {\n            var blockFormatter = new BlockFormatter(format, this.values);\n            blockFormatter.editor = this.editor;\n            blockFormatter.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n\n        this.apply(nodes);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    }\n});\n\nvar BlockFormatTool = FormatTool.extend({ init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new BlockFormatFinder(options.format),\n            formatter: function() {\n                return new BlockFormatter(options.format);\n            }\n        }));\n    }\n});\n\nextend(Editor, {\n    BlockFormatFinder: BlockFormatFinder,\n    BlockFormatter: BlockFormatter,\n    GreedyBlockFormatter: GreedyBlockFormatter,\n    BlockFormatTool: BlockFormatTool\n});\n\nvar listElements = [\"ul\",\"ol\",\"li\"];\n\nregisterFormat(\"justifyLeft\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyLeft\", new BlockFormatTool({\n    format: formats.justifyLeft,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyCenter\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyCenter\", new BlockFormatTool({\n    format: formats.justifyCenter,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyRight\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyRight\", new BlockFormatTool({\n    format: formats.justifyRight,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyFull\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyFull\", new BlockFormatTool({\n    format: formats.justifyFull,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    FormatTool = Editor.FormatTool,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    registerTool = Editor.EditorUtils.registerTool;\n\nvar ListFormatFinder = BlockFormatFinder.extend({\n    init: function(options) {\n        this.tag = options.tag;\n        this.attr = options.attr;\n        this.altAttr = options.altAttr;\n\n        var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n        var format = [{ tags: tags, attr: this.attr }];\n\n        if (this.altAttr) {\n            format.push({\n                tags: tags,\n                attr: this.altAttr\n            });\n        }\n\n        BlockFormatFinder.fn.init.call(this, format);\n    },\n\n    matchesType: function(node) {\n        return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    isFormatted: function(nodes) {\n        var formatNodes = [];\n        var formatNode, i;\n\n        for (i = 0; i < nodes.length; i++) {\n            formatNode = this.findFormat(nodes[i], this.isList);\n\n            if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                formatNodes.push(formatNode);\n            }\n        }\n\n        if (formatNodes.length < 1) {\n            return false;\n        }\n\n        if (formatNodes.length != nodes.length) {\n            return false;\n        }\n\n        // check if sequential lists are selected\n        for (i = 0; i < formatNodes.length; i++) {\n            if (formatNodes[i].parentNode != formatNode.parentNode) {\n                break;\n            }\n\n            if (formatNodes[i] != formatNode) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var candidate = this.findFormat(nodes[0], this.isList);\n\n        if (candidate && dom.name(candidate) == this.tag) {\n            return candidate;\n        }\n\n        return null;\n    }\n\n});\n\nvar ListFormatter = Class.extend({\n    init: function(options, unwrapTag) {\n        var that = this;\n        options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n        that.tag = options.tag;\n        that.attr = options.attr;\n        that.finder = new ListFormatFinder(options);\n        that.unwrapTag = unwrapTag;\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    immutables: function() {\n        return this.editor && !!this.editor.options.immutables;\n    },\n\n    wrap: function(list, nodes) {\n        var li = dom.create(list.ownerDocument, \"li\"),\n            i, node,\n            isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n\n            if (dom.is(node, 'li')) {\n                list.appendChild(node);\n                continue;\n            }\n\n            if (this.isList(node)) {\n                while (node.firstChild) {\n                    list.appendChild(node.firstChild);\n                }\n                continue;\n            }\n\n            if (dom.is(node, \"td\")) {\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                list.appendChild(li);\n                node.appendChild(list);\n                list = list.cloneNode(false);\n                li = li.cloneNode(false);\n                continue;\n            }\n\n            li.appendChild(node);\n\n            if (dom.isBlock(node)) {\n                list.appendChild(li);\n                if (!isImmutable(node)) {\n                    dom.unwrap(node);\n                }\n                li = li.cloneNode(false);\n            }\n        }\n\n        if (li.firstChild) {\n            list.appendChild(li);\n        }\n    },\n\n    containsAny: function(parent, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    suitable: function(candidate, nodes) {\n        if (candidate.className == \"k-marker\") {\n            var sibling = candidate.nextSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n\n            sibling = candidate.previousSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n        }\n\n        return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n    },\n\n    _parentLists: function(node) {\n        var editable = dom.closestEditable(node);\n\n        return $(node).parentsUntil(editable, \"ul,ol\");\n    },\n\n    split: function(range) {\n        var nodes = textNodes(range);\n        var start, end, parents;\n\n        if (nodes.length) {\n            start = dom.parentOfType(nodes[0], ['li']);\n            end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n            range.setStartBefore(start);\n            range.setEndAfter(end);\n\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                var formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    parents = this._parentLists(formatNode);\n                    if (parents.length) {\n                        RangeUtils.split(range, parents.last()[0], true);\n                    } else {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        }\n    },\n\n    merge: function(tag, formatNode) {\n        var prev = formatNode.previousSibling, next;\n\n        while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n            prev = prev.previousSibling;\n        }\n\n        // merge with previous list\n        if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n            while (formatNode.firstChild) {\n                prev.appendChild(formatNode.firstChild);\n            }\n            dom.remove(formatNode);\n            formatNode = prev;\n        }\n\n        next = formatNode.nextSibling;\n        while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n            next = next.nextSibling;\n        }\n\n        // merge with next list\n        if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n            while (formatNode.lastChild) {\n                next.insertBefore(formatNode.lastChild, next.firstChild);\n            }\n            dom.remove(formatNode);\n        }\n    },\n\n    breakable: function(node) {\n        return (\n            node != node.ownerDocument.body &&\n            !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n            !node.attributes.contentEditable\n        );\n    },\n\n    findSuitableNode: function(nodes) {\n        var that = this,\n            finder = that.finder,\n            tag = that.tag,\n            formatNode;\n\n        formatNode = finder.findSuitable(nodes);\n\n        if (!formatNode) {\n            // Find the opposite tag\n            finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n            formatNode = finder.findSuitable(nodes);\n        }\n\n        if (!formatNode) {\n            // Find the same tag\n            finder = new ListFormatFinder({ tag: tag });\n            formatNode = finder.findSuitable(nodes);\n            formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n        }\n\n\n        return formatNode;\n    },\n\n    applyOnSection: function(section, nodes) {\n        var tag = this.tag;\n        var attr = this.attr;\n        var commonAncestor = dom.closestSplittableParent(nodes);\n\n        var ancestors = [];\n        var formatNode = this.findSuitableNode(nodes);\n\n        var childNodes;\n\n        if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n            childNodes = $.map(nodes, function(node) {\n                return dom.parentOfType(node, [\"td\"]);\n            });\n        } else {\n            childNodes = dom.significantChildNodes(commonAncestor);\n\n            if ($.grep(childNodes, dom.isBlock).length) {\n                childNodes = $.grep(childNodes, (function(node) {\n                    return this.containsAny(node, nodes);\n                }).bind(this));\n            }\n\n            if (!childNodes.length) {\n                childNodes = nodes;\n            }\n        }\n\n        function pushAncestor() {\n            ancestors.push(this);\n        }\n\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n            if (!suitable) {\n                continue;\n            }\n\n            if (formatNode && this.isList(child)) {\n                // merging lists\n                $.each(child.children, pushAncestor);\n                dom.remove(child);\n            } else {\n                ancestors.push(child);\n            }\n        }\n\n        if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n            ancestors = [commonAncestor];\n        }\n\n        if (!formatNode) {\n            formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n            if (dom.isBlock(ancestors[0])) {\n                dom.mergeAttributes(ancestors[0], formatNode);\n            }\n            dom.insertBefore(formatNode, ancestors[0]);\n        }\n\n        this.wrap(formatNode, ancestors);\n\n        while (dom.isBom(formatNode.nextSibling)) {\n            dom.remove(formatNode.nextSibling);\n        }\n\n        if (!this.finder.matchesType(formatNode)) {\n            formatNode.removeAttribute(\"type\");\n            formatNode.style.listStyleType = \"\";\n            dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n        }\n\n        if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n            formatNode.removeAttribute(\"type\");\n        }\n\n        if (!dom.is(formatNode, tag)) {\n            dom.changeTag(formatNode, tag);\n        }\n\n        this.merge(tag, formatNode);\n    },\n\n    apply: function(nodes) {\n        var i = 0,\n            sections = [],\n            lastSection,\n            lastNodes,\n            section,\n            node,\n            l = nodes.length,\n            immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n        function addLastSection() {\n            if (lastSection) {\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n            }\n        }\n\n        // split nodes into sections that need to be different lists\n        for (i = 0; i < l; i++) {\n            node = immutableParent(nodes[i]) || nodes[i];\n            section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n            if (!lastSection || section != lastSection) {\n                addLastSection();\n                lastNodes = [node];\n                lastSection = section;\n            } else {\n                lastNodes.push(node);\n            }\n        }\n\n        addLastSection();\n\n        for (i = 0; i < sections.length; i++) {\n            this.applyOnSection(sections[i].section, sections[i].nodes);\n        }\n    },\n\n    unwrap: function(ul) {\n        var fragment = ul.ownerDocument.createDocumentFragment(),\n            unwrapTag = this.unwrapTag,\n            parents,\n            li,\n            p,\n            child;\n\n        for (li = ul.firstChild; li; li = li.nextSibling) {\n            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n            while (li.firstChild) {\n                child = li.firstChild;\n\n                if (dom.isBlock(child)) {\n\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                        p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    }\n\n                    fragment.appendChild(child);\n                } else {\n                    p.appendChild(child);\n                }\n            }\n\n            if (p.firstChild) {\n                fragment.appendChild(p);\n            }\n        }\n\n        parents = this._parentLists(ul);\n\n        if (parents[0]) {\n            dom.insertAfter(fragment, parents.last()[0]);\n            parents.last().remove();\n        } else {\n            dom.insertAfter(fragment, ul);\n        }\n\n        dom.remove(ul);\n    },\n\n    remove: function(nodes) {\n        var formatNode;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n\n            if (formatNode) {\n                this.unwrap(formatNode);\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = textNodes(range),\n            ancestor = range.commonAncestorContainer;\n\n        if (!nodes.length) {\n            range.selectNodeContents(ancestor);\n            nodes = textNodes(range);\n            if (!nodes.length) {\n                var text = ancestor.ownerDocument.createTextNode(\"\");\n                range.startContainer.appendChild(text);\n                nodes = [text];\n                range.selectNode(text.parentNode);\n            }\n        }\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        if (that.finder.isFormatted(nodes)) {\n            that.split(range);\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n\n});\n\nvar ListCommand = Command.extend({\n    init: function(options) {\n        options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar ListTool = FormatTool.extend({\n    init: function(options) {\n        this.options = options;\n\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new ListFormatFinder(options)\n        }));\n    },\n\n    command: function(commandArguments) {\n        return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n    }\n});\n\nextend(Editor, {\n    ListFormatFinder: ListFormatFinder,\n    ListFormatter: ListFormatter,\n    ListCommand: ListCommand,\n    ListTool: ListTool\n});\n\nregisterTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, ui: { togglable: true, group: \"lists\" } }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    DelayedExecutionTool = Editor.DelayedExecutionTool,\n    Command = Editor.Command,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\n\nvar FormattingTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        var that = this;\n        Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n        that.type = \"kendoDropDownList\";\n\n        that.finder = {\n            getFormat: function() { return \"\"; }\n        };\n    },\n\n    options: {\n        items: [\n            { text: \"Paragraph\", value: \"p\" },\n            { text: \"Quotation\", value: \"blockquote\" },\n            { text: \"Heading 1\", value: \"h1\" },\n            { text: \"Heading 2\", value: \"h2\" },\n            { text: \"Heading 3\", value: \"h3\" },\n            { text: \"Heading 4\", value: \"h4\" },\n            { text: \"Heading 5\", value: \"h5\" },\n            { text: \"Heading 6\", value: \"h6\" }\n        ],\n        width: 110\n    },\n\n    toFormattingItem: function(item) {\n        var value = item.value;\n\n        if (!value) {\n            return item;\n        }\n\n        if (item.tag || item.className) {\n            return item;\n        }\n\n        var dot = value.indexOf(\".\");\n\n        if (dot === 0) {\n            item.className = value.substring(1);\n        } else if (dot == -1) {\n            item.tag = value;\n        } else {\n            item.tag = value.substring(0, dot);\n            item.className = value.substring(dot + 1);\n        }\n\n        return item;\n    },\n\n    command: function(args) {\n        var that = this;\n        var item = args.value;\n\n        item = this.toFormattingItem(item);\n\n        return new Editor.FormatCommand({\n            range: args.range,\n            formatter: function() {\n                var formatter,\n                    tags = (item.tag || item.context || \"span\").split(\",\"),\n                    format = [{\n                        tags: tags,\n                        attr: { className: item.className || \"\" }\n                    }];\n\n                if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                    formatter = new Editor.GreedyInlineFormatter(format);\n                } else {\n                    formatter = new Editor.GreedyBlockFormatter(format);\n                }\n\n                formatter.editor = that.editor;\n                return formatter;\n            }\n        });\n    },\n\n    decorate: function(body) {\n        var component = this.component,\n            dataSource = component.dataSource,\n            items = dataSource.data(),\n            i, tag, className, style;\n\n        if (body) {\n            component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n        }\n\n        if (this.component && this.component.options && this.component.options.unsafeInline !== false) {\n            for (i = 0; i < items.length; i++) {\n                tag = items[i].tag || \"span\";\n                className = items[i].className;\n\n                style = dom.inlineStyle(body, tag, { className: className });\n\n                style = style.replace(/\"/g, \"'\");\n\n                items[i].style = style + \";display:inline-block\";\n            }\n        }\n\n        dataSource.trigger(\"change\");\n    },\n\n    initialize: function(ui, editor) {\n        var options = this.options;\n        var toolName = options.name;\n        var that = this;\n        var component = ui.getKendoDropDownList();\n\n        if (!component) {\n            return;\n        }\n\n        that.editor = editor;\n        that.component = component;\n\n        // must be moved to themes\n        ui.closest(\".k-dropdownlist\").width(options.width);\n\n        component.setOptions({\n            optionLabel: editor.options.messages.formatting,\n            change: () => {\n                var dataItem = component.dataItem();\n\n                if (dataItem) {\n                    Tool.exec(editor, toolName, dataItem.toJSON());\n                }\n            },\n            dataBound: function() {\n                var i, items = component.dataSource.data(),\n                    optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                for (i = 0; i < items.length; i++) {\n                    items[i] = that.toFormattingItem(items[i]);\n                }\n\n                if (optionLabel.length) {\n                    optionLabel.remove();\n                }\n            }\n        });\n    },\n\n    getFormattingValue: function(items, nodes) {\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var tag = item.tag || item.context || \"\";\n            var className = item.className ? \".\" + item.className : \"\";\n            var selector = tag + className;\n\n            var element = $(nodes[0]).closest(selector)[0];\n\n            if (!element) {\n                continue;\n            }\n\n            if (nodes.length == 1) {\n                return item.value;\n            }\n\n            for (var n = 1; n < nodes.length; n++) {\n                if (!$(nodes[n]).closest(selector)[0]) {\n                    break;\n                } else if (n == nodes.length - 1) {\n                    return item.value;\n                }\n            }\n        }\n\n        return \"\";\n    },\n\n    update: function(ui, nodes) {\n        var selectBox = $(ui).data(this.type);\n        // necessary until formatBlock is deleted\n        if (!selectBox) {\n            return;\n        }\n\n        var dataSource = selectBox.dataSource,\n            items = dataSource.data(),\n            i, context,\n            ancestor = dom.commonAncestor.apply(null, nodes);\n\n        if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n            return;\n        } else {\n            this._ancestor = ancestor;\n        }\n\n        for (i = 0; i < items.length; i++) {\n            context = items[i].context;\n\n            items[i].visible = !context || !!$(ancestor).closest(context).length;\n        }\n\n        dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n        DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n        selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n        selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nvar CleanFormatCommand = Command.extend({\n    exec: function() {\n        var range = this.lockRange(true);\n        this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n        RangeUtils.wrapSelectedElements(range);\n\n        var nodes = RangeUtils.mapAll(range, function(node) {\n            return node;\n        });\n\n\n        for (var c = nodes.length - 1; c >= 0; c--) {\n            var node = nodes[c];\n            if (!this.immutableParent(node)) {\n                this.clean(node);\n            }\n        }\n\n        this.releaseRange(range);\n    },\n\n    clean: function(node) {\n        if (!node || dom.isMarker(node)) {\n            return;\n        }\n\n        var name = dom.name(node);\n\n        if (name == \"ul\" || name == \"ol\") {\n            var listFormatter = new Editor.ListFormatter(name);\n            var prev = node.previousSibling;\n            var next = node.nextSibling;\n\n            listFormatter.unwrap(node);\n\n            // clean contents\n            for (; prev && prev != next; prev = prev.nextSibling) {\n                this.clean(prev);\n            }\n        } else if (name == \"blockquote\") {\n            dom.changeTag(node, \"p\");\n        } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n            for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                this.clean(node.childNodes[i]);\n            }\n\n            node.removeAttribute(\"style\");\n            node.removeAttribute(\"class\");\n        } else {\n            unwrapListItem(node);\n        }\n\n        if ($.inArray(name, this.tagsToClean) > -1) {\n            dom.unwrap(node);\n        }\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\n\nfunction unwrapListItem(node) {\n    var li = dom.closestEditableOfType(node, [\"li\"]);\n    if (li) {\n        var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n        var range = kendo.ui.editor.W3CRange.fromNode(node);\n        range.selectNode(li);\n        listFormatter.toggle(range);\n    }\n}\n\n$.extend(Editor, {\n    FormattingTool: FormattingTool,\n    CleanFormatCommand: CleanFormatCommand\n});\n\nregisterTool(\"formatting\", new FormattingTool({\n    ui: {\n        type: \"component\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            highlightFirst: false,\n            autoWidth: true,\n            template: kendo.template(\n                (data) => `<span unselectable=\"on\" ${data.style ? `class=\"k-d-block\" style=\"display:block;${data.style || \"\"}` : \"\"}\">${kendo.htmlEncode(data.text)}</span>`\n            )\n        },\n        overflow: \"never\"\n    }\n}));\n\nregisterTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    keys = kendo.keys,\n    KEDITORIMAGEURL = \"#k-editor-image-url\",\n    KEDITORIMAGETITLE = \"#k-editor-image-title\",\n    KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n    KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\nvar ImageCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertImage: function(img, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.src && attributes.src != \"http://\") {\n\n            var removeIEAttributes = function() {\n                setTimeout(function() {\n                    if (!attributes.width) {\n                        img.removeAttribute(\"width\");\n                    }\n\n                    if (!attributes.height) {\n                        img.removeAttribute(\"height\");\n                    }\n\n                    img.removeAttribute(\"complete\");\n                });\n            };\n\n            if (!img) {\n                img = dom.create(doc, \"img\", attributes);\n                img.onload = img.onerror = removeIEAttributes;\n\n                range.deleteContents();\n                range.insertNode(img);\n\n                if (!img.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                }\n\n                removeIEAttributes();\n\n                range.setStartAfter(img);\n                range.setEndAfter(img);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                img.onload = img.onerror = removeIEAttributes;\n                dom.attr(img, attributes);\n                removeIEAttributes();\n            }\n        }\n\n        return false;\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        if (!that.insertImage(RangeUtils.image(range), range)) {\n            that.releaseRange(range);\n        }\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            applied = false,\n            img = RangeUtils.image(range),\n            imageWidth = img && img.getAttribute(\"width\") || \"\",\n            imageHeight = img && img.getAttribute(\"height\") || \"\",\n            dialog,\n            form,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            imageBrowser = options.imageBrowser,\n            showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertImage,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n            that.attributes = {\n                src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                alt: element.find(KEDITORIMAGETITLE).val()\n            };\n\n            that.attributes.width = null;\n            that.attributes.height = null;\n\n            if (!isNaN(w) && w > 0) {\n                that.attributes.width = w;\n            }\n\n            if (!isNaN(h) && h > 0) {\n                that.attributes.height = h;\n            }\n\n            applied = that.insertImage(img, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            that.editor._handleSpaceAndNewLines();\n        }\n\n        function close(e) {\n            e.preventDefault();\n            form.destroy();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n        dialogOptions.minWidth = 350;\n\n        dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n\n        form = that._createForm(dialog, showBrowser);\n\n        dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n        dialog.wrapper\n        .find(\".k-dialog-insert\").on(\"click\", apply).end()\n        .find(\".k-dialog-close\").on(\"click\", close).end()\n        .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n        // IE < 8 returns absolute url if getAttribute is not used\n        .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n        .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n        .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n        .find(KEDITORIMAGEHEIGHT).val(imageHeight).end();\n\n        var element = dialog.element;\n        if (showBrowser) {\n            this._imageBrowser = new kendo.ui.ImageBrowser(\n                element.find(\".k-imagebrowser\"),\n                extend({}, imageBrowser)\n            );\n\n            this._imageBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORIMAGEURL).val(this.value());\n                }\n            });\n\n            this._imageBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog, showBrowser) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-image-url\",\n                    label: encode(messages.imageWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-title\",\n                    label: encode(messages.imageAltText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-width\",\n                    label: encode(messages.imageWidth),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-height\",\n                    label: encode(messages.imageHeight),\n                    editor: \"TextBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        if (showBrowser) {\n            formElement.prepend($('<div class=\"k-filebrowser k-imagebrowser\"></div>'));\n        }\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"image-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    }\n\n});\n\nkendo.ui.editor.ImageCommand = ImageCommand;\n\nregisterTool(\"insertImage\", new Editor.Tool({ command: ImageCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\nvar ImportCommand = Command.extend({\n    exec: function() {\n        (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n    },\n\n    _initializeUploadWidget: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var importOptions = editor.options[\"import\"];\n        var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n            success: cmd._onUploadSuccess.bind(cmd),\n            progress: cmd._onUploadProgress.bind(cmd),\n            select: cmd._onUploadSelect.bind(cmd),\n            error: cmd._onUploadError.bind(cmd),\n            complete: cmd._onUploadComplete.bind(cmd),\n            showFileList: false,\n            multiple: false,\n            async: {\n                saveUrl: importOptions.proxyURL,\n                autoUpload: true,\n                saveField: \"file\"\n            },\n            validation: {\n                allowedExtensions: importOptions.allowedExtensions,\n                maxFileSize: importOptions.maxFileSize\n            }\n        }).getKendoUpload();\n\n        editor._uploadWidget = upload;\n\n        return upload;\n    },\n    _onUploadComplete: function(ev) {\n        this._trigger(\"complete\", ev);\n        ev.sender.clearAllFiles();\n\n        this._removeLoadingOverlay();\n    },\n    _onUploadSuccess: function(ev) {\n        this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n        this._trigger(\"success\", ev);\n    },\n    _onUploadProgress: function(ev) {\n        this._trigger(\"progress\", ev);\n    },\n    _onUploadSelect: function(ev) {\n        this._trigger(\"select\", ev);\n        if (!ev.files[0].validationErrors) {\n            this._initLoadingOverlay();\n        }\n    },\n    _onUploadError: function(ev) {\n        this._trigger(\"error\", ev);\n    },\n\n    _trigger: function(eventType, uploadEvent) {\n        var editor = this.editor;\n        var importOptions = editor.options[\"import\"];\n        if (typeof importOptions[eventType] === \"function\") {\n            importOptions[eventType].call(editor, uploadEvent);\n        }\n    },\n\n    _initLoadingOverlay: function() {\n        var editable = this.editor.body;\n        if (Editor.Dom.is(editable, \"body\")) {\n            this._iframeWrapper = this._container =\n                this.editor.wrapper.find(\"iframe\").parent()\n                .css({ position: \"relative\" }).append(loadingOverlay);\n        } else {\n            this._container = $(editable).append(loadingOverlay);\n        }\n\n        kendo.ui.progress(this._container, true);\n    },\n\n    _removeLoadingOverlay: function() {\n        kendo.ui.progress(this._container, false);\n        $(this._iframeWrapper).css({\n            position: \"\"\n        });\n\n        delete this._container;\n        delete this._iframeWrapper;\n    }\n});\n\nextend(Editor, {\n    ImportCommand: ImportCommand\n});\n\nregisterTool(\"import\", new Tool({\n    command: ImportCommand,\n    ui: {\n        showText: \"both\"\n    }\n}));\n\n}(window.kendo.jQuery));\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        GenericCommand = editorNS.GenericCommand,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        RestorePoint = editorNS.RestorePoint,\n        extend = $.extend;\n\nvar InsertHtmlCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n        var options = this.options;\n        var range = options.range;\n        var body = editor.body;\n        var startRestorePoint = new RestorePoint(range, body);\n        var html = options.html || options.value || '';\n\n        editor.selectRange(range);\n\n        editor.clipboard.paste(html, options);\n\n        if (options.postProcess) {\n            options.postProcess(editor, editor.getRange());\n        }\n\n        var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n        genericCommand.editor = editor;\n        editor.undoRedoStack.push(genericCommand);\n\n        editor.focus();\n    }\n});\n\nvar InsertHtmlTool = Tool.extend({\n    initialize: function(ui, editor) {\n        var options = this.options,\n            dataSource = options.items ? options.items : editor.options.insertHtml,\n            component = ui.getKendoDropDownList();\n\n        if (!component) {\n            return;\n        }\n\n        component.one(\"open\", () => {\n            var optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n            if (optionLabel.length) {\n                optionLabel.remove();\n            }\n        });\n\n        component.setOptions({\n            dataSource: dataSource,\n            optionLabel: editor.options.messages.insertHtml\n        });\n        component.bind(\"change\", () => {\n            Tool.exec(editor, 'insertHtml', component.value());\n        });\n    },\n\n    command: function(commandArguments) {\n        return new InsertHtmlCommand(commandArguments);\n    },\n\n    update: function(ui) {\n        var component = ui.data(\"kendoDropDownList\");\n        component.close();\n        component.value(null);\n    }\n});\n\nextend(editorNS, {\n    InsertHtmlCommand: InsertHtmlCommand,\n    InsertHtmlTool: InsertHtmlTool\n});\n\nregisterTool(\"insertHtml\", new InsertHtmlTool({\n    ui: {\n        initialValue: \"Insert HTML\",\n        type: \"component\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            autoSize: true,\n            highlightFirst: false\n        },\n        overflow: \"never\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    defaultExportAsItems = [\n        { text: 'Docx', value: 'docx' },\n        { text: 'Rtf', value: 'rtf' },\n        { text: 'Pdf', value: 'pdf' },\n        { text: 'Html', value: 'html' },\n        { text: 'Plain Text', value: 'txt' }\n    ];\n\nvar ExportAsCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.exportType = options.exportType;\n    },\n\n    exec: function() {\n        var cmd = this;\n        var range = this.lockRange(true);\n        cmd.postToProxy();\n        cmd.releaseRange(range);\n    },\n\n    postToProxy: function() {\n        this.generateForm().appendTo('body').submit().remove();\n    },\n\n    generateForm: function() {\n        var cmd = this;\n        var exportAsOptions = cmd.editor.options.exportAs;\n        var form = $('<form>').attr({\n            action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n            method: 'POST'\n        });\n\n        form.append([\n            cmd.valueInput(),\n            cmd.exportTypeInput(),\n            cmd.fileNameInput(),\n            cmd.antiForgeryInput()\n        ]);\n\n        return form;\n    },\n\n    valueInput: function() {\n        var editor = this.editor;\n        return $('<input>').attr({\n            value: editor.encodedValue(),\n            name: 'value',\n            type: 'hidden'\n        });\n    },\n\n    exportTypeInput: function() {\n        var cmd = this;\n        return $('<input>').attr({\n            value: cmd.exportType,\n            name: 'exportType',\n            type: 'hidden'\n        });\n\n    },\n\n    fileNameInput: function() {\n        var editor = this.editor;\n        var exportAsOptions = editor.options.exportAs;\n        var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n        return $('<input>').attr({\n            value: fileName,\n            name: 'fileName',\n            type: 'hidden'\n        });\n    },\n\n    antiForgeryInput: function() {\n        var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n        return $(\"input[name^='__RequestVerificationToken']\").clone()\n                    .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n    }\n});\n\nvar ExportAsTool = Tool.extend({\n    init: function(options) {\n        var tool = this;\n        Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n        tool.type = 'kendoDropDownList';\n    },\n\n    options: {\n        items: defaultExportAsItems\n    },\n\n    command: function(args) {\n        var value = args.value;\n        return new Editor.ExportAsCommand({\n            range: args.range,\n            exportType: value.exportType\n        });\n    },\n\n    initialize: function(ui, editor) {\n        var tool = this,\n            component = ui.getKendoDropDownList();\n\n        tool.editor = editor;\n\n        component.bind(\"change\", this.changeHandler.bind(this));\n    },\n\n    changeHandler: function(e) {\n        this._exec(e.sender.value());\n        e.sender.value(null);\n        e.sender.wrapper.find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n    },\n\n    update: function(ui, editor) {\n        var component = ui.data(\"kendoDropDownList\");\n\n        component.close();\n        component.value(null);\n        ui.closest(\".k-dropdownlist\").find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n    },\n\n    _exec: function(value) {\n        if (value) {\n            Tool.exec(this.editor, this.options.name, { exportType: value } );\n        }\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nextend(Editor, {\n    ExportAsTool: ExportAsTool,\n    ExportAsCommand: ExportAsCommand\n});\n\nregisterTool('exportAs', new ExportAsTool({\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            valuePrimitive: true,\n            value: null,\n            width: \"140px\",\n            highlightFirst: false,\n            autoWidth: true,\n            itemTemplate: (data) => `<span class=\"k-link k-menu-link\" data-value=\"${data.value}\">${data.text}</strong></span>`,\n            icon: \"export\",\n            valueTemplate: () => `<span class=\"k-editor-export\">${kendo.ui.icon({ icon: \"export\", iconClass: \"k-button-icon\" })}<span class=\"k-export-tool-text\"></span></span>`\n        }\n    }\n}));\n\n}(window.kendo.jQuery));\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    RangeUtils = Editor.RangeUtils,\n    blockElements = dom.blockElements,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatter = Editor.BlockFormatter;\n\nfunction indent(node, value) {\n    var isRtl = $(node).css(\"direction\") == \"rtl\",\n        indentDirection = isRtl ? \"Right\" : \"Left\",\n        property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n    if (value === undefined$1) {\n        return node.style[property] || 0;\n    } else if (value > 0) {\n        node.style[property] = value + \"px\";\n    } else {\n        node.style[property] = \"\";\n\n        if (!node.style.cssText) {\n            node.removeAttribute(\"style\");\n        }\n    }\n}\n\nvar IndentFormatter = Class.extend({\n    init: function() {\n        this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n    },\n\n    apply: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targets = [],\n            i, len, formatNode, parentList, sibling;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        if (formatNodes.length) {\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                if (dom.is(formatNodes[i], \"li\")) {\n                    if (!$(formatNodes[i]).index()) {\n                        targets.push(formatNodes[i].parentNode);\n                    } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                        targets.push(formatNodes[i]);\n                    }\n                } else {\n                    targets.push(formatNodes[i]);\n                }\n            }\n\n            while (targets.length) {\n                formatNode = targets.shift();\n                if (dom.is(formatNode, \"li\")) {\n                    parentList = formatNode.parentNode;\n                    sibling = $(formatNode).prev(\"li\");\n                    var siblingList = sibling.find(\"ul,ol\").last();\n\n                    var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                    if (nestedList && sibling[0]) {\n                        if (siblingList[0]) {\n                           siblingList.append(formatNode);\n                           siblingList.append($(nestedList).children());\n                           dom.remove(nestedList);\n                        } else {\n                            sibling.append(nestedList);\n                            nestedList.insertBefore(formatNode, nestedList.firstChild);\n                        }\n                    } else {\n                        nestedList = sibling.children(\"ul,ol\")[0];\n                        if (!nestedList) {\n                            nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                            sibling.append(nestedList);\n                        }\n\n                        while (formatNode && formatNode.parentNode == parentList) {\n                            nestedList.appendChild(formatNode);\n                            formatNode = targets.shift();\n                        }\n                    }\n                } else {\n                    var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                    indent(formatNode, marginLeft);\n\n                    for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                        if ($.contains(formatNode, targets[targetIndex])) {\n                            targets.splice(targetIndex, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n            formatter.apply(nodes);\n        }\n    },\n\n    getListTypeAttr: function(list) {\n        var type = list.getAttribute(\"type\");\n        var styleType = list.style.listStyleType;\n\n        return type ? { type: type } : { style: { listStyleType: styleType } };\n    },\n\n    mapImmutables: function(nodes) {\n        if (!this.immutables) {\n            return nodes;\n        } else {\n            var immutables = [];\n            return $.map(nodes, function(node) {\n                var immutable = Editor.Immutables.immutableParent(node);\n                if (immutable) {\n                    if ($.inArray(immutable, immutables) === -1) {\n                        immutables.push(immutable);\n                    } else {\n                        return null;\n                    }\n                }\n                return immutable || node;\n            });\n        }\n    },\n\n    remove: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targetNode, i, len, list, listParent, siblings,\n            formatNode, marginLeft;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        for (i = 0, len = formatNodes.length; i < len; i++) {\n            formatNode = $(formatNodes[i]);\n\n            if (formatNode.is(\"li\")) {\n                list = formatNode.parent();\n                listParent = list.parent();\n                // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                    // skip already processed nodes\n                    if (targetNode && $.contains(targetNode, listParent[0])) {\n                        continue;\n                    }\n\n                    siblings = formatNode.nextAll(\"li\");\n                    if (siblings.length) {\n                        $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                    }\n\n                    if (listParent.is(\"li\")) {\n                        formatNode.insertAfter(listParent);\n                    } else {\n                        formatNode.appendTo(listParent);\n                    }\n\n                    if (!list.children(\"li\").length) {\n                        list.remove();\n                    }\n\n                    continue;\n                } else {\n                    if (targetNode == list[0]) {\n                        // removing format on sibling LI elements\n                        continue;\n                    }\n                    targetNode = list[0];\n                }\n            } else {\n                targetNode = formatNodes[i];\n            }\n\n            marginLeft = parseInt(indent(targetNode), 10) - 30;\n            indent(targetNode, marginLeft);\n        }\n    }\n\n});\n\nvar IndentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.apply(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.remove(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n    },\n\n    initialize: function(ui, editor) {\n        $.extend(this.options, {\n            immutables: editor && editor.options.immutables\n        });\n    },\n\n    update: function(ui, nodes) {\n        var suitableNodes = this.finder.findSuitable(nodes),\n            toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\"),\n            isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n\n        for (i = 0, len = suitableNodes.length; i < len; i++) {\n            suitable = suitableNodes[i];\n\n            if (this.options.immutables) {\n                immutableParent = Editor.Immutables.immutableParent(suitable);\n\n                if (immutableParent) {\n                    suitable = immutableParent;\n                }\n            }\n\n            isOutdentable = indent(suitable);\n\n            if (!isOutdentable) {\n                listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n            }\n\n            if (isOutdentable) {\n                toolbar.enable(ui, true);\n                return;\n            }\n        }\n\n        toolbar.enable(ui, false);\n    }\n});\n\nextend(Editor, {\n    IndentFormatter: IndentFormatter,\n    IndentCommand: IndentCommand,\n    OutdentCommand: OutdentCommand,\n    OutdentTool: OutdentTool\n});\n\nregisterTool(\"indent\", new Tool({ command: IndentCommand }));\nregisterTool(\"outdent\", new OutdentTool({ command: OutdentCommand, ui: { enable: false } }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    extend = $.extend,\n    editorNS = kendo.ui.editor,\n    dom = editorNS.Dom,\n    Command = editorNS.Command,\n    Tool = editorNS.Tool,\n    BlockFormatter = editorNS.BlockFormatter,\n    normalize = dom.normalize,\n    RangeUtils = editorNS.RangeUtils,\n    registerTool = editorNS.EditorUtils.registerTool;\n\nvar ParagraphCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    _insertMarker: function(doc, range) {\n        var marker = dom.create(doc, 'a'), container;\n        marker.className = \"k-marker\";\n\n        range.insertNode(marker);\n\n        if (!marker.parentNode) {\n            // inserting paragraph in Firefox full body range\n            container = range.commonAncestorContainer;\n            container.innerHTML = \"\";\n            container.appendChild(marker);\n        }\n\n        normalize(marker.parentNode);\n\n        return marker;\n    },\n\n    _moveFocus: function(range, candidate) {\n        if (dom.isEmpty(candidate)) {\n            range.setStartBefore(candidate);\n        } else {\n            range.selectNodeContents(candidate);\n\n            var focusNode = RangeUtils.textNodes(range)[0];\n\n            if (!focusNode) {\n                while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                    candidate = candidate.firstChild;\n                }\n\n                focusNode = candidate;\n            }\n\n            if (dom.isEmpty(focusNode)) {\n                range.setStartBefore(focusNode);\n            } else {\n                if (dom.emptyNode(focusNode)) {\n                    focusNode.innerHTML = \"\\ufeff\";\n                }\n                var startNode = focusNode.firstChild || focusNode;\n                if (dom.isDataNode(startNode)) {\n                    range.setStart(startNode, 0);\n                } else {\n                    range.setStartBefore(startNode);\n                }\n            }\n        }\n    },\n\n    shouldTrim: function(range) {\n        var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n            startInBlock = dom.parentOfType(range.startContainer, blocks),\n            endInBlock = dom.parentOfType(range.endContainer, blocks);\n        return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n    },\n\n    _blankAfter: function(node) {\n        while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n            node = node.nextSibling;\n        }\n\n        return !node;\n    },\n\n    exec: function() {\n        const range = this.getRange();\n        const doc = RangeUtils.documentFromRange(range);\n        let parent, previous, next, paragraph, marker, li, heading, tableNode, rng,\n        shouldTrim;\n        const emptyParagraphContent = editorNS.emptyElementContent;\n\n        this.expandImmutablesIn(range);\n\n        shouldTrim = this.shouldTrim(range);\n\n        range.deleteContents();\n        marker = this._insertMarker(doc, range);\n\n        dom.stripBomNode(marker.previousSibling);\n        dom.stripBomNode(marker.nextSibling);\n\n        li = dom.closestEditableOfType(marker, ['li']);\n        heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n        tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n        if (li) {\n            // hitting 'enter' in empty li\n            if (dom.emptyNode(li)) {\n                paragraph = dom.create(doc, 'p');\n\n                if (dom.next(li)) {\n                    rng = range.cloneRange();\n                    rng.selectNode(li);\n\n                    RangeUtils.split(rng, li.parentNode);\n                }\n\n                const br = $(\"br\", li);\n                if (br.length == 1) {\n                    br.remove();\n                }\n\n                const parentNode = li.parentNode;\n                const parentChildrenLength = li.parentNode.children.length;\n                const firstChild = parentChildrenLength >= 1 && li.childNodes.length == 1 && li.children[0];\n\n                dom.insertAfter(paragraph, parentNode);\n                dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                if (firstChild && firstChild !== marker) {\n                    paragraph.appendChild(firstChild);\n                    paragraph.appendChild(marker);\n                } else {\n                    paragraph.innerHTML = emptyParagraphContent;\n                }\n                next = paragraph;\n            }\n        } else if (heading && this._blankAfter(marker)) {\n            paragraph = this._insertParagraphAfter(heading);\n            dom.remove(marker);\n            next = paragraph;\n        } else if (tableNode) {\n            paragraph = this._insertParagraphAfter(tableNode);\n            dom.remove(marker);\n            next = paragraph;\n        }\n\n        if (!next) {\n            if (!(li || heading)) {\n                new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n            }\n\n            range.selectNode(marker);\n\n            const headingDomName = heading ? dom.name(heading) : 'p';\n            parent = dom.parentOfType(marker, [li ? 'li' : headingDomName]);\n\n            RangeUtils.split(range, parent, shouldTrim);\n\n            previous = parent.previousSibling;\n\n            if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                previous = previous.firstChild;\n            }\n\n            next = parent.nextSibling;\n\n            this.clean(previous, { links: true });\n            this.clean(next, { links: true });\n\n            if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                next = next.firstChild;\n            }\n\n            dom.remove(parent);\n\n            // normalize updates the caret display in Gecko\n            normalize(previous);\n        }\n\n        normalize(next);\n\n        this._moveFocus(range, next);\n\n        range.collapse(true);\n\n        dom.scrollTo(next, true);\n\n        RangeUtils.selectRange(range);\n    },\n\n    _insertParagraphAfter: function(node) {\n        var range = this.getRange();\n        var doc = RangeUtils.documentFromRange(range);\n        var emptyElementContent = editorNS.emptyElementContent;\n        var paragraph = dom.create(doc, 'p');\n\n        dom.insertAfter(paragraph, node);\n        paragraph.innerHTML = emptyElementContent;\n\n        return paragraph;\n    },\n\n    clean: function(node, options) {\n        var root = node;\n\n        if (node.firstChild && dom.is(node.firstChild, 'br')) {\n            dom.remove(node.firstChild);\n        }\n\n        if (dom.isDataNode(node) && !node.nodeValue) {\n            node = node.parentNode;\n        }\n\n        if (node) {\n            var siblings = false;\n            while (node.firstChild && node.firstChild.nodeType == 1) {\n                siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                node = node.firstChild;\n            }\n\n            if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                $(root).find(\".k-br\").remove();\n                node.innerHTML = editorNS.emptyElementContent;\n            }\n\n            if (options && options.links) {\n                while (node != root) {\n                    if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                        dom.unwrap(node);\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n            }\n        }\n    }\n});\n\nvar NewLineCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.getRange();\n        this.expandImmutablesIn(range);\n\n        var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n        var node = range.startContainer;\n        var filler;\n        var browser = kendo.support.browser;\n        var oldIE = browser.msie && browser.version < 11;\n        var tableNode = dom.is(node, 'table') && node;\n        var kbrParent;\n\n        range.deleteContents();\n        if (tableNode) {\n            dom.insertAfter(br, tableNode);\n        } else {\n            kbrParent = $(node).closest('.k-br');\n            range.insertNode(br);\n\n            if (kbrParent.length) {\n                // pressing enter in an k-br node\n                dom.unwrap(kbrParent[0]);\n            }\n        }\n\n        normalize(br.parentNode);\n\n        if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n            // Gecko and WebKit cannot put the caret after only one br.\n            if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                $(br.nextSibling).remove();\n            }\n            filler = br.cloneNode(true);\n            filler.className = 'k-br';\n            dom.insertAfter(filler, br);\n        }\n\n        range.setStartAfter(br);\n        range.collapse(true);\n\n        dom.scrollTo(br.nextSibling || br, true);\n\n        RangeUtils.selectRange(range);\n    }\n});\n\nextend(editorNS, {\n    ParagraphCommand: ParagraphCommand,\n    NewLineCommand: NewLineCommand\n});\n\nregisterTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\nregisterTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    LinkFormatter = Editor.LinkFormatter,\n    textNodes = RangeUtils.textNodes,\n    keys = kendo.keys,\n    KEDITORFILEURL = \"#k-editor-file-url\",\n    KEDITORFILETEXT = \"#k-editor-file-text\",\n    KEDITORFILETITLE = \"#k-editor-file-title\";\n\nvar FileCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.formatter = new LinkFormatter();\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertFile: function(file, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.href && attributes.href != \"http://\") {\n\n            if (!file) {\n                file = dom.create(doc, \"a\", { href: attributes.href });\n                file.innerHTML = attributes.innerHTML;\n                file.title = attributes.title;\n\n                range.deleteContents();\n                range.insertNode(file);\n\n                if (!file.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                }\n\n                range.setStartAfter(file);\n                range.setEndAfter(file);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                dom.attr(file, attributes);\n            }\n        }\n\n        return false;\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        this.formatter.apply(range, this.attributes);\n        that.releaseRange(range);\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            nodes = textNodes(range),\n            applied = false,\n            file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n            dialog,\n            form,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            fileBrowser = options.fileBrowser,\n            showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertFile,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                innerHTML = element.find(KEDITORFILETEXT).val(),\n                title = element.find(KEDITORFILETITLE).val();\n\n            that.attributes = {\n                href: href,\n                innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                title: title\n            };\n\n            applied = that.insertFile(file, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            form.destroy();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n        dialogOptions.minWidth = 350;\n\n        dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n        form = that._createForm(dialog, showBrowser);\n\n        dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n        dialog.wrapper\n        .find(\".k-dialog-insert\").on(\"click\", apply).end()\n        .find(\".k-dialog-close\").on(\"click\", close).end()\n        .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n        // IE < 8 returns absolute url if getAttribute is not used\n        .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n        .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n        .find(KEDITORFILETITLE).val(file ? file.title : \"\").end();\n\n        var element = dialog.element;\n        if (showBrowser) {\n            that._fileBrowser = new kendo.ui.FileBrowser(\n                element.find(\".k-filebrowser\"),\n                extend({}, fileBrowser)\n            );\n\n            that._fileBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORFILEURL).val(this.value());\n                }\n            } );\n\n            that._fileBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORFILEURL).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog, showBrowser) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-file-url\",\n                    label: encode(messages.fileWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-file-text\",\n                    label: encode(messages.fileText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-file-title\",\n                    label: encode(messages.fileTitle),\n                    editor: \"TextBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        if (showBrowser) {\n            formElement.prepend($('<div class=\"k-filebrowser\"></div>'));\n        }\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"file-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    }\n\n});\n\nkendo.ui.editor.FileCommand = FileCommand;\n\nregisterTool(\"insertFile\", new Editor.Tool({ command: FileCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n\n    NS = \"kendoEditor\",\n    ACTIVESTATE = \"k-active\",\n    SELECTEDSTATE = \"k-selected\",\n    SCOPE = \"scope\",\n    ROW = \"row\",\n    COL = \"col\",\n    ROWGROUP = \"rowgroup\",\n    COLGROUP = \"colgroup\",\n    COLSPAN = \"colspan\",\n    ROWSPAN = \"rowspan\",\n    TABLE = \"table\",\n    THEAD = \"thead\",\n    TBODY = \"tbody\",\n    TR = \"tr\",\n    TD = \"td\",\n    TH = \"th\",\n\n    Tool = Editor.Tool,\n    InsertHtmlCommand = Editor.InsertHtmlCommand,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatTool = Editor.BlockFormatTool,\n    FormatCommand = Editor.FormatCommand,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    formats = kendo.ui.Editor.fn.options.formats,\n    getTouches = kendo.getTouches;\nvar template = kendo.template;\n\nvar columnTemplate = ({ width, content }) => `<td style=\"width:${width}%;\">${content}</td>`;\n\nvar tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\nvar TableCommand = InsertHtmlCommand.extend({\n    init: function(options) {\n        var o = $.extend({\n            postProcess: this.postProcess,\n            skipCleaners: true\n        }, options || {});\n\n        InsertHtmlCommand.fn.init.call(this, o);\n    },\n    _tableHtml: function(rows, columns) {\n        rows = rows || 1;\n        columns = columns || 1;\n        var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n        var rowHeight = 100 / rows;\n\n        return \"<table class='k-table' data-last>\" +\n                    new Array(rows + 1).join(\n                    \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                        new Array(columns + 1).join(columnHtml) +\n                    \"</tr>\") +\n               \"</table>\";\n    },\n\n    postProcess: function(editor, range) {\n        var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n        range.setStart(insertedTable.find(TD)[0], 0);\n        range.collapse(true);\n\n        editor.selectRange(range);\n    },\n\n    exec: function() {\n        var options = this.options;\n        options.html = this._tableHtml(options.rows, options.columns);\n\n        InsertHtmlCommand.fn.exec.call(this);\n    }\n});\n\nvar PopupTool = Tool.extend({\n    initialize: function(ui, editor) {\n        var that = this;\n        var btn = $(\"<button>\" + editor.options.messages.tableWizard + \"</button>\");\n        var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n            anchor: ui,\n            copyAnchorStyles: false,\n            open: this._open.bind(this),\n            activate: this._activate.bind(this),\n            close: this._close.bind(this)\n        }).data(\"kendoPopup\");\n\n        ui.on(\"click\", this._toggle.bind(this))\n          .on(\"keydown\", this._keydown.bind(this));\n\n        this._editor = editor;\n        this._popup = popup;\n\n        editor.tablePopup = this._popup;\n\n        var tableWizard = new Editor.TableWizardTool({\n            command: Editor.TableWizardCommand,\n            insertNewTable: true\n        });\n\n        registerTool(\"tableWizardInsert\", tableWizard);\n\n        btn.appendTo(popup.element);\n        btn.kendoButton({\n            icon: \"table-wizard\"\n        });\n\n        btn.on(\"click\", () => {\n            that._editor.exec(\"tableWizardInsert\");\n        });\n    },\n\n    popup: function() {\n        return this._popup;\n    },\n\n    _activate: $.noop,\n\n    _open: function() {\n        this._popup.options.anchor.addClass(ACTIVESTATE);\n    },\n\n    _close: function() {\n        this._popup.options.anchor.removeClass(ACTIVESTATE);\n    },\n\n    _keydown: function(e) {\n        var that = this,\n            keys = kendo.keys,\n            key = e.keyCode;\n\n        if (key == keys.ESC) {\n            that._popup.close();\n        } else if (key == keys.DOWN && e.altKey) {\n            that._popup.open();\n            that._setTableSize({ row: 1, col: 1 });\n        } else if (key === keys.ENTER) {\n            setTimeout(() => {\n                that._setTableSize({ row: 1, col: 1 });\n            });\n        }\n    },\n\n    _toggle: function(e) {\n        var button = $(e.target).closest(\".k-tool\");\n\n        if (!button.hasClass(\"k-disabled\")) {\n            this.popup().toggle();\n        }\n    },\n\n    update: function(ui) {\n        var popup = this.popup();\n\n        if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n            popup.close();\n        }\n\n        ui.removeClass(\"k-hover\");\n    },\n\n    destroy: function() {\n        if (this._popup) {\n            this._popup.destroy();\n        }\n    }\n});\n\nvar InsertTableTool = PopupTool.extend({\n    init: function(options) {\n        this.cols = 8;\n        this.rows = 6;\n\n        PopupTool.fn.init.call(this, $.extend(options, {\n            command: TableCommand,\n            popupTemplate:\n                \"<div class='k-ct-popup'>\" +\n                    \"<div>\" +\n                        new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                    \"</div>\" +\n                    \"<div class='k-status'></div>\" +\n                \"</div>\"\n        }));\n    },\n\n    _activate: function() {\n        var that = this,\n            element = that._popup.element,\n            cells = element.find(\".k-ct-cell\"),\n            firstCell = cells.eq(0),\n            lastCell = cells.eq(cells.length - 1),\n            start = kendo.getOffset(firstCell),\n            end = kendo.getOffset(lastCell),\n            cols = that.cols,\n            rows = that.rows,\n            cellWidth, cellHeight;\n\n        element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        end.left += lastCell[0].offsetWidth;\n        end.top += lastCell[0].offsetHeight;\n\n        cellWidth = (end.left - start.left) / cols;\n        cellHeight = (end.top - start.top) / rows;\n\n        function tableFromLocation(e) {\n            var w = $(window);\n            return {\n                row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n            };\n        }\n\n        element.autoApplyNS(NS)\n            .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                that._setTableSize(tableFromLocation(e));\n            })\n            .on(\"mouseleave\", \".k-ct-cell\", function() {\n                that._setTableSize();\n            })\n            .on(\"down\", \".k-ct-cell\", function(e) {\n                e.preventDefault();\n                var touch = getTouches(e)[0];\n                that._exec(tableFromLocation(touch.location));\n            });\n    },\n\n    _valid: function(size) {\n        return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n    },\n\n    _exec: function(size) {\n        if (this._valid(size)) {\n            this._editor.exec(\"createTable\", {\n                rows: size.row,\n                columns: size.col\n            });\n            this._popup.close();\n        }\n    },\n\n    _setTableSize: function(size) {\n        var element = this._popup.element;\n        var status = element.find(\".k-status\");\n        var cells = element.find(\".k-ct-cell\");\n        var cols = this.cols;\n        var messages = this._editor.options.messages;\n\n        if (this._valid(size)) {\n            status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n            cells.each(function(i) {\n                $(this).toggleClass(\n                    SELECTEDSTATE,\n                    i % cols < size.col && i / cols < size.row\n                );\n            });\n        } else {\n            status.text(messages.createTable);\n            cells.removeClass(SELECTEDSTATE);\n        }\n    },\n\n    _keydown: function(e) {\n        var initiallyVisible = this._popup.visible();\n\n        PopupTool.fn._keydown.call(this, e);\n\n        if (!this._popup.visible()) {\n            return;\n        }\n\n        var keys = kendo.keys;\n        var key = e.keyCode;\n        var cells = this._popup.element.find(\".k-ct-cell\");\n        var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n        var selectedRows = Math.floor(focus / this.cols);\n        var selectedColumns = focus % this.cols;\n\n        var changed = false,\n            button;\n\n        if (key == keys.DOWN && !e.altKey) {\n            changed = true;\n            selectedRows++;\n        } else if (key == keys.UP) {\n            changed = true;\n            selectedRows--;\n        } else if (key == keys.RIGHT) {\n            changed = true;\n            selectedColumns++;\n        } else if (key == keys.LEFT) {\n            changed = true;\n            selectedColumns--;\n        } else if (key == keys.TAB) {\n            button = this._popup.element.find(\".k-button\");\n\n            if (button.length > 0) {\n                changed = true;\n                button.trigger(\"focus\");\n            }\n        }\n\n        var tableSize = {\n            row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n            col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n        };\n\n        if (key == keys.ENTER && initiallyVisible) {\n            this._exec(tableSize);\n        } else {\n            this._setTableSize(tableSize);\n        }\n\n        if (changed) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    },\n\n    _open: function() {\n        var messages = this._editor.options.messages;\n\n        PopupTool.fn._open.call(this);\n\n        this.popup().element\n            .find(\".k-status\").text(messages.createTable).end()\n            .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n    },\n\n    _close: function() {\n        PopupTool.fn._close.call(this);\n        this.popup().element.off(\".\" + NS);\n    }\n});\n\nvar TableModificationCommand = Command.extend({\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n\n        $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n            .each(function(index,el) {\n                el.remove();\n            });\n\n        this.editor.selectRange(point.toRange());\n    },\n    _clearColIndexAttr: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n    },\n    _mapColIndices: function(table) {\n        dom.reMapTableColumns(table, \"col-index\");\n    },\n    _findRowSpanCell: function(parent, rowIndex, colIndex) {\n        var row, cell;\n\n        for (var i = rowIndex; i >= 0; i--) {\n            row = parent.rows[i];\n            cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length) {\n                return cell;\n            }\n        }\n    },\n    _resetElementResizing: function(editor) {\n        editor._destroyResizings();\n        editor._initializeColumnResizing();\n        editor._initializeRowResizing();\n        editor._initializeElementResizing();\n    },\n    _findNextTdInRow: function(row, colIndex) {\n        var lastTd = row.find(\"td:last-child\"),\n            lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n            td;\n\n        for (var i = colIndex; i <= lastIndex; i++) {\n            td = row.find(\"[col-index=\" + i + \"]\");\n            if (td.length) {\n                return td;\n            }\n        }\n    },\n    _adjustColgroups: function(row, table) {\n        var colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            cells = row.cells,\n            numberOfCells = cells.length,\n            i, colgroup, cell;\n\n        while (colElements.length > 0) {\n            colElements[0].remove();\n        }\n        while (colgroupElements.length > 0) {\n            colgroupElements[0].remove();\n        }\n\n        for (i = numberOfCells - 1; i >= 0; i--) {\n            cell = cells[i];\n            if (cell.getAttribute(SCOPE) === COLGROUP) {\n                colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                table.prepend(colgroup);\n            } else {\n                table.prepend(dom.createEmptyNode(this.editor.document, COL));\n            }\n        }\n    },\n    _associateHeaderIds: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n        dom.reMapTableColumns(table, \"col-index\");\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n        dom.associateWithIds(table);\n    },\n    _getNumberOfColumns: function(table) {\n        return dom._getNumberOfColumns(table, \"td, th\");\n    }\n});\n\nvar InsertRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            position = this.options.position || \"after\",\n            cellCount, row, cell,\n            newRow, rowIndex, rowSpanIndex, createdCell;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        row = td.parentNode;\n        rowIndex = dom.findNodeIndex(row, true);\n\n        if (td.rowSpan > 1 && position === \"after\") {\n            row = table.rows[rowIndex + td.rowSpan - 1];\n        }\n\n        cellCount = this._getNumberOfColumns(table);\n        newRow = row.cloneNode(true);\n        $(newRow).empty();\n\n        for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                } else {\n                    this._appendCell(newRow, cell);\n                }\n            } else {\n                rowIndex = dom.findNodeIndex(row, true);\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                rowSpanIndex = cell.closest(TR).index();\n\n                if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                    this._appendCell(newRow, cell);\n                } else {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                }\n            }\n\n            createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n            if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                createdCell.attr(SCOPE, ROW);\n            }\n        }\n\n        if (position == \"before\") {\n            dom.insertBefore(newRow, row);\n        } else {\n            dom.insertAfter(newRow, row);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _appendCell: function(row, cell) {\n        var newCell;\n\n        newCell = cell.clone();\n        newCell.html(Editor.emptyTableCellContent);\n        newCell.removeAttr(ROWSPAN);\n        newCell.appendTo(row);\n    }\n});\n\nvar InsertColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            columnIndex,\n            i,\n            rows = table && table.rows,\n            cell,\n            newCell,\n            position = this.options.position || \"after\";\n\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n        if (td.colSpan > 1 && position === \"after\") {\n            td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n            columnIndex = columnIndex + td.colSpan - 1;\n        }\n\n        for (i = 0; i < rows.length; i++) {\n            cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n            if (!cell) {\n                continue;\n            }\n\n            newCell = cell.cloneNode();\n            newCell.innerHTML = Editor.emptyTableCellContent;\n            newCell.removeAttribute(COLSPAN);\n\n            if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                newCell.setAttribute(SCOPE, COL);\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newCell, cell);\n            } else {\n                dom.insertAfter(newCell, cell);\n            }\n\n            this._resizeCells(newCell, cell);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _processForColSpan: function(row, columnIndex, position, selectedCell) {\n        var cell,\n            colSpanEffect,\n            index = columnIndex - 1;\n\n        cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n        if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n            cell.colSpan += 1;\n            return;\n        }\n\n        if (cell) {\n            return cell;\n        }\n\n        for (index; index >= 0; index--) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n            if (cell && cell.colSpan > 1) {\n                break;\n            }\n        }\n\n        if (!cell) {\n            return;\n        }\n\n        colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n        if (colSpanEffect === columnIndex && position === \"after\") {\n            return cell;\n        } else if (columnIndex <= colSpanEffect) {\n            cell.setAttribute(COLSPAN, cell.colSpan + 1);\n        }\n    },\n    _resizeCells: function(newCell, cell) {\n        var width = newCell.style.width,\n        parsedWidth, unit, calculatedWidth;\n\n        if (!width) {\n            return;\n        }\n\n        parsedWidth = parseFloat(width);\n        unit = width.slice(parsedWidth.toString().length);\n        calculatedWidth = (parsedWidth / 2) + unit;\n\n        newCell.style.width = calculatedWidth;\n        cell.style.width = calculatedWidth;\n    }\n});\n\nvar DeleteRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange();\n        var rows = RangeUtils.mapAll(range, function(node) {\n            return $(node).closest(TR)[0];\n        });\n        var td = dom.closest(range.endContainer, [TD, TH]);\n        var row = rows[0];\n        var rowSpan = td ? td.rowSpan : 1;\n        var rowIndex = $(rows[0]).index();\n        var table = dom.closest(row, TABLE);\n        var rowParent = row.parentElement;\n        var focusElement;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        for (var x = 0; x < rowSpan; x++) {\n            if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                rows.push(rowParent.rows[rowIndex + x]);\n            }\n        }\n\n        if (table.rows.length <= rows.length) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else if (rowParent.rows.length <= rows.length) {\n            focusElement = rowParent.nextSibling;\n\n            if (!focusElement) {\n                focusElement = rowParent.previousSibling;\n            }\n\n            dom.remove(rowParent);\n        } else {\n            this._mapColIndices(table);\n\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                dom.removeTextSiblings(row);\n                focusElement = dom.next(row) || dom.prev(row);\n                focusElement = focusElement.cells[0];\n\n                // IE needs to focus the new row before removing the old one\n                this._focusElement(range, focusElement);\n                focusElement = null;\n\n                this._handleRowSpanCells(table, row);\n\n                dom.remove(row);\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n            this._adjustColgroups(rowParent.rows[0], table);\n        }\n\n        if (focusElement) {\n            this._focusElement(range, focusElement);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _focusElement: function(range, node) {\n        range.setStart(node, 0);\n        range.collapse(true);\n        this.editor.selectRange(range);\n    },\n    _handleRowSpanCells: function(table, row) {\n        var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n            firstRow = table.rows[0],\n            lastCell = firstRow.cells[firstRow.cells.length - 1],\n            lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n        for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n            if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                nextRow = table.rows[rowIndex + 1];\n                adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                if (adjacentCell.length) {\n                    adjacentCell.before(cell);\n                } else {\n                    $(nextRow).append(cell);\n                }\n                this._reduceRowSpan(cell);\n            }\n\n            if (!cell.length) {\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                this._reduceRowSpan(cell);\n            }\n        }\n    },\n    _reduceRowSpan: function(td) {\n        var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n        if (rowSpanValue <= 1) {\n            td.removeAttr(ROWSPAN);\n            if (td.attr(SCOPE) === ROWGROUP) {\n                td.attr(SCOPE, ROW);\n            }\n        } else {\n            td.attr(ROWSPAN, rowSpanValue);\n        }\n    }\n});\n\nvar DeleteColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            rows = table && table.rows,\n            columnCount = rows && rows[0].cells.length,\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            focusElement, columnIndex, i, cell, x;\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        if (columnCount == 1 || td.colSpan == columnCount) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else {\n            dom.removeTextSiblings(td);\n\n            focusElement = dom.next(td) || dom.prev(td);\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n            for (x = 0; x < td.colSpan; x++) {\n                for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                    cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                    if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                        cell.remove();\n                    } else {\n                        this._handleColSpanCells(rows[i], columnIndex + x);\n                    }\n                }\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        if (focusElement) {\n            range.setStart(focusElement, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _handleColSpanCells: function(row, colIndex) {\n        var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n        if (cell.length && cell.prop(\"colSpan\") > 1) {\n            var clone = cell.clone(true);\n            cell.after(clone);\n            this._reduceColSpan(clone);\n            clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n            cell.remove();\n            return;\n        }\n\n        for (var i = colIndex; i >= 0; i--) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                this._reduceColSpan(cell);\n                cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                return;\n            }\n        }\n    },\n    _reduceColSpan: function(td) {\n        var colSpanValue = td.prop(\"colSpan\") - 1;\n\n        if (colSpanValue <= 1) {\n            td.removeAttr(COLSPAN);\n            if (td.attr(SCOPE) === COLGROUP) {\n                td.attr(SCOPE, COL);\n            }\n        } else {\n            td.attr(COLSPAN, colSpanValue);\n        }\n    }\n});\n\nvar MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table, row, columnIndex, nextTd, colspan;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            table = dom.closest(td, TABLE);\n            row = td.parentNode;\n            columnIndex = dom.findNodeIndex(td, true);\n            nextTd = row.children[columnIndex + 1];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n            nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n            if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n            $(td).prop(COLSPAN, colspan)\n                 .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n            $(td).width(td.offsetWidth);\n            $(nextTd).remove();\n\n            if (td.getAttribute(SCOPE) === COL) {\n                td.setAttribute(SCOPE, COLGROUP);\n            }\n            if (td.getAttribute(SCOPE) === COLGROUP) {\n                this._adjustColgroups(row, table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n            this._resetElementResizing(this.editor);\n    },\n    _getColspan: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n    }\n});\n\nvar MergeCellsVerticallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            tr = dom.closest(td, TR);\n            parent = dom.closest(td, [THEAD, TBODY]);\n            table = dom.closest(td, TABLE);\n            columnIndex = dom.findNodeIndex(td, true);\n            rowIndex = dom.findNodeIndex(tr, true);\n\n            if (rowIndex + 1 === parent.rows.length) {\n                this.releaseRange(range);\n                return;\n            }\n\n            targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n            bottomTd = targetRow && targetRow.children[columnIndex];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = $(td).attr(\"col-index\");\n            bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n            if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                 .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n            if (td.getAttribute(SCOPE) === ROW) {\n                td.setAttribute(SCOPE, ROWGROUP);\n            }\n\n            $(bottomTd).remove();\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n    },\n    _getRowspan: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n    }\n});\n\nvar SplitCellCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            type = this.options.type,\n            attr = type === \"row\" ? COLSPAN : ROWSPAN,\n            td = dom.closest(range.endContainer, [TD, TH]),\n            parent = dom.closest(td, [THEAD, TBODY]),\n            table = dom.closest(td, TABLE),\n            emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellHorizontally(td, parent, attr, emptyTd);\n        } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellVertically(td, parent, attr, emptyTd);\n        }\n\n        if ($(td).prop(attr.toLowerCase()) <= 1) {\n            $(td).removeAttr(attr);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n    },\n    _getRowspanValue: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10);\n    },\n    _getColspanValue: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10);\n    },\n    _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n        var rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            tdToAdd = $(emptyTd),\n            colSpanResult = Math.floor(colSpan / 2);\n\n            if (colSpanResult > 1) {\n                tdToAdd.attr(COLSPAN, colSpanResult);\n            }\n\n            if (rowSpan > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpan);\n            }\n\n            $(td).prop(attr, colSpan - colSpanResult)\n                .after(tdToAdd);\n\n            $(td).width(td.offsetWidth);\n            tdToAdd.width(tdToAdd[0].offsetWidth);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    tdToAdd.attr(SCOPE, COL);\n                    if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, COL);\n                    }\n\n                    this._adjustColgroups(td.parentNode, parent.parentNode);\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    },\n    _splitCellVertically: function(td, parent, attr, emptyTd) {\n        var tr = dom.closest(td,TR),\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n            rowIndex = dom.findNodeIndex(tr, true),\n            rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            rowSpanResult = Math.floor(rowSpan / 2),\n            targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n            nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n            tdToAdd = $(emptyTd);\n\n            if (rowSpanResult > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpanResult);\n            }\n            if (colSpan > 1) {\n                tdToAdd.attr(COLSPAN, colSpan);\n            }\n\n            if (nextTd && nextTd.length) {\n                nextTd.before(tdToAdd);\n            } else {\n                targetRow.append(tdToAdd);\n            }\n\n            $(td).prop(attr, rowSpan - rowSpanResult);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === ROWGROUP) {\n                    tdToAdd.attr(SCOPE, ROW);\n                    if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, ROW);\n                    }\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    }\n});\n\nvar TableModificationTool = Tool.extend({\n    command: function(options) {\n        var commandsMap = {\n            row: {\n                insert: InsertRowCommand,\n                \"delete\": DeleteRowCommand,\n                merge: MergeCellsHorizontallyCommand,\n                split: SplitCellCommand\n            },\n            column: {\n                insert: InsertColumnCommand,\n                \"delete\": DeleteColumnCommand,\n                merge: MergeCellsVerticallyCommand,\n                split: SplitCellCommand\n            }\n        };\n\n        options = extend(options, this.options);\n        options.action = options.action || \"insert\";\n\n        return new commandsMap[options.type][options.action](options);\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nvar TableFormatCommand = FormatCommand.extend({\n    exec: function() {\n        var that = this;\n        var editor = that.editor;\n\n        FormatCommand.fn.exec.call(this);\n\n        if (editor.elementResizing) {\n            editor.elementResizing._showResizeHandles();\n        }\n    }\n});\n\n// var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n// });\n\nvar TableFormatTool = BlockFormatTool.extend({\n    update: function(ui, nodes) {\n        var isTable = !tableFormatFinder.isFormatted(nodes),\n            isFormatted = this.options.finder.isFormatted(nodes, this.isTable),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (toolbar) {\n            toolbar.toggle(ui, isFormatted);\n        }\n\n        if (isTable === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    },\n    command: function(commandArguments) {\n        var that = this;\n\n        return new TableFormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n    isTable: function(node) {\n        return dom.is(node, \"table\");\n    }\n});\n\nextend(kendo.ui.editor, {\n    PopupTool: PopupTool,\n    TableCommand: TableCommand,\n    InsertTableTool: InsertTableTool,\n    TableFormatTool: TableFormatTool,\n    TableFormatCommand: TableFormatCommand,\n    TableModificationTool: TableModificationTool,\n    InsertRowCommand: InsertRowCommand,\n    InsertColumnCommand: InsertColumnCommand,\n    DeleteRowCommand: DeleteRowCommand,\n    DeleteColumnCommand: DeleteColumnCommand,\n    MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n    MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n    SplitCellCommand: SplitCellCommand\n});\n\n\nregisterTool(\"createTable\", new InsertTableTool({ ui: { popup: true, overflow: \"never\" } }));\n\nregisterTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\" }));\nregisterTool(\"addColumnRight\", new TableModificationTool({ type: \"column\" }));\nregisterTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\" }));\nregisterTool(\"addRowBelow\", new TableModificationTool({ type: \"row\" }));\nregisterTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\" }));\nregisterTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\" }));\nregisterTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\" }));\nregisterTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\" }));\nregisterTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\" }));\nregisterTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\" }));\n\nregisterFormat(\"tableAlignLeft\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"left\" } }\n]);\nregisterTool(\"tableAlignLeft\", new TableFormatTool({\n    format: formats.tableAlignLeft,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\nregisterFormat(\"tableAlignCenter\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"center\" } }\n]);\nregisterTool(\"tableAlignCenter\", new TableFormatTool({\n    format: formats.tableAlignCenter,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\nregisterFormat(\"tableAlignRight\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n    { tags: [\"table\"], attr: { align: \"right\" } }\n]);\nregisterTool(\"tableAlignRight\", new TableFormatTool({\n    format: formats.tableAlignRight,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        extend = $.extend;\n\nvar Clipboard = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        var pasteCleanup = editor.options.pasteCleanup;\n        this.nonSplittableTagsOnPaste = editor.options.nonSplittableTagsOnPaste || [];\n        this.cleaners = [\n            new ScriptCleaner(pasteCleanup),\n            new TabCleaner(pasteCleanup),\n            new MSWordFormatCleaner(pasteCleanup),\n            new WebkitFormatCleaner(pasteCleanup),\n            new HtmlTagsCleaner(pasteCleanup),\n            new HtmlAttrCleaner(pasteCleanup),\n            new HtmlContentCleaner(pasteCleanup),\n            new CustomCleaner(pasteCleanup) //always keep at end\n        ];\n    },\n\n    htmlToFragment: function(html) {\n        var editor = this.editor,\n            doc = editor.document,\n            container = dom.create(doc, 'div'),\n            fragment = doc.createDocumentFragment();\n\n        container.innerHTML = html;\n\n        while (container.firstChild) {\n            fragment.appendChild(container.firstChild);\n        }\n\n        return fragment;\n    },\n\n    isBlock: function(html) {\n        return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n    },\n\n    _startModification: function() {\n        var range;\n        var restorePoint;\n        var editor = this.editor;\n\n        if (this._inProgress) {\n            return;\n        }\n\n        this._inProgress = true;\n\n        range = editor.getRange();\n        restorePoint = new RestorePoint(range, editor.body);\n\n        dom.persistScrollTop(editor.document);\n\n        return { range: range, restorePoint: restorePoint };\n    },\n\n    _endModification: function(modificationInfo) {\n        editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n        this.editor._selectionChange();\n\n        this._inProgress = false;\n    },\n\n    _contentModification: function(before, after) {\n        var that = this;\n        var editor = that.editor;\n        var modificationInfo = that._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        before.call(that, editor, modificationInfo.range);\n\n        setTimeout(function() {\n            after.call(that, editor, modificationInfo.range);\n\n            that._endModification(modificationInfo);\n        });\n    },\n\n    _removeBomNodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n        }\n    },\n\n    _onBeforeCopy: function(range) {\n        var marker = new Marker();\n        marker.add(range);\n\n        this._removeBomNodes(range);\n\n        marker.remove(range);\n\n        this.editor.selectRange(range);\n    },\n\n    oncopy: function() {\n        this._onBeforeCopy(this.editor.getRange());\n    },\n\n    oncut: function() {\n        this._onBeforeCopy(this.editor.getRange());\n        this._contentModification($.noop, $.noop);\n    },\n\n    _fileToDataURL: function(blob) {\n        var deferred = $.Deferred();\n\n        var reader = new FileReader();\n\n        if (!(blob instanceof window.File) && blob.getAsFile) {\n            blob = blob.getAsFile();\n        }\n\n        reader.onload = deferred.resolve.bind(deferred);\n\n        reader.readAsDataURL(blob);\n\n        return deferred.promise();\n    },\n\n    _triggerPaste: function(html, options) {\n        var args = { html: html || \"\" };\n\n        args.html = args.html.replace(/\\ufeff/g, \"\");\n\n        this.editor.trigger(\"paste\", args);\n\n        this.paste(args.html, options || {});\n    },\n\n    _handleImagePaste: function(e) {\n        if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n            return;\n        }\n\n        var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                    window.clipboardData || {};\n\n        var items = clipboardData.items || clipboardData.files;\n\n        return this._insertImages(items);\n    },\n\n    _insertImages: function(items) {\n        if (!items) {\n            return;\n        }\n\n        var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n        var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n        if (html.length || !images.length) {\n            return;\n        }\n\n        var modificationInfo = this._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        $.when.apply($, $.map(images, this._fileToDataURL))\n            .done((function() {\n                var results = Array.prototype.slice.call(arguments);\n                var html = $.map(results, function(e) {\n                    return '<img src=\"' + e.target.result + '\" />';\n                }).join(\"\");\n\n                this._triggerPaste(html);\n\n                this._endModification(modificationInfo);\n            }).bind(this));\n\n        return true;\n    },\n\n    onpaste: function(e) {\n        if (this.editor.body.contentEditable === \"false\") {\n            return;\n        }\n\n        if (this._handleImagePaste(e)) {\n            e.preventDefault();\n            return;\n        }\n\n        this.expandImmutablesIn();\n\n        this._contentModification(\n            function beforePaste(editor, range) {\n                var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: \"\\ufeff\"\n                    });\n                var browser = kendo.support.browser;\n                var body = editor.body;\n\n                this._decoreateClipboardNode(clipboardNode, body);\n\n                body.appendChild(clipboardNode);\n\n                //Browser scrolls to clipboardNode\n                if (browser.webkit) {\n                    this._moveToCaretPosition(clipboardNode, range);\n                }\n\n                // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                if (browser.msie && browser.version < 11) {\n                    e.preventDefault();\n                    var r = editor.createRange();\n                    r.selectNodeContents(clipboardNode);\n                    editor.selectRange(r);\n                    var textRange = editor.document.body.createTextRange();\n                    textRange.moveToElementText(clipboardNode);\n                    $(body).off('paste');\n                    textRange.execCommand('Paste');\n                    $(body).on('paste', this.onpaste.bind(this));\n                } else {\n                    var clipboardRange = editor.createRange();\n                    clipboardRange.selectNodeContents(clipboardNode);\n                    editor.selectRange(clipboardRange);\n                }\n\n                range.deleteContents();\n            },\n            function afterPaste(editor, range) {\n                var html = \"\", containers;\n\n                editor.selectRange(range);\n\n                containers = $(editor.body).children(\".k-paste-container\");\n\n                containers.each(function() {\n                    var lastChild = this.lastChild;\n\n                    if (lastChild && dom.is(lastChild, 'br')) {\n                        dom.remove(lastChild);\n                    }\n\n                    html += this.innerHTML;\n                });\n\n                containers.remove();\n\n                this._triggerPaste(html, { clean: true });\n            }\n        );\n    },\n    ondragover: function(e) {\n        if (browser.msie || browser.edge) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    },\n    ondrop: function(e) {\n        if (!('FileReader' in window)) {\n            return;\n        }\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n        var items = dataTransfer.items || dataTransfer.files;\n\n        if (this._insertImages(items)) {\n            e.preventDefault();\n        }\n    },\n    _decoreateClipboardNode: function(node, body) {\n        if (!browser.msie && !browser.webkit) {\n            return;\n        }\n\n        node = $(node);\n        node.css({\n            borderWidth: \"0px\",\n            width: \"0px\",\n            height: \"0px\",\n            overflow: \"hidden\",\n            margin: \"0\",\n            padding: \"0\"\n        });\n\n        if (browser.msie) {\n            //node inherits BODY styles and this causes the browser to add additional\n            var documentElement = $(body.ownerDocument.documentElement);\n\n            node.css({\n                fontVariant: \"normal\",\n                fontWeight: \"normal\",\n                lineSpacing: \"normal\",\n                lineHeight: \"normal\",\n                textDecoration: \"none\"\n            });\n            var color = documentElement.css(\"color\");\n            if (color) {\n                node.css(\"color\", color);\n            }\n            var fontFamily = documentElement.css(\"fontFamily\");\n            if (fontFamily) {\n                node.css(\"fontFamily\", fontFamily);\n            }\n            var fontSize = documentElement.css(\"fontSize\");\n            if (fontSize) {\n                node.css(\"fontSize\", fontSize);\n            }\n        }\n    },\n    _moveToCaretPosition: function(node, range) {\n        var that = this;\n        var body = that.editor.body;\n        var nodeOffset = dom.offset(node, body);\n        var caretOffset = that._caretOffset(range, body);\n        var translateX = caretOffset.left - nodeOffset.left;\n        var translateY = caretOffset.top - nodeOffset.top;\n        var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n        $(node).css({\n            \"-webkit-transform\": translate,\n            \"transform\": translate\n        });\n    },\n    _caretOffset: function(range, body) {\n        var editor = this.editor;\n        var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n        var startContainer = range.startContainer;\n        var rangeChanged;\n\n        if (range.collapsed) {\n            var isStartTextNode = dom.isDataNode(startContainer);\n            if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                dom.insertBefore(caret, startContainer);\n            } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                dom.insertAfter(caret, startContainer);\n            } else {\n                range.insertNode(caret);\n                rangeChanged = true;\n            }\n        } else {\n            startContainer = startContainer === body ?\n                startContainer.childNodes[range.startOffset] : startContainer;\n            dom.insertBefore(caret, startContainer);\n        }\n\n        var offset = dom.offset(caret, body);\n        var prev = caret.previousSibling;\n        var next = caret.nextSibling;\n\n        dom.remove(caret);\n\n        if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n            var prevLength = prev.length;\n            next.data = prev.data + next.data;\n            range.setStart(next, prevLength);\n            dom.remove(prev);\n\n            range.collapse(true);\n            editor.selectRange(range);\n        }\n\n        return offset;\n    },\n\n    expandImmutablesIn: function(range) {\n        var editor = this.editor;\n        if (editor && editor.options.immutables) {\n            var body = editor.body;\n            range = range || editor.getRange();\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            if (range.startContainer === body && range.startOffset === 0) {\n                var doc = body.ownerDocument;\n                var bomNode = doc.createTextNode(\"\\ufeff\");\n                body.insertBefore(bomNode, body.childNodes[0]);\n                range.setStartBefore(bomNode);\n            }\n            editor.selectRange(range);\n        }\n    },\n\n    splittableParent: function(block, node) {\n        var parentNode, body;\n\n        if (block) {\n            return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n        }\n\n        parentNode = node.parentNode;\n        body = node.ownerDocument.body;\n\n        if (dom.isInline(parentNode)) {\n            while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                parentNode = parentNode.parentNode;\n            }\n        }\n\n        return parentNode;\n    },\n\n    paste: function(html, options) {\n        var editor = this.editor,\n            nonSplittableTagsOnPaste = this.nonSplittableTagsOnPaste,\n            preventSplit = false,\n            unwrapPasted = false,\n            i, l, childNodes, isList;\n\n        this.expandImmutablesIn();\n\n        options = extend({ clean: false, split: true }, options);\n\n        if (!options.skipCleaners) {\n            for (i = 0, l = this.cleaners.length; i < l; i++) {\n                if (this.cleaners[i].applicable(html)) {\n                    html = this.cleaners[i].clean(html);\n                }\n            }\n        }\n\n        if (options.clean) {\n            // remove br elements which immediately precede block elements\n            html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n            // remove empty inline elements\n            html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n        }\n\n        html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n        // It is possible in IE to copy just <li> tags\n        html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n        var block = this.isBlock(html);\n\n        editor.focus();\n        var range = editor.getRange();\n        range.deleteContents();\n\n        if (range.startContainer == editor.document) {\n            range.selectNodeContents(editor.body);\n        }\n\n        var marker = new Marker();\n        var caret = marker.addCaret(range);\n\n        var parent = this.splittableParent(block, caret);\n        var unwrap = false;\n\n        for (i = 0; i < nonSplittableTagsOnPaste.length; i++) {\n            const splitter = nonSplittableTagsOnPaste[i],\n                tag = splitter.tag || splitter;\n\n            if (dom.is(parent, tag)) {\n                preventSplit = true;\n                unwrapPasted = splitter.unwrap !== false;\n                break;\n            }\n        }\n\n        var splittable = parent != editor.body && !dom.is(parent, \"td\") && !preventSplit;\n\n        if (options.split && splittable && (block || dom.isInline(parent))) {\n            range.selectNode(caret);\n            RangeUtils.split(range, parent, true);\n            unwrap = true;\n        }\n\n        var fragment = this.htmlToFragment(html);\n\n        if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n            var fragmentsHtml = [];\n            for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n            }\n\n            fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n        }\n\n        childNodes = fragment.childNodes;\n\n        if (unwrapPasted) {\n            isList = dom.list(childNodes[0]);\n            dom.unwrap(childNodes[0]);\n\n            if (isList) {\n                range.selectNode(caret.parentNode);\n            }\n        }\n\n        $(childNodes)\n            .filter(\"table\").addClass(\"k-table\").end()\n            .find(\"table\").addClass(\"k-table\");\n\n        $(childNodes).each(function(index, elm) {\n           if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n           }\n        });\n\n        range.insertNode(fragment);\n\n        parent = this.splittableParent(block, caret);\n        if (unwrap) {\n            while (caret.parentNode != parent) {\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.unwrap(caret.parentNode);\n        }\n\n        dom.normalize(range.commonAncestorContainer);\n        caret.style.display = 'inline';\n        dom.restoreScrollTop(editor.document);\n        dom.scrollTo(caret);\n        marker.removeCaret(range);\n\n        var rangeEnd = range.commonAncestorContainer.parentNode;\n        if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n            range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n            range.collapse(true);\n        }\n\n        var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n        if (focusedTable.get(0)) {\n            var siblingNodes = focusedTable.parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n            }\n        }\n\n        editor._handleSpaceAndNewLines();\n        editor.selectRange(range);\n    }\n});\n\nvar Cleaner = Class.extend({\n    init: function(options) {\n        this.options = options || {};\n        this.replacements = [];\n    },\n\n    clean: function(html, customReplacements) {\n        var that = this,\n            replacements = customReplacements || that.replacements,\n            i, l;\n\n        for (i = 0, l = replacements.length; i < l; i += 2) {\n            html = html.replace(replacements[i], replacements[i + 1]);\n        }\n\n        return html;\n    }\n});\n\nvar ScriptCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n        ];\n    },\n\n    applicable: function(html) {\n        return !this.options.none && (/<script[^>]*>/i).test(html);\n    }\n});\n\nvar TabCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        var replacement = ' ';\n        this.replacements = [\n            /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n            /\\t/gi, replacement,\n            /&nbsp;&nbsp; &nbsp;/gi, replacement\n        ];\n    },\n\n    applicable: function(html) {\n        return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n    }\n});\n\nvar MSWordFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.junkReplacements = [\n            /<\\?xml[^>]*>/gi, '',\n            /<!--(.|\\n)*?-->/g, '', /* comments */\n            /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n            /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n            /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n            /<\\/o>/g, ''\n        ];\n        this.replacements = this.junkReplacements.concat([\n            /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n            /<br><br>/g, '<BR><BR>',\n            /<br>\\n/g, '<br/>',\n            /<br>(?!\\n)/g, ' ',\n            /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n            /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n            /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n            /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n            /<BR><BR>/g, '<br>',\n            /^\\s*(&nbsp;)+/gi, '',\n            /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n            /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n            /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n            /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n            /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n            /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n            /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n        ]);\n    },\n\n    convertFontMatch: function(match, closing, args) {\n        var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n        var face = faceRe.exec(args);\n        var family = args && face && face[1];\n\n        if (closing) {\n            return '</span>';\n        } else if (family) {\n            return '<span style=\"font-family:' + family + '\">';\n        } else {\n            return '<span>';\n        }\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Mso/i).test(html) ||\n               (/style=\"[^\"]*mso-/i).test(html) ||\n               (/urn:schemas-microsoft-com:office/).test(html);\n    },\n\n    stripEmptyAnchors: function(html) {\n        return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n            if (!attributes || attributes.indexOf(\"href\") < 0) {\n                return \"\";\n            }\n\n            return a;\n        });\n    },\n\n    listType: function(p, listData) {\n        var html = p.innerHTML;\n        var text = dom.innerText(p);\n\n        var startingSymbol;\n        var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n        var symbol = matchSymbol && matchSymbol[1];\n        var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n        var trimStartText = function(text) {\n            return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n        };\n\n        if (matchSymbol) {\n            startingSymbol = true;\n        }\n\n        html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n        if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n            (startingSymbol && /^.\\u00a0+/.test(html)) ||\n            (symbol && !isNumber && listData)) {\n            return {\n                tag: 'ul',\n                style: this._guessUnorderedListStyle(trimStartText(text))\n            };\n        }\n\n        if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n            return {\n                tag: 'ol',\n                style: this._guessOrderedListStyle(trimStartText(text))\n            };\n        }\n    },\n\n    _convertToLi: function(p) {\n        var content;\n\n        if (p.childNodes.length == 1) {\n            content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n            content = this._checkForBullet(content);\n        } else {\n            content = this._getHtmlNoBullet(p);\n        }\n\n        dom.remove(p);\n\n        return dom.create(document, 'li', { innerHTML: content });\n    },\n\n    _checkForBullet: function(html) {\n        var p = dom.create(document, 'p', { innerHTML: html });\n        var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n        if (bulletRgx.test(p.innerText)) {\n            return this._getHtmlNoBullet(p);\n        }\n\n        return html;\n    },\n\n    _getHtmlNoBullet: function(element) {\n        var content,\n            name = dom.name(element);\n\n        dom.remove(element.firstChild);\n\n        // check for roman numerals\n        if (element.firstChild.nodeType == 3) {\n            if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                dom.remove(element.firstChild);\n            }\n        }\n\n        if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n            dom.remove(element.firstChild);\n        }\n\n        if (name != \"p\") {\n            content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n        } else {\n            content = element.innerHTML;\n        }\n\n        return content;\n    },\n\n    _guessUnorderedListStyle: function(symbol) {\n        if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n            return null;//return \"disc\"; //default CSS value\n        } else if (/^o/.test(symbol)) {\n            return \"circle\";\n        } else {\n            return \"square\";\n        }\n    },\n    _guessOrderedListStyle: function(symbol) {\n        var listType = null;\n        if (!/^\\d/.test(symbol)) {\n            listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                       (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n        }\n\n        return listType;\n    },\n\n    extractListLevels: function(html) {\n        var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n        html = html.replace(msoListRegExp, function(match, list, level) {\n            return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n        });\n\n        return html;\n    },\n\n    _createList: function(type, styleType) {\n        return dom.create(document, type, {\n            style: { listStyleType: styleType }\n        });\n    },\n\n    lists: function(placeholder) {\n        var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n            lastMargin = -1,\n            name,\n            levels = {},\n            li,\n            rootMargin,\n            rootIndex,\n            lastRootLi,\n            isLastRootLi,\n            rootList,\n            i, p, type, margin, list, listData,\n            acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n            isParentTable = false;\n\n        for (i = 0; i < blockChildren.length; i++) {\n            p = blockChildren[i];\n            listData = $(p).data();\n            var listIndex = listData.list;\n            name = dom.name(p);\n            isParentTable = !!$(p).parents(\"table\").length;\n\n            if (isParentTable) {\n                continue;\n            }\n\n            var listType = this.listType(p, listData);\n            type = listType && listType.tag;\n\n            if (!type || acceptedNameTags.indexOf(name) < 0) {\n                if (!p.innerHTML) {\n                    dom.remove(p);\n                } else if (li && !isLastRootLi) {\n                    li.appendChild(p);\n                }\n                continue;\n            }\n\n            // not supported list levels in ie\n            if (browser.msie) {\n                continue;\n            }\n\n            margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n            var levelType = type + listIndex;\n            if (!levels[margin]) {\n                levels[margin] = {};\n            }\n\n            if (!rootMargin || rootMargin < 0) {\n                rootMargin = margin;\n                rootIndex = listIndex;\n                lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                rootList = this._createList(type, listType.style);\n                dom.insertBefore(rootList, p);\n                lastMargin = margin;\n                levels[margin][levelType] = rootList;\n            }\n\n            isLastRootLi = lastRootLi === p;\n\n            list = levels[margin][levelType];\n\n            if (margin > lastMargin || !list) {\n                list = this._createList(type, listType.style);\n                levels[margin][levelType] = list;\n                li.appendChild(list);\n            }\n\n            li = this._convertToLi(p);\n            list.appendChild(li);\n\n            if (isLastRootLi) {\n                rootMargin = lastMargin = -1;\n            } else {\n                lastMargin = margin;\n            }\n        }\n    },\n\n    removeAttributes: function(element) {\n        var attributes = element.attributes,\n            i = attributes.length,\n            significantStyles = [],\n            isSignificantCss = function(val) {\n                var significantCss = [\"border\", \"background\", \"padding\"];\n\n                return significantCss.filter(function(cssAttr) {\n                    return val.trim().indexOf(cssAttr) === 0;\n                }).length > 0;\n            },\n            addSignificantStyles = function(val) {\n                if (isSignificantCss(val)) {\n                    significantStyles.push(val.trim());\n                }\n            },\n            attr, attributeName, attributeValues;\n\n        while (i--) {\n            if (dom.name(attributes[i]) != \"colspan\") {\n                attr = attributes[i];\n                attributeName = attr.name;\n\n                if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                    attributeValues = attr.value.split(\";\");\n                    attributeValues.forEach(addSignificantStyles);\n                }\n\n                element.removeAttributeNode(attributes[i]);\n            }\n        }\n\n        if (significantStyles.length > 0) {\n            element.setAttribute(\"style\", significantStyles.join(\";\"));\n        }\n    },\n\n    createColGroup: function(row) {\n        var cells = row.cells;\n        var table = $(row).closest(\"table\");\n        var colgroup = table.children(\"colgroup\");\n\n        if (cells.length < 2) {\n            return;\n        } else if (colgroup.length) {\n            cells = colgroup.children();\n            colgroup[0].parentNode.removeChild(colgroup[0]);\n        }\n\n        colgroup = $($.map(cells, function(cell) {\n                var width = cell.width;\n                if (width && parseInt(width, 10) !== 0) {\n                    return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                }\n\n                return \"<col />\";\n            }).join(\"\"));\n\n        // jquery 1.9/2.0 discrepancy\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        colgroup.prependTo(table);\n    },\n\n    convertHeaders: function(row) {\n        var cells = row.cells,\n            i,\n            boldedCells = $.map(cells, function(cell) {\n                var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                if (child && dom.name(child) == \"strong\") {\n                    return child;\n                }\n            });\n\n        if (boldedCells.length == cells.length) {\n            for (i = 0; i < boldedCells.length; i++) {\n                dom.unwrap(boldedCells[i]);\n            }\n\n            $(row).closest(\"table\")\n                .find(\"colgroup\").after(\"<thead></thead>\").end()\n                .find(\"thead\").append(row);\n\n            for (i = 0; i < cells.length; i++) {\n                dom.changeTag(cells[i], \"th\");\n            }\n        }\n    },\n\n    removeParagraphs: function(cells) {\n        var i, j, len, cell, paragraphs;\n\n        for (i = 0; i < cells.length; i++) {\n            this.removeAttributes(cells[i]);\n\n            // remove paragraphs and insert line breaks between them\n            cell = $(cells[i]);\n            paragraphs = cell.children(\"p\");\n\n            for (j = 0, len = paragraphs.length; j < len; j++) {\n                if (j < len - 1) {\n                    dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                }\n\n                dom.unwrap(paragraphs[j]);\n            }\n        }\n    },\n\n    removeTextNodes: function(trs) {\n        var i, j, childNodes, currentNode, row;\n\n        for (i = 0; i < trs.length; i++) {\n            row = trs[i];\n            childNodes = row.childNodes;\n\n            for (j = 0; j < childNodes.length; j++) {\n                currentNode = childNodes[j];\n\n                if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                    row.removeChild(currentNode);\n                }\n            }\n        }\n    },\n\n    tables: function(placeholder) {\n        var tables = $(placeholder).find(\"table\"),\n            that = this,\n            rows,\n            firstRow, longestRow, i, j;\n\n        for (i = 0; i < tables.length; i++) {\n            rows = tables[i].rows;\n            longestRow = firstRow = rows[0];\n\n            for (j = 1; j < rows.length; j++) {\n                if (rows[j].cells.length > longestRow.cells.length) {\n                    longestRow = rows[j];\n                }\n            }\n\n            that.createColGroup(longestRow);\n            that.convertHeaders(firstRow);\n\n            that.removeAttributes(tables[i]);\n\n            that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n            that.removeTextNodes(tables.eq(i).find(\"tr\"));\n        }\n    },\n\n    headers: function(placeholder) {\n        var titles = $(placeholder).find(\"p.MsoTitle\");\n\n        for (var i = 0; i < titles.length; i++) {\n            dom.changeTag(titles[i], \"h1\");\n        }\n    },\n\n    removeFormatting: function(placeholder) {\n        $(placeholder).find(\"*\").each(function() {\n            $(this).css({\n                fontSize: \"\",\n                fontFamily: \"\"\n            });\n\n            if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                this.removeAttribute(\"style\");\n            }\n        });\n    },\n\n    clean: function(html) {\n        var that = this, placeholder;\n        var filters = this.options;\n\n        if (filters.none) {\n            html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n            html = that.stripEmptyAnchors(html);\n        } else {\n\n            html = filters.msConvertLists ? this.extractListLevels(html) : html;\n            html = Cleaner.fn.clean.call(that, html);\n            html = that.stripEmptyAnchors(html);\n\n            placeholder = dom.create(document, 'div', { innerHTML: html });\n            that.headers(placeholder);\n\n            if (filters.msConvertLists) {\n                that.lists(placeholder);\n            }\n            that.tables(placeholder);\n\n            if (filters.msAllFormatting) {\n                that.removeFormatting(placeholder);\n            }\n\n            html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n        }\n\n        return html;\n    }\n});\n\nvar WebkitFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n            /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n            /^<div>(.*)<\\/div>$/, '$1'\n        ];\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n    }\n});\n\nvar DomCleaner = Cleaner.extend({\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n        container = this.cleanDom(container);\n        return container.innerHTML;\n    },\n\n    cleanDom: function(container) {\n        return container;\n    }\n});\n\nvar HtmlTagsCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var tags = this.collectTags();\n\n        $(container).find(tags).each(function() {\n            dom.unwrap(this);\n        });\n\n        return container;\n    },\n\n    collectTags: function() {\n        if (this.options.span) {\n            return \"span\";\n        }\n    },\n\n    applicable: function() {\n        return this.options.span;\n    }\n});\n\nvar HtmlAttrCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var attributes = this.collectAttr();\n        var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n        nodes.removeAttr(attributes.join(\" \"));\n\n        return container;\n    },\n\n    collectAttr: function() {\n        if (this.options.css) {\n            return [\"class\", \"style\"];\n        }\n\n        return [];\n    },\n\n    applicable: function() {\n        return this.options.css;\n    }\n});\n\nvar TextContainer = function() {\n    this.text = \"\";\n    this.add = function(text) {\n        this.text += text;\n    };\n};\n\nvar HtmlTextLines = Class.extend({\n    init: function(separators) {\n        this.separators = separators || {\n                text: \" \",\n                line: \"<br/>\"\n            };\n        this.lines = [];\n        this.inlineBlockText = [];\n        this.resetLine();\n    },\n\n    appendText: function(text) {\n        if (text.nodeType === 3) {\n            text = text.nodeValue;\n        }\n\n        this.textContainer.add(text);\n    },\n\n    appendInlineBlockText: function(text) {\n        this.inlineBlockText.push(text);\n    },\n\n    flashInlineBlockText: function() {\n        if (this.inlineBlockText.length) {\n            this.appendText(this.inlineBlockText.join(\" \"));\n            this.inlineBlockText = [];\n        }\n    },\n\n    endLine: function() {\n        this.flashInlineBlockText();\n        this.resetLine();\n    },\n\n    html: function() {\n        var separators = this.separators;\n        var result = \"\";\n        var lines = this.lines;\n\n        this.flashInlineBlockText();\n\n        for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n            var line = lines[i];\n            for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                var text = line[j].text;\n                result += text;\n                if (j !== jl1) {\n                    result += separators.text;\n                }\n            }\n            if (i !== il1) {\n                result += separators.line;\n            }\n        }\n\n        return result;\n    },\n\n    resetLine: function() {\n        this.textContainer = new TextContainer();\n        this.line = [];\n        this.line.push(this.textContainer);\n        this.lines.push(this.line);\n    }\n});\n\nvar DomEnumerator = Class.extend({\n    init: function(callback) {\n        this.callback = callback;\n    },\n    enumerate: function(node) {\n        if (!node) {\n            return;\n        }\n\n        var preventDown = this.callback(node);\n\n        var child = node.firstChild;\n        if (!preventDown && child) {\n            this.enumerate(child);\n        }\n\n        this.enumerate(node.nextSibling);\n    }\n});\n\nvar HtmlContentCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n        this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n        this.enumerator = new DomEnumerator(this.buildText.bind(this));\n    },\n\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n\n        return this.cleanDom(container);\n    },\n\n    cleanDom: function(container) {\n        this.separators = this.getDefaultSeparators();\n        this.htmlLines = new HtmlTextLines(this.separators);\n        this.enumerator.enumerate(container.firstChild);\n        this.hasText = false;\n\n        return this.htmlLines.html();\n    },\n\n    buildText: function(node) {\n        if (dom.isDataNode(node)) {\n            if (dom.isEmptyspace(node)) {\n                return;\n            }\n            this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n            this.hasText = true;\n        } else if (dom.isBlock(node) && this.hasText) {\n            var action = this.actions[dom.name(node)] || this.actions.block;\n            return action(this, node);\n        } else if (dom.isBr(node)) {\n            this.htmlLines.appendText(this.separators.line);\n        }\n    },\n\n    applicable: function() {\n        var o = this.options;\n        return o.all || o.keepNewLines;\n    },\n\n    getDefaultSeparators: function() {\n        if (this.options.all) {\n            return { text: \" \", line: \" \" };\n        } else {\n            return { text: \" \", line: \"<br/>\" };\n        }\n    },\n\n    actions: {\n        ul: $.noop,\n        ol: $.noop,\n        table: $.noop,\n        thead: $.noop,\n        tbody: $.noop,\n        td: function(cleaner, node) {\n            var tdCleaner = new HtmlContentCleaner({ all: true });\n\n            var cellText = tdCleaner.cleanDom(node);\n            cleaner.htmlLines.appendInlineBlockText(cellText);\n\n            return true;\n        },\n\n        block: function(cleaner) {\n            cleaner.htmlLines.endLine();\n        }\n    }\n});\n\nvar CustomCleaner = Cleaner.extend({\n    clean: function(html) {\n        return this.options.custom(html);\n    },\n\n    applicable: function() {\n        return typeof(this.options.custom) === \"function\";\n    }\n});\n\nextend(editorNS, {\n    Clipboard: Clipboard,\n    Cleaner: Cleaner,\n    ScriptCleaner: ScriptCleaner,\n    TabCleaner: TabCleaner,\n    MSWordFormatCleaner: MSWordFormatCleaner,\n    WebkitFormatCleaner: WebkitFormatCleaner,\n    HtmlTagsCleaner: HtmlTagsCleaner,\n    HtmlAttrCleaner: HtmlAttrCleaner,\n    HtmlContentCleaner: HtmlContentCleaner,\n    HtmlTextLines: HtmlTextLines,\n    CustomCleaner: CustomCleaner\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    editorNS = kendo.ui.editor,\n    RangeUtils = editorNS.RangeUtils,\n    dom = editorNS.Dom,\n    RestorePoint = editorNS.RestorePoint,\n    Marker = editorNS.Marker,\n    browser = kendo.support.browser,\n    bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n    extend = $.extend;\nvar nodeTypes = dom.nodeTypes;\nvar PREVIOUS_SIBLING = \"previousSibling\";\n\nfunction selected(node, range) {\n    return range.startContainer === node && range.endContainer === node &&\n        range.startOffset === 0 && range.endOffset == node.childNodes.length;\n}\n\nfunction getSibling(node, direction, condition) {\n    var sibling = node ? node[direction] : null;\n\n    while (sibling && !condition(sibling)) {\n        sibling = sibling[direction];\n    }\n\n    return sibling;\n}\n\nvar tableCells = \"td,th,caption\";\nvar tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\nvar tableElements = tableCellsWrappers + \",\" + tableCells;\nvar inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\nvar RemoveTableContent = Class.extend({\n    remove: function(range) {\n        var that = this;\n        var marker = new Marker();\n        marker.add(range, false);\n\n        var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n        var doc = RangeUtils.documentFromRange(range);\n        var start = marker.start;\n        var end = marker.end;\n        var cellsTypes = tableCells.split(\",\");\n        var startCell = dom.parentOfType(start, cellsTypes);\n        var endCell = dom.parentOfType(end, cellsTypes);\n        that._removeContent(start, startCell, true);\n        that._removeContent(end, endCell, false);\n        $(nodes).each(function(i, node) {\n            node = $(node);\n            (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                cell.innerHTML = \"&#65279;\";\n            });\n        });\n        if (startCell && !start.previousSibling) {\n            dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n        }\n        if (endCell && !end.nextSibling) {\n            dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n        }\n        if (startCell) {\n            range.setStartBefore(start);\n        } else if (nodes[0]) {\n            startCell = $(nodes[0]);\n            startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n            if (startCell.length) {\n                range.setStart(startCell.get(0), 0);\n            }\n        }\n\n        range.collapse(true);\n\n        dom.remove(start);\n        dom.remove(end);\n    },\n    _removeContent: function(start, top, forwards) {\n        if (top) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                next,\n                getNext = function(node) {\n                    while (node && !node[sibling]) {\n                        node = node.parentNode;\n                    }\n                    return node && $.contains(top, node) ? node[sibling] : null;\n                };\n            start = getNext(start);\n            while (start) {\n                next = getNext(start);\n                dom.remove(start);\n                start = next;\n            }\n        }\n    }\n});\n\nvar TypingHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard,\n            isTypingKey = keyboard.isTypingKey(e),\n            evt = extend($.Event(), e);\n\n        that.editor.trigger(\"keydown\", evt);\n\n        if (evt.isDefaultPrevented() || (e && e.isDefaultPrevented())) {\n            e.preventDefault();\n            return true;\n        }\n\n        if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n            var range = editor.getRange();\n            var body = editor.body;\n            that.startRestorePoint = new RestorePoint(range, body);\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n            }\n\n            if (browser.webkit && !range.collapsed && selected(body, range)) {\n                body.innerHTML = \"\";\n            }\n\n            if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                backspaceHandler.deleteSelection(range);\n            }\n\n            keyboard.startTyping(function() {\n                that._removeBomSpan();\n                that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n            });\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function(e) {\n        var keyboard = this.editor.keyboard;\n\n        this.editor.trigger(\"keyup\", e);\n\n        if (keyboard.isTypingInProgress()) {\n            keyboard.endTyping();\n            return true;\n        }\n\n        return false;\n    },\n\n    _removeBomSpan: function() {\n        var node = this.editor.getRange().commonAncestorContainer;\n\n        if (!dom.emptyNode(node)) {\n            if (node.nodeType === 3) {\n                node = node.parentNode;\n            }\n\n            if (dom.insignificant(node)) {\n                // typing in an insignificant node\n                // make it significant\n                node.textContent = dom.stripBom(node.textContent);\n                dom.unwrap(node);\n            }\n        }\n    }\n});\n\nvar BackspaceHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n    _addCaret: function(container) {\n        var caret = dom.create(this.editor.document, \"a\");\n\n        // Only if not Chrome: Make sure to include cared in the formatted inline node\n        if (!kendo.support.browser.chrome && container.firstChild &&\n            container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n            container = container.firstChild;\n        }\n\n        dom.insertAt(container, caret, 0);\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n        return caret;\n    },\n    _restoreCaret: function(caret) {\n        var range = this.editor.createRange();\n\n        if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n            range.setStart(caret.previousSibling, caret.previousSibling.length);\n        } else {\n            range.setStartAfter(caret);\n        }\n\n        range.collapse(true);\n        this.editor.selectRange(range);\n        dom.remove(caret);\n    },\n    _handleDelete: function(range) {\n        var node = range.endContainer;\n        var block = dom.closestEditableOfType(node, dom.blockElements);\n\n        if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n            // join with next sibling\n            var next = dom.next(block);\n            if (!next || dom.name(next) != \"p\") {\n                return false;\n            }\n\n            var caretPlaceholder = dom.significantChildNodes(next)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n            var caret = this._addCaret(caretPlaceholder);\n\n            this._merge(block, next);\n\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        return false;\n    },\n    _cleanBomBefore: function(range) {\n        var offset = range.startOffset;\n        var node = range.startContainer;\n        var text = node.nodeValue;\n        var count = 0;\n        while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n            count++;\n        }\n\n        if (count > 0) {\n            node.deleteData(offset - count, count);\n\n            range.setStart(node, Math.max(0, offset - count));\n            range.collapse(true);\n\n            this.editor.selectRange(range);\n        }\n    },\n    _handleBackspace: function(range) {\n        var node = range.startContainer;\n        var li = dom.closestEditableOfType(node, ['li']);\n        var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n        var editor = this.editor;\n        var previousSibling;\n\n        if (dom.isDataNode(node)) {\n            if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                range.setStart(node, 0);\n                range.setEnd(node, node.length);\n                editor.selectRange(range);\n                return false;\n            }\n            this._cleanBomBefore(range);\n        }\n\n        previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.htmlIndentSpace(sibling);\n        });\n\n        //deleting the first list item with empty content in IE results in invalid range\n        if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n            range.startOffset = 0;\n            range.endOffset = 0;\n            editor.selectRange(range);\n        }\n\n        var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n        var liIndex = li && $(li).index();\n        var startAtNonFirstLi = startAtLi && liIndex > 0;\n        if (startAtNonFirstLi) {\n            block = li;\n            previousSibling = dom.prev(li);\n        }\n\n        if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n            if (block.innerText === '') {\n                block.innerHTML = '\\ufeff';\n            }\n            return true;\n        }\n\n        // outdent\n        if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n            editor.exec(\"outdent\");\n            return true;\n        }\n\n        // unwrap block\n        if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n            var caretPlaceholder = dom.significantChildNodes(block)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder) && !dom.isImg(caretPlaceholder)) ? caretPlaceholder : block;\n\n            var caret = this._addCaret(caretPlaceholder);\n            this._merge(previousSibling, block);\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        // unwrap li element\n        if (startAtLi && liIndex === 0) {\n            var child = li.firstChild;\n            if (!child) {\n                li.innerHTML = editorNS.emptyElementContent;\n                child = li.firstChild;\n            }\n\n            var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n            range.selectNodeContents(li);\n            formatter.toggle(range);\n\n            if (dom.insignificant(child)) {\n                range.setStartBefore(child);\n            } else {\n                range.setStart(child, 0);\n            }\n\n            editor.selectRange(range);\n\n            return true;\n        }\n\n        var rangeStartNode = node.childNodes[range.startOffset - 1];\n        var linkRange = range;\n        var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n        var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n        });\n        if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n            anchor = anchor || previousNode;\n            linkRange = editor.createRange();\n            linkRange.setStart(anchor, anchor.childNodes.length);\n            linkRange.collapse(true);\n        }\n\n        anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n        var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n        if (isEndOfLink) {\n            var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n            editor.execCommand(command);\n            editor._selectionChange();\n        }\n        return false;\n    },\n    _handleSelection: function(range) {\n        var ancestor = range.commonAncestorContainer;\n        var table = dom.closest(ancestor, \"table\");\n        var emptyParagraphContent = editorNS.emptyElementContent;\n        var editor = this.editor;\n        var parentElementOrNode;\n\n        if (inTable(range)) {\n            var removeTableContent = new RemoveTableContent(editor);\n            removeTableContent.remove(range);\n            editor.selectRange(range);\n            return true;\n        }\n\n        var marker = new Marker();\n        marker.add(range, false);\n\n        if (range.commonAncestorContainer === editor.body) {\n            this._surroundFullyContent(marker, range);\n        }\n\n        if (editor.immutables) {\n            this._handleImmutables(marker);\n        }\n\n        this._surroundFullySelectedAnchor(marker, range);\n\n        range.setStartAfter(marker.start);\n        range.setEndBefore(marker.end);\n\n        var start = range.startContainer;\n        var end = range.endContainer;\n\n        range.deleteContents();\n\n        if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n            range.selectNode(end);\n            range.deleteContents();\n        }\n\n        if (table && $(table).text() === \"\") {\n            range.selectNode(table);\n            range.deleteContents();\n        }\n\n        ancestor = range.commonAncestorContainer;\n\n        if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n            ancestor.innerHTML = emptyParagraphContent;\n            range.setStart(ancestor, 0);\n        }\n\n        this._join(start, end);\n\n        dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n        marker.remove(range);\n\n        start = range.startContainer;\n        if (dom.name(start) == \"tr\") {\n            start = start.childNodes[Math.max(0, range.startOffset - 1)];\n            range.setStart(start, dom.getNodeLength(start));\n        }\n\n        range.collapse(true);\n\n        editor.selectRange(range);\n\n        parentElementOrNode = start.parentElement || start.parentNode;\n\n        if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n            this._cleanBomBefore(range);\n        }\n\n        return true;\n    },\n    _handleImmutables: function(marker) {\n        var immutableParent = editorNS.Immutables.immutableParent;\n        var startImmutable = immutableParent(marker.start);\n        var endImmutable = immutableParent(marker.start);\n        if (startImmutable) {\n            dom.insertBefore(marker.start, startImmutable);\n        }\n        if (endImmutable) {\n            dom.insertAfter(marker.end, endImmutable);\n        }\n        if (startImmutable) {\n            dom.remove(startImmutable);\n        }\n        if (endImmutable && endImmutable.parentNode) {\n            dom.remove(endImmutable);\n        }\n    },\n    _surroundFullyContent: function(marker, range) {\n        var children = range.commonAncestorContainer.children,\n            startParent = children[0],\n            endParent = children[children.length - 1];\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _surroundFullySelectedAnchor: function(marker, range) {\n        var start = marker.start,\n            startParent = $(start).closest(\"a\").get(0),\n            end = marker.end,\n            endParent = $(end).closest(\"a\").get(0);\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _moveMarker: function(marker, range, startParent, endParent) {\n        var start = marker.start,\n            end = marker.end;\n\n        if (startParent && RangeUtils.isStartOf(range, startParent)) {\n            dom.insertBefore(start, startParent);\n        }\n\n        if (endParent && RangeUtils.isEndOf(range, endParent)) {\n            dom.insertAfter(end, endParent);\n        }\n    },\n    _root: function(node) {\n        while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n    _join: function(start, end) {\n        start = this._root(start);\n        end = this._root(end);\n\n        if (start != end && dom.is(end, \"p\")) {\n            this._merge(start, end);\n        }\n    },\n    _merge: function(dest, src) {\n        dom.removeTrailingBreak(dest);\n\n        while (dest && src.firstChild) {\n            if (dest.nodeType == 1) {\n                dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                if (dest) {\n                    dest.appendChild(src.firstChild);\n                }\n            } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                this._mergeWithTextNode(dest, src.firstChild);\n            } else {\n                dest.parentNode.appendChild(src.firstChild);\n            }\n        }\n\n        dom.remove(src);\n    },\n\n    _mergeWithTextNode: function(textNode, appendedNode) {\n        if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n            if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                dom.insertAfter(appendedNode, textNode.nextSibling);\n            }\n            else {\n                dom.insertAfter(appendedNode, textNode);\n            }\n        }\n    },\n\n    _isCaret: function(element) {\n        return $(element).is(\"a\");\n    },\n\n    keydown: function(e) {\n        var method, startRestorePoint;\n        var editor = this.editor;\n        var range = editor.getRange();\n        var keyCode = e.keyCode;\n        var keys = kendo.keys;\n        var backspace = keyCode === keys.BACKSPACE;\n        var del = keyCode == keys.DELETE;\n\n        if (editor.immutables && editor.immutables.keydown(e, range)) {\n            return;\n        }\n\n        if ((backspace || del) && !range.collapsed) {\n            method = \"_handleSelection\";\n        } else if (backspace) {\n            method = \"_handleBackspace\";\n        } else if (del) {\n            method = \"_handleDelete\";\n        }\n\n        if (!method) {\n            return;\n        }\n\n        startRestorePoint = new RestorePoint(range, editor.body);\n\n        if (this[method](range)) {\n            e.preventDefault();\n\n            editorNS._finishUpdate(editor, startRestorePoint);\n        }\n    },\n    deleteSelection: function(range) {\n        this._handleSelection(range);\n    },\n    keyup: $.noop\n});\n\nvar SystemHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        this.systemCommandIsInProgress = false;\n    },\n\n    createUndoCommand: function() {\n        this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n    },\n\n    changed: function() {\n        if (this.startRestorePoint) {\n            return this.startRestorePoint.html != this.editor.body.innerHTML;\n        }\n\n        return false;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard;\n\n        if (keyboard.isModifierKey(e)) {\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping(true);\n            }\n\n            that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            return true;\n        }\n\n        if (keyboard.isSystem(e)) {\n            that.systemCommandIsInProgress = true;\n\n            if (that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n            }\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function() {\n        var that = this;\n\n        if (that.systemCommandIsInProgress && that.changed()) {\n            that.systemCommandIsInProgress = false;\n            that.createUndoCommand();\n            return true;\n        }\n\n        return false;\n    }\n});\n\nvar SelectAllHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        if (!browser.webkit || e.isDefaultPrevented() ||\n            !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n            return;\n        }\n        if (this.editor.options.immutables) {\n            this._toSelectableImmutables();\n        }\n        this._selectEditorBody();\n    },\n\n    _selectEditorBody: function() {\n        var editor = this.editor;\n        var range = editor.getRange();\n        range.selectNodeContents(editor.body);\n\n        setTimeout(function() {\n            editor.selectRange(range);\n        });\n    },\n\n    _toSelectableImmutables: function() {\n        var editor = this.editor,\n            body = editor.body,\n            immutable = editorNS.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    keyup: $.noop\n});\n\nvar Keyboard = Class.extend({\n    init: function(handlers) {\n        this.handlers = handlers;\n        this.typingInProgress = false;\n    },\n\n    isCharacter: function(keyCode) {\n        return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n               (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n               keyCode == 229;\n    },\n\n    toolFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            toolOptions,\n            modifier = this._getShortcutModifier(e, navigator.platform);\n\n        for (toolName in tools) {\n            toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                toolOptions.ctrl == modifier &&\n                toolOptions.alt == e.altKey &&\n                toolOptions.shift == e.shiftKey) {\n                return toolName;\n            }\n        }\n    },\n\n    _getShortcutModifier: function(e, platform) {\n        var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n        return mac ? e.metaKey : e.ctrlKey;\n    },\n\n    toolsFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            o,\n            matchesKey,\n            found = [];\n        var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n        for (toolName in tools) {\n            o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n            if (matchesKey &&\n                o.ctrl == e.ctrlKey &&\n                o.alt == e.altKey &&\n                o.shift == e.shiftKey) {\n                found.push(tools[toolName]);\n            }\n        }\n\n        return found;\n    },\n\n    isTypingKey: function(e) {\n        var keyCode = e.keyCode;\n        return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n               keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n               (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n    },\n\n    isModifierKey: function(e) {\n        var keyCode = e.keyCode;\n        return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n               (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n               (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n    },\n\n    isSystem: function(e) {\n        return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n    },\n\n    startTyping: function(callback) {\n        this.onEndTyping = callback;\n        this.typingInProgress = true;\n    },\n\n    stopTyping: function() {\n        if (this.typingInProgress && this.onEndTyping) {\n            this.onEndTyping();\n        }\n        this.typingInProgress = false;\n    },\n\n    endTyping: function(force) {\n        var that = this;\n        that.clearTimeout();\n        if (force) {\n            that.stopTyping();\n        } else {\n            that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n        }\n    },\n\n    isTypingInProgress: function() {\n        return this.typingInProgress;\n    },\n\n    clearTimeout: function() {\n        window.clearTimeout(this.timeout);\n    },\n\n    notify: function(e, what) {\n        var i, handlers = this.handlers;\n\n        for (i = 0; i < handlers.length; i++) {\n            if (handlers[i][what](e)) {\n                break;\n            }\n        }\n    },\n\n    keydown: function(e) {\n        this.notify(e, 'keydown');\n    },\n\n    keyup: function(e) {\n        this.notify(e, 'keyup');\n    }\n});\n\nextend(editorNS, {\n    TypingHandler: TypingHandler,\n    SystemHandler: SystemHandler,\n    BackspaceHandler: BackspaceHandler,\n    SelectAllHandler: SelectAllHandler,\n    Keyboard: Keyboard\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        extend = $.extend;\n\nvar ExportPdfCommand = Command.extend({\n    init: function(options) {\n        this.async = true;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var that = this;\n        var range = that.lockRange(true);\n        var editor = that.editor;\n\n        editor._destroyResizings();\n\n        editor.saveAsPDF().then(function() {\n            that.releaseRange(range);\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        });\n    }\n});\n\nextend(editorNS, {\n    ExportPdfCommand: ExportPdfCommand\n});\n\nregisterTool(\"pdf\", new Tool({ command: ExportPdfCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        extend = $.extend;\n\nvar PrintCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n\n        if (kendo.support.browser.msie) {\n            editor.document.execCommand(\"print\", false, null);\n        } else if (editor.window.print) {\n            editor.window.print();\n        }\n    }\n});\n\nextend(editorNS, {\n    PrintCommand: PrintCommand\n});\n\nregisterTool(\"print\", new Tool({ command: PrintCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\nvar CopyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.inlineStyles = [];\n        this.blockStyles = [];\n        this.collectStyles(range);\n        this.editor.inlineStyles = this.inlineStyles;\n        this.editor.blockStyles = this.blockStyles;\n        this.releaseRange(range);\n    },\n\n    collectStyles: function(range) {\n        var rangeNodes = RangeUtils.nodes(range);\n        var node;\n\n        if (rangeNodes.length === 1) {\n            node = rangeNodes[0].parentNode;\n        } else {\n            node = range.startContainer;\n        }\n\n        while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n            if (dom.isBlock(node)) {\n                this.populateStyles(node, \"blockStyles\");\n                if (dom.is(node, \"li\")) {\n                    node = node.parentNode;\n                } else {\n                    node = null;\n                }\n            } else {\n                this.populateStyles(node, \"inlineStyles\");\n                node = node.parentNode;\n            }\n        }\n    },\n\n    populateStyles: function(node, destination) {\n        var styles = node.style;\n        var attributes = node.attributes;\n        var nodeStyles = {\n            tags: [ node.tagName ],\n            attr: {\n                style: {}\n            }\n        };\n        var styleValue, styleKey, attributeKey, attributeValue, i;\n\n        if (styles) {\n            for (i = 0; i < styles.length; i++) {\n                styleKey = styles[i];\n                styleValue = styles[styleKey];\n                nodeStyles.attr.style[styleKey] = styleValue;\n            }\n        }\n\n        if (attributes) {\n            for (i = 0; i < attributes.length; i++) {\n                attributeKey = attributes[i].nodeName;\n                attributeValue = attributes[i].nodeValue;\n                if (attributeKey === \"style\") {\n                    continue;\n                } else if (attributeKey === \"class\") {\n                    nodeStyles.attr.className = attributeValue;\n                } else {\n                    nodeStyles.attr[attributeKey] = attributeValue;\n                }\n            }\n        }\n\n        this[destination].push(nodeStyles);\n    }\n});\n\nvar ApplyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        var markers = RangeUtils.getMarkers(range);\n        var editor = this.editor;\n        var inlineStyles = editor.inlineStyles;\n        var blockStyles = editor.blockStyles;\n        var nodes;\n\n        if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n            return;\n        }\n\n        if (markers.length === 3) {\n            this.marker.removeCaret(range);\n            this.marker.caret = null;\n        }\n\n        this.removeEmptyElementsFromRange(range);\n        nodes = RangeUtils.nodes(range);\n        this.cleanInlineParents(nodes);\n        dom.normalize(range.commonAncestorContainer);\n\n        if (markers.length === 2) {\n            range.setStartAfter(markers[0]);\n            range.setEndBefore(markers[1]);\n        } else {\n            range.setStartBefore(nodes[0]);\n            range.setEndAfter(nodes[0]);\n        }\n\n        nodes = RangeUtils.nodes(range);\n\n        if (nodes && blockStyles && blockStyles.length) {\n            this.applyBlockStyles(nodes, blockStyles);\n        }\n\n        if (nodes && inlineStyles && inlineStyles.length) {\n            this.applyInlineStyles(nodes, inlineStyles);\n        }\n\n        this.releaseRange(range);\n    },\n\n    removeEmptyElementsFromRange: function(range) {\n        var isEmptyInline = function(node) {\n            return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n        };\n        var emptyElements, i;\n\n        emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n        if (emptyElements && emptyElements.length > 0) {\n            for (i = 0; i < emptyElements.length; i++) {\n                emptyElements[i].parentNode.removeChild(emptyElements[i]);\n            }\n        }\n    },\n\n    cleanInlineParents: function(nodes) {\n        var i, node, parent, children, j, child, newNode;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            parent = node.parentNode;\n\n            if (this.immutableParent(node)) {\n                continue;\n            }\n\n            while (parent && dom.isInline(parent)) {\n                children = parent.childNodes;\n\n                for (j = 0; j < children.length; j++) {\n                    child = children[j];\n\n                    if (!dom.isMarker(child) && child !== node) {\n                        newNode = parent.cloneNode(true);\n                        newNode.innerHTML = \"\";\n                        dom.wrap(child, newNode);\n                    }\n                }\n\n                dom.unwrap(parent);\n                parent = node.parentNode;\n            }\n        }\n    },\n\n    applyBlockStyles: function(nodes, blockStyles) {\n        var formatTag = blockStyles[0].tags[0];\n        var attr = blockStyles[0].attr;\n        var document = this.editor.document;\n        var i, len, node, wrapper, blockParent, outerWrapper;\n        var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            node = nodes[i];\n\n            if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                continue;\n            }\n\n            blockParent = dom.blockParentOrBody(node);\n\n            if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                    previousNodes = [];\n                    nextNodes = [];\n                    previous = node.previousSibling;\n                    next = node.nextSibling;\n\n                    while (previous) {\n                        if (!dom.isMarker(previous)) {\n                            previousNodes.push(previous);\n                        }\n\n                        previous = previous.previousSibling;\n                    }\n\n                    if (previousNodes.length) {\n                        prevWrapper = blockParent.cloneNode(true);\n                        prevWrapper.innerHTML = \"\";\n                        dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                        for (j = 0; j < previousNodes.length; j++) {\n                            child = previousNodes[j];\n                            dom.insertAt(prevWrapper, child, 0);\n                        }\n                    }\n\n                    while (next) {\n                        if (!dom.isMarker(next)) {\n                            nextNodes.push(next);\n                        }\n\n                        next = next.nextSibling;\n                    }\n\n                    if (nextNodes.length) {\n                        nextWrapper = blockParent.cloneNode(true);\n                        nextWrapper.innerHTML = \"\";\n                        dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                        for (j = 0; j < nextNodes.length; j++) {\n                            child = nextNodes[j];\n                            nextWrapper.appendChild(child);\n                        }\n                    }\n\n                    dom.unwrap(blockParent);\n                }\n\n                wrapper = dom.create(document, formatTag, attr);\n                dom.wrap(node, wrapper);\n            } else if (blockParent.tagName === formatTag) {\n                dom.attr(blockParent, attr);\n            }\n        }\n\n        if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n            listItems = [];\n\n            while (dom.is(wrapper, \"li\")) {\n                listItems.push(wrapper);\n                wrapper = dom.prev(wrapper);\n            }\n\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n            outerWrapper.appendChild(listItems[0]);\n\n            for (i = 1, len = listItems.length; i < len; i++) {\n                dom.insertBefore(listItems[i], outerWrapper.firstChild);\n            }\n        } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.wrap(wrapper, outerWrapper);\n        }\n    },\n\n    applyInlineStyles: function(nodes, inlineStyles) {\n        var document = this.editor.document;\n        var currentStyle, createdNode, topNode, i, newNode, node;\n\n        for (i = 0; i < inlineStyles.length; i++) {\n            currentStyle = inlineStyles[i];\n            createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n            if (topNode) {\n                createdNode.appendChild(topNode);\n            }\n\n            topNode = createdNode;\n        }\n\n        if (topNode) {\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n                newNode = topNode.cloneNode(true);\n                dom.insertBefore(newNode, node);\n\n                while (newNode.children && newNode.children.length) {\n                    newNode = newNode.children[0];\n                }\n\n                newNode.appendChild(node);\n            }\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\nvar CopyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new CopyFormatCommand(commandArguments);\n    }\n});\n\nvar ApplyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new ApplyFormatCommand(commandArguments);\n    }\n});\n\n$.extend(Editor, {\n    CopyFormatCommand: CopyFormatCommand,\n    ApplyFormatCommand: ApplyFormatCommand,\n    CopyFormatTool: CopyFormatTool,\n    ApplyFormatTool: ApplyFormatTool\n});\n\nregisterTool(\"copyFormat\", new CopyFormatTool({ }));\nregisterTool(\"applyFormat\", new ApplyFormatTool({ }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    const kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        dom = Editor.Dom,\n        Tool = Editor.Tool,\n        DelayedExecutionTool = Editor.DelayedExecutionTool,\n        BlockFormatter = Editor.BlockFormatter,\n        FormatCommand = Editor.FormatCommand,\n        GreedyInlineFormatFinder = Editor.GreedyInlineFormatFinder,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        registerFormat = EditorUtils.registerFormat,\n        RangeUtils = Editor.RangeUtils,\n        MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n        KEYDOWN_NS = \"keydown.kendoEditor\";\n\n    const LineHeightCommand = FormatCommand.extend({\n        exec: function() {\n            const cmd = this,\n                range = cmd.lockRange(true),\n                nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n            cmd.formatter.format[0].attr.style.lineHeight = cmd.options.value.lineHeight;\n            cmd.formatter.apply(nodes);\n            cmd.releaseRange(range);\n        }\n    });\n\n    const LineHeightFormatTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.type = \"kendoComboBox\";\n            this.format = [{ tags: [\"p\", \"lineHeight\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr, options.defaultValue);\n        },\n\n        command: function(commandArguments) {\n            var that = this;\n\n            return new LineHeightCommand(extend(commandArguments, {\n                formatter: function() {\n                    return new BlockFormatter(that.options.format);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            let tool = this,\n                component = ui.getKendoComboBox();\n\n            tool.editor = editor;\n\n            component.bind(\"change\", this.changeHandler.bind(this));\n            component.bind(\"close\", this.closeHandler.bind(this));\n\n            component.wrapper.on(MOUSEDOWN_NS, \".k-input-button,.k-input-inner\", this.mouseDownHandler.bind(this))\n                .on(KEYDOWN_NS, this.keyDownHandler.bind(this));\n        },\n\n        changeHandler: function(e) {\n            this._exec(e.sender.value());\n        },\n\n        closeHandler: function() {\n            let that = this,\n                editor = that.editor;\n\n            setTimeout(function() {\n                editor._deleteSavedRange();\n                that.currentRange = null;\n            },0);\n        },\n\n        mouseDownHandler: function() {\n            let newRange = this.editor.getRange();\n\n            this.currentRange = this.editor._containsRange(newRange) ? newRange : this.currentRange;\n        },\n\n        keyDownHandler: function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                this.editor._deleteSavedRange();\n                this.currentRange = null;\n                e.preventDefault();\n            }\n        },\n\n        _exec: function(value) {\n            let editor = this.editor;\n            editor._range = this.currentRange;\n            if (value) {\n                Tool.exec(this.editor, this.options.name, { lineHeight: value });\n            }\n        },\n    });\n\n    $.extend(Editor, {\n        LineHeightCommand: LineHeightCommand,\n        LineHeightFormatTool: LineHeightFormatTool\n    });\n\n    registerFormat(\"lineHeight\", [\n        { tags: dom.blockElements, attr: { style: { lineHeight: \"normal\" } } }\n    ]);\n\n    registerTool(\"lineHeight\", new LineHeightFormatTool({\n        cssAttr: \"line-height\",\n        format: formats.lineHeight,\n        defaultValue: 1.15,\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                value: 1.15,\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                prefixOptions: {\n                    icon: \"paragraphHeight\"\n                },\n                autoSize: true,\n                dataSource: [\n                    { text: \"1\", value: \"1\" },\n                    { text: \"1.15\", value: \"1.15\" },\n                    { text: \"1.5\", value: \"1.5\" },\n                    { text: \"2\", value: \"2\" },\n                    { text: \"2.5\", value: \"2.5\" },\n                ]\n            }\n        }\n    }));\n})(window.kendo.jQuery);\n\n(function($) {\n\n    const kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        DOM = Editor.Dom,\n        SPACE_UNICODE = \"\\u00B7\",\n        NEW_LINE_UNICODE = \"\\u21B5\";\n\n    const createMark = function(range, document, character, scrollTop, index, scrollableWrapper) {\n        const clonedRange = range.cloneRange(),\n              container = clonedRange.startContainer;\n\n        let domRect, x, y, textNode, parentRect;\n\n        if (index !== undefined && index !== null) {\n            clonedRange.setStart(container, index);\n            clonedRange.setEnd(container, index + 1);\n        }\n\n        domRect = clonedRange.getBoundingClientRect();\n\n        if (scrollableWrapper) {\n            parentRect = scrollableWrapper.getBoundingClientRect();\n            x = domRect.left - parentRect.left - domRect.width / 2;\n            y = domRect.top - parentRect.top + domRect.height + scrollTop;\n        } else {\n            if (character === SPACE_UNICODE) {\n                x = domRect.x - domRect.width / 4;\n                y = domRect.y + domRect.height + scrollTop;\n            } else if (character === NEW_LINE_UNICODE) {\n                x = domRect.x;\n                y = domRect.y + domRect.height + scrollTop;\n            }\n        }\n\n        textNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        textNode.setAttributeNS(null, \"x\", x);\n        textNode.setAttributeNS(null, \"y\", y);\n        textNode.setAttributeNS(null, \"fill\", \"#6098f2\");\n        textNode.setAttributeNS(null, \"font-size\", `${Math.ceil(domRect.height + domRect.width)}px`);\n        textNode.textContent = character;\n\n        return textNode;\n    };\n\n    const appendSvgMarks = function() {\n        const that = this,\n            range = that.getRange().cloneRange(),\n            overlay = that._formattingMarksOverlay[0],\n            fragment = that.document.createDocumentFragment(),\n            document = that.document,\n            isInlineEditor = that._isInlineEditor(),\n            scrollableWrapper = isInlineEditor ? that.body.parentElement : null,\n            scrollTop = isInlineEditor ? scrollableWrapper.scrollTop : document.documentElement.scrollTop;\n\n        if (!that.body.firstChild && !that.body.lastChild) {\n            return;\n        }\n\n        range.setStart(that.body.firstChild, 0);\n        range.setEnd(that.body.lastChild, 0);\n\n        const nodes = DOM.getTextNodes(that.body).concat($(that.body).find(\"br\").toArray());\n\n        nodes.forEach((node) => {\n            if (node.nodeType === DOM.nodeTypes.TEXT_NODE) {\n                range.selectNodeContents(node);\n\n                for (let i = range.startOffset; i < range.endOffset; i++) {\n                    if ((range.startContainer.textContent.charCodeAt(i) === 32 || range.startContainer.textContent.charCodeAt(i) === 160)) {\n                        fragment.appendChild(createMark(range, document, SPACE_UNICODE, scrollTop, i, scrollableWrapper));\n                    }\n                }\n            } else {\n                range.selectNode(node);\n                fragment.appendChild(createMark(range, document, NEW_LINE_UNICODE, scrollTop, null, scrollableWrapper));\n            }\n        });\n\n        overlay.appendChild(fragment);\n    };\n\n    const clearFormattingMarksOverlay = function(editor) {\n        editor._formattingMarksOverlay.empty();\n    };\n\n    const applyFormattingMarks = function(editor) {\n        editor._updateFormattingMarksOverlayHeight();\n        appendSvgMarks.call(editor);\n    };\n\n    const FormattingMarksCommand = Command.extend({\n        exec: function() {\n            const cmd = this,\n                range = cmd.lockRange(true),\n                editor = cmd.editor;\n\n            if (!editor._toggledFormattingMarks) {\n                editor._toggledFormattingMarks = true;\n                editor._appendFormattingMarksOverlay();\n                editor._appendFormattingMarksStyles();\n                clearFormattingMarksOverlay(editor);\n                applyFormattingMarks(editor);\n            } else {\n                editor._toggledFormattingMarks = false;\n                editor._destroyFormattingMarksOverlay();\n            }\n\n            cmd.releaseRange(range);\n        }\n    });\n\n    $.extend(Editor, {\n        FormattingMarksCommand: FormattingMarksCommand,\n        applyFormattingMarks: applyFormattingMarks,\n        clearFormattingMarksOverlay: clearFormattingMarksOverlay\n    });\n\n    registerTool(\"formattingMarks\", new Tool({ command: FormattingMarksCommand, icon: \"paragraphMark\", ui: { togglable: true } }));\n})(window.kendo.jQuery);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n    var parseFloat = global.parseFloat;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n\n    var PERCENTAGE = \"%\";\n    var PIXEL = \"px\";\n    var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n    var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n    var STRING = \"string\";\n\n    function constrain(options) {\n        var value = options.value;\n        var lowerBound = options.min;\n        var upperBound = options.max;\n\n        return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n    }\n\n    function getScrollBarWidth(element) {\n        if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n            return kendo.support.scrollbar();\n        }\n\n        return 0;\n    }\n\n    function calculatePercentageRatio(value, total) {\n        if (inPercentages(value)) {\n            return parseFloat(value);\n        }\n        else {\n            return ((parseFloat(value) / total) * 100);\n        }\n    }\n\n    function inPercentages(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n    }\n\n    function inPixels(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n    }\n\n    function toPercentages(value) {\n        return (parseFloat(value) + PERCENTAGE);\n    }\n\n    function toPixels(value) {\n        return (parseFloat(value) + PIXEL);\n    }\n\n    var ResizingUtils = {\n        constrain: constrain,\n        getScrollBarWidth: getScrollBarWidth,\n        calculatePercentageRatio: calculatePercentageRatio,\n        inPercentages: inPercentages,\n        inPixels: inPixels,\n        toPercentages: toPercentages,\n        toPixels: toPixels\n    };\n\n    extend(Editor, {\n        ResizingUtils: ResizingUtils\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_ENTER = \"mouseenter\";\n    var MOUSE_LEAVE = \"mouseleave\";\n    var MOUSE_MOVE = \"mousemove\";\n    var MOUSE_UP = \"mouseup\";\n\n    var COMMA = \",\";\n    var DOT = \".\";\n    var LAST_CHILD = \":last-child\";\n\n    var TABLE = \"table\";\n\n    var TableElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n            if ($(element).is(TABLE)) {\n                that.element = element;\n                that._attachEventHandlers();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var eventNamespace = that.options.eventNamespace;\n\n            if (that.element) {\n                $(that.element).off(eventNamespace);\n                that.element = null;\n            }\n\n            $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n            that._destroyResizeHandle();\n        },\n\n        options: {\n            tags: [],\n            min: 0,\n            rootElement: null,\n            eventNamespace: \"\",\n            rtl: false,\n            handle: {\n                dataAttribute: \"\",\n                height: 0,\n                width: 0,\n                classNames: {},\n                template: \"\"\n            }\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n\n            $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n        },\n\n        resizingInProgress: function() {\n            var that = this;\n            var resizable = that._resizable;\n\n            if (resizable) {\n                return !!resizable.resizing;\n            }\n\n            return false;\n        },\n\n        resize: noop,\n\n        detectElementBorderHovering: function(e) {\n            var that = this;\n            var options = that.options;\n            var handleOptions = options.handle;\n            var tableElement = $(e.currentTarget);\n            var resizeHandle = that.resizeHandle;\n            var dataAttribute = handleOptions.dataAttribute;\n\n            if (!that.resizingInProgress()) {\n                if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                    if (resizeHandle) {\n                        if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        that.showResizeHandle(tableElement, e);\n                    }\n                }\n                else {\n                    if (resizeHandle) {\n                        that._destroyResizeHandle();\n                    }\n                }\n            }\n        },\n\n        elementBorderHovered: noop,\n\n        showResizeHandle: function(tableElement, e) {\n            var that = this;\n\n            if (e.buttons !== 0) {\n                //prevent showing when a mouse button is still being pressed\n                return;\n            }\n\n            that._initResizeHandle();\n            that.setResizeHandlePosition(tableElement);\n            that.setResizeHandleDimensions();\n            that.setResizeHandleDataAttributes(tableElement[0]);\n            that._attachResizeHandleEventHandlers();\n\n            that._initResizable(tableElement);\n\n            that._hideResizeMarker();\n            that.resizeHandle.show();\n        },\n\n        _initResizeHandle: function() {\n            var that = this;\n            var options = that.options;\n\n            that._destroyResizeHandle();\n\n            that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n        },\n\n        setResizeHandlePosition: noop,\n\n        setResizeHandleDimensions: noop,\n\n        setResizeHandleDataAttributes: function(tableElement) {\n            var that = this;\n\n            that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n        },\n\n        _attachResizeHandleEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n            var eventNamespace = options.eventNamespace;\n            var markerClass = options.handle.classNames.marker;\n            var resizeHandle = that.resizeHandle;\n\n            that.resizeHandle\n                .on(MOUSE_DOWN + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).show();\n                })\n                .on(MOUSE_UP + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n        },\n\n        _hideResizeMarker: function() {\n            var that = this;\n\n            that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n        },\n\n        _destroyResizeHandle: function() {\n            var that = this;\n\n            if (that.resizeHandle) {\n                that._destroyResizable();\n                that.resizeHandle.off(that.options.eventNamespace).remove();\n                that.resizeHandle = null;\n            }\n        },\n\n        _initResizable: function(tableElement) {\n            var that = this;\n\n            if (!that.resizeHandle) {\n                return;\n            }\n\n            that._destroyResizable();\n\n            that._resizable = new kendo.ui.Resizable(tableElement, {\n                draggableElement: that.resizeHandle[0],\n                start: that.onResizeStart.bind(that),\n                resize: that.onResize.bind(that),\n                resizeend: that.onResizeEnd.bind(that)\n            });\n        },\n\n        _destroyResizable: function() {\n            var that = this;\n\n            if (that._resizable) {\n                that._resizable.destroy();\n                that._resizable = null;\n            }\n        },\n\n        onResizeStart: function() {\n            this._disableKeyboard();\n        },\n\n        onResize: function(e) {\n            this.setResizeHandleDragPosition(e);\n        },\n\n        setResizeHandleDragPosition: noop,\n\n        onResizeEnd: function(e) {\n            var that = this;\n\n            that.resize(e);\n            that._destroyResizeHandle();\n            that._enableKeyboard();\n\n            if (this.options.editor) {\n                this.options.editor._handleSpaceAndNewLines();\n            }\n        },\n\n        _enableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n        },\n\n        _disableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                e.preventDefault();\n            });\n        },\n\n        _forceResizing: function(e) {\n            var resizable = this._resizable;\n\n            if (resizable && resizable.userEvents) {\n                resizable.userEvents._end(e);\n            }\n        }\n    });\n\n    var ResizingFactory = Class.extend({\n        create: function(editor, options) {\n            var that = this;\n            var resizingName = options.name;\n            var NS = options.eventNamespace;\n\n            $(editor.body)\n                .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    }\n                    else {\n                        that._initResizing(editor, table, options);\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, function() {\n                    var resizing = editor[resizingName];\n\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                })\n                .on(MOUSE_UP + NS, function(e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n        },\n\n        dispose: function(editor, options) {\n            $(editor.body).off(options.eventNamespace);\n        },\n\n        _initResizing: function(editor, tableElement, options) {\n            var resizingName = options.name;\n            var resizingType = options.type;\n\n            editor[resizingName] = new resizingType(tableElement, {\n                rtl: kendo.support.isRtl(editor.element),\n                rootElement: editor.body,\n                editor: editor\n            });\n        },\n\n        _destroyResizing: function(editor, options) {\n            var resizingName = options.name;\n\n            if (editor[resizingName]) {\n                editor[resizingName].destroy();\n                editor[resizingName] = null;\n            }\n        }\n    });\n    ResizingFactory.current = new ResizingFactory();\n\n    TableElementResizing.create = function(editor, options) {\n        ResizingFactory.current.create(editor, options);\n    };\n\n    TableElementResizing.dispose = function(editor, options) {\n        ResizingFactory.current.dispose(editor, options);\n    };\n\n    extend(Editor, {\n        TableElementResizing: TableElementResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n\n    var NS = \".kendoEditorColumnResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n    var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n    var BODY = \"body\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TD = \"td\";\n    var TH = \"th\";\n    var TR = \"tr\";\n\n    var COLATTR = \"col-index\";\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n\n    var ColumnResizing = TableElementResizing.extend({\n        options: {\n            tags: [TD, TH],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"column\",\n                width: 10,\n                height: 0,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(column, e) {\n            var that = this;\n            var options = that.options;\n            var handleWidth = options.handle.width;\n            var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n            var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n            if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(column) {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var options = that.options;\n            var rtl = options.rtl;\n            var handleWidth = options.handle.width;\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var columnWidthOffset = rtl ? 0 : outerWidth(column);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var columnOffsetLeft = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var innerElementOffsetTop = tableInnerElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(tableInnerElement.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: innerElementOffsetTop + scrollTopOffset,\n                left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n            that.resizeHandle.css({\n                width: that.options.handle.width,\n                height: fullHeight\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rootElement = $(options.rootElement);\n            var handleWidth = options.handle ? options.handle.width : 0;\n            var min = options.min;\n            var rtl = options.rtl;\n            var columnWidth = outerWidth(column);\n            var columnLeftOffset = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var adjacentColumnWidth = outerWidth(column.next());\n            var resizeHandle = $(that.resizeHandle);\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                            (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                            parseFloat(resizeHandle.css(\"marginLeft\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n            });\n\n            resizeHandle.css({ left: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rtlModifier = options.rtl ? (-1) : 1;\n            var min = options.min;\n            var initialDeltaX = rtlModifier * e.x.initialDelta;\n            var newWidth;\n            var initialAdjacentColumnWidth;\n            var initialColumnWidth;\n            var colIndex;\n            var nextColumn;\n\n            dom.reMapTableColumns(that.element, COLATTR);\n\n            colIndex = parseInt(column.attr(COLATTR), 10);\n\n            if (column.prop(\"colSpan\") > 1) {\n                column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n            }\n\n            nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n            that._setTableComputedWidth();\n            that._setColumnsComputedWidth();\n\n            initialColumnWidth = outerWidth(column);\n            initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n            newWidth = constrain({\n                value: initialColumnWidth + initialDeltaX,\n                min: min,\n                max: initialColumnWidth + initialAdjacentColumnWidth - min\n            });\n\n            that._resizeColumn(column[0], newWidth);\n            that._resizeTopAndBottomColumns(column[0], newWidth);\n            that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n            dom.clearTableMappings(that.element, COLATTR);\n        },\n\n        _setTableComputedWidth: function() {\n            var element = this.element;\n\n            if (element.style[WIDTH] === \"\") {\n                element.style[WIDTH] = toPixels(outerWidth($(element)));\n            }\n        },\n\n        _setColumnsComputedWidth: function() {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var innerElementWidth = outerWidth(tableInnerElement);\n            var columns = tableInnerElement.children(TR).children(TD);\n            var length = columns.length;\n            var currentColumnsWidths = columns.map(function() {\n                return outerWidth($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                if (inPercentages(columns[i].style[WIDTH])) {\n                    columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                }\n                else {\n                    columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                }\n            }\n        },\n\n        _resizeTopAndBottomColumns: function(column, newWidth) {\n            var that = this;\n            var columnIndex = $(column).attr(COLATTR);\n            var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    var cell = this;\n                    return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                });\n            var length = topAndBottomColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeColumn(topAndBottomColumns[i], newWidth);\n            }\n        },\n\n        _resizeColumn: function(column, newWidth) {\n            var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n            if (inPercentages(column.style[WIDTH])) {\n                column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n            }\n            else {\n                column.style[WIDTH] = toPixels(newWidth);\n            }\n        },\n\n        _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                });\n            var length = adjacentColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n            }\n        },\n\n        _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var min = that.options.min;\n            var newWidth;\n\n            newWidth = constrain({\n                value: initialAdjacentColumnWidth + deltaWidth,\n                min: min,\n                max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n            });\n\n            that._resizeColumn(adjacentColumn, newWidth);\n        }\n    });\n\n    ColumnResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"columnResizing\",\n            type: ColumnResizing,\n            eventNamespace: NS\n        });\n    };\n\n    ColumnResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        ColumnResizing: ColumnResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var math = window.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorRowResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n    var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n    var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n    var BODY = \"body\";\n    var TR = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n\n    var COMMA = \",\";\n    var HEIGHT = \"height\";\n\n    var RowResizing = TableElementResizing.extend({\n        options: {\n            tags: [TR],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"row\",\n                width: 0,\n                height: 10,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(tableElement, e) {\n            var that = this;\n            var handleHeight = that.options.handle[HEIGHT];\n            var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n            var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n            if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(row) {\n            var that = this;\n            var options = that.options;\n            var handleHeight = options.handle[HEIGHT];\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n            var rowOffsetLeft = row.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(row.css(\"marginLeft\"));\n            var rowOffsetTop = row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(row.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n            that.resizeHandle.css({\n                width: innerTableElement.width(),\n                height: that.options.handle[HEIGHT]\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n            var resizeHandle = $(that.resizeHandle);\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var $row = $(row);\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var tableTopOffset = topInnerTableElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n            var rowOffsetTop = $row.offset().top -\n                                (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat($row.css(\"marginTop\"));\n\n            var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat(resizeHandle.css(\"marginTop\"));\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                min: rowOffsetTop + scrollTopOffset + min,\n                max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n            });\n\n            resizeHandle.css({ top: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var options = that.options;\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var currentRowHeight = outerHeight($(row));\n            var element = $(that.element);\n            var initialTableHeight = outerHeight(element);\n            var tableHead = element.children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = element.children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var initialStyleHeight = row.style[HEIGHT];\n            var newRowHeight = constrain({\n                value: currentRowHeight + e.y.initialDelta,\n                min: options.min,\n                max: abs(tableHeadHeight + tableBodyHeight - options.min)\n            });\n\n            that._setRowsHeightInPixels();\n            row.style[HEIGHT] = toPixels(newRowHeight);\n            that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n            if (inPercentages(initialStyleHeight)) {\n                //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                that._setRowsHeightInPercentages();\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setTableHeight: function(newHeight) {\n            var element = this.element;\n\n            if (inPercentages(element.style[HEIGHT])) {\n                element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n            }\n            else {\n                element.style[HEIGHT] = toPixels(newHeight);\n            }\n        }\n    });\n\n    RowResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"rowResizing\",\n            type: RowResizing,\n            eventNamespace: NS\n        });\n    };\n\n    RowResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        RowResizing: RowResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var Draggable = kendo.ui.Draggable;\n    var Observable = kendo.Observable;\n    var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorElementResizeHandle\";\n    var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var HALF_INSIDE = \"halfInside\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n\n    var BODY = \"body\";\n    var TABLE = \"table\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    var ElementResizeHandle = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.options = extend({}, that.options, options);\n            that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n            that._attachEventHandlers();\n            that._addStyles();\n            that._initDraggable();\n            that._initPositioningStrategy();\n            that._initDraggingStrategy();\n\n            $(that.element).data(TABLE, that.options.resizableElement);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS).remove();\n            that.element = null;\n\n            that._destroyDraggable();\n\n            that.unbind();\n        },\n\n        options: {\n            appendTo: null,\n            direction: SOUTHEAST,\n            resizableElement: null,\n            rtl: false,\n            template:\n                \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                    \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                \"</div>\"\n        },\n\n        events: [\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            MOUSE_OVER,\n            MOUSE_OUT\n        ],\n\n        show: function() {\n            this._setPosition();\n        },\n\n        _setPosition: function() {\n            var that = this;\n            var position = that._positioningStrategy.getPosition();\n\n            $(that.element).css({\n                top: position.top,\n                left: position.left,\n                position: \"absolute\"\n            });\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n\n            $(that.element)\n                .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n        },\n\n        _onMouseOver: function() {\n            this.trigger(MOUSE_OVER);\n        },\n\n        _onMouseOut: function() {\n            this.trigger(MOUSE_OUT);\n        },\n\n        _addStyles: function() {\n            var that = this;\n            $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n        },\n\n        _initPositioningStrategy: function() {\n            var that = this;\n            var options = that.options;\n\n            that._positioningStrategy = HandlePositioningStrategy.create({\n                name: options.direction,\n                handle: that.element,\n                resizableElement: options.resizableElement,\n                rootElement: options.rootElement,\n                rtl: options.rtl\n            });\n        },\n\n        _initDraggable: function() {\n            var that = this;\n            var element = that.element;\n\n            if (that._draggable || !element) {\n                return;\n            }\n\n            that._draggable = new Draggable(element, {\n                dragstart: that._onDragStart.bind(that),\n                drag: that._onDrag.bind(that),\n                dragend: that._onDragEnd.bind(that)\n            });\n        },\n\n        _onDragStart: function() {\n            this.trigger(DRAG_START);\n        },\n\n        _onDrag: function(e) {\n            var that = this;\n\n            that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                deltaX: e.x.delta,\n                deltaY: e.y.delta,\n                initialDeltaX: e.x.initialDelta,\n                initialDeltaY: e.y.initialDelta\n            }));\n\n            if (that.options.editor) {\n                that.options.editor._handleSpaceAndNewLines();\n            }\n        },\n\n        _onDragEnd: function() {\n            this.trigger(DRAG_END);\n        },\n\n        _destroyDraggable: function() {\n            var that = this;\n\n            if (that._draggable) {\n                that._draggable.destroy();\n                that._draggable = null;\n            }\n        },\n\n        _initDraggingStrategy: function() {\n            var that = this;\n\n            that._draggingStrategy = HandleDraggingStrategy.create({\n                name: that.options.direction\n            });\n        }\n    });\n\n    var StrategyFactory = Class.extend({\n        init: function() {\n            this._items = [];\n        },\n\n        register: function(name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        },\n\n        create: function(options) {\n            var items = this._items;\n            var itemsLength = items.length;\n            var name = options.name ? options.name.toLowerCase() : \"\";\n            var match;\n            var item;\n            var i;\n\n            for (i = 0; i < itemsLength; i++) {\n                item = items[i];\n\n                if (item.name.toLowerCase() === name) {\n                    match = item;\n                    break;\n                }\n            }\n\n            if (match) {\n                return new match.type(options);\n            }\n        }\n    });\n\n    var PositioningStrategyFactory = StrategyFactory.extend({});\n    PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n    var HandlePositioningStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            handle: null,\n            offset: HALF_INSIDE,\n            resizableElement: null,\n            rootElement: null,\n            rtl: false\n        },\n\n        getPosition: function() {\n            var that = this;\n\n            var position = that.calculatePosition();\n            var handleOffsetPosition = that.applyHandleOffset(position);\n            var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n            return scrollOffsetPosition;\n        },\n\n        calculatePosition: noop,\n\n        applyHandleOffset: function(position) {\n            var options = this.options;\n            var handle = $(options.handle);\n\n            if (options.offset === HALF_INSIDE) {\n                return {\n                    top: position.top - (outerHeight(handle) / 2),\n                    left: position.left - (outerWidth(handle) / 2)\n                };\n            }\n\n            return position;\n        },\n\n        applyScrollOffset: function(position) {\n            var options = this.options;\n            var rootElement = $(options.rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var browser = kendo.support.browser;\n            var rootLeft;\n\n            if (!rootElement.is(BODY)) {\n                rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    rootLeft = rootLeft * -1;\n                }\n\n                return {\n                    top: position.top + (rootElement.scrollTop() || 0),\n                    left: position.left + rootLeft - scrollBarWidth\n                };\n            }\n\n            return position;\n        }\n    });\n\n    HandlePositioningStrategy.create = function(options) {\n        return PositioningStrategyFactory.current.create(options);\n    };\n\n    var EastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n    var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n    var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n    var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n    var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n    var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n    var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n    var WestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n    var DraggingStrategyFactory = StrategyFactory.extend({});\n    DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n    var HandleDraggingStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            deltaX: {\n                adjustment: null,\n                modifier: null\n            },\n            deltaY: {\n                adjustment: null,\n                modifier: null\n            }\n        },\n\n        adjustDragDelta: function(deltas) {\n            var options = this.options;\n            var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n            var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n            return {\n                deltaX: deltas.deltaX * xAxisAdjustment,\n                deltaY: deltas.deltaY * yAxisAdjustment,\n                initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n            };\n        }\n    });\n\n    HandleDraggingStrategy.create = function(options) {\n        return DraggingStrategyFactory.current.create(options);\n    };\n\n    var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 0,\n                modifier: 0\n            }\n        }\n    });\n\n    var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n    var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n    var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 0,\n                modifier: 0\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n    var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n    var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n    var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n    var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n    var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n    extend(Editor, {\n        ElementResizeHandle: ElementResizeHandle\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n\n    var $ = kendo.jQuery;\n    var contains = $.contains;\n    var extend = $.extend;\n\n    var browser = kendo.support.browser;\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var ElementResizeHandle = Editor.ElementResizeHandle;\n    var ResizingUtils = Editor.ResizingUtils;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var constrain = ResizingUtils.constrain;\n    var inPercentages = ResizingUtils.inPercentages;\n    var inPixels = ResizingUtils.inPixels;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var RangeUtils = Editor.RangeUtils;\n\n    var NS = \".kendoEditorElementResizing\";\n    var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n    var TABLE_CLASS = \"k-table\";\n    var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var SELECT = \"select\";\n    var DROP = \"drop\";\n\n    var COLUMN = \"td\";\n    var ROW = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TABLE = \"table\";\n    var IMG = \"img\";\n    var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n    var HEIGHT = \"height\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    function isUndefined(value) {\n        return typeof(value) === \"undefined\";\n    }\n\n    var ElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n            that.handles = [];\n\n            // Check whether the element is TABLE or IMG\n            if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                that.element = element;\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS);\n            that.element = null;\n\n            $(that.options.rootElement).off(KEY_DOWN + NS);\n\n            that._destroyResizeHandles();\n        },\n\n        options: {\n            appendHandlesTo: null,\n            rtl: false,\n            rootElement: null,\n            minWidth: 10,\n            minHeight: 10,\n            handles: [{\n                direction: NORTHWEST\n            }, {\n                direction: NORTH\n            }, {\n                direction: NORTHEAST\n            }, {\n                direction: EAST\n            }, {\n                direction: SOUTHEAST\n            }, {\n                direction: SOUTH\n            }, {\n                direction: SOUTHWEST\n            }, {\n                direction: WEST\n            }]\n        },\n\n        resize: function(args) {\n            var that = this;\n            var deltas = extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n\n            that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            that.showResizeHandles();\n        },\n\n        _resizeWidth: function() {\n            return false;\n        },\n\n        _resizeHeight: function() {\n            return false;\n        },\n\n        _getMaxDimensionValue: function(dimension) {\n            var that = this;\n            var element = $(that.element);\n            var dimensionLowercase = dimension.toLowerCase();\n            var rtlModifier = that.options.rtl ? (-1) : 1;\n            var parent = $(that.element).parent();\n            var parentElement = parent[0];\n            var parentDimension = parent[dimensionLowercase]();\n            var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n            if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                    return Infinity;\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            }\n            else {\n                return (parentDimension + parentScrollOffset);\n            }\n        },\n\n        showResizeHandles: function() {\n            var that = this;\n\n            that._initResizeHandles();\n            that._showResizeHandles();\n        },\n\n        _initResizeHandles: function() {\n            var that = this;\n            var handles = that.handles;\n            var options = that.options;\n            var handleOptions = that.options.handles;\n            var length = handleOptions.length;\n            var i;\n\n            if (handles && handles.length > 0) {\n                return;\n            }\n\n            for (i = 0; i < length; i++) {\n                that.handles.push(new ElementResizeHandle(extend({\n                    appendTo: options.appendHandlesTo,\n                    resizableElement: that.element,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl,\n                    editor: that.options.editor\n                }, handleOptions[i])));\n            }\n\n            that._bindToResizeHandlesEvents();\n        },\n\n        _destroyResizeHandles: function() {\n            var that = this;\n            var length = that.handles ? that.handles.length : 0;\n\n            for (var i = 0; i < length; i++) {\n                that.handles[i].destroy();\n            }\n\n            that.handles = [];\n        },\n\n        _showResizeHandles: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that.handles[i].show();\n            }\n        },\n\n        _bindToResizeHandlesEvents: function() {\n            return false;\n        },\n\n        _onResizeHandleDragStart: function() {\n            var that = this;\n            var element = $(that.element);\n\n            element.addClass(ELEMENT_RESIZING_CLASS);\n\n            that._initialElementHeight = outerHeight(element);\n            that._initialElementWidth = outerWidth(element);\n            that._disableKeyboard();\n        },\n\n        _onResizeHandleDrag: function(e) {\n            this.resize(e);\n        },\n\n        _onResizeHandleDragEnd: function() {\n            var that = this;\n            $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            $(this.options.rootElement).off(KEY_DOWN + NS);\n        },\n\n        _disableKeyboard: function() {\n            $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                e.preventDefault();\n            });\n        }\n    });\n\n    var TableResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _hasRowsInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleWidth = element[0].style[WIDTH];\n            var currentWidth = outerWidth(element);\n            var parentWidth = element.parent().width();\n            var maxWidth = that._getMaxDimensionValue(WIDTH);\n            var newWidth;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: maxWidth\n            });\n\n            if (inPercentages(styleWidth)) {\n                //detect resizing greater than 100%\n                if (currentWidth + delta > parentWidth) {\n                    ratioValue = max(constrainedWidth, parentWidth);\n                    ratioTotalValue = min(constrainedWidth, parentWidth);\n                }\n                else {\n                    ratioValue = min(constrainedWidth, parentWidth);\n                    ratioTotalValue = max(constrainedWidth, parentWidth);\n                }\n\n                newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newWidth = toPixels(constrainedWidth);\n            }\n\n            that._setColumnsWidth();\n\n            element[0].style[WIDTH] = newWidth;\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleHeight = element[0].style[HEIGHT];\n            var currentHeight = outerHeight(element);\n            var parent = element.parent();\n            var parentHeight = parent.height();\n            var maxHeight = that._getMaxDimensionValue(HEIGHT);\n            var newHeight;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedHeight;\n            var minHeight = that.options.minHeight;\n            var hasRowsInPixels = that._hasRowsInPixels();\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: minHeight,\n                max: maxHeight\n            });\n\n            if (hasRowsInPixels && delta < 0) {\n                //decreasing table height when rows are sized in pixels is not possible\n                that._setRowsHeightInPercentages();\n            }\n\n            if (inPercentages(styleHeight)) {\n                //detect resizing greater than 100%\n                if (currentHeight + delta > parentHeight) {\n                    ratioValue = max(constrainedHeight, parentHeight);\n                    ratioTotalValue = min(constrainedHeight, parentHeight);\n                }\n                else {\n                    ratioValue = min(constrainedHeight, parentHeight);\n                    ratioTotalValue = max(constrainedHeight, parentHeight);\n                }\n\n                newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newHeight = toPixels(constrainedHeight);\n            }\n\n            element[0].style[HEIGHT] = newHeight;\n\n            if (hasRowsInPixels && delta < 0) {\n                //restore original rows height unit\n                that._setRowsHeightInPixels();\n            }\n        },\n\n        _setColumnsWidth: function() {\n            var that = this;\n            var element = $(that.element);\n            var parentElement = element.parent()[0];\n            var parentColumn = element.closest(COLUMN);\n            var columns = parentColumn.closest(ROW).children();\n            var columnsLength = columns.length;\n            var i;\n\n            function isWidthInPercentages(element) {\n                var styleWidth = element.style.width;\n\n                if (styleWidth !== \"\") {\n                    return inPercentages(styleWidth) ? true : false;\n                }\n                else {\n                    return $(element).hasClass(TABLE_CLASS) ? true : false;\n                }\n            }\n\n            if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                for (i = 0; i < columnsLength; i++) {\n                    columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                }\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        }\n    });\n\n    var ImageResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                    handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                    handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                } else {\n                    handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                }\n\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _getDeltas: function(args) {\n            return extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n        },\n\n        _onResizeHandleDragVertical: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragHorizontal: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragLocked: function(args) {\n            var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                initialWidth = this._initialElementWidth,\n                initialHeight = this._initialElementHeight,\n                deltas;\n\n            if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                args.deltaY = args.deltaX;\n            } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                args.deltaX = args.deltaY;\n            }\n\n            deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            this.showResizeHandles();\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentWidth = outerWidth(element);\n            var newWidth;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: that._getMaxDimensionValue(WIDTH)\n            });\n\n            newWidth = toPixels(constrainedWidth);\n            element[0].style[WIDTH] = newWidth;\n            element.attr(WIDTH, Math.floor(constrainedWidth));\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentHeight = outerHeight(element);\n            var newHeight;\n            var constrainedHeight;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: that.options.minHeight,\n                max: Number.MAX_SAFE_INTEGER\n            });\n\n            newHeight = toPixels(constrainedHeight);\n            element[0].style[HEIGHT] = newHeight;\n            element.attr(HEIGHT, Math.floor(constrainedHeight));\n        }\n    });\n\n    const ElementResizingFactory = Class.extend({\n        create: function(editor) {\n            let factory = this;\n\n            $(editor.body)\n                .on(\"dragstart\" + NS, function() {\n                    var nodes = RangeUtils.nodes(editor.getRange()),\n                        hasImg = false;\n\n                    nodes.forEach(function(node) {\n                        if (node.nodeName === \"IMG\") {\n                            hasImg = true;\n                        }\n                    });\n\n                    if (hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                })\n                .on(DROP + NS, function() {\n                    setTimeout(function() {\n                        var image = RangeUtils.image(editor.getRange());\n\n                        if (image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                })\n                .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                //instead of stopping event propagation\n                                return;\n                            }\n                            else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n\n                    editor._showElementResizeHandles();\n                })\n                .on(MOUSE_DOWN + NS, function(e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n        },\n\n        dispose: function(editor) {\n            $(editor.body).off(NS);\n        },\n\n        _initResizing: function(editor, element) {\n            // table and image resizing is natively supported in IE\n            // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n            // Enable custom resize handlers for FF too\n            if (!browser.msie) {\n                if ($(element).is(TABLE)) {\n                    editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body,\n                        editor: editor\n                    });\n                } else if ($(element).is(IMG)) {\n                    editor.elementResizing = new ImageResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body,\n                        editor: editor\n                    });\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                    editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            }\n        }\n    });\n\n    ElementResizingFactory.current = new ElementResizingFactory();\n\n    extend(Editor, {\n        TableResizing: TableResizing,\n        ImageResizing: ImageResizing,\n        ElementResizing: ElementResizing,\n        ElementResizingFactory: ElementResizingFactory\n    });\n\n})(window.kendo);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command;\n\nvar tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\nvar cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\nvar reUnit = /([a-z]+|%)$/i;\n\nvar COL = \"col\";\nvar ROW = \"row\";\nvar COLGROUP = \"colgroup\";\nvar SCOPE = \"scope\";\nvar COL_INDEX = \"col-index\";\nvar TH = \"th\";\nvar TD = \"td\";\nvar THEAD = \"thead\";\nvar HEADERS = \"headers\";\nvar TABLE = \"table\";\n\nvar TableWizardCommand = Command.extend({\n    exec: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var range = cmd.range = cmd.lockRange();\n        var isTableCellWizard = cmd.options.tableCellWizard;\n        var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n        var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n        var options = {\n            visible: false,\n            messages: editor.options.messages,\n            closeCallback: cmd.onDialogClose.bind(cmd),\n            table: cmd.parseTable(selectedTable, selectedCells),\n            dialogOptions: editor.options.dialogOptions,\n            isRtl: kendo.support.isRtl(editor.wrapper)\n        };\n\n        var dialog = new Editor.TableWizardDialog(options);\n        dialog.open(isTableCellWizard);\n    },\n\n    onDialogClose: function(data) {\n        var cmd = this;\n        cmd.releaseRange(cmd.range);\n\n        if (data) { //Ok button pressed\n            if (cmd.options.insertNewTable) {\n                cmd.insertTable(cmd.createNewTable(data));\n            } else {\n                cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n            }\n        }\n    },\n    releaseRange: function(range) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        dom.windowFromDocument(doc).focus();\n        Command.fn.releaseRange.call(cmd, range);\n    },\n    insertTable: function(table) {\n        var range = this.range;\n\n        range.insertNode(table);\n        range.collapse(true);\n        this.editor.selectRange(range);\n\n        this._ensureFocusableAfterTable(table);\n    },\n    _ensureFocusableAfterTable: function(table) {\n        var siblingNodes = $(table).parent().contents();\n        var lastSiblingIndex = siblingNodes.length - 1;\n        var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n        while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n            lastSiblingIndex -= 1;\n            lastSibling = siblingNodes.get(lastSiblingIndex);\n        }\n\n        if (lastSibling === table) {\n            dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n        }\n    },\n    updateTable: function(data, table, selectedCells) {\n        var cmd = this;\n        var tableRows = $(table.rows).toArray();\n        var tableProp = data.tableProperties;\n        var rows = tableProp.rows;\n        var tHead = table.tHead;\n        var last = cmd._lastInCollection;\n        var lastSelectedRow, cellProp;\n\n        //Leave only first selected cell\n        while (selectedCells.length > 1) {\n            selectedCells.pop();\n        }\n\n        lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n        cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n        if (tableRows.length < rows) {\n            cmd._addRows(lastSelectedRow, rows, tableRows);\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n        cmd._updateTableProperties(table, tableProp);\n\n        cellProp = data.cellProperties;\n        if (selectedCells[0]) {\n            dom.attr(selectedCells[0], { id: (cellProp || {}).id || null });\n        }\n        if (cellProp) {\n            (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n                cmd._updateCellProperties(cell, cellProp, tableProp);\n            });\n        }\n\n        cmd._updateCaption(table, tableProp);\n\n        if (tHead) {\n            cmd._updateHeadersWithThead(table, data);\n        } else {\n            cmd._updateHeadersNoThead(table, data);\n        }\n\n        cmd._updateHeaderAssociates(table, tableProp);\n        dom.clearTableMappings(table, COL_INDEX);\n    },\n    _isHeadingRow: function(row) {\n        return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n    },\n    _isHeadingCell: function(cell) {\n        return dom.is(cell, TH);\n    },\n    cellsWithHeadersAssociated: function(table) {\n        var cells = $(table.rows).children();\n        var headingIds = [];\n        var checkHeader = function(header) {\n            return headingIds.indexOf(header) > -1;\n        };\n\n        cells.each(function(c, cell) {\n            if (cell.id && dom.is(cell, TH)) {\n                headingIds.push(cell.id);\n            }\n        });\n\n        var associatedCells = cells.filter(function(c, cell) {\n            var headersAttr = cell.getAttribute(HEADERS);\n            var headersArray;\n\n            if (headersAttr && !dom.is(cell, TH)) {\n                headersArray = headersAttr.split(\" \");\n\n                if (headersArray && headersArray.length > 0) {\n                    return headersArray.some(checkHeader);\n                }\n            }\n\n            return false;\n        });\n\n        return !!associatedCells.length;\n    },\n    _insertCells: function(count, row, index) {\n        index = isNaN(index) ? -1 : index;\n        for (var i = 0, cell; i < count; i++) {\n            cell = row.insertCell(index);\n            cell.innerHTML = \"&nbsp;\";\n        }\n    },\n    _deleteTableRows: function(rows, count) {\n        for (var i = 0, row, rowParent; i < count; i++) {\n            row = rows.pop();\n            rowParent = row.parentNode;\n            rowParent.removeChild(row);\n            if (!rowParent.rows.length) {\n                dom.remove(rowParent);\n            }\n        }\n    },\n    createNewTable: function(data) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        var tableProp = data.tableProperties;\n        var table = dom.create(doc, TABLE);\n        var rowIndex = 0;\n        var thead;\n\n        cmd._updateTableProperties(table, tableProp);\n        cmd._updateCaption(table, tableProp);\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            thead = table.createTHead();\n            cmd._createTableRows(data, thead, rowIndex, true);\n            rowIndex += tableProp.headerRows;\n        }\n\n        var tbody = table.createTBody();\n        cmd._createTableRows(data, tbody, rowIndex, false);\n\n        dom.reMapTableColumns(table, COL_INDEX);\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        }\n\n        dom.clearTableMappings(table, COL_INDEX);\n\n        return table;\n    },\n    _createTableRows: function(data, container, initialIndex, headerRows) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var cellProp = data.cellProperties;\n        var columns = tableProp.columns;\n        var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n        var headerColumns = tableProp.headerColumns;\n\n        for (var r = initialIndex, row; r < rows; r++) {\n            row = container.insertRow();\n\n            for (var c = 0, cell; c < columns; c++) {\n                if (headerRows || headerColumns > c) {\n                    cell = document.createElement(TH);\n                } else {\n                    cell = document.createElement(TD);\n                }\n\n                row.appendChild(cell);\n                cell.innerHTML = \"&nbsp;\";\n                if (cellProp && r === 0 && c === 0 && cellProp.id) {\n                    cell.id = cellProp.id;\n                }\n\n                cmd._updateCellProperties(cell, cellProp && (cellProp.selectAllCells || (r === 0 && c === 0)) ? cellProp : {}, tableProp);\n            }\n        }\n    },\n    _addRows: function(lastSelectedRow, rows, tableRows) {\n        var cmd = this;\n        var rowIndex = $(lastSelectedRow).index();\n        var cellsLength = lastSelectedRow.cells.length;\n        var newRowsCount = rows - tableRows.length;\n        var parent = lastSelectedRow.parentNode;\n        var row;\n\n        while (newRowsCount) {\n            row = parent.insertRow(rowIndex + 1);\n            cmd._insertCells(cellsLength - row.cells.length, row);\n            newRowsCount--;\n        }\n    },\n    _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n        var cmd = this;\n        var last = cmd._lastInCollection;\n        var firstRowLastCell = last(tableRows[0].cells);\n        var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n        if (numberOfColumns > columns) {\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                while (rowColumns > columns) {\n                    if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                        lastCurrentCell.colSpan -= 1;\n                    } else {\n                        row.deleteCell(-1);\n                    }\n\n                    lastCurrentCell = last(row.cells);\n                    rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                }\n            });\n        }\n\n        if (numberOfColumns < columns) {\n            var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n            });\n        }\n    },\n    _updateTableProperties: function(table, data) {\n        var style = this._getStylesData(data);\n        dom.attr(table, {\n            cellSpacing: data.cellSpacing || null,\n            topCellPadding: this._getNumericValue(data.topCellPadding) ?? '',\n            leftCellPadding: this._getNumericValue(data.leftCellPadding) ?? '',\n            bottomCellPadding: this._getNumericValue(data.bottomCellPadding) ?? '',\n            rightCellPadding: this._getNumericValue(data.rightCellPadding) ?? '',\n            className: data.className || null,\n            id: data.id || null,\n            summary: data.summary || null,\n            style: style || null\n        });\n        $(table).addClass(\"k-table\");\n    },\n    _updateCellProperties: function(cell, data, tableData) {\n        var style = this._getStylesData(data);\n        style.paddingTop = this._getNumericValue(data.topCellPadding) ?? this._getNumericValue(tableData?.topCellPadding) ?? '';\n        style.paddingLeft = this._getNumericValue(data.leftCellPadding) ?? this._getNumericValue(tableData?.leftCellPadding) ?? '';\n        style.paddingBottom = this._getNumericValue(data.bottomCellPadding) ?? this._getNumericValue(tableData?.bottomCellPadding) ?? '';\n        style.paddingRight = this._getNumericValue(data.rightCellPadding) ?? this._getNumericValue(tableData?.rightCellPadding) ?? '';\n        style.margin = data.cellMargin || null;\n        dom.attr(cell, {\n            style: style || null,\n            className: data.className || null\n        });\n    },\n    _updateCaption: function(table, data) {\n        if (table.caption && !data.captionContent) {\n            table.deleteCaption();\n        } else if (data.captionContent) {\n            var caption = table.createCaption();\n            caption.innerHTML = data.captionContent;\n            var alignment = this._getAlignmentData(data.captionAlignment);\n            dom.attr(caption, {\n                style: {\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign\n                }\n            });\n        }\n    },\n    _updateHeadersNoThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var rows = table.rows;\n        var row, cells, cell, i, j;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n            cells = row.cells;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                    dom.changeTag(cell, TH, false);\n                } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                }\n            }\n        }\n    },\n    _updateHeadersWithThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var thead = table.tHead;\n        var rowIndex = 0;\n        var tbody = table.tBodies[0];\n        var row, cell, i;\n\n        if (!tbody) {\n            tbody = table.createTBody();\n        }\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            if (!thead) {\n                thead = table.createTHead();\n            }\n\n            while (thead.rows.length < tableProp.headerRows) {\n                thead.appendChild(tbody.rows[0]);\n            }\n\n            while (thead.rows.length > tableProp.headerRows) {\n                tbody.appendChild(thead.rows[0]);\n            }\n\n            cmd._swapToHeaderCells(thead);\n        } else if (thead) {\n            while (thead.rows.length > 0) {\n                tbody.appendChild(thead.rows[thead.rows.length - 1]);\n            }\n\n            table.deleteTHead();\n        }\n\n        while (tbody.rows.length > rowIndex) {\n            row = tbody.rows[rowIndex];\n            for (i = 0; i < row.cells.length; i++) {\n                cell = row.cells[i];\n                if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TH, false);\n                }\n            }\n            rowIndex += 1;\n        }\n    },\n    _updateHeaderAssociates: function(table, tableProp) {\n        var cmd = this;\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            if (!cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeScopes(table);\n            }\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            }\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        } else {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            } else {\n                cmd._removeScopes(table);\n            }\n        }\n    },\n    _addScopes: function(table, headerRows, headerCols) {\n        var rows = table.rows;\n        var i, j, row, cell;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (i < headerRows) {\n                    cell.setAttribute(SCOPE, COL);\n                } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                    cell.setAttribute(SCOPE, ROW);\n                }\n            }\n        }\n    },\n    _removeScopes: function(table) {\n        $(table).find(TH).removeAttr(SCOPE);\n        $(table).find(COL).remove();\n        $(table).find(COLGROUP).remove();\n    },\n    _removeAssociates: function(table) {\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n    },\n    _swapToHeaderCells: function(thead) {\n        var tds = $(thead).find(\"td\");\n        var swapCell = function(index, cell) {\n            dom.changeTag(cell, TH, false);\n        };\n        tds.each(swapCell);\n    },\n    _getStylesData: function(data) {\n        var that = this;\n        var alignment = this._getAlignmentData(data.alignment);\n        var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n        return $.extend({\n            width: data.width ? data.width + data.widthUnit : null,\n            height: data.height ? data.height + data.heightUnit : null,\n            textAlign: alignment.textAlign,\n            verticalAlign: alignment.verticalAlign,\n            backgroundColor: data.bgColor || \"\",\n            borderWidth: data.borderWidth,\n            borderStyle: data.borderStyle,\n            borderColor: data.borderColor || \"\",\n            borderCollapse: data.collapseBorders ? \"collapse\" : null,\n            whiteSpace: whiteSpace\n        }, that._getTablePositionData(data.position));\n    },\n    _getAlignmentData: function(alignment) {\n        var textAlign = \"\";\n        var verticalAlign = textAlign;\n\n        if (alignment) {\n            if (alignment.indexOf(\" \") != -1) {\n                var align = alignment.split(\" \");\n                textAlign = align[0];\n                verticalAlign = align[1];\n            } else {\n                textAlign = alignment;\n            }\n        }\n        return { textAlign: textAlign, verticalAlign: verticalAlign };\n    },\n    _getTablePositionData: function(position) {\n        if (!position) {\n            return {};\n        }\n\n        return { marginLeft: position != \"left\" ? \"auto\" : \"\", marginRight: position != \"right\" ? \"auto\" : \"\" };\n    },\n    parseTable: function(table, selectedCells) {\n        if (!table) {\n            return { tableProperties: {}, selectedCells: [] };\n        }\n\n        var cmd = this;\n        var tStyle = table.style;\n        var rows = table.rows;\n        var caption = table.caption;\n        var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n        captionClone.find(\".k-marker\").remove();\n\n        var cssClass = table.className;\n        cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n        cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n        cssClass = cssClass.replace(/^k-table$/, \"\");\n\n        var tableAlignment = cmd._getAlignment(table, true);\n        var tablePosition = cmd._getTablePosition(table);\n        var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n        var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n        var cellsWithHeaders;\n        if (cmd.cellsWithHeadersAssociated(table)) {\n            cellsWithHeaders = \"ids\";\n        } else if ($(table).find(\"th[scope]\").length > 0) {\n            cellsWithHeaders = \"scope\";\n        } else {\n            cellsWithHeaders = \"none\";\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        var numberOfColumns = dom._getNumberOfColumns(table);\n        var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n        dom.clearTableMappings(table, COL_INDEX);\n\n        var tableJson = {\n            tableProperties: {\n                width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                columns: numberOfColumns,\n                rows: rows.length,\n                widthUnit: cmd._getUnit(tStyle.width),\n                heightUnit: cmd._getUnit(tStyle.height),\n                cellSpacing: table.cellSpacing,\n                topCellPadding: table.topCellPadding,\n                leftCellPadding: table.leftCellPadding,\n                bottomCellPadding: table.bottomCellPadding,\n                rightCellPadding: table.rightCellPadding,\n                alignment: tableAlignment.textAlign,\n                position: tablePosition,\n                bgColor: tStyle.backgroundColor || table.bgColor,\n                className: cssClass,\n                id: table.id,\n                borderWidth: tStyle.borderWidth || table.border,\n                borderColor: tStyle.borderColor,\n                borderStyle: tStyle.borderStyle || \"\",\n                collapseBorders: !!tStyle.borderCollapse,\n                summary: table.summary,\n                captionContent: caption ? captionClone.html() : \"\",\n                captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                headerRows: numberOfHeaderRows,\n                headerColumns: numberOfHeaderColumns,\n                cellsWithHeaders: cellsWithHeaders\n            },\n            selectedCells: []\n        };\n\n        tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n        return tableJson;\n    },\n    parseTableRows: function(rows, selectedCells, tableJson) {\n        var cmd = this;\n        var data = [], row, rowData, cells, cell, cellData;\n        for (var i = 0; i < rows.length; i++) {\n            row = rows[i];\n            rowData = { cells: [] };\n            cells = row.cells;\n            data.push(rowData);\n            for (var j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                cellData = cmd.parseCell(cell);\n                if ($.inArray(cell, selectedCells) != -1) {\n                    tableJson.selectedCells.push(cellData);\n                }\n                rowData.cells.push(cellData);\n            }\n        }\n        return data;\n    },\n    parseCell: function(cell) {\n        var cmd = this;\n        var cStyle = cell.style;\n        var alignment = cmd._getAlignment(cell);\n        alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n        var data = {\n            width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n            height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n            widthUnit: cmd._getUnit(cStyle.width),\n            heightUnit: cmd._getUnit(cStyle.height),\n            cellMargin: cStyle.margin,\n            topCellPadding: cStyle.paddingTop,\n            leftCellPadding: cStyle.paddingLeft,\n            bottomCellPadding: cStyle.paddingBottom,\n            rightCellPadding: cStyle.paddingRight,\n            alignment: alignment,\n            bgColor: cStyle.backgroundColor || cell.bgColor,\n            className: cell.className,\n            id: cell.id,\n            borderWidth: cStyle.borderWidth || cell.border,\n            borderColor: cStyle.borderColor,\n            borderStyle: cStyle.borderStyle,\n            wrapText: cStyle.whiteSpace != \"nowrap\"\n        };\n\n        return data;\n    },\n    _getTablePosition: function(element) {\n        var style = element.style;\n        if (style.marginLeft == \"auto\" && style.marginRight == \"auto\") {\n            return \"center\";\n        }\n\n        if (style.marginLeft == \"auto\") {\n            return \"right\";\n        }\n\n        return \"left\";\n    },\n    _getAlignment: function(element, horizontalOnly) {\n        var style = element.style;\n        var hAlign = style.textAlign || element.align || \"\";\n        if (horizontalOnly) {\n            return { textAlign: hAlign };\n        }\n        var vAlign = style.verticalAlign || element.vAlign || \"\";\n        if (hAlign && vAlign) {\n            return { textAlign: hAlign, verticalAlign: vAlign };\n        }\n        if (!hAlign && vAlign) {\n            return { textAlign: \"left\", verticalAlign: vAlign };\n        }\n        if (hAlign && !vAlign) {\n            return { textAlign: hAlign, verticalAlign: \"top\" };\n        }\n        return { textAlign: \"\", verticalAlign: \"\" };\n    },\n    _getUnit: function(value) {\n        var unit = (value || \"\").match(reUnit);\n        return unit ? unit[0] : \"px\";\n    },\n    _selectedTable: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return tableFormatFinder.findSuitable(nodes)[0];\n    },\n    _selectedCells: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return cellsFormatFinder.findSuitable(nodes);\n    },\n    _lastInCollection: function(collection) {\n        return collection[collection.length - 1];\n    },\n    _getNumericValue: function(value) {\n        return !isNaN(value) || typeof value === \"string\" ? value : null;\n    }\n});\n\nvar TableWizardTool = Editor.Tool.extend({\n    command: function(options) {\n        options.insertNewTable = this.options.insertNewTable;\n        options.tableCellWizard = !!this.options.tableCellWizard;\n        return new TableWizardCommand(options);\n    }\n});\n\nvar TableWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nvar TableCellWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nkendo.ui.editor.TableWizardTool = TableWizardTool;\nkendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\nregisterTool(\"tableProperties\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, property: \"tableProperties\" }));\nregisterTool(\"tableCellProperties\", new TableCellWizardEditTool({ command: TableWizardCommand, tableCellWizard: true, insertNewTable: false, property: \"tableCellProperties\" }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nconst FORM_FIELD_CLASS = \"k-form-field\",\n      INVISIBLE_CLASS = \"k-visibility-invisible\",\n      DOT = \".\";\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    numericTextBoxSettings = { format: \"0\", min: 0 },\n    units = [\"px\", \"em\"],\n    borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\nvar DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\nvar textWrapDropDownSettings = {\n    dataSource: [{\n        className: \"text-wrap\",\n        value: \"wrap\"\n    }, {\n        className: \"parameter-string\",\n        value: \"nowrap\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-text-wrap\" }) + encode(tooltip)\n};\n\nvar tablePositionDropDownSettings = {\n    dataSource: [{\n        className: \"table-position-start\",\n        value: \"left\"\n    }, {\n        className: \"table-position-center\",\n        value: \"center\"\n    }, {\n        className: \"table-position-end\",\n        value: \"right\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n};\n\nvar tableAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-middle-left\",\n        value: \"left\"\n    }, {\n        className: \"table-align-middle-center\",\n        value: \"center\"\n    }, {\n        className: \"table-align-middle-right\",\n        value: \"right\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n};\n\nvar cellAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"table-align-middle-left\",\n        value: \"left middle\"\n    }, {\n        className: \"table-align-middle-center\",\n        value: \"center middle\"\n    }, {\n        className: \"table-align-middle-right\",\n        value: \"right middle\"\n    }, {\n        className: \"table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n};\n\nvar accessibilityAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" })\n};\n\nvar tablePropertiesDialogTemplate = ({ messages }) =>\n    '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n        '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n            '<ul>' +\n                `<li class=\"k-active\">${ messages.tableTab }</li>` +\n                `<li>${ messages.accessibilityTab }</li>` +\n            '</ul>' +\n            '<div id=\"k-table-properties\"></div>' +\n            '<div id=\"k-accessibility-properties\"></div>' +\n        '</div>' +\n        '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                    icon: 'check',\n                        themeColor: \"primary\"\n                    }) +\n                    kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                        icon: 'cancel-outline'\n                    }) +\n        '</div>' +\n    '</div>';\n    var cellPropertiesDialogTemplate = ({ messages }) =>\n    '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n        '<div id=\"k-cell-properties\"></div>' +\n        '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                    icon: 'check',\n                        themeColor: \"primary\"\n                    }) +\n                    kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                        icon: 'cancel-outline'\n                    }) +\n        '</div>' +\n    '</div>';\n\nvar TableWizardDialog = kendo.Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n    _openTablePropertiesDialog: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectTableDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.minWidth = 700;\n        dialogOptions.width = 700;\n        dialogOptions.title = messages.tableProperties;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .addClass(\"k-editor-window\")\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        this.components = {};\n        that._initTabStripComponent(element);\n        that._tablePropertiesForm = that._createTablePropertiesForm(dialog, messages);\n        that._accessibilityPropertiesForm = that._createAccessibilityPropertiesForm(dialog, messages);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n    _openCellPropertiesDialog: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectCellDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.minWidth = 400;\n        dialogOptions.title = messages.tableCellProperties;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages, cellPropertiesDialogTemplate)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .addClass(\"k-editor-window\")\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        that._cellPropertiesForm = that._createCellPropertiesForm(dialog, messages);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n    open: function(isCellProperties) {\n        if (!isCellProperties) {\n            this._openTablePropertiesDialog();\n        } else {\n            this._openCellPropertiesDialog();\n        }\n    },\n\n    _initTabStripComponent: function(element) {\n        var components = this.components = {};\n        components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n            animation: false\n        }).data(\"kendoTabStrip\");\n    },\n\n    collectTableDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectTableViewValues(data);\n        that._collectAccessibilityViewValues(data);\n    },\n\n    collectCellDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectCellViewValues(data);\n    },\n\n    _collectTableViewValues: function(tableData) {\n        var tableView = this.components.tableView;\n        var tableProperties = tableData.tableProperties;\n        var cellData = tableData.cellProperties = tableData.cellProperties || {};\n        tableProperties.width = tableView.width.value();\n        tableProperties.widthUnit = tableView.widthUnit.value();\n        tableProperties.height = tableView.height.value();\n        tableProperties.columns = tableView.columns.value();\n        tableProperties.rows = tableView.rows.value();\n        tableProperties.heightUnit = tableView.heightUnit.value();\n        tableProperties.cellSpacing = tableView.cellSpacing.value();\n        tableProperties.topCellPadding = tableView.topCellPadding.value();\n        tableProperties.leftCellPadding = tableView.leftCellPadding.value();\n        tableProperties.bottomCellPadding = tableView.bottomCellPadding.value();\n        tableProperties.rightCellPadding = tableView.rightCellPadding.value();\n        tableProperties.alignment = tableView.alignment.value();\n        tableProperties.position = tableView.position.value();\n        tableProperties.bgColor = tableView.bgColor.value();\n        tableProperties.borderWidth = tableView.borderWidth.value();\n        tableProperties.borderColor = tableView.borderColor.value();\n        tableProperties.borderStyle = tableView.borderStyle.value();\n        tableProperties.collapseBorders = tableView.collapseBorders.check();\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / tableData.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n    _collectCellViewValues: function(table) {\n        var cellData = table.cellProperties = table.cellProperties || {};\n        var cellView = this.components.cellView;\n\n        cellData.selectAllCells = cellView.selectAllCells.check();\n        cellData.width = cellView.width.value();\n        cellData.widthUnit = cellView.widthUnit.value();\n        cellData.height = cellView.height.value();\n        cellData.heightUnit = cellView.heightUnit.value();\n        cellData.independentCellPaddings = cellView.independentCellPaddings.check();\n        cellData.topCellPadding = cellView.topCellPadding.value();\n        cellData.leftCellPadding = cellView.leftCellPadding.value();\n        cellData.bottomCellPadding = cellView.bottomCellPadding.value();\n        cellData.rightCellPadding = cellView.rightCellPadding.value();\n        cellData.cellMargin = cellView.cellMargin.value();\n        cellData.alignment = cellView.alignment.value();\n        cellData.bgColor = cellView.bgColor.value();\n        cellData.className = cellView.className.value();\n        cellData.id = cellView.id.value();\n        cellData.borderWidth = cellView.borderWidth.value();\n        cellData.borderColor = cellView.borderColor.value();\n        cellData.borderStyle = cellView.borderStyle.value();\n        cellData.wrapText = cellView.wrapTextValue.value() == \"wrap\";\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / table.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n   _collectAccessibilityViewValues: function(table) {\n        var tableProperties = table.tableProperties;\n        var accessibilityView = this.components.accessibilityView;\n        tableProperties.captionContent = accessibilityView.captionContent.value();\n        tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n        tableProperties.summary = accessibilityView.summary.value();\n        tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n        tableProperties.className = accessibilityView.className.value();\n        tableProperties.id = accessibilityView.id.value();\n        tableProperties.headerRows = accessibilityView.headerRows.value();\n        tableProperties.headerColumns = accessibilityView.headerColumns.value();\n    },\n    _addUnit: function(units, value) {\n        if (value && $.inArray(value, units) == -1) {\n            units.push(value);\n        }\n    },\n\n    _initNumericTextbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoNumericTextBox(\n                settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n            ).data(\"kendoNumericTextBox\");\n        if (property in data) {\n            component.value(parseInt(data[property], 10));\n        }\n    },\n\n    _initDropDownList: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource,\n            optionLabel: this.options.messages.borderNone\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initTablePositionDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tablePositionDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.tableAlignLeft;\n        dataSource[1].tooltip = messages.tableAlignCenter;\n        dataSource[2].tooltip = messages.tableAlignRight;\n\n        this._initPositionDropDown(element, tablePositionDropDownSettings, \"position\", data, tableView);\n    },\n\n    _initTableAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tableAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeft;\n        dataSource[1].tooltip = messages.alignCenter;\n        dataSource[2].tooltip = messages.alignRight;\n        dataSource[3].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n    },\n\n    _initCellAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var cellView = this.components.cellView;\n        var dataSource = cellAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftMiddle;\n        dataSource[4].tooltip = messages.alignCenterMiddle;\n        dataSource[5].tooltip = messages.alignRightMiddle;\n        dataSource[6].tooltip = messages.alignLeftBottom;\n        dataSource[7].tooltip = messages.alignCenterBottom;\n        dataSource[8].tooltip = messages.alignRightBottom;\n        dataSource[9].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n    },\n\n    _initAccessibilityAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var accessibilityView = this.components.accessibilityView;\n        var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftBottom;\n        dataSource[4].tooltip = messages.alignCenterBottom;\n        dataSource[5].tooltip = messages.alignRightBottom;\n        dataSource[6].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n    },\n    _initTextWrapDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var name = \"wrapTextValue\";\n        data.wrapTextValue = data.wrapText ? \"wrap\" : \"nowrap\";\n\n        var cellView = this.components.cellView;\n        var dataSource = textWrapDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.wrapText;\n        dataSource[1].tooltip = messages.fitToCell;\n        var component = cellView[name] =\n            element.kendoDropDownList(textWrapDropDownSettings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-text-wrap');\n        this._setComponentValue(component, data, name);\n    },\n    _initPositionDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-position');\n        this._setComponentValue(component, data, name);\n    },\n    _initAlignmentDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-align');\n        this._setComponentValue(component, data, name);\n    },\n    _initAssociationDropDown: function(element, name, settings, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        this._setComponentValue(component, data, name);\n    },\n    _setComponentValue: function(component, data, property) {\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initColorPicker: function(element, property, data, storage) {\n        var component = storage[property] =\n            element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n        if (data[property]) {\n            component.value(data[property]);\n        }\n    },\n    _initInput: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoTextBox(settings || {}).data(\"kendoTextBox\");\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initCheckbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoCheckBox(settings || {}).data(\"kendoCheckBox\");\n        if (property in data) {\n            component.check(data[property]);\n        }\n    },\n\n    _initTextArea: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoTextArea(settings || {}).data(\"kendoTextArea\");\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    destroy: function() {\n        var that = this;\n        that._destroyComponents(this.components);\n\n        delete that.components;\n    },\n    _destroyComponents: function(components) {\n        for (var widget in components) {\n            if (components[widget].destroy) {\n                components[widget].destroy();\n            }\n            delete components[widget];\n        }\n    },\n\n    _dialogTemplate: function(messages, dialogTemplate) {\n        return kendo.template(dialogTemplate || tablePropertiesDialogTemplate)({ messages: messages });\n    },\n\n    _onPaddingTopChange: function(e) {\n        let viewType = this.components.tableView ? \"tableView\" : \"cellView\",\n            view = this.components[viewType],\n            independentCellPaddings = !view.independentCellPaddings.check(),\n            topCellPaddingNumeric = view.topCellPadding,\n            topCellPaddingValue = topCellPaddingNumeric.value(),\n            leftCellPaddingNumeric = view.leftCellPadding,\n            bottomCellPaddingNumeric = view.bottomCellPadding,\n            rightCellPaddingNumeric = view.rightCellPadding;\n\n        if (independentCellPaddings) {\n            leftCellPaddingNumeric.value(topCellPaddingValue);\n            bottomCellPaddingNumeric.value(topCellPaddingValue);\n            rightCellPaddingNumeric.value(topCellPaddingValue);\n        }\n\n        topCellPaddingNumeric._cachedPadding = topCellPaddingValue;\n    },\n\n    _onPaddingCheckChange: function(e) {\n        let viewType = this.components.tableView ? \"tableView\" : \"cellView\",\n            messages = this.options.messages,\n            checked = e.sender.check(),\n            view = this.components[viewType],\n            topCellPaddingNumeric = view.topCellPadding,\n            leftCellPaddingNumeric = view.leftCellPadding,\n            bottomCellPaddingNumeric = view.bottomCellPadding,\n            rightCellPaddingNumeric = view.rightCellPadding,\n            topCellPaddingValue = topCellPaddingNumeric.value(),\n            bottomCellPaddingValue = bottomCellPaddingNumeric.value(),\n            leftCellPaddingValue = leftCellPaddingNumeric.value(),\n            rightCellPaddingValue = rightCellPaddingNumeric.value();\n\n        if (!checked) {\n            if (topCellPaddingValue === bottomCellPaddingValue &&\n                    topCellPaddingValue === leftCellPaddingValue &&\n                    topCellPaddingValue === rightCellPaddingValue) {\n                leftCellPaddingNumeric.value(topCellPaddingValue);\n                bottomCellPaddingNumeric.value(topCellPaddingValue);\n                rightCellPaddingNumeric.value(topCellPaddingValue);\n            } else {\n                topCellPaddingNumeric.value(null);\n            }\n\n            leftCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n            bottomCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n            rightCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n\n            topCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).find(\".k-form-label\").text(messages.cellPadding);\n        } else {\n            if (!isNaN(topCellPaddingNumeric._cachedPadding)) {\n                topCellPaddingNumeric.value(topCellPaddingNumeric._cachedPadding);\n            }\n\n            leftCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n            bottomCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n            rightCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n\n            topCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).find(\".k-form-label\").text(messages.topPadding);\n        }\n    },\n\n    _onColumnsNumberChange: function(args) {\n        var that = this;\n        var accessibilityView = that.components.accessibilityView;\n        var headerColumnsNumeric = accessibilityView.headerColumns;\n        var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n        var numberOfColumns = args.sender.value();\n\n        if (numberOfColumns < currentNumberOfColumnsHeaders) {\n            headerColumnsNumeric.value(numberOfColumns);\n        }\n\n        headerColumnsNumeric.max(numberOfColumns);\n    },\n\n    _onRowsNumberChange: function(args) {\n        var that = this;\n        var accessibilityView = that.components.accessibilityView;\n        var headerRowsNumeric = accessibilityView.headerRows;\n        var currentNumberOfRowHeaders = headerRowsNumeric.value();\n        var numberOfRows = args.sender.value();\n\n        if (numberOfRows < currentNumberOfRowHeaders) {\n            headerRowsNumeric.value(numberOfRows);\n        }\n\n        headerRowsNumeric.max(numberOfRows);\n    },\n\n    _createTablePropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-table-properties\");\n        var components = that.components;\n        var tableView = components.tableView = {};\n        var tableProperties = table.tableProperties = table.tableProperties || {};\n        var form;\n\n        that._addUnit(units, tableProperties.widthUnit);\n        that._addUnit(units, tableProperties.heightUnit);\n        tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n        form = formElement.kendoForm({\n            renderButtons: false,\n            layout: \"grid\",\n            grid: {\n                cols: 4\n            },\n            items: [\n                {\n                    colSpan: 2,\n                    field: \"k-editor-table-columns\",\n                    label: encode(messages.columns),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-columns\" />').appendTo(container),\n                            \"columns\",\n                            tableProperties,\n                            tableView,\n                            {\n                                min: 1,\n                                value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                change: that._onColumnsNumberChange.bind(that)\n                            });\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-rows\",\n                    label: encode(messages.rows),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-rows\" />').appendTo(container),\n                            \"rows\",\n                            tableProperties,\n                            tableView,\n                            {\n                                min: 1,\n                                value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                change: that._onRowsNumberChange.bind(that)\n                            });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-width\",\n                    label: encode(messages.width),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-width\" />').appendTo(container), \"width\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-width-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-table-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"widthUnit\",\n                            tableProperties,\n                            tableView,\n                            units);\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-height\",\n                    label: encode(messages.height),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-height\" />').appendTo(container), \"height\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-height-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-table-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"heightUnit\",\n                            tableProperties,\n                            tableView,\n                            units);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-position\",\n                    label: encode(messages.position),\n                    editor: function(container, options) {\n                        that._initTablePositionDropDown($('<input id=\"k-editor-table-position\" class=\"k-position\" />').appendTo(container), tableProperties);\n                    }\n                },\n                {\n                    colSpan: 2,\n                    field: \"k-editor-table-alignment\",\n                    label: encode(messages.alignment),\n                    editor: function(container, options) {\n                        that._initTableAlignmentDropDown($('<input id=\"k-editor-table-alignment\" class=\"k-align\" />').appendTo(container), tableProperties);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-cell-spacing\",\n                    label: encode(messages.cellSpacing),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-spacing\" />').appendTo(container), \"cellSpacing\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    type: \"group\",\n                    label: \"Cell Paddings\",\n                    layout: \"grid\",\n                    colSpan: 4,\n                    grid: {\n                        cols: 4,\n                        gutter: 20\n                    },\n                    items: [\n                        {\n                            colSpan: \"full\",\n                            field: \"k-editor-padding-all-sides\",\n                            label: \"\",\n                            editor: function(container, options) {\n                                that._initCheckbox($('<input id=\"k-editor-padding-all-sides\" />').appendTo(container), \"independentCellPaddings\", tableProperties, tableView,\n                                {\n                                    checked: true,\n                                    label: encode(messages.independentCellPaddings),\n                                    change: that._onPaddingCheckChange.bind(that)\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cell-padding-top\",\n                            label: encode(messages.topPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-top\" />').appendTo(container), \"topCellPadding\", tableProperties, tableView,\n                                {\n                                    placeholder: encode(messages.auto),\n                                    change: that._onPaddingTopChange.bind(that)\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cell-padding-right\",\n                            label: encode(messages.rightPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-right\" />').appendTo(container), \"rightCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-bottom\",\n                            label: encode(messages.bottomPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-bottom\" />').appendTo(container), \"bottomCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cell-padding-left\",\n                            label: encode(messages.leftPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-left\" />').appendTo(container), \"leftCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                            }\n                        }\n                    ]\n                }, {\n                    type: \"group\",\n                    label: \"Borders\",\n                    layout: \"grid\",\n                    colSpan: 4,\n                    grid: {\n                        cols: 4,\n                        gutter: 10\n                    },\n                    items: [{\n                        colSpan: \"full\",\n                        field: \"k-editor-table-bg\",\n                        label: encode(messages.tableBackground),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-table-bg\" />').appendTo(container), \"bgColor\", tableProperties, tableView);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-border-width\",\n                        label: encode(messages.borderWidth),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-border-width\" />').appendTo(container), \"borderWidth\", tableProperties, tableView);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-border-color\",\n                        label: encode(messages.borderColor),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-border-color\" />').appendTo(container), \"borderColor\", tableProperties, tableView);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-border-style\",\n                        label: encode(messages.borderStyle),\n                        editor: function(container, options) {\n                            that._initBorderStyleDropDown($('<input id=\"k-editor-border-style\" />').appendTo(container),\n                                \"borderStyle\",\n                                tableProperties,\n                                tableView,\n                                borderStyles);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-collapse-borders\",\n                        label: \"\",\n                        editor: function(container, options) {\n                            that._initCheckbox($('<input id=\"k-editor-collapse-borders\"/>').appendTo(container), \"collapseBorders\", tableProperties, tableView, { label: encode(messages.collapseBorders) });\n                        }\n                    }]\n                }\n            ]\n        }).data(\"kendoForm\");\n        form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n        return form;\n    },\n\n    _createCellPropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-cell-properties\");\n        var components = that.components = that.components || {};\n        var cellView = components.cellView = {};\n        var cellProperties = (table.selectedCells && table.selectedCells[0]) || { borderStyle: \"\", wrapText: true };\n        var form;\n\n        that._addUnit(units, cellProperties.widthUnit);\n        that._addUnit(units, cellProperties.heightUnit);\n        form = formElement.kendoForm({\n            renderButtons: false,\n            layout: \"grid\",\n            grid: {\n                cols: 4\n            },\n            items: [\n                {\n                    colSpan: \"full\",\n                    field: \"k-editor-selectAllCells\",\n                    label: \"\",\n                    editor: function(container, options) {\n                        that._initCheckbox($('<input id=\"k-editor-selectAllCells\" />').appendTo(container), \"selectAllCells\", table.tableProperties, cellView, { label: encode(messages.selectAllCells) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-width\",\n                    label: encode(messages.width),\n                    hint: encode(messages.applyToColumn),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-width\" />').appendTo(container), \"width\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-width-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-cell-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"widthUnit\",\n                            cellProperties,\n                            cellView,\n                            units);\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-height\",\n                    label: encode(messages.height),\n                    hint: encode(messages.applyToRow),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-height\" />').appendTo(container), \"height\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-height-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-cell-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"heightUnit\",\n                            cellProperties,\n                            cellView,\n                            units);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-cell-alignment\",\n                    label: encode(messages.alignment),\n                    editor: function(container, options) {\n                        that._initCellAlignmentDropDown($('<input id=\"k-editor-cell-alignment\" class=\"k-align\" />').appendTo(container), cellProperties);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-wrap-text\",\n                    label: \"Text control\",\n                    editor: function(container, options) {\n                        that._initTextWrapDropDown($('<input id=\"k-editor-wrap-text\" />').appendTo(container),\n                        cellProperties);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-cell-bg\",\n                    label: encode(messages.background),\n                    editor: function(container, options) {\n                        that._initColorPicker($('<input id=\"k-editor-cell-bg\" />').appendTo(container), \"bgColor\", cellProperties, cellView);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-cell-margin\",\n                    label: encode(messages.cellMargin),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-margin\" />').appendTo(container), \"cellMargin\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    type: \"group\",\n                    label: \"Cell Paddings\",\n                    layout: \"grid\",\n                    colSpan: 4,\n                    grid: {\n                        cols: 4,\n                        gutter: 20\n                    },\n                    items: [\n                        {\n                            colSpan: \"full\",\n                            field: \"k-editor-padding-all-sides\",\n                            label: \"\",\n                            editor: function(container, options) {\n                                that._initCheckbox($('<input id=\"k-editor-padding-all-sides\" />').appendTo(container), \"independentCellPaddings\", table.tableProperties, cellView,\n                                {\n                                    checked: true,\n                                    label: encode(messages.independentCellPaddings),\n                                    change: that._onPaddingCheckChange.bind(that)\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-top\",\n                            label: encode(messages.topPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-top\" />').appendTo(container), \"topCellPadding\", cellProperties, cellView,\n                                {\n                                    placeholder: encode(messages.auto),\n                                    change: that._onPaddingTopChange.bind(that)\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-right\",\n                            label: encode(messages.rightPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-right\" />').appendTo(container), \"rightCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-bottom\",\n                            label: encode(messages.bottomPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-bottom\" />').appendTo(container), \"bottomCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-left\",\n                            label: encode(messages.leftPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-left\" />').appendTo(container), \"leftCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        }\n                    ]\n                },{\n                    type: \"group\",\n                    label: \"Borders\",\n                    layout: \"grid\",\n                    colSpan: 4,\n                    grid: {\n                        cols: 4,\n                        gutter: 10\n                    },\n                    items: [{\n                        colSpan: 1,\n                        field: \"k-editor-cell-border-width\",\n                        label: encode(messages.borderWidth),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-border-width\" />').appendTo(container), \"borderWidth\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-border-color\",\n                        label: encode(messages.borderColor),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-cell-border-color\" />').appendTo(container), \"borderColor\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-cell-border-style\",\n                        label: encode(messages.borderStyle),\n                        editor: function(container, options) {\n                            that._initBorderStyleDropDown($('<input id=\"k-editor-cell-border-style\" />').appendTo(container),\n                                \"borderStyle\",\n                                cellProperties,\n                                cellView,\n                                borderStyles);\n                        }\n                    }]\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-cell-id\",\n                    label: {\n                        text: encode(messages.id),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-cell-id\" />').appendTo(container), \"id\", cellProperties, cellView);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-cell-css-class\",\n                    label: {\n                        text: encode(messages.cssClass),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-cell-css-class\" />').appendTo(container), \"className\", cellProperties, cellView);\n                    }\n                }\n            ]\n        }).data(\"kendoForm\");\n        form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n        return form;\n    },\n\n    _createAccessibilityPropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-accessibility-properties\");\n        var components = that.components;\n        var accessibilityView = components.accessibilityView = {};\n        var tableProperties = table.tableProperties;\n        var form;\n\n        form = formElement.kendoForm({\n            renderButtons: false,\n            layout: \"grid\",\n            grid: {\n                cols: 4\n            },\n            items: [\n                {\n                    colSpan: \"full\",\n                    field: \"k-editor-id\",\n                    label: {\n                        text: encode(messages.id),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-id\" />').appendTo(container), \"id\", tableProperties, accessibilityView);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-css-class\",\n                    label: {\n                        text: encode(messages.cssClass),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-css-class\" />').appendTo(container), \"className\", tableProperties, accessibilityView);\n                    }\n                },\n                {\n                    layout: \"grid\",\n                    grid: {\n                        cols: 4,\n                        gutter: 16\n                    },\n                    colSpan: \"full\",\n                    type: \"group\",\n                    label: \"Accessibility\",\n                    items: [\n                        {\n                            colSpan: 2,\n                            field: \"k-editor-table-caption\",\n                            label: {\n                                text: encode(messages.caption),\n                                optional: true\n                            },\n                            editor: function(container, options) {\n                                that._initInput($('<input id=\"k-editor-table-caption\" />').appendTo(container), \"captionContent\", tableProperties, accessibilityView);\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-accessibility-alignment\",\n                            label: encode(messages.captionAlignment),\n                            editor: function(container, options) {\n                                that._initAccessibilityAlignmentDropDown($('<input id=\"k-editor-accessibility-alignment\" />').appendTo(container), tableProperties);\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-header-rows\",\n                            label: encode(messages.headerRows),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-header-rows\" />').appendTo(container),\n                                \"headerRows\",\n                                tableProperties,\n                                accessibilityView,\n                                {\n                                    max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-header-columns\",\n                            label: encode(messages.headerColumns),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-header-columns\" />').appendTo(container),\n                                \"headerColumns\",\n                                tableProperties,\n                                accessibilityView,\n                                {\n                                    max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                });\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-cells-headers\",\n                            label: encode(messages.associateCellsWithHeaders),\n                            editor: function(container, options) {\n                                var element = $(`<select id=\"k-editor-cells-headers\">\n                                    <option value=\"none\">${ messages.associateNone }</option>\n                                    <option value=\"scope\">${ messages.associateScope }</option>\n                                    <option value=\"ids\">${ messages.associateIds }</option>\n                                </select>`).appendTo(container);\n\n                                that._initAssociationDropDown(element, \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n                            }\n                        },{\n                            colSpan: \"full\",\n                            field: \"k-editor-accessibility-summary\",\n                            label: {\n                                text: encode(messages.summary),\n                                optional: true\n                            },\n                            editor: function(container, options) {\n                                that._initTextArea($('<textarea id=\"k-editor-accessibility-summary\"></textarea>').appendTo(container), \"summary\", tableProperties, accessibilityView, {\n                                    rows: 5,\n                                    placeholder: messages.tableSummaryPlaceholder\n                                });\n                            }\n                        }\n                    ]\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n        return form;\n    }\n});\n\nkendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n})(window.kendo.jQuery);\n\nconst __meta__ = {\n        id: \"editor\",\n        name: \"Editor\",\n        category: \"web\",\n        description: \"Rich text editor component\",\n        depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\", \"toolbar\", \"icons\" ],\n        features: [ {\n            id: \"editor-imagebrowser\",\n            name: \"Image Browser\",\n            description: \"Support for uploading and inserting images\",\n            depends: [ \"imagebrowser\" ]\n        }, {\n            id: \"editor-resizable\",\n            name: \"Resize handle\",\n            description: \"Support for resizing the content area via a resize handle\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"editor-tablewizard\",\n            name: \"Table wizard dialog\",\n            description: \"Support for table properties configuration\",\n            depends: [ \"tabstrip\", \"button\", \"numerictextbox\", \"textarea\" ]\n        }, {\n            id: \"editor-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Editor content as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }]\n    };\nvar kendo$1 = kendo;\n\nexport { __meta__, kendo$1 as default };\n"]}