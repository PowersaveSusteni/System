{"version":3,"file":"kendo.columnmenu.js","names":["__meta__","id","name","category","depends","advanced","$","undefined$1","kendo","window","encode","htmlEncode","ui","extend","grep","map","inArray","Comparer","data","ACTIVE","ASC","DESC","CHANGE","INIT","OPEN","SELECT","STICK","UNSTICK","POPUP","TABSTRIP","MENU","EXPANSIONPANEL","NS","Widget","trim","text","replace","columnsGroupFilterHandler","column","this","columns","indexOf","title","field","leafColumns","result","idx","length","concat","push","ColumnMenu","init","element","options","columnHeader","that","componentType","fn","call","owner","dataSource","attr","closest","appendTo","find","link","_createLink","wrapper","_applyCssClasses","_refreshHandler","refresh","bind","_init","pane","_isMobile","_createMobileMenu","_createMenu","_sort","_columns","_filter","_lockColumns","_reorderColumns","_stickyColumns","_sizeColumns","_clearAllFilters","_groupColumn","trigger","container","events","messages","sortAscending","sortDescending","filter","clearAllFilters","columnVisibility","clear","cancel","done","settings","lock","unlock","stick","unstick","setColumnPosition","apply","reset","buttonTitle","movePrev","moveNext","groupColumn","ungroupColumn","autoSizeColumn","autoSizeAllColumns","sortable","filterable","autoSize","hideAutoSizeColumn","animations","left","encodeTitles","addClass","flattenMenuCols","menuTemplate","menuElement","_ownerColumns","isGridColumnMenu","_hasGroups","_groupColumns","_flattenMenuCols","_syncMenuCols","_isModernComponentType","template","modernTemplate","_isTabbedComponentType","tabbedTemplate","uid","guid","ns","showColumns","hasLockableColumns","hasStickableColumns","omitWrapAttribute","reorderable","groupable","applyStylesFromKendoAttributes","empty","append","popup","anchor","copyAnchorStyles","open","_open","activate","_activate","deactivate","_deactivate","close","e","_preventMenuCloseOnColumnVisibilityChange","preventDefault","menu","_closing","sender","closeCallback","removeClass","_createExpanders","children","orientation","closeOnClick","_updateMenuItems","tabStrip","applyMinHeight","animation","effects","activateTab","tabGroup","appendTarget","is","format","icon","on","_click","columnsExpanderOptions","expanderOptions","expanded","headerClass","useBareTemplate","menuCols","ownerCols","ownerCol","menuColsFields","col","i","cols","groupHeader","nest","currGroup","filterHandler","group","groupColumns","groups","html","mobileTemplate","hasGroups","view","state","MobileMenu","columnMenu","stopPropagation","viewElement","_applyChanges","_cancelChanges","_updateLockedColumns","_updateStickyColumns","_updateReorderColumns","_updateGroupColumns","initialSort","destroy","filterMenu","unbind","_updateColumnsMenuHandler","_updateColumnsLockedStateHandler","off","purge","navigate","toggle","_setMenuItemsVisibility","sort","_updateDataIndexes","_reorderMenuItems","_eachRenderedMenuItem","index","renderedListElement","matchesMedia","hide","show","renderedList","insertAfter","eq","prepend","insertElementAt","first","mappedColumns","x","each","callback","duplicateColumnIndex","fieldValue","currentColumn","columnElements","attrName","attrValue","_getRenderedList","renderedListElements","_getRenderedListElements","oldOccurances","checkBoxes","signature","columCheckbox","indexAttr","fieldAttr","columnDict","j","parseInt","oldColumnOccurrences","columnOccurrence","JSON","stringify","columnOccurrences","add","instance","menuitem","not","target","keyCode","keys","ENTER","click","ESC","widgetInstance","hasClass","visible","getKendoPopup","_checkItemClass","item","_class","omitSort","menuColumns","originalField","hidden","locked","_originalObject","headerAttributes","create","dir","_sortHandler","_getSortItemsContainer","_sortDataSource","parents","parent","compare","allowUnsort","mode","splice","_updateColumnsMenu","_updateColumnsLockedState","_applyColumnVisibility","input","colIdx","uidAttr","showColumn","hideColumn","checkbox","checkboxes","columnsInMenu","_autoSizeHandler","_clearAllFiltersHandler","autoFitColumn","autoFitColumns","omitCheckState","current","checked","lockedAttr","columnIndexMap","columnsCount","visibleFields","prop","visibleDataFields","lockedCount","nonLockedCount","columnsNotInMenu","hiddenColumnsNotInMenu","switchWidget","enable","check","arr","key","len","toHash","toString","widget","multi","checkSource","appendToElement","values","change","cycleForm","_lockableHandler","lockColumn","unlockColumn","_reorderHandler","_moveColumn","_groupHandler","_handleSpaceKey","_stickableHandler","stickColumn","unstickColumn","notLockable","lockable","lockItem","removeAttr","unlockItem","sticky","stickable","stickItem","unstickItem","elementIndex","numberOfSiblings","prevItem","nextItem","groupEl","ungroupEl","_canDrag","descriptor","_filterExist","filters","found","SIZING_PARTIAL_MODERN","CLEARALLFILTERS_PARTIAL_MODERN","SORTABLE_PARTIAL_MODERN","COLUMNS_PARTIAL_MODERN","join","modernColumnsTemplateIterator","renderButton","themeColor","GROUPABLE_PARTIAL_MODERN","LOCK_STICK_COLUMNS_PARTIAL_MODERN","LOCKABLE_COLUMNS_PARTIAL_MODERN","STICKABLE_COLUMNS_PARTIAL_MODERN","REORDERABLE_COLUMNS_PARTIAL_MODERN","tabbedTemplateGeneralSettings","COLUMNS_PARTIAL_CLASSIC","classicColumnsTemplateIterator","LOCK_STICK_COLUMNS_PARTIAL_CLASSIC","LOCKABLE_COLUMNS_PARTIAL_CLASSIC","STICKABLE_COLUMNS_PARTIAL_CLASSIC","REORDERABLE_COLUMNS_PARTIAL_CLASSIC","SORTABLE_PARTIAL_CLASSIC","FILTERABLE_PARTIAL_CLASSIC","hasLockStickMove","GROUPABLE_PARTIAL_CLASSIC","COLUMNS_PARTIAL_MOBILE","mobileColumnsTemplateIterator","fillMode","SORTABLE_PARTIAL_MOBILE","LOCKABLE_COLUMNS_PARTIAL_MOBILE","STICKABLE_COLUMNS_PARTIAL_MOBILE","REORDERABLE_COLUMNS_PARTIAL_MOBILE","FILTERABLE_PARTIAL_MOBILE","GROPABLE_PARTIAL_MOBILE","_createCheckBoxes","currentTarget","_updateSelectedItems","el","otherItem","otherItemId","force","selectedItems","hasOwnProperty","kendoSwitch","unchecked","_destroyCheckBoxes","elements","plugin","jQuery","kendo$1"],"sources":["kendo.columnmenu.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import './kendo.popup.js';\nimport './kendo.tabstrip.js';\nimport './kendo.filtermenu.js';\nimport './kendo.menu.js';\nimport './kendo.expansionpanel.js';\nimport './kendo.html.button.js';\nimport './kendo.icons.js';\n\nconst __meta__ = {\n    id: \"columnmenu\",\n    name: \"Column Menu\",\n    category: \"framework\",\n    depends: [ \"popup\", \"tabstrip\", \"filtermenu\", \"menu\", 'expansionpanel', 'html.button', \"icons\" ],\n    advanced: true\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        ui = kendo.ui,\n        extend = $.extend,\n        grep = $.grep,\n        encode = kendo.htmlEncode,\n        map = $.map,\n        inArray = $.inArray,\n        Comparer = kendo.data.Comparer,\n        ACTIVE = \"k-selected\",\n        ASC = \"asc\",\n        DESC = \"desc\",\n        CHANGE = \"change\",\n        INIT = \"init\",\n        OPEN = \"open\",\n        SELECT = \"select\",\n        STICK = \"stick\",\n        UNSTICK = \"unstick\",\n        POPUP = \"kendoPopup\",\n        FILTERMENU = \"kendoFilterMenu\",\n        TABSTRIP = \"kendoTabStrip\",\n        MENU = \"kendoMenu\",\n        EXPANSIONPANEL = \"kendoExpansionPanel\",\n        NS = \".kendoColumnMenu\",\n        COLUMN_HEADER_SELECTOR = \".k-table-th\",\n        Widget = ui.Widget;\n\n    function trim(text) {\n        return kendo.trim(text).replace(/&nbsp;/gi, \"\");\n    }\n\n    function toHash(arr, key) {\n        var result = {};\n        var idx, len, current;\n        for (idx = 0, len = arr.length; idx < len; idx ++) {\n            current = arr[idx];\n            result[current[key]] = current;\n        }\n        return result;\n    }\n\n    function columnsGroupFilterHandler(column) {\n        return this.columns.indexOf(column.title) >= 0 || this.columns.indexOf(column.field) >= 0;\n    }\n\n    function leafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (!columns[idx].columns) {\n                result.push(columns[idx]);\n                continue;\n            }\n            result = result.concat(leafColumns(columns[idx].columns));\n        }\n\n        return result;\n    }\n\n    function attrEquals(attrName, attrValue) {\n        return \"[\" + kendo.attr(attrName) + \"='\" + (attrValue || \"\").replace(/'/g, \"\\\"\") + \"']\";\n    }\n\n    function insertElementAt(index, element, container) {\n        if (index > 0) {\n            element.insertAfter(container.children().eq(index - 1));\n        } else {\n            container.prepend(element);\n        }\n    }\n\n    function columnOccurrences(columns) {\n        var columnDict = {};\n        var signature;\n\n        for (var i = 0; i < columns.length; i++) {\n            signature = JSON.stringify(columns[i]);\n\n            if (columnDict[signature]) {\n                columnDict[signature].push(i);\n            } else {\n                columnDict[signature] = [i];\n            }\n        }\n\n        return columnDict;\n    }\n\n    function oldColumnOccurrences(renderedListElements, checkBoxes) {\n        var indexAttr = kendo.attr(\"index\");\n        var fieldAttr = kendo.attr(\"field\");\n        var columnDict = {};\n        var signature;\n        var columCheckbox;\n        var index;\n        var field;\n        var title;\n\n        for (var j = 0; j < renderedListElements.length; j++) {\n            columCheckbox = checkBoxes.eq(j);\n            index = parseInt(columCheckbox.attr(indexAttr), 10);\n            field = columCheckbox.attr(fieldAttr);\n            title = columCheckbox.attr(\"title\");\n            signature = field ? field : title;\n\n            if (columnDict[signature]) {\n                columnDict[signature].push(index);\n            } else {\n                columnDict[signature] = [index];\n            }\n        }\n\n        return columnDict;\n    }\n\n    var ColumnMenu = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                columnHeader;\n\n            options = options || {};\n            options.componentType = options.componentType || \"classic\";\n            Widget.fn.init.call(that, element, options);\n\n            element = that.element;\n            options = that.options;\n            that.owner = options.owner;\n            that.dataSource = options.dataSource;\n\n            that.field = element.attr(kendo.attr(\"field\"));\n            that.title = element.attr(kendo.attr(\"title\"));\n\n            columnHeader = $(element.closest(COLUMN_HEADER_SELECTOR));\n            if (columnHeader.length) {\n                that.appendTo = columnHeader.find(options.appendTo);\n            } else {\n                that.appendTo = $(options.appendTo);\n            }\n\n            that.link = that._createLink();\n\n            that.wrapper = $('<div />');\n\n            that._applyCssClasses();\n\n            that._refreshHandler = that.refresh.bind(that);\n\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n        },\n\n        _init: function() {\n            var that = this;\n\n            that.pane = that.options.pane;\n            if (that.pane) {\n                that._isMobile = true;\n            }\n\n            if (that._isMobile) {\n                that._createMobileMenu();\n            } else {\n                that._createMenu();\n            }\n\n            that._sort();\n\n            that._columns();\n\n            that._filter();\n\n            that._lockColumns();\n\n            that._reorderColumns();\n\n            that._stickyColumns();\n\n            that._sizeColumns();\n\n            that._clearAllFilters();\n\n            that._groupColumn();\n\n            that.trigger(INIT, { field: that.field, container: that.wrapper });\n        },\n\n        events: [ INIT, OPEN, \"sort\", \"filtering\", STICK, UNSTICK ],\n\n        options: {\n            name: \"ColumnMenu\",\n            messages: {\n                sortAscending: \"Sort Ascending\",\n                sortDescending: \"Sort Descending\",\n                filter: \"Filter\",\n                clearAllFilters: \"Clear All Filters\",\n                column: \"Column\",\n                columns: \"Columns\",\n                columnVisibility: \"Column Visibility\",\n                clear: \"Clear\",\n                cancel: \"Cancel\",\n                done: \"Done\",\n                settings: \"Edit Column Settings\",\n                lock: \"Lock Column\",\n                unlock: \"Unlock Column\",\n                stick: \"Stick Column\",\n                unstick: \"Unstick Column\",\n                setColumnPosition: \"Set Column Position\",\n                apply: \"Apply\",\n                reset: \"Reset\",\n                buttonTitle: \"{0} edit column settings\",\n                movePrev: \"Move previous\",\n                moveNext: \"Move next\",\n                groupColumn: \"Group column\",\n                ungroupColumn: \"Ungroup column\",\n                autoSizeColumn: \"Autosize This Column\",\n                autoSizeAllColumns: \"Autosize All Columns\"\n            },\n            filter: \"\",\n            columns: true,\n            sortable: true,\n            filterable: true,\n            clearAllFilters: false,\n            autoSize: false,\n            hideAutoSizeColumn: false,\n            animations: {\n                left: \"slide\"\n            },\n            encodeTitles: false,\n            componentType: \"classic\",\n            appendTo: null\n        },\n\n        _applyCssClasses: function() {\n            var that = this,\n                componentType = that.options.componentType,\n                wrapper = that.wrapper;\n\n            if (componentType === \"tabbed\") {\n                wrapper.addClass(\"k-column-menu-tabbed\");\n            }\n\n            wrapper.addClass(\"k-column-menu k-column-menu-popup\");\n        },\n\n        _createMenu: function() {\n            var that = this,\n                options = that.options,\n                columns = that._ownerColumns(),\n                flattenMenuCols,\n                menuTemplate,\n                menuElement;\n\n            const isGridColumnMenu = that.owner && that.owner.options && (that.owner.options.name === \"Grid\" || that.owner.options.name === \"TreeList\");\n\n            if (that._hasGroups()) {\n                columns = that._groupColumns(columns);\n                flattenMenuCols = that._flattenMenuCols(columns);\n                if (flattenMenuCols.length !== that.owner.columns.length) {\n                    that._syncMenuCols(flattenMenuCols, that.owner.columns);\n                }\n            }\n\n            if (that._isModernComponentType()) {\n                menuTemplate = kendo.template(modernTemplate);\n            } else if (that._isTabbedComponentType()) {\n                menuTemplate = kendo.template(tabbedTemplate);\n            } else {\n                menuTemplate = kendo.template(template);\n            }\n\n            menuElement = $(menuTemplate({\n                uid: kendo.guid(),\n                ns: kendo.ns,\n                messages: options.messages,\n                sortable: options.sortable,\n                filterable: options.filterable,\n                columns: columns,\n                showColumns: options.columns,\n                hasLockableColumns: options.hasLockableColumns,\n                hasStickableColumns: options.hasStickableColumns,\n                encodeTitles: options.encodeTitles,\n                omitWrapAttribute: kendo.attr(\"omit-wrap\"),\n                reorderable: options.reorderable,\n                groupable: options.groupable,\n                autoSize: options.autoSize,\n                hideAutoSizeColumn: options.hideAutoSizeColumn,\n                clearAllFilters: options.clearAllFilters\n            }));\n\n            kendo.applyStylesFromKendoAttributes(menuElement, [\"display\"]);\n            that.wrapper.empty().append(menuElement);\n\n            that.popup = that.wrapper[POPUP]({\n                anchor: that.link,\n                copyAnchorStyles: false,\n                open: that._open.bind(that),\n                activate: that._activate.bind(that),\n                deactivate: that._deactivate.bind(that),\n                close: function(e) {\n                    if (that._preventMenuCloseOnColumnVisibilityChange) {\n                        e.preventDefault();\n                        that._preventMenuCloseOnColumnVisibilityChange = false;\n                        return;\n                    }\n\n                    if (that.menu) {\n                        that.menu._closing = e.sender.element;\n                    }\n                    if (that.options.closeCallback) {\n                        that.options.closeCallback(that.element);\n                    }\n                }\n            }).data(POPUP);\n\n            if (that._isModernComponentType() || that._isTabbedComponentType() || isGridColumnMenu) {\n                that.popup.element.addClass(\"k-grid-columnmenu-popup\");\n                that.popup.element.removeClass(\"k-column-menu-popup\");\n            }\n\n            if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                that._createExpanders();\n            } else {\n                that.menu = that.wrapper.children()[MENU]({\n                    orientation: \"vertical\",\n                    closeOnClick: false,\n                    open: function() {\n                        that._updateMenuItems();\n                    }\n                }).data(MENU);\n            }\n\n            if (that._isTabbedComponentType()) {\n                that.tabStrip = menuElement[TABSTRIP]({\n                    applyMinHeight: false,\n                    animation: {\n                        open: {\n                            effects: \"fadeIn\"\n                        }\n                    }\n                }).data(TABSTRIP);\n\n                that.tabStrip.activateTab(that.tabStrip.tabGroup.find(\"li:first\"));\n            }\n        },\n\n        _createLink: function() {\n            var that = this,\n                element = that.element,\n                appendTarget = that.appendTo.length ? element.find(that.appendTo) : element,\n                link = element.is(\".k-grid-column-menu\") ? element : element.find(\".k-grid-column-menu\"),\n                title = encode(kendo.format(that.options.messages.buttonTitle, that.title || that.field));\n\n            if (!link[0]) {\n                element.addClass(\"k-filterable\");\n\n                link = appendTarget\n                    .append('<a class=\"k-grid-column-menu k-grid-header-menu\" href=\"#\" aria-hidden=\"true\" title=\"' +\n                                title + '\">' + kendo.ui.icon(\"more-vertical\") + '</a>')\n                    .find(\".k-grid-column-menu\");\n            }\n\n            link.attr(\"tabindex\", -1)\n                .on(\"click\" + NS, that._click.bind(that));\n\n            return link;\n        },\n\n        _createExpanders: function() {\n            var that = this;\n            var options = that.options;\n            var columnsExpanderOptions = that.options.columnsExpanderOptions || {};\n            var expanderOptions = {\n                expanded: false,\n                headerClass: \"k-columnmenu-item\",\n                useBareTemplate: true\n            };\n\n            if (that._isModernComponentType()) {\n                that.wrapper.find(\".k-columns-item\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions, columnsExpanderOptions, {\n                    title: kendo.ui.icon(\"columns\") + '<span>' + encode(options.messages.columnVisibility) + '</span>'\n                }));\n                that.wrapper.find(\".k-column-menu-filter\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                    title: kendo.ui.icon(\"filter\") + '<span>' + encode(options.messages.filter) + '</span>'\n                }));\n            }\n\n            that.wrapper.find(\".k-column-menu-position\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                title: kendo.ui.icon(\"set-column-position\") + '<span>' + encode(options.messages.setColumnPosition) + '</span>'\n            }));\n        },\n\n        _syncMenuCols: function(menuCols, ownerCols) {\n            var length = ownerCols.length;\n            var ownerCol;\n            var menuColsFields = menuCols.map(function(col) {\n                return col.field;\n            });\n\n            for (var i = 0; i < length; i++) {\n                ownerCol = ownerCols[i];\n                if (menuColsFields.indexOf(ownerCol.field) < 0) {\n                    ownerCol.menu = false;\n                }\n            }\n        },\n\n        _flattenMenuCols: function(cols) {\n            var result = [];\n            var length = cols.length;\n\n            for (var i = 0; i < length; i++) {\n                if (cols[i].columns) {\n                    result = result.concat(this._flattenMenuCols(cols[i].columns));\n                } else if (!cols[i].groupHeader) {\n                    result.push(cols[i]);\n                }\n            }\n            return result;\n        },\n\n        _groupColumns: function(columns, nest) {\n            var result = [];\n            var groups = this.options.columns.groups;\n            var length = groups.length;\n            var i;\n            var currGroup;\n            var filterHandler;\n            var group;\n            var groupColumns;\n\n            for (i = 0; i < length; i++) {\n                currGroup = groups[i];\n                filterHandler = columnsGroupFilterHandler.bind(currGroup);\n                group = { title: currGroup.title, groupHeader: true };\n                groupColumns = columns.filter(filterHandler);\n                result.push(group);\n\n                if (nest) {\n                    group.columns = groupColumns;\n                } else {\n                    result = result.concat(groupColumns);\n                }\n            }\n\n            return result;\n        },\n\n        _hasGroups: function() {\n            return this.options.columns && this.options.columns.groups && this.options.columns.groups.length;\n        },\n\n        _isModernComponentType: function() {\n            return this.options.componentType === 'modern' && !this._isMobile;\n        },\n\n        _isTabbedComponentType: function() {\n            return this.options.componentType === 'tabbed' && !this._isMobile;\n        },\n\n        _deactivate: function() {\n            if (this.menu) {\n                this.menu._closing = false;\n            }\n        },\n\n        _createMobileMenu: function() {\n            var that = this,\n                options = that.options,\n                columns = that._ownerColumns(),\n                groups,\n                flattenMenuCols;\n\n            if (that._hasGroups()) {\n                groups = that._groupColumns(columns, true);\n                flattenMenuCols = that._flattenMenuCols(groups);\n                if (flattenMenuCols.length !== that.owner.columns.length) {\n                    that._syncMenuCols(flattenMenuCols, that.owner.columns);\n                }\n            }\n\n            var html = kendo.template(mobileTemplate)({\n                ns: kendo.ns,\n                field: that.field,\n                title: that.title || that.field,\n                messages: options.messages,\n                sortable: options.sortable,\n                filterable: options.filterable,\n                columns: columns,\n                showColumns: options.columns,\n                hasLockableColumns: options.hasLockableColumns,\n                hasStickableColumns: options.hasStickableColumns,\n                hasGroups: that._hasGroups(),\n                groups: groups,\n                reorderable: options.reorderable,\n                groupable: options.groupable\n            });\n\n            that.view = that.pane.append(html);\n            that.view.state = { columns: {} };\n\n            that.wrapper = that.view.element.find(\".k-column-menu\");\n\n            that.menu = new MobileMenu(that.wrapper.children(), {\n                pane: that.pane,\n                columnMenu: that\n            });\n\n            // The toggle animation of the switches should not propagate to the view\n            that.menu.element.on(\"transitionend\" + NS, function(e) {\n                e.stopPropagation();\n            });\n\n            var viewElement = that.view.wrapper && that.view.wrapper[0] ? that.view.wrapper : that.view.element;\n\n            viewElement.on(\"click\", \".k-header-done\", function(e) {\n                e.preventDefault();\n\n                that.menu._applyChanges();\n                that.menu._cancelChanges(false);\n                that.close();\n            });\n\n            viewElement.on(\"click\", \".k-header-cancel\", function(e) {\n                e.preventDefault();\n\n                that.menu._cancelChanges(true);\n                that.close();\n            });\n\n            that.view.bind(\"showStart\", function() {\n                var view = that.view || { columns: {} };\n\n                if (that.options.hasLockableColumns) {\n                    that._updateLockedColumns();\n                }\n\n                if (that.options.hasStickableColumns) {\n                    that._updateStickyColumns();\n                }\n\n                if (that.options.reorderable) {\n                    that._updateReorderColumns();\n                }\n\n                if (that.options.groupable) {\n                    that._updateGroupColumns();\n                }\n\n                if (view.element.find(\".k-sort-asc.k-selected\").length) {\n                    view.state.initialSort = \"asc\";\n                } else if (view.element.find(\".k-sort-desc.k-selected\").length) {\n                    view.state.initialSort = \"desc\";\n                }\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            if (that.filterMenu) {\n                that.filterMenu.destroy();\n            }\n\n            if (that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            }\n\n            if (that.options.columns && that.owner) {\n                if (that._updateColumnsMenuHandler) {\n                    that.owner.unbind(\"columnShow\", that._updateColumnsMenuHandler);\n                    that.owner.unbind(\"columnHide\", that._updateColumnsMenuHandler);\n                }\n\n                if (that._updateColumnsLockedStateHandler) {\n                    that.owner.unbind(\"columnLock\", that._updateColumnsLockedStateHandler);\n                    that.owner.unbind(\"columnUnlock\", that._updateColumnsLockedStateHandler);\n                }\n            }\n\n            if (that.menu) {\n                that.menu.element.off(NS);\n                that.menu.destroy();\n            }\n\n            that.wrapper.off(NS);\n\n            if (that.popup) {\n                that.popup.destroy();\n            }\n\n            if (that.view) {\n                that.view.purge();\n            }\n\n            that.link.off(NS);\n            that.owner = null;\n            that.wrapper = null;\n            that.element = null;\n        },\n\n        close: function() {\n            this._preventMenuCloseOnColumnVisibilityChange = false;\n\n            if (this.menu) {\n                this.menu.close();\n            }\n            if (this.popup) {\n                this.popup.close();\n                this.popup.element.off(\"keydown\" + NS);\n            }\n        },\n\n        _click: function(e) {\n            var that = this;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            var options = this.options;\n\n            if (options.filter && this.element.is(!options.filter)) {\n                return;\n            }\n\n            if (!this.popup && !this.pane) {\n                this._init();\n            } else {\n                that._updateMenuItems();\n            }\n\n            if (this._isMobile) {\n                this.pane.navigate(this.view, this.options.animations.left);\n            } else {\n                this.popup.toggle();\n            }\n        },\n\n        _updateMenuItems: function() {\n            var that = this;\n            if (that.options.columns) {\n                that._setMenuItemsVisibility();\n                if (!that.options.columns.sort && !that.options.columns.groups) {\n                    that._reorderMenuItems();\n                } else {\n                    that._updateDataIndexes();\n                }\n            }\n        },\n\n        _setMenuItemsVisibility: function() {\n            var that = this;\n\n            that._eachRenderedMenuItem(function(index, column, renderedListElement) {\n                if (column.matchesMedia === false) {\n                    renderedListElement.hide();\n                } else {\n                    renderedListElement.show();\n                }\n            });\n        },\n\n        _reorderMenuItems: function() {\n            var that = this;\n\n            that._eachRenderedMenuItem(function(index, column, renderedListElement, renderedList) {\n                if (renderedListElement[0] && renderedListElement.index() !== index) {\n                    insertElementAt(index, renderedListElement, renderedList);\n                }\n            });\n            that._updateDataIndexes();\n        },\n\n        _updateDataIndexes: function() {\n            var that = this;\n            var renderedList = that._isMobile && that.view ?\n                $(that.view.element).find(\".k-columns-item\").children(\"ul\") :\n                $(that.wrapper).find(\".k-menu-group\").first(),\n                mappedColumns = that._ownerColumns(true).map(function(x) {\n                    return x.title || x.field;\n                });\n\n            renderedList.find(\"span.\" + (this._isMobile ? \"k-listgroup-form-field-wrapper\" : \"k-menu-link\") +\n                \" input\").each(function(i) {\n                var columns;\n                var index;\n                if (that.options.columns.sort) {\n                    columns = that._ownerColumns();\n                    index = mappedColumns.indexOf(columns[i].title);\n                    $(this).attr(kendo.attr(\"index\"), index);\n                } else {\n                    $(this).attr(kendo.attr(\"index\"), i);\n                }\n            });\n        },\n\n        _eachRenderedMenuItem: function(callback) {\n            var that = this;\n            var renderedListElement;\n            var duplicateColumnIndex;\n            var fieldValue;\n            var currentColumn;\n            var columns = grep(leafColumns(that.owner.columns), function(col) {\n                var result = true,\n                    title = trim(col.title || \"\");\n\n                if (col.menu === false || (!col.field && !title.length)) {\n                    result = false;\n                }\n\n                return result;\n            }).map(function(col) {\n                return {\n                     field: col.field,\n                     title: col.title,\n                     matchesMedia: col.matchesMedia\n                   };\n            });\n            var renderedList = that._getRenderedList();\n            var renderedListElements = that._getRenderedListElements(renderedList);\n            var oldOccurances = oldColumnOccurrences(renderedListElements, renderedList.find(\"input[type=checkbox]\"));\n            var columnOccurrence = columnOccurrences(columns);\n            var columnElements;\n\n            for (var i = 0; i < columns.length; i++) {\n                currentColumn = columns[i];\n                fieldValue = currentColumn.field ? currentColumn.field : currentColumn.title;\n                duplicateColumnIndex = $.inArray(i, columnOccurrence[JSON.stringify(currentColumn)]);\n                columnElements = $();\n\n                for (var idx = 0; idx < oldOccurances[fieldValue].length; idx++) {\n                    columnElements = columnElements.add(renderedListElements.eq(oldOccurances[fieldValue][idx]));\n                }\n                renderedListElement = columnElements.find(attrEquals(\"field\", fieldValue)).closest(that._isModernComponentType() ? \"label\" : \"li\").eq(duplicateColumnIndex);\n                callback(i, currentColumn, renderedListElement, renderedList);\n            }\n        },\n\n        _getRenderedList: function() {\n            var that = this;\n\n            if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                return $(that.wrapper).find('.k-columns-item');\n            } else {\n                return that._isMobile && that.view ?\n                $(that.view.element).find(\".k-columns-item\").children(\"ul\") :\n                $(that.wrapper).find(\".k-menu-group\").first();\n            }\n        },\n\n        _getRenderedListElements: function(renderedList) {\n            var that = this;\n\n            if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                return renderedList.find('label');\n            } else {\n                return renderedList.find(\"span.\" + (this._isMobile ? \"k-listgroup-form-field-wrapper\" : \"k-menu-link\"));\n            }\n        },\n\n        _open: function() {\n            var that = this,\n                instance, menuitem;\n\n            $(\".k-column-menu\").not(that.wrapper).each(function() {\n                let popup = $(this).data(POPUP);\n                if (popup) {\n                    popup.close();\n                }\n            });\n            that.popup.element.off(\"keydown\" + NS).on(\"keydown\" + NS, function(e) {\n                var target = $(e.target);\n\n                if ((that._isModernComponentType() || that._isTabbedComponentType()) && e.keyCode === kendo.keys.ENTER) {\n                    target.click();\n                }\n                if (e.keyCode == kendo.keys.ESC) {\n                    instance = kendo.widgetInstance(target.find(\"select\"));\n\n                    if (target.hasClass(\"k-picker\") &&\n                        instance &&\n                        instance.popup.visible()) {\n                            e.stopPropagation();\n                            return;\n                    }\n\n                    menuitem = target.closest(\".k-popup\").closest(\".k-menu-item\");\n\n                    if (menuitem.length > 0) {\n                        menuitem.addClass(\"k-focus\");\n\n                        if (that.menu) {\n                            that.menu.element.trigger(\"focus\");\n                        } else {\n                            that.popup.element.find('[tabindex=0]').eq(0).trigger(\"focus\");\n                        }\n                    }\n\n                    target.closest(\".k-popup\").getKendoPopup().close();\n                }\n            });\n\n            if (that.options.hasLockableColumns) {\n                that._updateLockedColumns();\n            }\n\n            if (that.options.hasStickableColumns) {\n                that._updateStickyColumns();\n            }\n\n            if (that.options.reorderable) {\n                that._updateReorderColumns();\n            }\n\n            if (that.options.groupable) {\n                that._updateGroupColumns();\n            }\n        },\n\n        _activate: function() {\n            if (this.menu) {\n                this.menu.element.trigger(\"focus\");\n            } else {\n                this.popup.element.find('[tabindex=0]').eq(0).trigger(\"focus\");\n            }\n\n            this.trigger(OPEN, { field: this.field, container: this.wrapper });\n        },\n\n        _checkItemClass: function(item, _class) {\n            if (item.is(\"svg,path\")) {\n                item = item.closest(`.${_class}`);\n            }\n\n            return item.hasClass(_class);\n        },\n\n        _ownerColumns: function(omitSort) {\n            var columns = leafColumns(this.owner.columns),\n                menuColumns = grep(columns, function(col) {\n                    var result = true,\n                        title = trim(col.title || \"\");\n\n                    if (col.menu === false || (!col.field && !title.length)) {\n                        result = false;\n                    }\n\n                    return result;\n                }),\n                result,\n                sort = this.options.columns.sort;\n\n            result = map(menuColumns, function(col) {\n                return {\n                    originalField: col.field,\n                    field: col.field || col.title,\n                    title: col.title || col.field,\n                    hidden: col.hidden,\n                    matchesMedia: col.matchesMedia,\n                    index: inArray(col, columns),\n                    locked: !!col.locked,\n                    _originalObject: col,\n                    uid: col.headerAttributes.id\n                };\n            });\n\n            if (sort && !omitSort) {\n                result.sort(Comparer.create({ field: \"title\", dir: sort }));\n            }\n\n            return result;\n        },\n\n        _sort: function() {\n            var that = this;\n\n            if (that.options.sortable) {\n                that.refresh();\n\n                if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                    that.wrapper.on(\"click\" + NS, \".k-sort-asc, .k-sort-desc\", that._sortHandler.bind(that));\n                } else {\n                    that.menu.bind(SELECT, that._sortHandler.bind(that));\n                }\n            }\n        },\n\n        _sortHandler: function(e) {\n            var that = this,\n                item = e.item ? $(e.item) : $(e.target),\n                dir;\n\n            if (that._checkItemClass(item, \"k-sort-asc\")) {\n                dir = ASC;\n            } else if (that._checkItemClass(item, \"k-sort-desc\")) {\n                dir = DESC;\n            }\n\n            if (!dir) {\n                return;\n            }\n\n            that._getSortItemsContainer(item).find(\".k-sort-\" + (dir == ASC ? DESC : ASC)).removeClass(ACTIVE);\n\n            that._sortDataSource(item, dir);\n\n            if (!that._isMobile) {\n                that.close();\n            }\n        },\n\n        _getSortItemsContainer: function(item) {\n            return this._isModernComponentType() || this._isTabbedComponentType() ? item.parents('.k-columnmenu-item-wrapper').first() : item.parent();\n        },\n\n        _sortDataSource: function(item, dir) {\n            var that = this,\n                sortable = that.options.sortable,\n                compare = sortable.compare === null ? undefined$1 : sortable.compare,\n                dataSource = that.dataSource,\n                idx,\n                length,\n                sort = dataSource.sort() || [];\n\n            var removeClass = item.hasClass(ACTIVE) && sortable && sortable.allowUnsort !== false;\n\n            dir = !removeClass ? dir : undefined$1;\n\n            if (that.trigger(\"sort\", { sort: { field: that.field, dir: dir, compare: compare } })) {\n                return;\n            }\n\n            if (removeClass) {\n                item.removeClass(ACTIVE);\n            } else {\n                item.addClass(ACTIVE);\n            }\n\n            if (sortable.mode === \"multiple\") {\n                for (idx = 0, length = sort.length; idx < length; idx++) {\n                    if (sort[idx].field === that.field) {\n                        sort.splice(idx, 1);\n                        break;\n                    }\n                }\n                sort.push({ field: that.field, dir: dir, compare: compare });\n            } else {\n                sort = [ { field: that.field, dir: dir, compare: compare } ];\n            }\n\n            dataSource.sort(sort);\n        },\n\n        _columns: function() {\n            var that = this;\n\n            if (that.options.columns) {\n\n                that._updateColumnsMenu();\n\n                that._updateColumnsMenuHandler = that._updateColumnsMenu.bind(that);\n\n                that.owner.bind([\"columnHide\", \"columnShow\"], that._updateColumnsMenuHandler);\n\n                that._updateColumnsLockedStateHandler = that._updateColumnsLockedState.bind(that);\n\n                that.owner.bind([\"columnUnlock\", \"columnLock\" ], that._updateColumnsLockedStateHandler);\n\n                if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                    that.wrapper.on(\"click\" + NS, '.k-columns-item .k-button:not(.k-button-solid-primary)', function() {\n                        that._updateColumnsMenu();\n                    });\n                    that.wrapper.on(\"click\" + NS, '.k-columns-item .k-button.k-button-solid-primary', that._applyColumnVisibility.bind(that));\n                    that.wrapper.on(\"click\" + NS, '.k-columns-item .k-checkbox', function() {\n                        that._updateColumnsMenu(true);\n                    });\n                } else {\n                    that.menu.bind(SELECT, function(e) {\n                        var item = $(e.item),\n                            input,\n                            column,\n                            uidAttr = kendo.attr(\"uid\"),\n                            colIdx = 0,\n                            columns = grep(leafColumns(that.owner.columns), function(col) {\n                                var result = true,\n                                    title = trim(col.title || \"\");\n\n                                if (col.menu === false || (!col.field && !title.length)) {\n                                    result = false;\n                                }\n\n                                return result;\n                            });\n\n                        if (that._isMobile) {\n                            e.preventDefault();\n                        }\n\n                        if (!item.parent().closest(\"li.k-columns-item\")[0]) {\n                            return;\n                        }\n\n                        input = item.find(\":checkbox\");\n                        if (input.attr(\"disabled\")) {\n                            return;\n                        }\n\n                        colIdx = columns.map(function(col) {\n                            return col.headerAttributes.id;\n                        }).indexOf(input.attr(uidAttr));\n                        column = columns[colIdx];\n\n                        if (column.hidden === true) {\n                            that.owner.showColumn(column);\n                        } else {\n                            that.owner.hideColumn(column);\n                        }\n\n                        that._preventMenuCloseOnColumnVisibilityChange = true;\n                    });\n                }\n            }\n        },\n\n        _applyColumnVisibility: function() {\n            var that = this;\n            var fieldAttr = kendo.attr(\"field\");\n            var uidAttr = kendo.attr(\"uid\");\n            var checkboxes = that.wrapper.find(\".k-columns-item input[\" + fieldAttr + \"]\");\n            var columnsInMenu = grep(leafColumns(this.owner.columns), function(col) {\n                var result = true,\n                    title = trim(col.title || \"\");\n\n                if (col.menu === false || (!col.field && !title.length)) {\n                    result = false;\n                }\n\n                return result;\n            });\n            var length = checkboxes.length;\n            var idx;\n            var colIdx;\n            var checkbox;\n            var column;\n\n            that.owner.unbind(\"columnShow\", that._updateColumnsMenuHandler);\n            that.owner.unbind(\"columnHide\", that._updateColumnsMenuHandler);\n\n            for (idx = 0; idx < length; idx++) {\n                checkbox = $(checkboxes[idx]);\n                colIdx = columnsInMenu.map(function(col) {\n                    return col.headerAttributes.id;\n                }).indexOf(checkbox.attr(uidAttr));\n                column = columnsInMenu[colIdx];\n\n               if (checkbox.is(\":checked\") && column.hidden) {\n                   that.owner.showColumn(column);\n               } else if (checkbox.is(\":not(:checked)\") && !column.hidden) {\n                   that.owner.hideColumn(column);\n               }\n            }\n            that.popup.close();\n            that.owner.bind([\"columnHide\", \"columnShow\"], that._updateColumnsMenuHandler);\n        },\n\n        _sizeColumns: function() {\n            var that = this;\n\n            if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                that.wrapper.on(\"click\" + NS, \".k-auto-size-column, .k-auto-size-all\", that._autoSizeHandler.bind(that));\n            } else {\n                that.menu.bind(SELECT, that._autoSizeHandler.bind(that));\n            }\n        },\n\n        _clearAllFilters: function() {\n            var that = this;\n\n            if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                that.wrapper.on(\"click\" + NS, \".k-clear-all-filters\", that._clearAllFiltersHandler.bind(that));\n            } else {\n                that.menu.bind(SELECT, that._clearAllFiltersHandler.bind(that));\n            }\n        },\n\n        _clearAllFiltersHandler: function(e) {\n            var that = this,\n                item = e.item ? $(e.item) : $(e.target);\n\n            if (item.hasClass(\"k-clear-all-filters\") && that.owner && that.owner.dataSource) {\n                that.owner.dataSource.filter({});\n            }\n        },\n\n        _autoSizeHandler: function(e) {\n            var that = this,\n                item = e.item ? $(e.item) : $(e.target);\n\n            if (that._checkItemClass(item, \"k-auto-size-column\")) {\n                that.owner.autoFitColumn(that.field);\n            } else if (that._checkItemClass(item, \"k-auto-size-all\")) {\n                that.owner.autoFitColumns();\n            }\n        },\n\n        _updateColumnsMenu: function(omitCheckState) {\n            var idx, length, current, checked, locked, that = this;\n            var fieldAttr = kendo.attr(\"field\"),\n                lockedAttr = kendo.attr(\"locked\"),\n                uidAttr = kendo.attr(\"uid\"),\n                columnIndexMap = {},\n                columnsCount = 0,\n                colIdx = 0;\n                omitCheckState = omitCheckState === true;\n                var columnsInMenu = grep(leafColumns(this.owner.columns), function(col, idx) {\n                    var result = true,\n                        title = trim(col.title || \"\");\n\n                    if (col.menu === false || (!col.field && !title.length)) {\n                        result = false;\n                    }\n\n                    if (result) {\n                        columnIndexMap[idx] = columnsCount;\n                        columnsCount++;\n                    }\n\n                    return result;\n                }),\n                visibleFields = grep(this._ownerColumns(), function(field) {\n                    if (omitCheckState) {\n                         return that.wrapper.find(\"[role='menuitemcheckbox'] [\" + uidAttr + \"='\" + field.uid + \"']\").prop('checked');\n                    }\n                    return !field.hidden && field.matchesMedia !== false;\n                }),\n                visibleDataFields = grep(visibleFields, function(field) {\n                    return field.originalField;\n                }),\n                lockedCount = grep(visibleDataFields, function(col) {\n                    return col.locked === true;\n                }).length,\n                nonLockedCount = grep(visibleDataFields, function(col) {\n                    return col.locked !== true;\n                }).length,\n                columnsNotInMenu = grep(this.owner.columns, function(col) {\n                    return col.menu === false;\n                }),\n                hiddenColumnsNotInMenu = grep(columnsNotInMenu, function(col) {\n                    return col.hidden;\n                });\n\n            this.wrapper.find(\"[role='menuitemcheckbox']\").attr(\"aria-checked\", false);\n\n            var checkboxes = this.wrapper\n                .find(\".k-columns-item input[\" + fieldAttr + \"]\")\n                .prop(\"disabled\", false);\n\n            if (!omitCheckState) {\n                checkboxes.prop(\"checked\", false);\n            }\n\n            var switchWidget;\n\n            for (idx = 0, length = checkboxes.length; idx < length; idx ++) {\n                current = checkboxes.eq(idx);\n                locked = current.attr(lockedAttr) === \"true\";\n                checked = false;\n                switchWidget = current.data(\"kendoSwitch\");\n                colIdx = columnsInMenu.map(function(col) {\n                    return col.headerAttributes.id;\n                }).indexOf(current.attr(uidAttr));\n\n                checked = omitCheckState ? current.prop('checked') : !columnsInMenu[colIdx].hidden && columnsInMenu[colIdx].matchesMedia !== false;\n                current.prop(\"checked\", checked);\n\n                if (switchWidget) {\n                    switchWidget.enable(true);\n                    switchWidget.check(checked);\n                }\n\n                current.closest(\"[role='menuitemcheckbox']\").attr(\"aria-checked\", checked);\n\n                if (checked) {\n                    if (lockedCount == 1 && locked) {\n                        current.prop(\"disabled\", true);\n\n                        if (switchWidget) {\n                            switchWidget.enable(false);\n                        }\n                    }\n\n                    if ((columnsNotInMenu.length === 0 || (columnsNotInMenu.length === hiddenColumnsNotInMenu.length)) && nonLockedCount == 1 && !locked) {\n                        current.prop(\"disabled\", true);\n\n                        if (switchWidget) {\n                            switchWidget.enable(false);\n                        }\n                    }\n                }\n            }\n        },\n\n        _updateColumnsLockedState: function() {\n            var idx, length, current, column;\n            var fieldAttr = kendo.attr(\"field\");\n            var lockedAttr = kendo.attr(\"locked\");\n            var columns = toHash(this._ownerColumns(), \"field\");\n            var checkboxes = this.wrapper\n                .find(\".k-columns-item input[type=checkbox]\");\n\n            for (idx = 0, length = checkboxes.length; idx < length; idx ++ ) {\n                current = checkboxes.eq(idx);\n                column = columns[current.attr(fieldAttr)];\n                if (column) {\n                    current.attr(lockedAttr, column.locked?.toString());\n                }\n            }\n\n            this._updateColumnsMenu();\n        },\n\n        _filter: function() {\n            var that = this,\n                widget = FILTERMENU,\n                options = that.options;\n\n            if (options.filterable !== false) {\n\n                if (options.filterable.multi) {\n                    widget = \"kendoFilterMultiCheck\";\n                    if (options.filterable.dataSource) {\n                        options.filterable.checkSource = options.filterable.dataSource;\n                        delete options.filterable.dataSource;\n                    }\n                }\n                that.filterMenu = that.wrapper.find(\".k-filterable\")[widget](\n                    extend(true, {}, {\n                        appendToElement: true,\n                        dataSource: options.dataSource,\n                        values: options.values,\n                        field: that.field,\n                        title: that.title,\n                        change: function(e) {\n                            if (that.trigger(\"filtering\", { filter: e.filter, field: e.field })) {\n                                e.preventDefault();\n                            }\n                        },\n                        componentType: that.options.componentType,\n                        cycleForm: !that._isModernComponentType() && !that._isTabbedComponentType()\n                    },\n                    options.filterable)\n                    ).data(widget);\n\n                if (that._isMobile) {\n                    that.menu.bind(SELECT, function(e) {\n                        var item = $(e.item);\n\n                        if (item.hasClass(\"k-filter-item\")) {\n                            that.pane.navigate(that.filterMenu.view, that.options.animations.left);\n                        }\n                    });\n                }\n            }\n        },\n\n        _lockColumns: function() {\n            var that = this;\n\n            if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                that.wrapper.on(\"click\" + NS, \".k-lock, .k-unlock\", that._lockableHandler.bind(that));\n            } else {\n                that.menu.bind(SELECT, that._lockableHandler.bind(that));\n            }\n        },\n\n        _lockableHandler: function(e) {\n            var that = this;\n            var item = e.item ? $(e.item) : $(e.target);\n\n            if (that._checkItemClass(item, \"k-lock\")) {\n                that.owner.lockColumn(that.field);\n                if (!that._isMobile) {\n                    that.close();\n                }\n            } else if (that._checkItemClass(item, \"k-unlock\")) {\n                that.owner.unlockColumn(that.field);\n                if (!that._isMobile) {\n                    that.close();\n                }\n            }\n        },\n\n        _reorderColumns: function() {\n            var that = this;\n\n            if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                that.wrapper.on(\"click\" + NS, \".k-move-prev, .k-move-next\", that._reorderHandler.bind(that));\n            } else {\n                that.menu.bind(SELECT, that._reorderHandler.bind(that));\n            }\n        },\n\n        _reorderHandler: function(e) {\n            var that = this;\n            var item = e.item ? $(e.item) : $(e.target);\n\n            if (item.hasClass(\"k-move-prev\")) {\n                that.owner._moveColumn(that.element, true);\n                if (!that._isMobile) {\n                    that.close();\n                }\n            } else if (item.hasClass(\"k-move-next\")) {\n                that.owner._moveColumn(that.element, false);\n                if (!that._isMobile) {\n                    that.close();\n                }\n            }\n        },\n\n        _groupColumn: function() {\n            var that = this;\n\n            if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                that.wrapper.on(\"click\" + NS, \".k-group, .k-ungroup\", that._groupHandler.bind(that));\n            } else {\n                that.menu.bind(SELECT, that._groupHandler.bind(that));\n            }\n        },\n\n        _groupHandler: function(e) {\n            var that = this,\n                item = e.item ? $(e.item) : $(e.target);\n\n            if (item.hasClass(\"k-group\") || item.hasClass(\"k-ungroup\")) {\n                that.owner._handleSpaceKey(that.element, true);\n\n                if (!that._isMobile) {\n                    that.close();\n                }\n            }\n        },\n\n        _stickyColumns: function() {\n            var that = this;\n\n            if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                that.wrapper.on(\"click\" + NS, \".k-stick, .k-unstick\", that._stickableHandler.bind(that));\n            } else {\n                that.menu.bind(SELECT, that._stickableHandler.bind(that));\n            }\n        },\n\n        _stickableHandler: function(e) {\n            var that = this;\n            var item = e.item ? $(e.item) : $(e.target);\n            var field = that.field;\n            var columns = that.owner.columns;\n            var column = grep(columns, function(column) {\n                return column.field == field || column.title == field;\n            })[0];\n\n            if (that._checkItemClass(item, \"k-stick\")) {\n                that.owner.stickColumn(that.field);\n                that.trigger(STICK, { column: column });\n                if (!that._isMobile) {\n                    that.close();\n                }\n            } else if (that._checkItemClass(item, \"k-unstick\")) {\n                that.owner.unstickColumn(that.field);\n                that.trigger(UNSTICK, { column: column });\n                if (!that._isMobile) {\n                    that.close();\n                }\n            }\n        },\n\n        _updateLockedColumns: function() {\n            var field = this.field;\n            var columns = this.owner.columns;\n            var column = grep(columns, function(column) {\n                return column.field == field || column.title == field;\n            })[0];\n\n            if (!column) {\n                return;\n            }\n\n            var locked = column.locked === true;\n            var length = grep(columns, function(column) {\n                return !column.hidden && ((column.locked && locked) || (!column.locked && !locked));\n            }).length;\n            var notLockable = column.lockable === false;\n\n            var lockItem = this.wrapper.find(\".k-lock\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n            var unlockItem = this.wrapper.find(\".k-unlock\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n\n            if (locked || length == 1 || notLockable) {\n                lockItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n            }\n\n            if (!locked || length == 1 || notLockable) {\n                unlockItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n            }\n\n            this._updateColumnsLockedState();\n        },\n\n        _updateStickyColumns: function() {\n            var field = this.field;\n            var columns = this.owner.columns;\n            var column = grep(columns, function(column) {\n                return column.field == field || column.title == field;\n            })[0];\n\n            if (!column) {\n                return;\n            }\n\n            var sticky = column.sticky === true;\n            var stickable = column.stickable === true;\n            var locked = column.locked === true;\n            var length = grep(columns, function(column) {\n                return !column.hidden && ((column.locked && locked) || (!column.locked && !locked));\n            }).length;\n\n            var stickItem = this.wrapper.find(\".k-stick\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n            var unstickItem = this.wrapper.find(\".k-unstick\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n\n            if (sticky || !stickable || (locked && length === 1)) {\n                stickItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n            }\n\n            if (!sticky || !stickable) {\n                unstickItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n            }\n        },\n\n        _updateReorderColumns: function() {\n            var element = this.element,\n                elementIndex = element.index(),\n                numberOfSiblings = element.parent().children().length;\n\n            var prevItem = this.wrapper.find(\".k-move-prev\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n            var nextItem = this.wrapper.find(\".k-move-next\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n\n            if (this.element.index() === 0) {\n                prevItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n            }\n\n            if (elementIndex + 1 === numberOfSiblings) {\n                nextItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n            }\n        },\n\n        _updateGroupColumns: function() {\n            var element = this.element,\n                wrapper = this.wrapper,\n                groupEl = wrapper.find(\".k-menu-item.k-group\"),\n                ungroupEl = wrapper.find(\".k-menu-item.k-ungroup\");\n\n            if (this.owner.groupable._canDrag(element)) {\n                groupEl.removeClass(\"k-hidden\");\n                ungroupEl.addClass(\"k-hidden\");\n            } else {\n                groupEl.addClass(\"k-hidden\");\n                ungroupEl.removeClass(\"k-hidden\");\n            }\n        },\n\n        refresh: function() {\n            var that = this,\n                sort = that.options.dataSource.sort() || [],\n                descriptor,\n                field = that.field,\n                idx,\n                length;\n\n            that.wrapper.find(\".k-sort-asc, .k-sort-desc\").removeClass(ACTIVE);\n\n            for (idx = 0, length = sort.length; idx < length; idx++) {\n               descriptor = sort[idx];\n\n               if (field == descriptor.field) {\n                    that.wrapper.find(\".k-sort-\" + descriptor.dir).addClass(ACTIVE);\n               }\n            }\n\n            that.link[that._filterExist(that.dataSource.filter()) ? \"addClass\" : \"removeClass\"](\"k-active\");\n        },\n\n        _filterExist: function(filters) {\n            var found = false;\n            var filter;\n\n            if (!filters) {\n                return;\n            }\n\n            filters = filters.filters;\n\n            for (var idx = 0, length = filters.length; idx < length; idx++) {\n                filter = filters[idx];\n\n                if (filter.field == this.field) {\n                    found = true;\n                } else if (filter.filters) {\n                    found = found || this._filterExist(filter);\n                }\n            }\n\n            return found;\n        }\n    });\n\n    /* ------------------------- MODERN TEMPLATE ------------------------- */\n\n    function modernColumnsTemplateIterator(columns, encodeTitles, ns) {\n        return columns.map((column) => {\n            if (column.groupHeader) {\n                return `<span class=\"k-column-menu-group-header\"><span class=\"k-column-menu-group-header-text\">${column.title}</span></span>`;\n            } else {\n                return `<label class=\"k-column-list-item\" role=\"menuitemcheckbox\" aria-checked=\"false\" ${column.matchesMedia === false ? `${kendo.attr(\"style-display\")}=\"none\"` : \"\"}><input class=\"k-checkbox k-checkbox-md k-rounded-md\" type=\"checkbox\" title=\"${encodeTitles ? encode(column.title) : column.title}\" data-${ns}field=\"${column.field.replace(/\\\"/g, \"&#34;\")}\" data-${ns}index=\"${column.index} data-${ns}locked=\"${column.locked}\" data-${ns}uid=\"${column.uid}\" /><span class=\"k-checkbox-label\">${encodeTitles ? encode(column.title) : column.title}</span></label>`;\n            }\n        }).join(\"\");\n    }\n\nconst SIZING_PARTIAL_MODERN = ({ messages, hideAutoSizeColumn }) => `<div class=\"k-columnmenu-item-wrapper\">\\\n${!hideAutoSizeColumn ? `<div class=\"k-columnmenu-item k-auto-size-column\" tabindex=\"0\">\\\n${kendo.ui.icon(\"max-width\")}${encode(messages.autoSizeColumn)}\\\n</div>` : ''}\n<div class=\"k-columnmenu-item k-auto-size-all\" tabindex=\"0\">\\\n${kendo.ui.icon(\"display-inline-flex\")}${encode(messages.autoSizeAllColumns)}\\\n</div>\\\n</div>`;\n\nconst CLEARALLFILTERS_PARTIAL_MODERN = ({ messages }) => `<div class=\"k-columnmenu-item-wrapper\">\\\n<div class=\"k-columnmenu-item k-clear-all-filters\" tabindex=\"0\">\\\n${kendo.ui.icon(\"filter-clear\")}${encode(messages.clearAllFilters)}\\\n</div>\\\n</div>`;\n\n\nconst SORTABLE_PARTIAL_MODERN = ({ messages }) => `<div class=\"k-columnmenu-item-wrapper\">\\\n<div class=\"k-columnmenu-item k-sort-asc\" tabindex=\"0\">\\\n${kendo.ui.icon(\"sort-asc-small\")}${encode(messages.sortAscending)}\\\n</div>\\\n<div class=\"k-columnmenu-item k-sort-desc\" tabindex=\"0\">\\\n${kendo.ui.icon(\"sort-desc-small\")}${encode(messages.sortDescending)}\\\n</div>\\\n</div>`;\n\n    const COLUMNS_PARTIAL_MODERN = ({ columns, messages, encodeTitles, ns }) => `<div class=\"k-columnmenu-item-wrapper\">\\\n<div class=\"k-columnmenu-item-content k-columns-item\">\\\n<div class=\"k-column-list-wrapper\">\\\n<div class=\"k-column-list\" role=\"menu\">\\\n${modernColumnsTemplateIterator(columns, encodeTitles, ns)}\\\n</div>\\\n<div class=\"k-actions-stretched k-columnmenu-actions\">` +\nkendo.html.renderButton(`<button>${encode(messages.apply)}</button>`, { themeColor: \"primary\", icon: \"check\" }) +\nkendo.html.renderButton(`<button>${encode(messages.reset)}</button>`, { icon: \"undo\" }) +\n`</div>\\\n</div>\\\n</div>\\\n</div>`;\n\n    const GROUPABLE_PARTIAL_MODERN = ({ messages }) => `<div class=\"k-columnmenu-item-wrapper\">\\\n<div class=\"k-columnmenu-item k-group\" tabindex=\"0\">\\\n${kendo.ui.icon(\"group\")}${encode(messages.groupColumn)}\\\n</div>\\\n</div>\n<div class=\"k-columnmenu-item-wrapper\">\\\n<div class=\"k-columnmenu-item k-ungroup\" tabindex=\"0\">\\\n${kendo.ui.icon(\"ungroup\")}${encode(messages.ungroupColumn)}\\\n</div>\\\n</div>`;\n\n    const LOCKABLE_COLUMNS_PARTIAL_MODERN = ({ messages }) => `<div class=\"k-columnmenu-item k-lock\" tabindex=\"0\">\\\n${kendo.ui.icon(\"lock\")}${encode(messages.lock)}\\\n</div>\\\n<div class=\"k-columnmenu-item k-unlock\" tabindex=\"0\">\\\n${kendo.ui.icon(\"unlock\")}${encode(messages.unlock)}\\\n</div>`;\n\n    const STICKABLE_COLUMNS_PARTIAL_MODERN = ({ messages }) => `<div class=\"k-columnmenu-item k-stick\" tabindex=\"0\">\\\n${kendo.ui.icon(\"stick\")}${encode(messages.stick)}\\\n</div>\\\n<div class=\"k-columnmenu-item k-unstick\" tabindex=\"0\">\\\n${kendo.ui.icon(\"unstick\")}${encode(messages.unstick)}\\\n</div>`;\n\n    const REORDERABLE_COLUMNS_PARTIAL_MODERN = ({ messages }) => `<div class=\"k-columnmenu-item k-move-prev\" tabindex=\"0\">\\\n${kendo.ui.icon(\"caret-alt-left\")}${encode(messages.movePrev)}\\\n</div>\\\n<div class=\"k-columnmenu-item k-move-next\" tabindex=\"0\">\\\n${kendo.ui.icon(\"caret-alt-right\")}${encode(messages.moveNext)}\\\n</div>`;\n\n    const LOCK_STICK_COLUMNS_PARTIAL_MODERN = ({ hasLockableColumns, hasStickableColumns, messages, reorderable }) => `<div class=\"k-columnmenu-item-wrapper\">\\\n<div class=\"k-column-menu-position\">\\\n${hasLockableColumns ? LOCKABLE_COLUMNS_PARTIAL_MODERN({ messages }) : ''}\\\n${hasStickableColumns ? STICKABLE_COLUMNS_PARTIAL_MODERN({ messages }) : ''}\\\n${reorderable ? REORDERABLE_COLUMNS_PARTIAL_MODERN({ messages }) : ''}\\\n</div>\\\n</div>`;\n\n    var modernTemplate = ({ autoSize, hideAutoSizeColumn, sortable, filterable, clearAllFilters, showColumns, messages, columns, hasLockableColumns, hasStickableColumns, encodeTitles, ns, reorderable, groupable }) => `\\\n${sortable ? SORTABLE_PARTIAL_MODERN({ messages }) : ''}\\\n${showColumns ? COLUMNS_PARTIAL_MODERN({ columns, messages, encodeTitles, ns }) : ''}\\\n${filterable ? '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' : ''}\\\n${groupable ? GROUPABLE_PARTIAL_MODERN({ messages }) : ''}\\\n${autoSize ? SIZING_PARTIAL_MODERN({ messages, hideAutoSizeColumn }) : ''}\\\n${clearAllFilters ? CLEARALLFILTERS_PARTIAL_MODERN({ messages }) : ''}\\\n${hasLockableColumns || hasStickableColumns || reorderable ? LOCK_STICK_COLUMNS_PARTIAL_MODERN({ hasLockableColumns, hasStickableColumns, messages, reorderable }) : ''}`;\n\n    /* ------------------------- TABBED TEMPLATE ------------------------- */\n\n    function tabbedTemplateGeneralSettings(sortable, hasLockableColumns, hasStickableColumns, reorderable, groupable, autoSize, messages, hideAutoSizeColumn, clearAllFilters) {\n        var result = \"<div>\";\n\n        if (sortable) {\n            result += SORTABLE_PARTIAL_MODERN({ messages });\n        }\n\n        if (groupable) {\n            result += GROUPABLE_PARTIAL_MODERN({ messages });\n        }\n\n        if (hasLockableColumns || hasStickableColumns || reorderable) {\n            result += LOCK_STICK_COLUMNS_PARTIAL_MODERN({ hasLockableColumns, hasStickableColumns, messages, reorderable });\n        }\n\n        if (autoSize) {\n            result += SIZING_PARTIAL_MODERN({ messages, hideAutoSizeColumn });\n        }\n\n        if (clearAllFilters) {\n            result += CLEARALLFILTERS_PARTIAL_MODERN({ messages });\n        }\n\n        result += \"</div>\";\n        return result;\n    }\n\n    var tabbedTemplate = ({ sortable, filterable, clearAllFilters, showColumns, messages, columns, hasLockableColumns, hasStickableColumns, encodeTitles, ns, reorderable, groupable, autoSize, hideAutoSizeColumn }) => `<div>\n                            <ul>\n                                ${ filterable ? `<li>${kendo.ui.icon(\"filter\")}</li>` : ''}\n                                ${ sortable || hasLockableColumns || hasStickableColumns || reorderable || groupable || autoSize ? `<li>${kendo.ui.icon(\"sliders\")}</li>` : ''}\n                                ${ showColumns ? `<li>${kendo.ui.icon(\"columns\")}</li>` : ''}\n                            </ul>\n                            ${filterable ? '<div><div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div></div>' : ''}\n                            ${ sortable || hasLockableColumns || hasStickableColumns || reorderable || groupable || autoSize ? tabbedTemplateGeneralSettings(sortable, hasLockableColumns, hasStickableColumns, reorderable, groupable, autoSize, messages, hideAutoSizeColumn, clearAllFilters) : '' }\n                            ${ showColumns ? `<div>${ COLUMNS_PARTIAL_MODERN({ columns, messages, encodeTitles, ns }) }</div>` : '' }\n                        </div>`;\n\n    /* ------------------------- CLASSIC TEMPLATE ------------------------- */\n\n    function classicColumnsTemplateIterator(columns, encodeTitles, ns, omitWrapAttribute) {\n        return columns.map((column) => {\n            if (column.groupHeader) {\n                return `<li class=\"k-column-menu-group-header\" ${omitWrapAttribute}=\"true\" ><span class=\"k-column-menu-group-header-text\">${column.title}</span></li>`;\n            } else {\n                return `<li role=\"menuitemcheckbox\" aria-checked=\"false\" ${column.matchesMedia === false ? `${kendo.attr(\"style-display\")}=\"none\"` : \"\"}><input type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" title=\"${encodeTitles ? encode(column.title) : column.title}\" data-${ns}field=\"${column.field.replace(/\\\"/g,\"&#34;\")}\" data-${ns}index=\"${column.index}\" data-${ns}locked=\"${column.locked}\" data-${ns}uid=\"${column.uid}\"/>${encodeTitles ? encode(column.title) : column.title}</li>`;\n            }\n        }).join(\"\");\n    }\n\n    const SORTABLE_PARTIAL_CLASSIC = ({ messages, showColumns, filterable }) => `\\\n<li class=\"k-item k-menu-item k-sort-asc\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"sort-asc-small\")}<span class=\"k-menu-link-text\">${encode(messages.sortAscending)}</span></span></li>\\\n<li class=\"k-item k-menu-item k-sort-desc\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"sort-desc-small\")}<span class=\"k-menu-link-text\">${encode(messages.sortDescending)}</span></span></li>\\\n${showColumns || filterable ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''}`;\n\n    const COLUMNS_PARTIAL_CLASSIC = ({ columns, messages, encodeTitles, ns, omitWrapAttribute, filterable, hasLockableColumns, hasStickableColumns }) => `\\\n<li class=\"k-item k-menu-item k-columns-item\" aria-haspopup=\"true\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"columns\")}<span class=\"k-menu-link-text\">${encode(messages.columns)}</span></span><ul>\\\n${classicColumnsTemplateIterator(columns, encodeTitles, ns, omitWrapAttribute)}\\\n</ul></li>\\\n${filterable || hasLockableColumns || hasStickableColumns ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''}`;\n\nconst FILTERABLE_PARTIAL_CLASSIC = ({ messages, hasLockableColumns, hasStickableColumns, reorderable }) => `<li class=\"k-item k-menu-item k-filter-item\" aria-haspopup=\"true\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"filter\")}<span class=\"k-menu-link-text\">${encode(messages.filter)}</span></span><ul>\\\n<li><div class=\"k-filterable\"></div></li>\\\n</ul></li>\\\n${hasLockableColumns || hasStickableColumns || reorderable ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''}`;\n\n    const GROUPABLE_PARTIAL_CLASSIC = ({ messages, hasLockStickMove }) => `\\\n<li class=\"k-item k-menu-item k-group\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"group\")}<span class=\"k-menu-link-text\">${encode(messages.groupColumn)}</span></span></li>\\\n<li class=\"k-item k-menu-item k-ungroup\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"ungroup\")}<span class=\"k-menu-link-text\">${encode(messages.ungroupColumn)}</span></span></li>\\\n${hasLockStickMove ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''}`;\n\n    const LOCKABLE_COLUMNS_PARTIAL_CLASSIC = ({ messages, hasStickableColumns }) => `\\\n<li class=\"k-item k-menu-item k-lock\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"lock\")}<span class=\"k-menu-link-text\">${encode(messages.lock)}</span></span></li>\\\n<li class=\"k-item k-menu-item k-unlock\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"unlock\")}<span class=\"k-menu-link-text\">${encode(messages.unlock)}</span></span></li>\\\n${hasStickableColumns ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''}`;\n\n    const STICKABLE_COLUMNS_PARTIAL_CLASSIC = ({ messages }) => `\\\n<li class=\"k-item k-menu-item k-stick\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"stick\")}<span class=\"k-menu-link-text\">${encode(messages.stick)}</span></span></li>\\\n<li class=\"k-item k-menu-item k-unstick\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"unstick\")}<span class=\"k-menu-link-text\">${encode(messages.unstick)}</span></span></li>`;\n\n    const REORDERABLE_COLUMNS_PARTIAL_CLASSIC = ({ messages }) => `\\\n<li class=\"k-item k-menu-item k-move-prev\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"caret-alt-left\")}<span class=\"k-menu-link-text\">${encode(messages.movePrev)}</span></span></li>\\\n<li class=\"k-item k-menu-item k-move-next\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"caret-alt-right\")}<span class=\"k-menu-link-text\">${encode(messages.moveNext)}</span></span></li>`;\n\n    const LOCK_STICK_COLUMNS_PARTIAL_CLASSIC = ({ messages, hasLockableColumns, hasStickableColumns, reorderable }) => `\\\n<li class=\"k-item k-menu-item k-position-item\" aria-haspopup=\"true\"><span class=\"k-link k-menu-link\">${kendo.ui.icon(\"set-column-position\")}<span class=\"k-menu-link-text\">${encode(messages.setColumnPosition)}</span></span><ul>\\\n${hasLockableColumns ? LOCKABLE_COLUMNS_PARTIAL_CLASSIC({ messages, hasStickableColumns }) : ''}\\\n${hasStickableColumns ? STICKABLE_COLUMNS_PARTIAL_CLASSIC({ messages }) : ''}\\\n${reorderable ? REORDERABLE_COLUMNS_PARTIAL_CLASSIC({ messages }) : ''}\\\n</ul></li>`;\n\n    var template = ({ uid, sortable, filterable, showColumns, messages, columns, hasLockableColumns, hasStickableColumns, encodeTitles, ns, omitWrapAttribute, reorderable, groupable }) => `\\\n<ul id=\"${uid}\">\\\n${sortable ? SORTABLE_PARTIAL_CLASSIC({ messages, showColumns, filterable }) : '' }\\\n${showColumns ? COLUMNS_PARTIAL_CLASSIC({ columns, messages, encodeTitles, ns, omitWrapAttribute, filterable, hasLockableColumns, hasStickableColumns }) : ''}\\\n${filterable ? FILTERABLE_PARTIAL_CLASSIC({ messages, hasLockableColumns, hasStickableColumns, reorderable }) : ''}\\\n${groupable ? GROUPABLE_PARTIAL_CLASSIC({ messages, hasLockStickMove: hasLockableColumns || hasStickableColumns || reorderable }) : ''}\\\n${hasLockableColumns || hasStickableColumns || reorderable ? LOCK_STICK_COLUMNS_PARTIAL_CLASSIC({ messages, hasLockableColumns, hasStickableColumns, reorderable }) : ''}\n</ul>`;\n\n    /* ------------------------- MOBILE TEMPLATE ------------------------- */\n\n    function mobileColumnsTemplateIterator(columns, groups, ns, hasGroups) {\n        var result = \"\";\n\n        if (hasGroups) {\n            for (var i = 0; i < groups.length; i++) {\n                result += `<span class=\"k-list-group-header k-pb-1\">${encode(groups[i].title)}</span><ul class=\"k-listgroup k-listgroup-flush k-mb-4\">`;\n\n                for (var idx = 0; idx < groups[i].columns.length; idx++) {\n                    result += `<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item\"><span class=\"k-listgroup-form-row\"><span class=\"k-listgroup-form-field-label k-item-title\">${groups[i].columns[idx].title}</span><span class=\"k-listgroup-form-field-wrapper\"><input type=\"checkbox\" title=\"${groups[i].columns[idx].title}\" data-${ns}field=\"${groups[i].columns[idx].field.replace(/\\\"/g,\"&#34;\")}\" data-${ns}index=\"${groups[i].columns[idx].index}\" data-${ns}uid=\"${groups[i].columns[idx].uid}\" data-${ns}locked=\"${groups[i].columns[idx].locked}\"/></span></span></li>\"`;\n                }\n\n                result += `</ul>`;\n            }\n        } else {\n            result += `<ul class=\"k-listgroup k-listgroup-flush k-mb-4\">`;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                result += `<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item\"><span class=\"k-listgroup-form-row\"><span class=\"k-listgroup-form-field-label k-item-title\">${columns[idx].title}</span><span class=\"k-listgroup-form-field-wrapper\"><input type=\"checkbox\" title=\"${columns[idx].title}\" data-${ns}field=\"${columns[idx].field.replace(/\\\"/g,\"&#34;\")}\" data-${ns}index=\"${columns[idx].index}\" data-${ns}uid=\"${columns[idx].uid}\" data-${ns}locked=\"${columns[idx].locked}\"/></span></span></li>`;\n            }\n\n            result += `</ul>`;\n        }\n\n        return result;\n    }\n\n    const SORTABLE_PARTIAL_MOBILE = ({ messages }) => `<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-sort-asc\"><span class=\"k-link\">${kendo.ui.icon(\"sort-asc-small\")}<span class=\"k-item-title\">${encode(messages.sortAscending)}</span></span></li>\\\n<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-sort-desc\"><span class=\"k-link\">${kendo.ui.icon(\"sort-desc-small\")}<span class=\"k-item-title\">${encode(messages.sortDescending)}</span></span></li>`;\n\n    const LOCKABLE_COLUMNS_PARTIAL_MOBILE = ({ messages }) => `<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-lock\"><span class=\"k-link\">${kendo.ui.icon(\"lock\")}<span class=\"k-item-title\">${encode(messages.lock)}</span></span></li>\\\n<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-unlock\"><span class=\"k-link\">${kendo.ui.icon(\"unlock\")}<span class=\"k-item-title\">${encode(messages.unlock)}</span></span></li>`;\n\n    const STICKABLE_COLUMNS_PARTIAL_MOBILE = ({ messages }) => `<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-stick\"><span class=\"k-link\">${kendo.ui.icon(\"stick\")}<span class=\"k-item-title\">${encode(messages.stick)}</span></span></li>\\\n<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-unstick\"><span class=\"k-link\">${kendo.ui.icon(\"unstick\")}<span class=\"k-item-title\">${encode(messages.unstick)}</span></span></li>`;\n\n    const REORDERABLE_COLUMNS_PARTIAL_MOBILE = ({ messages }) => `<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-move-prev\"><span class=\"k-link\">${kendo.ui.icon(\"caret-alt-left\")}<span class=\"k-item-title\">${encode(messages.movePrev)}</span></span></li>\\\n<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-move-next\"><span class=\"k-link\">${kendo.ui.icon(\"caret-alt-right\")}<span class=\"k-item-title\">${encode(messages.moveNext)}</span></span></li>`;\n\n    const FILTERABLE_PARTIAL_MOBILE = ({ messages }) => `<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-filter-item\">\\\n<span class=\"k-link k-filterable\">\\\n${kendo.ui.icon(\"filter\")}\\\n<span class=\"k-item-title\">${encode(messages.filter)}</span>\\\n<span class=\"k-select\">${kendo.ui.icon(\"chevron-right\")}</span>\\\n</span>\\\n</li>`;\n\n    const GROPABLE_PARTIAL_MOBILE = ({ messages }) => `\\\n<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-group\"><span class=\"k-link\">${kendo.ui.icon(\"group\")}<span class=\"k-item-title\">${encode(messages.groupColumn)}</span></span></li>\\\n<li id=\"${kendo.guid()}\" class=\"k-item k-listgroup-item k-ungroup\"><span class=\"k-link\">${kendo.ui.icon(\"ungroup\")}<span class=\"k-item-title\">${encode(messages.ungroupColumn)}</span></span></li>`;\n\n    const COLUMNS_PARTIAL_MOBILE = ({ messages, hasGroups, columns, groups, ns }) => `\\\n<li class=\"k-columns-item\"><span class=\"k-list-title\">${messages.columnVisibility}</span>\\\n${mobileColumnsTemplateIterator(columns, groups, ns, hasGroups)}\\\n</li>`;\n\n    var mobileTemplate = ({ messages, title, sortable, filterable, showColumns, hasLockableColumns, hasStickableColumns, hasGroups, columns, groups, ns, reorderable, groupable }) => `\\\n<div data-${ns}role=\"view\" class=\"k-grid-column-menu\">\\\n<div data-${ns}role=\"header\" class=\"k-appbar k-appbar-primary\">\\\n${kendo.html.renderButton(`<button class=\"k-header-cancel\" title=\"${messages.cancel}\" aria-label=\"${messages.cancel}\"></button>`, { icon: \"chevron-left\", fillMode: \"flat\" })}\\\n<span class=\"k-spacer\"></span>\\\n<span>${encode(messages.settings)}</span>\\\n<span class=\"k-spacer\"></span>\\\n${kendo.html.renderButton(`<button class=\"k-header-done\" title=\"${messages.done}\" aria-label=\"${messages.done}\"></button>`, { icon: \"check\", fillMode: \"flat\" })}\\\n</div>\\\n<div class=\"k-column-menu\">\\\n<ul class=\"k-reset\">\\\n<li>\\\n<span class=\"k-list-title\">${encode(messages.column)}: ${title}</span>\\\n<ul class=\"k-listgroup k-listgroup-flush k-mb-4\">\\\n${sortable ? SORTABLE_PARTIAL_MOBILE({ messages }) : ''}\\\n${hasLockableColumns ? LOCKABLE_COLUMNS_PARTIAL_MOBILE({ messages }) : ''}\\\n${hasStickableColumns ? STICKABLE_COLUMNS_PARTIAL_MOBILE({ messages }) : ''}\\\n${reorderable ? REORDERABLE_COLUMNS_PARTIAL_MOBILE({ messages }) : ''}\\\n${filterable ? FILTERABLE_PARTIAL_MOBILE({ messages }) : ''}\\\n${groupable ? GROPABLE_PARTIAL_MOBILE({ messages }) : ''}\\\n</ul>\\\n</li>\\\n${showColumns ? COLUMNS_PARTIAL_MOBILE({ messages, hasGroups, columns, groups, ns }) : ''}\\\n<li class=\"k-item k-clear-wrap\">\\\n<ul class=\"k-listgroup k-listgroup-flush\">\\\n<li class=\"k-listgroup-item\">\\\n<span class=\"k-link k-label k-clear\" title=\"${messages.clear}\" aria-label=\"${messages.clear}\">\\\n${encode(messages.clear)}\\\n</span></li></ul></li></ul></div></div>`;\n\n    var MobileMenu = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._createCheckBoxes();\n\n            that.element.on(\"click\" + NS, \"li.k-item:not(.k-separator):not(.k-disabled):not(:has(.k-switch))\", \"_click\");\n        },\n\n        events: [ SELECT ],\n\n        _click: function(e) {\n            var that = this;\n\n            if (!$(e.target).is(\"[type=checkbox]\")) {\n                e.preventDefault();\n            }\n\n            if ($(e.target).hasClass(\"k-clear\")) {\n                that._cancelChanges(true);\n\n                return;\n            }\n\n            if ($(e.target).hasClass(\"k-filterable\")) {\n                that._cancelChanges(true);\n                that.trigger(SELECT, { item: e.currentTarget });\n\n                return;\n            }\n\n            that._updateSelectedItems(e.currentTarget);\n        },\n\n        _updateSelectedItems: function(el) {\n            var that = this;\n            var item = $(el);\n            var state = that.options.columnMenu.view.state || { columns: {} };\n            var id = item.prop(\"id\");\n\n            if (item.hasClass(\"k-filter-item\")) {\n                return;\n            }\n\n            if (state[id]) {\n                state[id] = false;\n            } else {\n                state[id] = true;\n            }\n\n            if (item.hasClass(\"k-sort-asc\") || item.hasClass(\"k-sort-desc\")) {\n                var dir;\n                var otherItem;\n                var otherItemId;\n\n                if (item.hasClass(\"k-sort-asc\")) {\n                    dir = \"asc\";\n                    otherItem = that.element.find(\".k-sort-desc\");\n                } else {\n                    dir = \"desc\";\n                    otherItem = that.element.find(\".k-sort-asc\");\n                }\n\n                otherItemId = otherItem.prop(\"id\");\n\n                if (dir === state.initialSort && !item.hasClass(\"k-selected\")) {\n                    state[id] = false;\n                }\n\n                if (state[otherItemId]) {\n                    state[otherItemId] = false;\n                }\n\n                otherItem.removeClass(ACTIVE);\n            }\n\n            if (item.hasClass(ACTIVE)) {\n                item.removeClass(ACTIVE);\n            } else {\n                item.addClass(ACTIVE);\n            }\n        },\n\n        _cancelChanges: function(force) {\n            var that = this;\n            var menu = that.options.columnMenu;\n            var view = menu.view;\n            var state = view.state || { columns: {} };\n            var columns = state.columns;\n\n            that.element.find(\".\" + ACTIVE).removeClass(ACTIVE);\n            menu.refresh();\n\n            if (force) {\n                var selectedItems = [];\n\n                for (var key in columns) {\n                    if (columns.hasOwnProperty(key)) {\n                        if (columns[key] === true) {\n                            var item = view.element.find(\"#\" + key);\n\n                            selectedItems.push(item[0]);\n                        }\n                    }\n                }\n                // In order to use the columns hide/show validation,\n                // triggering the Select event must be done backwards\n                for (var i = selectedItems.length - 1; i >= 0; i--) {\n                    that.trigger(SELECT, { item: selectedItems[i] });\n                }\n\n                if (menu.options.hasLockableColumns) {\n                    menu._updateLockedColumns();\n                }\n\n                if (menu.options.hasStickableColumns) {\n                    menu._updateStickyColumns();\n                }\n\n                if (menu.options.reorderable) {\n                    menu._updateReorderColumns();\n                }\n\n                if (menu.options.groupable) {\n                    menu._updateGroupColumns();\n                }\n            }\n\n            that.options.columnMenu.view.state = { columns: {} };\n        },\n\n        _applyChanges: function() {\n            var that = this;\n            var view = that.options.columnMenu.view;\n            var state = view.state || { columns: {} };\n\n            for (var key in state) {\n                if (state.hasOwnProperty(key)) {\n                    if (key !== \"initialSort\" && key !== \"columns\" && state[key] === true) {\n                        var item = view.element.find(\"#\" + key);\n\n                        if (item.hasClass(ACTIVE)) {\n                            item.removeClass(ACTIVE);\n                        } else {\n                            item.addClass(ACTIVE);\n                        }\n\n                        that.trigger(SELECT, { item: item[0] });\n                    }\n                }\n            }\n        },\n\n        _createCheckBoxes: function() {\n            var that = this;\n\n            that.element.find(\".k-columns-item\").find(\"[type='checkbox']\").kendoSwitch({\n                messages: {\n                    checked: \"\",\n                    unchecked: \"\"\n                },\n                change: function(e) {\n                    var item = e.sender.element.closest(\".k-item\");\n                    var state = that.options.columnMenu.view.state || { columns: {} };\n                    var id = item.prop(\"id\");\n\n                    if (state.columns[id]) {\n                        state.columns[id] = false;\n                    } else {\n                        state.columns[id] = true;\n                    }\n\n                    that.trigger(SELECT, { item: item });\n                }\n            });\n        },\n\n        _destroyCheckBoxes: function() {\n            var that = this;\n            var elements = that.element.find(\".k-columns-item\").find(\"[type='checkbox']\");\n            var switchWidget;\n\n            for (var i = 0; i < elements.length; i++) {\n                switchWidget = elements.eq(i).data(\"kendoSwitch\");\n\n                if (switchWidget) {\n                    switchWidget.destroy();\n                }\n            }\n        },\n\n        close: function() {\n            this.options.pane.navigate(\"\");\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.element.off(NS);\n            that._destroyCheckBoxes();\n        }\n    });\n\n    ui.plugin(ColumnMenu);\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { __meta__, kendo$1 as default };\n"]}