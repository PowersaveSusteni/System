/**
 * Kendo UI v2024.4.1112 (http://www.telerik.com/kendo-ui)
 * Copyright 2024 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
import"./kendo.dataviz.themes.js";import{y as Arc,Y as limitValue,G as Group,c as Animation,j as Circle,i as Circle$1,A as Arc$1,w as Surface}from"./kendo.drawing.cmn.chunk.js";import{i as interpolateValue,r as round}from"./kendo.charts.cmn.chunk.js";const __meta__={id:"circularprogressBar",name:"CircularProgressBar",category:"web",description:"The Circular ProgressBar component represents an SVG loader",depends:["core","dataviz.themes","drawing.cmn.chunk","charts.cmn.chunk"]};!function(e){window.kendo.dataviz=window.kendo.dataviz||{};var t=kendo.dataviz,n=kendo.ui,i=n.Widget,r=Arc,o=limitValue,a=Group;class s extends Animation{constructor(){super(...arguments);var e=this.options,t=this.options.endColor,n=this.options.startColor,i=Math.abs(e.newAngle-e.oldAngle)/e.duration*1e3;e.duration=o(i,150,800),n!==t&&(this.startColor=new kendo.Color(n),this.color=new kendo.Color(t))}step(e){var t=this,n=t.options,i=t.startColor,r=t.color,o=interpolateValue(n.oldAngle,n.newAngle,e);if(this.element.geometry().setEndAngle(o),r){var a=round(interpolateValue(i.r,r.r,e)),s=round(interpolateValue(i.g,r.g,e)),l=round(interpolateValue(i.b,r.b,e));this.element.stroke(new kendo.Color(a,s,l).toHex())}}}var l=i.extend({init:function(e,n){i.fn.init.call(this,e,n),this.theme=function(e){var n=t.ui.themes||{},i=e.theme||"",r=i.toLowerCase();if(-1!=t.SASS_THEMES.indexOf(r))return t.autoTheme().gauge;return(n[i]||n[r]||{}).gauge}(this.options),this._value=this.options.value,this.element.addClass("k-gauge"),this.redraw(),this._centerTemplate(),this._aria()},options:{name:"CircularProgressBar",ariaRole:!1,theme:"sass",centerTemplate:"",color:"",colors:[],transitions:!0,pointerWidth:5,indeterminate:!1,label:null,labelId:null},events:[],value:function(e){var t=this;if(undefined===e)return t._value;e=t._restrictValue(e),t._centerSvgElements(),t._pointerChange(t._value,e),t._value=e,t._centerTemplate(),t._updateProgress()},redraw:function(){this._initSurface(),this._buildVisual(),this._draw()},resize:function(){var e=this.options.transitions;this.options.transitions=!1,this._initSurface(),this._buildVisual(),this._draw(),this._centerTemplate(),this.options.transitions=e},destroy:function(){var e=this;e.announce&&e.announce.remove(),i.fn.destroy.call(e)},_aria:function(){var t=this,n=t.options,i=t.value()||0,r=t.element;n.ariaRole&&(r.attr({role:"progressbar"}),n.indeterminate||r.attr({"aria-valuemin":0,"aria-valuemax":100}),n.labelId?r.attr("aria-labelledby",n.labelId):n.label&&r.attr("aria-label",n.label),t.announce=e('<span aria-live="polite" class="k-sr-only k-progress-announce"></span>'),t.announce.appendTo(e("body")),n.indeterminate?t.announce.text("Loading..."):(r.attr("aria-valuenow",i),t.announce.text(i+"%")))},_restrictValue:function(e){return e<0?0:e>100?100:e},_updateProgress:function(){var e=this,t=e.options,n=e.value()||0;t.ariaRole&&!t.indeterminate&&(e.element.attr("aria-valuenow",n),e.announce&&e.announce.text(n+"%"))},_centerSvgElements:function(){var e=this._getCenter();this.circle._geometry.center.x===e.x&&this.circle._geometry.center.y===e.y||(this.circle._geometry.center.x=e.x,this.circle._geometry.center.y=e.y,this.arc._geometry.center.x=e.x,this.arc._geometry.center.y=e.y,this.circle.geometryChange(),this.arc.geometryChange())},_centerTemplate:function(){var e,t,n;this.options.centerTemplate?(t=kendo.template(this.options.centerTemplate),(n=this._getCenterElement()).html(t({color:this._getColor(this.value()),value:this.value()})),e=this._centerTemplatePosition(n.width(),n.height()),n.css(e)):this._centerElement&&(this._centerElement.remove(),this._centerElement=null)},_getCenterElement:function(){var t=this._centerElement;return t||(t=this._centerElement=e("<div></div>").addClass("k-arcgauge-label"),this.element.append(t)),t},_pointerChange:function(e,t){let n;this.options.transitions?(n=new s(this.arc,{oldAngle:this._slotAngle(e),startColor:this._getColor(e),newAngle:this._slotAngle(t),endColor:this._getColor(t)}),n.play()):(this.arc.stroke(this._getColor(t)),this.arc.geometry().setEndAngle(this._slotAngle(t)))},_draw:function(){let t,n,i,r=this.surface;r.clear(),r.draw(this._visuals),this.options.indeterminate?(t=e(r.element).find("path"),n=this._getCenter(),t[0].innerHTML=kendo.format('<animateTransform attributeName="transform" type="rotate" from="0 {0} {1}" to="360 {0} {1}" dur="1s" repeatCount="indefinite" />',n.x,n.y)):this.options.transitions&&(i=new s(this.arc,{oldAngle:this._slotAngle(0),startColor:this._getColor(0),newAngle:this._slotAngle(this.value()),endColor:this._getColor(this.value())}),i.play())},_buildVisual:function(){var e=this._visuals=new a,t=this._getCenter(),n=this._getColor(this.value())||this.theme.pointer.color,i=Math.min(t.x,t.y)-5-this.options.pointerWidth,r=new Circle([t.x,t.y],i+this.options.pointerWidth/2),o=this.circle=new Circle$1(r,{fill:{color:"none"},stroke:{color:this.theme.scale.rangePlaceholderColor,width:this.options.pointerWidth}});e.append(o),this.options.indeterminate?this.arc=this._createArc(360,i,t,n):this.arc=this._createArc(this._slotAngle(this.value()),i,t,n),e.append(this.arc)},_slotAngle:function(e){return(e-0)/100*360+90+180},_getColor:function(e){var n=this.options,i=n.colors,r=n.color,o=t.isNumber(e)?e:0;if(i)for(var a=0;a<i.length;a++){var s=i[a],l=s.color,h=s.from;void 0===h&&(h=0);var c=s.to;if(void 0===c&&(c=100),h<=o&&o<=c)return l}return r},_createArc:function(e,t,n,i){var o=this.options.pointerWidth,a=new Arc$1([n.x,n.y],{radiusX:t+o/2,radiusY:t+o/2,startAngle:270,endAngle:e});return new r(a,{stroke:{width:o,color:this.options.color||i,opacity:this.options.opacity}})},_centerTemplatePosition:function(e,t){var n,i,r=this._getSize(),o=this._getCenter(),a=o.x-e/2,s=o.y-t/2;return e<r.width&&(n=a+e,a=Math.max(a,0),n>r.width&&(a-=n-r.width)),t<r.height&&(i=s+t)>r.height&&(s-=i-r.height),{left:a,top:s}},_getCenter:function(){var e=this._getSize();return new t.Point(e.width/2,e.height/2)},_getSize:function(){var e=this.element,t=200,n=200,i=e[0].offsetWidth,r=e[0].offsetHeight;return i||(i=t),r||(r=n),{width:i,height:r}},_surfaceElement:function(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element[0].appendChild(this.surfaceElement)),this.surfaceElement},_initSurface:function(){var e=this.options,n=this.surface,i=this._surfaceElement(),r=this._getSize();t.elementSize(i,r),n?(this.surface.clear(),this.surface.resize()):this.surface=Surface.create(i,{type:e.renderAs})}});n.plugin(l)}(window.kendo.jQuery);var kendo$1=kendo;export{__meta__,kendo$1 as default};
//# sourceMappingURL=kendo.circularprogressbar.js.map
