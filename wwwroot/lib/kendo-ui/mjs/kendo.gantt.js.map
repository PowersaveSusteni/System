{"version":3,"file":"kendo.gantt.js","names":["__meta__","id","name","category","description","depends","$","undefined$1","kendo","window","keys","supportsMedia","mobileOS","support","Widget","ui","encode","htmlEncode","ObservableObject","data","ObservableArray","Query","isArray","Array","isFunction","extend","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","NS","TABINDEX","STRING","DOT","VIEWS_DROPDOWN_TEMPLATE","label","styles","views","viewsDropdown","viewsDropdownDefaults","Object","map","view","title","join","ADD_ACTIONS","text","ganttStyles","wrapper","plannedTasks","rowHeight","content","listWrapper","list","timelineWrapper","timeline","splitBar","splitter","popupWrapper","popupList","resizeHandle","icon","item","line","buttonDelete","buttonCancel","buttonSave","buttonToggle","buttonDefaults","primary","hovered","selected","focused","focusedCell","gridHeader","gridHeaderWrap","gridContent","tasks","popup","form","editForm","formContainer","resourcesFormContainer","message","buttonsContainer","button","editField","editLabel","resourcesField","toolbar","headerWrapper","footerWrapper","viewsWrapper","iconPlus","iconPdf","iconToggle","viewButton","link","pdfButton","appendButton","selector","uid","attr","focusTable","table","direct","parents","scrollPositions","parentsUntil","filter","index","element","getComputedStyles","overflow","add","each","parent","scrollTop","setActive","e","focus","Gantt","init","options","events","dataSource","fn","call","this","_events","_wrapper","_resources","length","_timeline","_processDefaults","_toolbar","_footer","_splitter","_adjustDimensions","_preventRefresh","_selectedViewName","_dataSource","_assignments","_list","_dependencies","_scrollable","_dataBind","_attachEvents","_createEditor","notify","_showWatermarkOverlay","autoBind","navigatable","selectable","editable","resizable","columnResizeHandleWidth","columns","dependencies","resources","assignments","taskTemplate","tooltip","visible","messages","save","cancel","destroy","deleteTaskConfirmation","deleteDependencyConfirmation","deleteTaskWindowTitle","deleteDependencyWindowTitle","selectView","day","week","month","year","start","end","actions","append","addChild","insertBefore","insertAfter","pdf","toggle","editor","editorTitle","resourcesEditorTitle","plannedStart","plannedEnd","percentComplete","assignButton","resourcesHeader","unitsHeader","addNew","percentCompleteHint","remove","actualStart","actualEnd","parentOptionLabel","general","predecessors","successors","other","dependencyType","switchText","offsetTooltipAdvanced","offsetTooltipDelay","seconds","minutes","hours","days","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","workWeekStart","workWeekEnd","hourSpan","snap","height","listWidth","showPlannedTasks","select","value","find","_selectionUpdate","clearSelection","unbind","_refreshHandler","_progressHandler","_errorHandler","_dependencyRefreshHandler","_dependencyErrorHandler","getKendoToolBar","footer","_editor","_resourceEditorWindow","_resizeDraggable","layout","_getGanttSplitter","off","_mediaQuery","removeListener","_mediaQueryHandler","_resizeHandler","setOptions","newOptions","deepExtend","selectedView","isSettings","type","empty","_setEvents","resize","bind","on","matches","kendoSplitter","orientation","panes","collapsible","scrollable","size","getKendoSplitter","width","addClass","appendTo","css","treelistWrapper","_viewClickHandler","target","trigger","preventDefault","_togglePane","that","treelist","contentSelector","is","removeClass","refresh","_resize","ns","viewsButtons","toolbarStyles","actionsMessages","defaults","menuButtons","m","attributes","class","click","_addClickHandler","open","_openAddClickHandler","saveAsPDF","showText","switchLabel","template","component","componentOptions","checked","change","_togglePlannedTasks","unchecked","viewsDdl","togglable","group","viewsGroup","current","toLowerCase","push","values","t","buttons","_viewsButtons","defaultCommands","_processTools","items","commands","tools","spacerPresent","create","c","splitbar","toolbarEl","_suppressResize","hide","show","viewsDropdownSelector","toolsOptions","prepend","kendoToolBar","defaultTools","parentMessages","matchMedia","addListener","val","toggleSwitch","direction","animation","effects","toolbarHeight","footerHeight","totalHeight","totalWidth","treeListVisible","splitBarWidth","treeListWidth","timelineWidth","children","_scrollTo","action","scrollTarget","closest","get","scrollIntoView","_addTask","orderId","task","_createNewModel","firstSlot","_timeSlots","set","_createTask","dataItem","taskParent","_getListEditable","update","reorder","mode","move","reorderable","clickMoveClick","_getListOptions","filterable","columnMenu","field","_attachResourceEditor","column","i","_resourcePopupEditor","_attachListEvents","oldIndex","newIndex","oldWidth","newWidth","_navigatable","model","container","cell","_preventItemChange","closeCell","key","updatedValues","previousTask","updateDuration","duration","updatePlannedDuration","plannedDuration","hasOwnProperty","getTime","isCurrentInHeader","currentIndex","rowIndex","updateInfo","hasChanges","cancelChanges","_updateAssignments","Math","max","cellIndex","_requestStart","sync","then","_tabPressed","td","tbody","eq","_setCurrent","sender","_updatePristineForModel","expanded","position","parentId","source","sort","dir","_updateTask","selection","listElement","listOptions","GanttList","prefix","edit","navigate","trimOptions","GanttTimeline","viewName","replace","viewsEl","getKendoButtonGroup","getByUid","resizeStart","dependency","predecessorId","predecessor","successorId","successor","_createDependency","currentUid","editTask","removeTask","summary","removeDependency","_error","GanttDataSource","refreshDependencies","GanttDependencyDataSource","dataTextField","dataColorField","dataFormatField","DataSource","_assignmentsRefreshHandler","dataTaskIdField","dataResourceIdField","dataValueField","gantt","PopupEditor","_createResourceEditor","cancelTask","saveTask","updateDependencies","buttonsEl","dialog","popupStyles","dialogEl","format","kendoButton","themeColor","updateModel","close","kendoWindow","modal","draggable","deactivate","center","unitsValidation","step","min","assignmentsModel","schema","resourceTextField","fields","Units","validation","_resourceEditor","ResourceEditor","r","range","_render","taskTree","_renderDependencies","date","_scrollToDate","_modelFromElement","setDataSource","fetch","setDependenciesDataSource","assignment","resource","taskId","resourceId","hasMatch","operator","toArray","_updateAssignment","splice","_removeAssignment","shift","j","newLength","_createAssignment","taskCopy","toJSON","_editTask","difference","hasResourceChanges","k","updated","u","some","concat","getDifference","dirty","_syncDataSource","_updateDependency","created","d","_preventDependencyRefresh","destroyed","resourceValueField","_taskConfirm","_removeTask","insert","_scrollToUid","resourceValue","_dependencyConfirm","_removeDependency","_removeTaskDependencies","_removeTaskAssignments","callback","_confirm","confirmation","showDialog","_progress","cachedUid","scrollToUid","cachedIndex","_selected","_assignResources","_renderTree","_current","assigments","applyTaskResource","setter","wrapTask","resourcedId","valueFormat","formatedValue","toString","color","_wrapResourceData","result","taskAssignments","valuePerResource","progress","headerSelector","timelineHeader","timelineContent","treeListHeader","treeListContent","scrollLeft","delta","wheelDeltaY","currentTarget","one","headerTable","contentTable","tables","isInput","ctrlKey","_focusTimeout","setTimeout","focusedIndex","keyCode","focusSequence","contains","F10","first","TAB","shiftKey","hasClass","last","DELETE","selectedTask","deleteAction","tagName","_viewByIndex","promises","when","apply","done","_adjustHeight","_renderCurrentTime","toggleClass","_setPlanned","PDFMixin","_drawPDF","listTableWidth","listTableHeight","toolbarsHeight","timelineTableWidth","clone","_drawPDFShadow","avoidLinks","plugin","jQuery","kendo$1"],"sources":["kendo.gantt.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import './kendo.data.js';\nimport './kendo.resizable.js';\nimport './kendo.switch.js';\nimport './kendo.gantt.data.js';\nimport './kendo.gantt.editors.js';\nimport './kendo.gantt.list.js';\nimport './kendo.gantt.timeline.js';\nimport './kendo.splitter.js';\nimport './kendo.pdf.js';\nimport './kendo.toolbar.js';\nimport './kendo.html.button.js';\n\nconst __meta__ = {\n    id: \"gantt\",\n    name: \"Gantt\",\n    category: \"web\",\n    description: \"The Gantt component.\",\n    depends: [ \"data\", \"resizable\", \"switch\", \"gantt.data\", \"gantt.editors\", \"gantt.list\", \"gantt.timeline\", \"pdf\", \"toolbar\", \"html.button\" ]\n};\n(function($, undefined$1) {\n\n    var kendo = window.kendo,\n        keys = kendo.keys,\n        supportsMedia = \"matchMedia\" in window,\n        mobileOS = kendo.support.mobileOS,\n        Widget = kendo.ui.Widget,\n        encode = kendo.htmlEncode,\n        ObservableObject = kendo.data.ObservableObject,\n        ObservableArray = kendo.data.ObservableArray,\n        Query = kendo.data.Query,\n        isArray = Array.isArray,\n        isFunction = kendo.isFunction,\n        extend = $.extend,\n        isPlainObject = $.isPlainObject,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        defaultIndicatorWidth = 3,\n\n        NS = \".kendoGantt\",\n        PERCENTAGE_FORMAT = \"p0\",\n        TABINDEX = \"tabIndex\",\n        STRING = \"string\",\n        DOT = \".\",\n        TASK_DELETE_CONFIRM = \"Are you sure you want to delete this task?\",\n        DEPENDENCY_DELETE_CONFIRM = \"Are you sure you want to delete this dependency?\",\n        VIEWS_DROPDOWN_TEMPLATE = ({ label, styles, views }) => `<select aria-label=\"${label}\" class=\"k-dropdown k-picker k-dropdown-list ${styles.viewsDropdown} ${styles.viewsDropdownDefaults}\">` +\n            `${Object.keys(views).map(view => '<option value=\"' + view + '\">' + kendo.htmlEncode(views[view].title) + '</option>').join(\"\")}` +\n        '</select>',\n        MIN_SCREEN = \"(max-width: 480px)\",\n        ADD_ACTIONS = [{\n            data: \"add\",\n            text: \"addChild\"\n        },\n        {\n            data: \"insert-before\",\n            text: \"insertBefore\"\n        },\n        {\n            data: \"insert-after\",\n            text: \"insertAfter\"\n        }];\n\n    var ganttStyles = {\n        wrapper: \"k-gantt\",\n        plannedTasks: \"k-gantt-planned\",\n        rowHeight: \"k-gantt-rowheight\",\n        content: \"k-gantt-content\",\n        listWrapper: \"k-gantt-treelist\",\n        list: \"k-gantt-treelist\",\n        timelineWrapper: \"k-gantt-timeline-pane\",\n        timeline: \"k-gantt-timeline-pane\",\n        splitBar: \"k-splitbar\",\n        splitter: \"k-splitter\",\n        popupWrapper: \"k-list-container\",\n        popupList: \"k-list k-reset\",\n        resizeHandle: \"k-resize-handle\",\n        icon: \"k-icon\",\n        item: \"k-item\",\n        line: \"k-gantt-line\",\n        buttonDelete: \"k-gantt-delete\",\n        buttonCancel: \"k-gantt-cancel\",\n        buttonSave: \"k-gantt-update\",\n        buttonToggle: \"k-gantt-toggle\",\n        buttonDefaults: \"k-button-md k-rounded-md k-button-solid\",\n        primary: \"k-button-solid-primary\",\n        hovered: \"k-hover\",\n        selected: \"k-selected\",\n        focused: \"k-focus\",\n        focusedCell: \"k-focus\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        tasks: \"k-gantt-tasks\",\n        popup: {\n            form: \"k-popup-edit-form\",\n            editForm: \"k-gantt-edit-form\",\n            formContainer: \"k-edit-form-container\",\n            resourcesFormContainer: \"k-resources-form-container\",\n            message: \"k-popup-message\",\n            buttonsContainer: \"k-edit-buttons\",\n            button: \"k-button\",\n            editField: \"k-edit-field\",\n            editLabel: \"k-edit-label\",\n            resourcesField: \"k-gantt-resources\"\n        },\n        toolbar: {\n            headerWrapper: \"k-gantt-header k-gantt-toolbar\",\n            footerWrapper: \"k-gantt-footer k-gantt-toolbar\",\n            toolbar: \"k-gantt-toolbar\",\n            views: \"k-gantt-views\",\n            viewsWrapper: \"k-gantt-views-wrapper\",\n            viewsDropdown: \"k-views-dropdown\",\n            viewsDropdownDefaults: \"k-picker-solid k-rounded-md\",\n            button: \"k-button\",\n            buttonToggle: \"k-gantt-toggle\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid\",\n            iconPlus: \"plus\",\n            iconPdf: \"file-pdf\",\n            iconToggle: \"layout-1-by-4\",\n            viewButton: \"k-view\",\n            link: \"k-link\",\n            pdfButton: \"k-gantt-pdf\",\n            appendButton: \"k-gantt-create\"\n        }\n    };\n\n    function selector(uid) {\n        return \"[\" + kendo.attr(\"uid\") + (uid ? \"='\" + uid + \"']\" : \"]\");\n    }\n\n    function trimOptions(options) {\n        delete options.name;\n        delete options.prefix;\n\n        delete options.remove;\n        delete options.edit;\n        delete options.add;\n        delete options.navigate;\n\n        return options;\n    }\n\n    function getDifference(updated, current) {\n        return updated.filter(u => !current.some(c => c.id === u.id && c.value === u.value))\n        .concat(current.filter(c => !updated.some(u => u.id === c.id && c.value === u.value)));\n    }\n\n    function focusTable(table, direct) {\n        var wrapper = table.parents('[' + kendo.attr(\"role\") + '=\"gantt\"]');\n        var scrollPositions = [];\n        var parents = scrollableParents(wrapper);\n\n        table.attr(TABINDEX, 0);\n\n        if (direct) {\n            parents.each(function(index, parent) {\n                scrollPositions[index] = $(parent).scrollTop();\n            });\n        }\n\n        try {\n            //The setActive method does not cause the document to scroll to the active object in the current page\n            table[0].setActive();\n        } catch (e) {\n            table[0].focus();\n        }\n\n        if (direct) {\n            parents.each(function(index, parent) {\n                $(parent).scrollTop(scrollPositions[index]);\n            });\n        }\n    }\n\n    function scrollableParents(element) {\n        return $(element).parentsUntil(\"body\")\n                .filter(function(index, element) {\n                    var computedStyle = kendo.getComputedStyles(element, [\"overflow\"]);\n                    return computedStyle.overflow != \"visible\";\n                })\n                .add(window);\n    }\n\n    var Gantt = Widget.extend({\n        init: function(element, options, events) {\n            if (isArray(options)) {\n                options = { dataSource: options };\n            }\n\n            Widget.fn.init.call(this, element, options);\n\n            if (events) {\n                this._events = events;\n            }\n\n            this._wrapper();\n\n            this._resources();\n\n            if (!this.options.views || !this.options.views.length) {\n                this.options.views = [\"day\", \"week\", \"month\"];\n            }\n\n            this._timeline();\n\n            this._processDefaults();\n            this._toolbar();\n            this._footer();\n            this._splitter();\n\n            this._adjustDimensions();\n\n            // Prevent extra refresh from setting the view\n            this._preventRefresh = true;\n\n            this.view(this.timeline._selectedViewName);\n\n            this._preventRefresh = false;\n\n            this._dataSource();\n\n            this._assignments();\n\n            this._list();\n\n            this._dependencies();\n\n            this._scrollable();\n\n            this._dataBind();\n\n            this._attachEvents();\n\n            this._createEditor();\n\n            kendo.notify(this);\n\n            if (this._showWatermarkOverlay) {\n                this._showWatermarkOverlay(this.wrapper[0]);\n            }\n        },\n\n        events: [\n            \"dataBinding\",\n            \"dataBound\",\n            \"add\",\n            \"edit\",\n            \"remove\",\n            \"cancel\",\n            \"save\",\n            \"change\",\n            \"navigate\",\n            \"moveStart\",\n            \"move\",\n            \"moveEnd\",\n            \"resizeStart\",\n            \"resize\",\n            \"resizeEnd\",\n            \"columnHide\",\n            \"columnReorder\",\n            \"columnResize\",\n            \"columnShow\",\n            \"togglePlannedTasks\"\n        ],\n\n        options: {\n            name: \"Gantt\",\n            autoBind: true,\n            navigatable: true,\n            selectable: true,\n            editable: true,\n            resizable: false,\n            columnResizeHandleWidth: defaultIndicatorWidth,\n            columns: [],\n            views: [],\n            dataSource: {},\n            dependencies: {},\n            resources: {},\n            assignments: {},\n            taskTemplate: null,\n            tooltip: {\n                visible: true\n            },\n            messages: {\n                save: \"Save\",\n                cancel: \"Cancel\",\n                destroy: \"Delete\",\n                deleteTaskConfirmation: TASK_DELETE_CONFIRM,\n                deleteDependencyConfirmation: DEPENDENCY_DELETE_CONFIRM,\n                deleteTaskWindowTitle: \"Delete task\",\n                deleteDependencyWindowTitle: \"Delete dependency\",\n                selectView: \"Select view\",\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    month: \"Month\",\n                    year: \"Year\",\n                    start: \"Start\",\n                    end: \"End\"\n                },\n                actions: {\n                    append: \"Add Task\",\n                    addChild: \"Add Child\",\n                    insertBefore: \"Add Above\",\n                    insertAfter: \"Add Below\",\n                    pdf: \"Export to PDF\",\n                    toggle: \"Toggle pane\"\n                },\n                editor: {\n                    editorTitle: \"Task\",\n                    resourcesEditorTitle: \"Resources\",\n                    title: \"Title\",\n                    start: \"Start\",\n                    end: \"End\",\n                    plannedStart: \"Planned Start\",\n                    plannedEnd: \"Planned End\",\n                    percentComplete: \"Complete\",\n                    resources: \"Resources\",\n                    assignButton: \"Assign\",\n                    resourcesHeader: \"Resources\",\n                    unitsHeader: \"Units\",\n                    parent: \"Parent\",\n                    addNew: \"Add\",\n                    name: \"Name\",\n                    percentCompleteHint: \"value from 0 to 1\",\n                    remove: \"Remove\",\n                    actualStart: \"Actual Start\",\n                    actualEnd: \"Actual End\",\n                    parentOptionLabel: \"-None-\",\n                    general: \"General\",\n                    predecessors: \"Predecessors\",\n                    successors: \"Successors\",\n                    other: \"Other\",\n                    dependencyType: \"Type\"\n                },\n                plannedTasks: {\n                    switchText: \"Planned Tasks\",\n                    offsetTooltipAdvanced: \"Met deadline earlier\",\n                    offsetTooltipDelay: \"Delay\",\n                    seconds: \"seconds\",\n                    minutes: \"minutes\",\n                    hours: \"hours\",\n                    days: \"days\"\n                }\n            },\n            showWorkHours: true,\n            showWorkDays: true,\n            toolbar: null,\n            workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n            workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            hourSpan: 1,\n            snap: true,\n            height: 600,\n            listWidth: \"30%\",\n            rowHeight: null,\n            showPlannedTasks: false\n        },\n\n        select: function(value) {\n            var list = this.list;\n\n            if (!value) {\n                return list.select();\n            }\n\n            if (typeof value === STRING) {\n                value = list.content.find(value);\n            }\n\n            list.select(value);\n            this._selectionUpdate();\n\n            return;\n        },\n\n        clearSelection: function() {\n            this.list.clearSelection();\n            this._selectionUpdate();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            if (this.dataSource) {\n                this.dataSource.unbind(\"change\", this._refreshHandler);\n                this.dataSource.unbind(\"progress\", this._progressHandler);\n                this.dataSource.unbind(\"error\", this._errorHandler);\n            }\n\n            if (this.dependencies) {\n                this.dependencies.unbind(\"change\", this._dependencyRefreshHandler);\n                this.dependencies.unbind(\"error\", this._dependencyErrorHandler);\n            }\n\n            if (this.timeline) {\n                this.timeline.unbind();\n                this.timeline.destroy();\n            }\n\n            if (this.list) {\n                this.list.unbind();\n                this.list.destroy();\n            }\n\n            if (this.toolbar && this.toolbar.getKendoToolBar()) {\n                this.toolbar.getKendoToolBar().destroy();\n            }\n\n            if (this.footer && this.footer.getKendoToolBar()) {\n                this.footer.getKendoToolBar().destroy();\n            }\n\n            if (this._editor) {\n                this._editor.destroy();\n            }\n\n            if (this._resourceEditorWindow) {\n                this._resourceEditorWindow.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            if (this.layout && this._getGanttSplitter()) {\n                this._getGanttSplitter().destroy();\n            }\n\n            this.toolbar.off(NS);\n\n            if (supportsMedia) {\n                this._mediaQuery.removeListener(this._mediaQueryHandler);\n                this._mediaQuery = null;\n            }\n\n            $(window).off(\"resize\" + NS, this._resizeHandler);\n            $(this.wrapper).off(NS);\n\n            this.toolbar = null;\n            this.footer = null;\n\n            kendo.destroy(this.element);\n        },\n\n        setOptions: function(options) {\n            var newOptions = kendo.deepExtend({}, this.options, options);\n\n            var events = this._events;\n\n            if (!options.views) {\n                var selectedView = this.view().name;\n\n                newOptions.views = $.map(this.options.views, function(view) {\n                    var isSettings = isPlainObject(view);\n                    var name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                    if (selectedView === name) {\n                        if (isSettings) {\n                            view.selected = true;\n                        } else {\n                            view = { type: name, selected: true };\n                        }\n                    } else if (isSettings) {\n                        view.selected = false;\n                    }\n\n                    return view;\n                });\n            }\n\n            if (!options.dataSource) { newOptions.dataSource = this.dataSource; }\n            if (!options.dependencies) { newOptions.dependencies = this.dependencies; }\n            if (!options.resources) { newOptions.resources = this.resources; }\n            if (!options.assignments) { newOptions.assignments = this.assignments; }\n\n            this.destroy();\n            this.element.empty();\n            this.options = null;\n\n            this.init(this.element, newOptions, events);\n\n            Widget.fn._setEvents.call(this, newOptions);\n        },\n\n        _attachEvents: function() {\n            this._resizeHandler = this.resize.bind(this, false);\n            $(window).on(\"resize\" + NS, this._resizeHandler);\n\n            if (supportsMedia) {\n                this._mediaQueryHandler({ matches: this._mediaQuery.matches });\n            }\n        },\n\n        _splitter: function() {\n            this.splitter = this.layout.find(\".k-gantt-splitter\").kendoSplitter({\n                navigatable: this.options.navigatable,\n                orientation: \"horizontal\",\n                panes: [\n                    { collapsible: false, scrollable: false, label: \"Gantt List\", size: this.options.listWidth },\n                    { collapsible: false, scrollable: false, label: \"Gantt Timeline\" }\n                ]\n            }).getKendoSplitter();\n\n            if (this.options.listWidth) {\n                this.splitter.size(\".k-pane:first\", this.options.listWidth);\n            }\n        },\n        _getGanttSplitter: function() {\n            return this.layout.find(\".k-gantt-splitter\").getKendoSplitter();\n        },\n\n        _wrapper: function() {\n            var ganttStyles = Gantt.styles;\n            var options = this.options;\n            var height = options.height;\n            var width = options.width;\n\n            this.wrapper = this.element.addClass(ganttStyles.wrapper).attr(\"role\", \"application\");\n            let splitter = $(\"<div class='k-gantt-splitter'></div>\")\n                .append(\"<div class='\" + ganttStyles.listWrapper + \"'><div></div></div>\")\n                .append(\"<div class='\" + ganttStyles.timelineWrapper + \"'><div></div></div>\");\n            this.layout = $(\"<div class='\" + ganttStyles.content + \"'></div>\").appendTo(this.wrapper)\n                .append(splitter);\n\n            if (options.showPlannedTasks) {\n                this.wrapper.addClass(ganttStyles.plannedTasks);\n            }\n\n            if (height) {\n                this.wrapper.css(\"height\", height);\n            }\n\n            if (width) {\n                this.wrapper.css(\"width\", width);\n            }\n\n            if (options.rowHeight) {\n                this.wrapper.addClass(ganttStyles.rowHeight);\n            }\n\n            this.treelistWrapper = this.wrapper.find(DOT + ganttStyles.list);\n            this.timelineWrapper = this.wrapper.find(DOT + ganttStyles.timeline);\n\n            this.treelistWrapper.css(\"width\", options.listWidth);\n            this.timelineWrapper.css(\"width\", this.wrapper.width() - this.treelistWrapper.outerWidth());\n        },\n\n        _viewClickHandler: function(e) {\n            var list = this.list;\n            var name = e.target.attr(kendo.attr(\"name\"));\n\n            if (list.editor && !list.editor.end()) {\n                return;\n            }\n\n            if (!this.trigger(\"navigate\", { view: name })) {\n                this.view(name);\n            } else {\n                e.preventDefault();\n            }\n        },\n\n        _togglePane: function(e) {\n            var that = this,\n                treelist = that.treelistWrapper,\n                timeline = that.timelineWrapper,\n                contentSelector = DOT + ganttStyles.gridContent;\n\n            e.preventDefault();\n\n            if (treelist.is(\":visible\")) {\n                treelist.addClass(\"k-hidden\");\n                timeline.removeClass(\"k-hidden\");\n\n                that.refresh();\n\n                timeline\n                    .find(contentSelector)\n                    .scrollTop(that.scrollTop);\n            } else {\n                treelist.removeClass(\"k-hidden\");\n                timeline.addClass(\"k-hidden\");\n\n                treelist\n                    .find(contentSelector)\n                    .scrollTop(that.scrollTop);\n            }\n\n            that._resize();\n        },\n\n        _processDefaults: function() {\n            var that = this,\n                views = that.timeline.views,\n                ns = kendo.ns,\n                viewsButtons = [],\n                toolbarStyles = Gantt.styles.toolbar,\n                actionsMessages = this.options.messages.actions,\n                items = ADD_ACTIONS.map((m) => ({\n                    text: actionsMessages[m.text],\n                    attributes: { \"data-type\": m.data }\n                })),\n                defaults = {\n                    append: {\n                        name: \"append\",\n                        type: \"dropDownButton\",\n                        menuButtons: items,\n                        icon: toolbarStyles.iconPlus,\n                        attributes: {\n                            class: toolbarStyles.appendButton\n                        },\n                        click: that._addClickHandler.bind(that),\n                        open: that._openAddClickHandler.bind(that)\n                    },\n                    pdf: {\n                        name: \"pdf\",\n                        type: \"button\",\n                        attributes: {\n                            class: toolbarStyles.pdfButton\n                        },\n                        icon: toolbarStyles.iconPdf,\n                        click: that.saveAsPDF.bind(that)\n                    },\n                    toggle: {\n                        name: \"toggle\",\n                        type: \"button\",\n                        showText: \"overflow\",\n                        attributes: {\n                            class: \"k-gantt-toggle\"\n                        },\n                        icon: toolbarStyles.iconToggle,\n                        click: that._togglePane.bind(that)\n                    },\n                    switchLabel: {\n                        template: \"<label for=planned-switch>\" + that.options.messages.plannedTasks.switchText + \"</label>\"\n                    },\n                    plannedTasks: {\n                        type: \"component\",\n                        component: \"Switch\",\n                        element: \"<input id='planned-switch' class='k-gantt-planned-switch'>\",\n                        componentOptions: {\n                            checked: that.options.showPlannedTasks,\n                            change: that._togglePlannedTasks.bind(that),\n                            messages: {\n                                checked: \"\",\n                                unchecked: \"\"\n                            }\n                        }\n                    },\n                    viewsDdl: {\n                        template: VIEWS_DROPDOWN_TEMPLATE({\n                            views: that.timeline.views,\n                            styles: toolbarStyles,\n                            label: that.options.messages.selectView\n                        })\n                    },\n                    view: {\n                        name: \"view\",\n                        type: \"button\",\n                        togglable: true,\n                        group: \"views\"\n                    },\n                    viewsGroup: {\n                        type: \"buttonGroup\",\n                        attributes: {\n                            class: toolbarStyles.views\n                        }\n                    }\n                };\n\n            Object.keys(views).map(name => {\n                var current = $.extend(true, {}, defaults.view);\n\n                current.text = views[name].title;\n                current.attributes = {\n                    class: \"k-view-\" + name.toLowerCase()\n                };\n                current.attributes[\"data\" + ns + \"-name\"] = name;\n\n                defaults[name] = current;\n\n                viewsButtons.push(name);\n            });\n\n            Object.values(defaults).map(t => {\n                if (t.name === \"view\") {\n                    t.click = that._viewClickHandler.bind(that);\n                }\n            });\n\n            defaults.viewsGroup.buttons = viewsButtons;\n\n            that._viewsButtons = viewsButtons;\n            that.defaultCommands = defaults;\n        },\n\n        _processTools: function(items) {\n            var editable = this.options.editable,\n                commands = [],\n                tools = [\"toggle\"],\n                spacerPresent = false,\n                defaults = this.defaultCommands;\n\n            if (!Array.isArray(items)) {\n                if (editable && editable.create !== false) {\n                    tools.push(\"append\");\n                }\n            } else {\n                commands = items;\n            }\n\n            commands.map(c => {\n                if (c === \"plannedTasks\" || c.name === \"plannedTasks\") {\n                    spacerPresent = true;\n\n                    tools.push({\n                        type: \"spacer\"\n                    });\n\n                    tools.push(\"switchLabel\");\n                }\n\n                if (!defaults[c] && !defaults[c.name] && !c.template) {\n                    if (typeof c === STRING) {\n                        c = {\n                            name: c,\n                            type: \"button\",\n                            text: c,\n                            attributes: {\n                                class: \"k-gantt-\" + c\n                            }\n                        };\n                    } else {\n                        c = $.extend({}, {\n                            type: \"button\",\n                            text: c.name,\n                            attributes: {\n                                class: \"k-gantt-\" + c.name\n                            }\n                        }, c);\n                    }\n                }\n\n                tools.push(c);\n            });\n\n            if (!spacerPresent) {\n                tools.push({\n                    type: \"spacer\"\n                });\n            }\n\n            if (this._viewsButtons && this._viewsButtons.length > 0) {\n                if (this._viewsButtons.length > 1) {\n                    tools.push(\"viewsDdl\");\n                }\n\n                tools.push(\"viewsGroup\");\n            }\n\n            return tools;\n        },\n\n        _mediaQueryHandler: function(e) {\n            var that = this;\n            var splitbar = that.layout.find(\".k-splitbar\");\n            var splitter = that._getGanttSplitter();\n            var treelist = that.treelistWrapper;\n            var timeline = that.timelineWrapper;\n            var contentSelector = DOT + ganttStyles.gridContent;\n\n            var toolbarEl = that.toolbar;\n            var toolbar = toolbarEl.getKendoToolBar();\n\n            if (e.matches) {\n                treelist.addClass(\"k-hidden\");\n                splitbar.addClass(\"k-hidden\");\n                splitter._suppressResize = true;\n                toolbar.hide(toolbarEl.find(\".k-gantt-views\"));\n                toolbar.show(toolbarEl.find(\".k-views-dropdown\"));\n\n                treelist.width(\"100%\");\n            } else {\n                splitter._suppressResize = false;\n                treelist.removeClass(\"k-hidden\");\n                splitbar.removeClass(\"k-hidden\");\n                timeline.removeClass(\"k-hidden\");\n\n                toolbar.show(toolbarEl.find(\".k-gantt-views\"));\n                toolbar.hide(toolbarEl.find(\".k-views-dropdown\"));\n\n                treelist.width(treelist.outerWidth());\n\n                timeline\n                    .find(contentSelector)\n                    .scrollTop(that.scrollTop);\n            }\n\n            that._resize();\n        },\n\n        _toolbar: function() {\n            var that = this;\n            var ganttStyles = Gantt.styles;\n            var viewsDropdownSelector = DOT + ganttStyles.toolbar.viewsDropdown;\n            var toolsOptions = this.options.toolbar;\n            var tools;\n            var toolbar;\n\n            if (typeof toolsOptions === STRING) {\n                toolsOptions = kendo.template(toolsOptions).bind(this);\n            }\n\n            if (isFunction(toolsOptions)) {\n                tools = this._processTools([{\n                    template: toolsOptions({})\n                }]);\n            } else {\n                tools = this._processTools(toolsOptions);\n            }\n\n            toolbar = $(\"<div class='\" + ganttStyles.toolbar.headerWrapper + \"'>\");\n\n            this.wrapper.prepend(toolbar);\n            this.toolbar = toolbar;\n\n            toolbar.kendoToolBar({\n                resizable: false,\n                tools: tools,\n                size: \"medium\",\n                defaultTools: this.defaultCommands,\n                parentMessages: this.options.messages.actions\n            });\n\n            if (supportsMedia) {\n                this._mediaQuery = window.matchMedia(MIN_SCREEN);\n                this._mediaQuery.addListener(this._mediaQueryHandler.bind(this));\n            }\n\n            toolbar.on(\"change\" + NS, viewsDropdownSelector, function() {\n                var list = that.list;\n                var name = $(this).val();\n\n                if (list.editable && list.editable.trigger(\"validate\")) {\n                    return;\n                }\n\n                if (!that.trigger(\"navigate\", { view: name })) {\n                    that.view(name);\n                }\n            });\n\n            this.toggleSwitch = toolbar.find('input.k-gantt-planned-switch').data(\"kendoSwitch\");\n        },\n\n        _footer: function() {\n            var editable = this.options.editable;\n\n            if (!editable || editable.create === false) {\n                return;\n            }\n\n            var ganttStyles = Gantt.styles.toolbar;\n            var messages = this.options.messages.actions;\n            var footer = $(\"<div class='\" + ganttStyles.footerWrapper + \"'>\");\n\n            this.wrapper.append(footer);\n            this.footer = footer;\n\n            footer.kendoToolBar({\n                resizable: false,\n                size: \"medium\",\n                tools: [\"append\"],\n                defaultTools: {\n                    append: extend(true, {}, this.defaultCommands.append, {\n                        direction: \"up\",\n                        animation: {\n                            open: {\n                                effects: \"slideIn:up\"\n                            }\n                        }\n                    })\n                },\n                parentMessages: messages\n            });\n        },\n\n        _adjustDimensions: function() {\n            var element = this.element;\n            var toolbarHeight = outerHeight(this.toolbar);\n            var footerHeight = this.footer ? outerHeight(this.footer) : 0;\n            var totalHeight = element.height();\n            var totalWidth = element.width();\n            var treeListVisible = this.treelistWrapper.is(\":visible\");\n            var splitBar = this.layout.find(\".k-splitbar\");\n            var splitBarWidth = splitBar.is(\":visible\") ? outerWidth(splitBar) : 0;\n            var treeListWidth = treeListVisible ? outerWidth(this.treelistWrapper) : 0;\n            var timelineWidth = totalWidth - ( treeListWidth + splitBarWidth );\n\n            this.layout.children().height(totalHeight - (toolbarHeight + footerHeight));\n            this.timelineWrapper.width(timelineWidth);\n            if (!treeListVisible) {\n                this.timelineWrapper.css(\"left\", 0);\n            }\n\n            if (totalWidth < (treeListWidth + splitBarWidth)) {\n                this.treelistWrapper.width(totalWidth - splitBarWidth);\n            }\n        },\n\n        _scrollTo: function(value) {\n            var view = this.timeline.view();\n            var list = this.list;\n            var attr = kendo.attr(\"uid\");\n            var id = typeof value === \"string\" ? value :\n                value.closest(\"tr\" + selector()).attr(attr);\n            var action;\n            var scrollTarget;\n            var scrollIntoView = function() {\n                if (scrollTarget.length !== 0) {\n                    action();\n                }\n            };\n\n            if (view.content.is(\":visible\")) {\n                scrollTarget = view.content.find(selector(id));\n                action = function() {\n                    view._scrollTo(scrollTarget);\n                };\n            } else {\n                scrollTarget = list.element.find(selector(id));\n                action = function() {\n                    scrollTarget.get(0).scrollIntoView();\n                };\n            }\n\n            scrollIntoView();\n        },\n\n        _addTask: function(selected, parent, type) {\n            var dataSource = this.dataSource,\n                task = dataSource._createNewModel({}),\n                timeline = this.timeline,\n                firstSlot = timeline.view()._timeSlots()[0],\n                editable = this.list.editor,\n                orderId;\n\n            if (editable && editable.trigger(\"validate\")) {\n                return;\n            }\n\n            task.set(\"title\", \"New task\");\n\n            if (parent) {\n                task.set(\"parentId\", parent.get(\"id\"));\n                task.set(\"start\", parent.get(\"start\"));\n                task.set(\"end\", parent.get(\"end\"));\n                task.set(\"plannedStart\", parent.get(\"plannedStart\"));\n                task.set(\"plannedEnd\", parent.get(\"plannedEnd\"));\n            } else {\n                task.set(\"start\", firstSlot.start);\n                task.set(\"end\", firstSlot.end);\n            }\n\n            if (type && type !== \"add\") {\n                orderId = selected.get(\"orderId\");\n                orderId = type === \"insert-before\" ? orderId : orderId + 1;\n            }\n\n            this._createTask(task, orderId);\n        },\n\n        _addClickHandler: function(e) {\n            var type = e.target.data(\"type\");\n            var dataSource = this.dataSource;\n            var selected = this.dataItem(this.select());\n            var parent = dataSource.taskParent(selected);\n            var target = type === \"add\" ? selected : parent;\n\n            this._addTask(selected, target, type);\n        },\n\n        _openAddClickHandler: function(e) {\n            var selected = this.select();\n\n            if (!selected || selected.length === 0) {\n                e.preventDefault();\n\n                this._addTask();\n            }\n        },\n\n        _getListEditable: function() {\n            var editable = false,\n                options = this.options;\n\n            if (options.editable !== false) {\n                editable = \"incell\";\n\n                if (options.editable && options.editable.update === false) {\n                    editable = false;\n                } else {\n                    if (!options.editable || options.editable.reorder !== false) {\n                        editable = {\n                            mode: \"incell\",\n                            move: {\n                                reorderable: true,\n                                clickMoveClick: options.editable.clickMoveClick === false ? false : true\n                            }\n                        };\n                    }\n                }\n            }\n\n            return editable;\n        },\n\n        _getListOptions: function() {\n            var options = this.options,\n                editable = this._getListEditable(),\n                listWrapper = this.wrapper.find(DOT + ganttStyles.list),\n                ganttListOptions = {\n                    columns: options.columns || [],\n                    dataSource: this.dataSource,\n                    navigatable: options.navigatable,\n                    selectable: options.selectable,\n                    reorderable: options.reorderable,\n                    editable: editable,\n                    resizable: options.resizable,\n                    filterable: options.filterable,\n                    columnMenu: options.columnMenu,\n                    columnResizeHandleWidth: this.options.columnResizeHandleWidth,\n                    listWidth: outerWidth(listWrapper),\n                    resourcesField: this.resources.field,\n                    rowHeight: this.options.rowHeight\n                };\n\n            return ganttListOptions;\n        },\n\n        _attachResourceEditor: function(columns) {\n            var column;\n\n            for (var i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.field === this.resources.field && typeof column.editor !== \"function\") {\n                    column.editor = this._resourcePopupEditor.bind(this);\n                }\n            }\n        },\n\n        _attachListEvents: function() {\n            var that = this;\n\n            that.list\n                .bind(\"columnShow\", function(e) {\n                    that.trigger(\"columnShow\", { column: e.column });\n                })\n                .bind(\"columnHide\", function(e) {\n                    that.trigger(\"columnHide\", { column: e.column });\n                })\n                .bind(\"columnReorder\", function(e) {\n                    that.trigger(\"columnReorder\", { column: e.column, oldIndex: e.oldIndex, newIndex: e.newIndex });\n                })\n                .bind(\"columnResize\", function(e) {\n                    that.trigger(\"columnResize\", { column: e.column, oldWidth: e.oldWidth, newWidth: e.newWidth });\n                })\n                .bind(\"render\", function() {\n                    that._navigatable();\n                 }, true)\n                .bind(\"beforeEdit\", function(e) {\n\n                    if (that.trigger(\"edit\", { task: e.model, container: e.container })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"cancel\", function(e) {\n                    if (that.trigger(\"cancel\", { task: e.model, container: e.cell })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    that._preventItemChange = true;\n                    that.list.closeCell(true);\n                })\n                .bind(\"save\", function(e) {\n                    var updatedValues = e.values,\n                        key;\n\n                    that.previousTask = {};\n                    that._preventRefresh = true;\n\n                    if (that.updateDuration === null || that.updateDuration === undefined$1) {\n                        that.updateDuration = e.model.duration();\n                    }\n\n                    if (that.updatePlannedDuration === null || that.updatePlannedDuration === undefined$1) {\n                        that.updatePlannedDuration = e.model.plannedDuration();\n                    }\n\n                    if (updatedValues.hasOwnProperty(\"start\")) {\n                        updatedValues.end = new Date(updatedValues.start.getTime() + that.updateDuration);\n                    }\n\n                    if (updatedValues.hasOwnProperty(\"plannedStart\") && updatedValues.plannedStart) {\n                        updatedValues.plannedEnd = new Date(updatedValues.plannedStart.getTime() + that.updatePlannedDuration);\n                    }\n\n                    for (key in updatedValues) {\n                        if (updatedValues.hasOwnProperty(key)) {\n                            that.previousTask[key] = e.model.get(key);\n                        }\n                    }\n\n                    that.updatedValues = updatedValues;\n                })\n                .bind(\"itemChange\", function(e) {\n                    var updateInfo = that.updatedValues,\n                        task = e.data,\n                        resourcesField = that.resources.field,\n                        previousTask = that.previousTask,\n                        current,\n                        isCurrentInHeader,\n                        currentIndex,\n                        rowIndex,\n                        navigatable = that.options.navigatable,\n                        key;\n\n                    if (that._preventItemChange) {\n                        that._preventItemChange = false;\n                        return;\n                    }\n\n                    for (key in previousTask) {\n                        if (previousTask.hasOwnProperty(key)) {\n                            task.set(key, previousTask[key]);\n                        }\n                    }\n\n                    that.previousTask = {};\n\n                    if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                        if (updateInfo) {\n                            that._preventRefresh = true;\n                            that.dataSource.update(task, updateInfo);\n\n                            if (updateInfo[resourcesField]) {\n                                that._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                            }\n                        }\n\n                        if (navigatable) {\n                            current = $(that.list.current());\n                            isCurrentInHeader = current.is(\"th\");\n                            rowIndex = current.closest(\"tr\").index();\n                            currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.list.cellIndex(current), 0);\n                        }\n\n                        that._preventRefresh = false;\n                        that._requestStart();\n                        that.dataSource.sync().then(function() {\n                            if (that.options.navigatable && !that._tabPressed) {\n                                if (!isCurrentInHeader) {\n                                    var row = that.list.tbody.children().eq(rowIndex);\n\n                                    var td = row.find(\">td:visible\")\n                                        .eq(currentIndex);\n\n                                    that.list._setCurrent(td, false, true);\n                                }\n                            }\n                            that._tabPressed = false;\n                        });\n                    } else if (that.dataSource.hasChanges()) {\n                        that.dataSource.cancelChanges(task);\n                        that._preventRefresh = false;\n                        that.refresh();\n                    }\n\n                    that.updatedValues = null;\n                    that.updateDuration = null;\n                })\n                .bind(\"change\", function() {\n                    that.trigger(\"change\");\n\n                    that._selectionUpdate();\n\n                })\n                .bind(\"navigate\", function(e) {\n                    var treeList = e.sender;\n                    var current = treeList.current();\n                    var uid;\n\n                    that._scrollTo(current);\n                    that.timeline.element.find(\"div.k-task\").attr(\"tabindex\", \"-1\");\n                    uid = current.closest(\"tr\").attr(\"data-uid\");\n                    that.timeline.element.find(\"div.k-task[data-uid='\" + uid + \"']\").attr(\"tabindex\", \"0\");\n                })\n                .bind(\"expand\", function(e) {\n                    e.preventDefault();\n                    e.model.set(\"expanded\", true);\n                    // Update the pristine data as well. Otherwise, upon cancellation, the rows will collapse.\n                    that.dataSource._updatePristineForModel(e.model, { expanded: true });\n                })\n                .bind(\"collapse\", function(e) {\n                    e.preventDefault();\n                    e.model.set(\"expanded\", false);\n                    // Update the pristine data as well. Otherwise, upon cancellation, the rows will expand.\n                    that.dataSource._updatePristineForModel(e.model, { expanded: false });\n                })\n                .bind(\"dragend\", function(e) {\n                    var dataSource = that.dataSource,\n                        task, updateInfo;\n\n                    if (e.position === \"over\") {\n                        dataSource.cancelChanges();\n\n                        updateInfo = {\n                            parentId: e.source.parentId\n                        };\n\n                        task = dataSource.get(e.source.id);\n\n                        if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                            dataSource.update(task, updateInfo);\n                        }\n\n                        dataSource.sync();\n                    }\n                })\n                .bind(\"dataBound\", function() {\n                    if (that.dataSource.sort().length === 0) {\n                        that.dataSource.sort([{ field: \"orderId\", dir: \"asc\" }]);\n                    }\n                })\n                .bind(\"reorder\", function(e) {\n                    that._updateTask(e.task, e.updateInfo);\n                });\n        },\n\n        _selectionUpdate: function() {\n            var that = this,\n                selection = that.list.select();\n\n            if (selection.length) {\n                that.timeline.select(\"[data-uid='\" + selection.attr(\"data-uid\") + \"']\");\n            } else {\n                that.timeline.clearSelection();\n            }\n        },\n\n        _list: function() {\n            var ganttStyles = Gantt.styles,\n                listWrapper = this.wrapper.find(DOT + ganttStyles.list),\n                listElement = listWrapper.find(\"> div\"),\n                listOptions = this._getListOptions();\n\n            this._attachResourceEditor(listOptions.columns);\n\n            this.list = new kendo.ui.GanttList(listElement, listOptions);\n\n            this._attachListEvents();\n        },\n\n        _timeline: function() {\n            var that = this;\n            var ganttStyles = Gantt.styles;\n            var options = trimOptions(extend(true, { resourcesField: this.resources.field }, this.options));\n            var element = this.wrapper.find(DOT + ganttStyles.timeline + \" > div\");\n\n            this.timeline = new kendo.ui.GanttTimeline(element, options);\n\n            this.timeline\n                .bind(\"navigate\", function(e) {\n                    var viewName = e.view.replace(/\\./g, \"\\\\.\").toLowerCase();\n                    var viewsEl = that.toolbar.find(DOT + ganttStyles.toolbar.views);\n                    var viewsGroup = viewsEl.getKendoButtonGroup();\n\n                    if (viewsGroup) {\n                        viewsGroup.select(viewsEl.find(DOT + ganttStyles.toolbar.viewButton + \"-\" + viewName));\n                    }\n\n                    that.toolbar\n                        .find(DOT + ganttStyles.toolbar.viewsDropdown)\n                        .val(e.view);\n\n                    that.refresh();\n                })\n                .bind(\"moveStart\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (that.trigger(\"moveStart\", { task: e.task })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"move\", function(e) {\n                    var task = e.task;\n                    var start = e.start;\n                    var end = new Date(start.getTime() + task.duration());\n\n                    if (that.trigger(\"move\", { task: task, start: start, end: end })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"moveEnd\", function(e) {\n                    var task = e.task;\n                    var start = e.start;\n                    var end = new Date(start.getTime() + task.duration());\n\n                    if (!that.trigger(\"moveEnd\", { task: task, start: start, end: end })) {\n                        that._updateTask(that.dataSource.getByUid(task.uid), {\n                            start: start,\n                            end: end\n                        });\n                    }\n                })\n                .bind(\"resizeStart\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (that.trigger(\"resizeStart\", { task: e.task })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"resize\", function(e) {\n                    if (that.trigger(\"resize\", { task: e.task, start: e.start, end: e.end })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"resizeEnd\", function(e) {\n                    var task = e.task;\n                    var updateInfo = {};\n\n                    if (e.resizeStart) {\n                        updateInfo.start = e.start;\n                    } else {\n                        updateInfo.end = e.end;\n                    }\n\n                    if (!that.trigger(\"resizeEnd\", { task: task, start: e.start, end: e.end })) {\n                        that._updateTask(that.dataSource.getByUid(task.uid), updateInfo);\n                    }\n                })\n                .bind(\"percentResizeStart\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"percentResizeEnd\", function(e) {\n                    that._updateTask(that.dataSource.getByUid(e.task.uid), { percentComplete: e.percentComplete });\n                })\n                .bind(\"dependencyDragStart\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"dependencyDragEnd\", function(e) {\n                    var dependency = that.dependencies._createNewModel({\n                        type: e.type,\n                        predecessorId: e.predecessor.id,\n                        successorId: e.successor.id\n                    });\n\n                    that._createDependency(dependency);\n                })\n                .bind(\"select\", function(e) {\n                    var editable = that.list.editor,\n                        current = that.select(),\n                        currentUid;\n\n                    if (editable) {\n                        editable.end();\n                    }\n\n                    if (current && current.length) {\n                        currentUid = current.data(\"uid\");\n                    }\n\n                    if (currentUid !== e.uid) {\n                        that.select(\"[data-uid='\" + e.uid + \"']\");\n                        that.trigger(\"change\");\n                    }\n                })\n                .bind(\"editTask\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        return;\n                    }\n\n                    that.editTask(e.uid);\n                })\n                .bind(\"clear\", function() {\n                    that.clearSelection();\n                    that.trigger(\"change\");\n                })\n                .bind(\"removeTask\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        return;\n                    }\n\n                    that.removeTask(that.dataSource.getByUid(e.uid));\n                })\n                .bind(\"expand\", function(e) {\n                    var model = that.dataSource.getByUid(e.uid);\n                    if (model.summary && !model.get(\"expanded\")) {\n                        model.set(\"expanded\", true);\n                    } else {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"collapse\", function(e) {\n                    var model = that.dataSource.getByUid(e.uid);\n\n                    if (model.summary && model.get(\"expanded\")) {\n                        model.set(\"expanded\", false);\n                    } else {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"removeDependency\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        return;\n                    }\n\n                    that.removeDependency(that.dependencies.getByUid(e.uid));\n                });\n        },\n\n        _dataSource: function() {\n            var options = this.options;\n            var dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (this.dataSource && this._refreshHandler) {\n                this.dataSource\n                    .unbind(\"change\", this._refreshHandler)\n                    .unbind(\"progress\", this._progressHandler)\n                    .unbind(\"error\", this._errorHandler);\n            } else {\n                this._refreshHandler = this.refresh.bind(this);\n                this._progressHandler = this._requestStart.bind(this);\n                this._errorHandler = this._error.bind(this);\n            }\n\n            this.dataSource = kendo.data.GanttDataSource.create(dataSource)\n                .bind(\"change\", this._refreshHandler)\n                .bind(\"progress\", this._progressHandler)\n                .bind(\"error\", this._errorHandler);\n        },\n\n        _dependencies: function() {\n            var dependencies = this.options.dependencies || {};\n            var dataSource = isArray(dependencies) ? { data: dependencies } : dependencies;\n\n            if (this.dependencies && this._dependencyRefreshHandler) {\n                this.dependencies\n                    .unbind(\"change\", this._dependencyRefreshHandler)\n                    .unbind(\"error\", this._dependencyErrorHandler);\n            } else {\n                this._dependencyRefreshHandler = this.refreshDependencies.bind(this);\n                this._dependencyErrorHandler = this._error.bind(this);\n            }\n\n            this.dependencies = kendo.data.GanttDependencyDataSource.create(dataSource)\n                .bind(\"change\", this._dependencyRefreshHandler)\n                .bind(\"error\", this._dependencyErrorHandler);\n        },\n\n        _resources: function() {\n            var resources = this.options.resources;\n            var dataSource = resources.dataSource || {};\n\n            this.resources = {\n                field: \"resources\",\n                dataTextField: \"name\",\n                dataColorField: \"color\",\n                dataFormatField: \"format\"\n            };\n\n            extend(this.resources, resources);\n\n            this.resources.dataSource = kendo.data.DataSource.create(dataSource);\n        },\n\n        _assignments: function() {\n            var assignments = this.options.assignments;\n            var dataSource = assignments.dataSource || { };\n\n            if (this.assignments) {\n                this.assignments.dataSource\n                    .unbind(\"change\", this._assignmentsRefreshHandler);\n            } else {\n                this._assignmentsRefreshHandler = this.refresh.bind(this);\n            }\n\n            this.assignments = {\n                dataTaskIdField: \"taskId\",\n                dataResourceIdField: \"resourceId\",\n                dataValueField: \"value\"\n            };\n\n            extend(this.assignments, assignments);\n\n            this.assignments.dataSource = kendo.data.DataSource.create(dataSource);\n\n            this.assignments.dataSource\n                .bind(\"change\", this._assignmentsRefreshHandler);\n        },\n\n        _createEditor: function() {\n            var that = this;\n\n            var editor = this._editor = new kendo.gantt.PopupEditor(this.wrapper, extend({}, this.options, {\n                target: this,\n                resources: {\n                    field: this.resources.field,\n                    editor: this._createResourceEditor.bind(this)\n                }\n            }));\n\n            editor\n                .bind(\"cancel\", function(e) {\n                    var task = that.dataSource.getByUid(e.model.uid);\n\n                    if (that.trigger(\"cancel\", { container: e.container, task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (that.dependencies) {\n                        that.dependencies.filter({});\n                    }\n\n                    that.cancelTask();\n                    if (that.options.navigatable) {\n                        that.timeline.element.find('div[data-uid=\"' + e.model.uid + '\"]').trigger(\"focus\");\n                    }\n                })\n                .bind(\"edit\", function(e) {\n                    var task = that.dataSource.getByUid(e.model.uid);\n\n                    if (that.trigger(\"edit\", { container: e.container, task: task })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"save\", function(e) {\n                    var task = that.dataSource.getByUid(e.model.uid);\n\n                    that.saveTask(task, e.updateInfo, e.updateDependencies);\n                })\n                .bind(\"remove\", function(e) {\n                    that.removeTask(e.model.uid);\n                })\n                .bind(\"close\", function(options) {\n                    if (that.options.navigatable) {\n                        that.element.find('div[data-uid=\"' + options.window.attr(\"data-uid\") + '\"]').trigger(\"focus\");\n                    }\n                });\n        },\n\n        _resourcePopupEditor: function(container, options) {\n            var that = this,\n                editor = that._createResourceEditor($(\"<div>\"), options),\n                popupStyles = ganttStyles.popup,\n                wrapper = that.element,\n                dialogEl = $(kendo.format('<div class=\"' + popupStyles.formContainer + '\">')).appendTo(wrapper),\n                messages = that.options.messages,\n                buttonsEl, dialog;\n\n            dialogEl.append(editor.wrapper);\n            buttonsEl = $('<div class=\"' + popupStyles.buttonsContainer + '\">');\n            dialogEl.append(buttonsEl);\n\n            buttonsEl.append($(\"<button class='\" + ganttStyles.buttonSave + \"'>\" + encode(messages.save) + \"</button>\").kendoButton({\n                name: \"save\",\n                themeColor: \"primary\",\n                icon: \"save\",\n                click: () => {\n                    if (!editor.updateModel()) {\n                        return;\n                    }\n                    editor.trigger(\"save\", { model: editor.model });\n                    that._updateAssignments(editor.model.get(\"id\"), editor.model.get(that.resources.field));\n\n                    dialog.trigger(\"close\");\n                    dialog.close();\n                }\n            }));\n\n            buttonsEl.append($(\"<button class='\" + ganttStyles.buttonCancel + \"'>\" + encode(messages.cancel) + \"</button>\").kendoButton({\n                name: \"cancel\",\n                icon: \"cancel\",\n                click: () => {\n                    dialog.trigger(\"close\");\n                    dialog.close();\n                }\n            }));\n\n            this._resourceEditorWindow = dialog = dialogEl.kendoWindow({\n                modal: true,\n                resizable: false,\n                draggable: true,\n                visible: false,\n                title: messages.editor.resourcesEditorTitle,\n                deactivate: () => {\n                    editor.destroy();\n                    dialog.destroy();\n                    dialog.element.closest(\".k-window\").remove();\n                }\n            }).data(\"kendoWindow\");\n\n            dialog.center().open();\n\n            return editor;\n        },\n\n        _createResourceEditor: function(container, options) {\n            var that = this;\n            var model = options instanceof ObservableObject ? options : options.model;\n            var messages = this.options.messages;\n            var resourcesField = this.resources.field;\n            var unitsValidation = { step: 0.01, min: 0.01, max: 1 };\n            var assignmentsModel = this.assignments.dataSource.options.schema.model;\n            var resourceTextField = that.resources.dataTextField;\n            var resources = this.resources.dataSource.view();\n\n\n            if (assignmentsModel && assignmentsModel.fields.Units && assignmentsModel.fields.Units.validation) {\n                extend(true, unitsValidation, assignmentsModel.fields.Units.validation);\n            }\n\n            var editor = this._resourceEditor = new kendo.gantt.ResourceEditor(container, {\n                resourcesField: resourcesField,\n                unitsValidation: unitsValidation,\n                resources: resources.map(r => ({ value: r.id, text: r[resourceTextField] })),\n                model: model,\n                messages: extend({}, messages.editor)\n            });\n\n            return editor;\n        },\n\n        view: function(type) {\n            return this.timeline.view(type);\n        },\n\n        range: function(range) {\n            var dataSource = this.dataSource;\n            var view = this.view();\n            var timeline = this.timeline;\n\n            if (range) {\n                view.options.range = {\n                    start: range.start,\n                    end: range.end\n                };\n\n                timeline._render(dataSource.taskTree());\n                timeline._renderDependencies(this.dependencies.view());\n            }\n\n            return {\n                start: view.start,\n                end: view.end\n            };\n        },\n\n        date: function(date) {\n            var view = this.view();\n\n            if (date) {\n                view.options.date = date;\n                view._scrollToDate(date);\n            }\n\n            return view.options.date;\n        },\n\n        dataItem: function(value) {\n            if (!value) {\n                return null;\n            }\n\n            var list = this.list;\n            var element = list.element.find(value);\n\n            return list._modelFromElement(element);\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n\n            this._dataSource();\n\n            this.list.setDataSource(this.dataSource);\n\n            if (this.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        setDependenciesDataSource: function(dependencies) {\n            this.options.dependencies = dependencies;\n\n            this._dependencies();\n\n            if (this.options.autoBind) {\n                dependencies.fetch();\n            }\n        },\n\n        items: function() {\n            return this.wrapper.children(\".k-task\");\n        },\n\n        _updateAssignments: function(id, resources) {\n            var dataSource = this.assignments.dataSource;\n            var taskId = this.assignments.dataTaskIdField;\n            var resourceId = this.assignments.dataResourceIdField;\n            var hasMatch = false;\n            var assignments = new Query(dataSource.view())\n                .filter({\n                    field: taskId,\n                    operator: \"eq\",\n                    value: id\n                }).toArray();\n            var assignment;\n            var resource;\n            var value;\n\n            while (assignments.length) {\n                assignment = assignments[0];\n\n                for (var i = 0, length = resources.length; i < length; i++) {\n                    resource = resources[i];\n\n                    if (assignment.get(resourceId) === resource.get(\"id\")) {\n                        value = resources[i].get(\"value\");\n                        this._updateAssignment(assignment, value);\n                        resources.splice(i, 1);\n                        hasMatch = true;\n                        break;\n                    }\n                }\n\n                if (!hasMatch) {\n                    this._removeAssignment(assignment);\n                }\n\n                hasMatch = false;\n\n                assignments.shift();\n            }\n\n            for (var j = 0, newLength = resources.length; j < newLength; j++) {\n                resource = resources[j];\n\n                if (resource.id !== undefined$1 && resource.value) {\n                    this._createAssignment(resource, id);\n                }\n            }\n\n            dataSource.sync();\n        },\n\n        cancelTask: function() {\n            var editor = this._editor;\n            var container = editor.container;\n\n            if (container) {\n                editor.close();\n            }\n\n            if (this.dependencies) {\n                this.dependencies.cancelChanges();\n            }\n        },\n\n        editTask: function(uid) {\n            var task = typeof uid === \"string\" ? this.dataSource.getByUid(uid) : uid;\n\n            if (!task) {\n                return;\n            }\n\n            var taskCopy = this.dataSource._createNewModel(task.toJSON());\n            taskCopy.uid = task.uid;\n\n            this.cancelTask();\n\n            this._editTask(taskCopy);\n        },\n\n        _editTask: function(task) {\n            this._editor.editTask(task, this.options.editable.plannedTasks);\n        },\n\n        saveTask: function(task, updateInfo, updateDependencies) {\n            var that = this,\n                editor = this._editor,\n                container = editor.container,\n                editable = editor.editable,\n                hasChanges = false,\n                hasResourceChanges = false,\n                updateInfo = updateInfo || {},\n                resourcesField = that.options.resources.field,\n                difference;\n\n            Object.keys(updateInfo).map(k => {\n                var updated = updateInfo[k],\n                    current = task.get(k);\n\n                if (updated instanceof Date) {\n                    updated = updated.getTime();\n                    current = current ? current.getTime() : undefined$1;\n                }\n\n                if (updated !== current) {\n                    if (k === resourcesField) {\n                        difference = getDifference(updated, current);\n\n                        if (difference && difference.length > 0) {\n                            hasResourceChanges = true;\n                        }\n                    } else {\n                        hasChanges = true;\n                    }\n                }\n            });\n\n            if (container &&\n                editable &&\n                editable.end() &&\n                (hasChanges || hasResourceChanges || updateDependencies)) {\n                    if (!that.trigger(\"save\", { task: task, values: updateInfo, updateDependencies: updateDependencies })) {\n                        if (hasChanges) {\n                            that._preventRefresh = true;\n\n                            that.dataSource.update(task, updateInfo);\n                        }\n\n                        if (hasResourceChanges) {\n                            this._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                        }\n\n                        that._syncDataSource();\n\n                        if (this.dependencies) {\n                            this._updateDependency(updateDependencies);\n                        }\n\n                        this._editor.close();\n                    } else {\n                        if (task && task.dirty) {\n                            that.dataSource.cancelChanges(task);\n                            that._preventRefresh = false;\n                            that.refresh();\n                        }\n\n                        if (that.dependencies) {\n                            that.dependencies.cancelChanges();\n                        }\n                    }\n            } else if (editable && editable.end()) {\n                this._editor.close();\n            }\n        },\n\n        _updateDependency: function(updateDependencies) {\n            this.dependencies.filter({});\n\n            if (updateDependencies) {\n                updateDependencies.created.map(d => {\n                    this._preventDependencyRefresh = true;\n                    this.dependencies.add(d);\n                    this._preventDependencyRefresh = false;\n                });\n\n                updateDependencies.destroyed.map(d => {\n                    this.dependencies.remove(d);\n                });\n            }\n\n            this.dependencies.sync();\n        },\n\n        _updateTask: function(task, updateInfo) {\n            var that = this;\n            var resourcesField = that.resources.field;\n\n            if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                if (updateInfo) {\n                    that._preventRefresh = true;\n\n                    that.dataSource.update(task, updateInfo);\n\n                    if (updateInfo[resourcesField]) {\n                        that._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                    }\n                }\n\n                that._syncDataSource();\n            } else {\n                if (task && task.dirty) {\n                    that.dataSource.cancelChanges(task);\n                    that._preventRefresh = false;\n                    that.refresh();\n                }\n\n                if (that.dependencies) {\n                    that.dependencies.cancelChanges();\n                }\n            }\n        },\n\n        _updateAssignment: function(assignment, value) {\n            var resourceValueField = this.assignments.dataValueField;\n\n            assignment.set(resourceValueField, value);\n        },\n\n        removeTask: function(uid) {\n            var that = this;\n            var task = typeof uid === \"string\" ? this.dataSource.getByUid(uid) : uid;\n\n            if (!task) {\n                return;\n            }\n\n            this._taskConfirm(function(cancel) {\n                if (!cancel) {\n                    that._removeTask(task);\n                }\n            }, task);\n        },\n\n        _createTask: function(task, index) {\n            if (!this.trigger(\"add\", {\n                task: task,\n                dependency: null\n            })) {\n                var dataSource = this.dataSource;\n\n                this._preventRefresh = true;\n\n                if (index === undefined$1) {\n                    dataSource.add(task);\n                } else {\n                    dataSource.insert(index, task);\n                }\n\n                this._scrollToUid = task.uid;\n                this._syncDataSource();\n            }\n        },\n\n        _createDependency: function(dependency) {\n            if (!this.trigger(\"add\", {\n                task: null,\n                dependency: dependency\n            })) {\n                this._preventDependencyRefresh = true;\n\n                this.dependencies.add(dependency);\n\n                this._preventDependencyRefresh = false;\n\n                this.dependencies.sync();\n            }\n        },\n\n        _createAssignment: function(resource, id) {\n            var assignments = this.assignments;\n            var dataSource = assignments.dataSource;\n            var taskId = assignments.dataTaskIdField;\n            var resourceId = assignments.dataResourceIdField;\n            var resourceValue = assignments.dataValueField;\n            var assignment = dataSource._createNewModel();\n\n            assignment[taskId] = id;\n            assignment[resourceId] = resource.get(\"id\");\n            assignment[resourceValue] = resource.get(\"value\");\n\n            dataSource.add(assignment);\n        },\n\n        removeDependency: function(uid) {\n            var that = this;\n            var dependency = typeof uid === \"string\" ? this.dependencies.getByUid(uid) : uid;\n\n            if (!dependency) {\n                return;\n            }\n\n            this._dependencyConfirm(function(cancel) {\n                if (!cancel) {\n                    that._removeDependency(dependency);\n                }\n            }, dependency);\n        },\n\n        _removeTaskDependencies: function(task, dependencies) {\n            this._preventDependencyRefresh = true;\n\n            for (var i = 0, length = dependencies.length; i < length; i++) {\n                this.dependencies.remove(dependencies[i]);\n            }\n\n            this._preventDependencyRefresh = false;\n\n            this.dependencies.sync();\n        },\n\n        _removeTaskAssignments: function(task) {\n            var dataSource = this.assignments.dataSource;\n            var assignments = dataSource.view();\n            var filter = {\n                field: this.assignments.dataTaskIdField,\n                operator: \"eq\",\n                value: task.get(\"id\")\n            };\n\n            assignments = new Query(assignments).filter(filter).toArray();\n\n            this._preventRefresh = true;\n\n            for (var i = 0, length = assignments.length; i < length; i++) {\n                dataSource.remove(assignments[i]);\n            }\n\n            this._preventRefresh = false;\n\n            dataSource.sync();\n        },\n\n        _removeTask: function(task) {\n            var dependencies = this.dependencies.dependencies(task.id);\n\n            if (!this.trigger(\"remove\", {\n                task: task,\n                dependencies: dependencies\n            })) {\n                this._removeTaskDependencies(task, dependencies);\n                this._removeTaskAssignments(task);\n\n                this._preventRefresh = true;\n\n                if (this.dataSource.remove(task)) {\n                    this._syncDataSource();\n                }\n\n                if (this.dependencies) {\n                    this.dependencies.filter({});\n                }\n\n                this._preventRefresh = false;\n            }\n        },\n\n        _removeDependency: function(dependency) {\n            if (!this.trigger(\"remove\", {\n                task: null,\n                dependencies: [dependency]\n            })) {\n                if (this.dependencies.remove(dependency)) {\n                    this.dependencies.sync();\n                }\n            }\n        },\n\n        _removeAssignment: function(assignment) {\n            this.assignments.dataSource.remove(assignment);\n        },\n\n        _taskConfirm: function(callback, task) {\n            let messages = this.options.messages;\n\n            this._confirm(callback, {\n                model: task,\n                text: encode(messages.deleteTaskConfirmation),\n                title: encode(messages.deleteTaskWindowTitle)\n            });\n        },\n\n        _dependencyConfirm: function(callback, dependency) {\n            let messages = this.options.messages;\n\n            this._confirm(callback, {\n                model: dependency,\n                text: encode(messages.deleteDependencyConfirmation),\n                title: encode(messages.deleteDependencyWindowTitle)\n            });\n        },\n\n        _confirm: function(callback, options) {\n            var editable = this.options.editable;\n\n            if (editable === true || editable.confirmation !== false) {\n                this.showDialog(extend(true, {}, options, { callback: callback }));\n            } else {\n                callback();\n            }\n        },\n\n        showDialog: function(options) {\n            this._editor.showDialog(options);\n        },\n\n        refresh: function() {\n            if (this._preventRefresh || !this.list || this.list.editor) {\n                return;\n            }\n\n            this._progress(false);\n\n            var dataSource = this.dataSource;\n            var taskTree = dataSource.taskTree();\n            var scrollToUid = this._scrollToUid;\n            var current;\n            var cachedUid;\n            var cachedIndex = -1;\n            var selected = this.select()[0] ? this.select().data(\"uid\") : this._selected;\n\n            if (this.current) {\n                cachedUid = this.current.closest(\"tr\").attr(kendo.attr(\"uid\"));\n                cachedIndex = this.current.index();\n            }\n\n            if (this.trigger(\"dataBinding\")) {\n                return;\n            }\n\n            if (this.resources.dataSource.data().length !== 0) {\n                this._assignResources(taskTree);\n            }\n\n            if (this._editor) {\n                this._editor.close();\n            }\n\n            this.clearSelection();\n            this.list._renderTree(taskTree);\n            this.timeline._render(taskTree);\n            this.timeline._renderDependencies(this.dependencies.view());\n\n            if (scrollToUid) {\n                this._scrollTo(scrollToUid);\n                this.select(selector(scrollToUid));\n            }\n\n            if ((scrollToUid || cachedUid) && cachedIndex >= 0) {\n                current = this.list.element\n                    .find(\"tr\" + selector((scrollToUid || cachedUid)) + \" > td\").eq(cachedIndex);\n\n                this._current(current);\n            }\n\n            this._scrollToUid = null;\n\n            if (selected) {\n                this._selected = selected;\n                this.select(\"[data-uid=\" + selected + \"]\");\n            }\n\n            this.trigger(\"dataBound\");\n        },\n\n        refreshDependencies: function() {\n            if (this._preventDependencyRefresh) {\n                return;\n            }\n\n            if (this.trigger(\"dataBinding\")) {\n                return;\n            }\n\n            this.timeline._renderDependencies(this.dependencies.view());\n\n            this.trigger(\"dataBound\");\n        },\n\n        _assignResources: function(taskTree) {\n            var resources = this.resources;\n            var assignments = this.assignments;\n            var groupAssigments = function() {\n                var data = assignments.dataSource.view();\n                var group = {\n                    field: assignments.dataTaskIdField\n                };\n\n                data = new Query(data).group(group).toArray();\n\n                return data;\n            };\n            var assigments = groupAssigments();\n            var applyTaskResource = function(task, action) {\n                var taskId = task.get(\"id\");\n\n                kendo.setter(resources.field)(task, new ObservableArray([]));\n\n                for (var i = 0, length = assigments.length; i < length; i++) {\n                    if (assigments[i].value === taskId) {\n                        action(task, assigments[i].items);\n                    }\n                }\n            };\n            var wrapTask = function(task, items) {\n                for (var j = 0, length = items.length; j < length; j++) {\n                    var item = items[j];\n                    var resource = resources.dataSource.get(item.get(assignments.dataResourceIdField));\n                    var resourceValue = item.get(assignments.dataValueField);\n                    var resourcedId = item.get(assignments.dataResourceIdField);\n                    var valueFormat = resource.get(resources.dataFormatField) || PERCENTAGE_FORMAT;\n                    var formatedValue = kendo.toString(resourceValue, valueFormat);\n\n                    task[resources.field].push(new ObservableObject({\n                        id: resourcedId,\n                        name: resource.get(resources.dataTextField),\n                        color: resource.get(resources.dataColorField),\n                        value: resourceValue,\n                        formatedValue: formatedValue,\n                        format: valueFormat\n                    }));\n                }\n            };\n\n            for (var i = 0, length = taskTree.length; i < length; i++) {\n                applyTaskResource(taskTree[i], wrapTask);\n            }\n        },\n\n        _wrapResourceData: function(id) {\n            var that = this;\n            var result = [];\n            var resource;\n            var resources = this.resources.dataSource.view();\n            var assignments = this.assignments.dataSource.view();\n            var taskAssignments = new Query(assignments).filter({\n                field: that.assignments.dataTaskIdField,\n                operator: \"eq\",\n                value: id\n            }).toArray();\n            var valuePerResource = function(id) {\n                var resourceValue = null;\n\n                new Query(taskAssignments).filter({\n                    field: that.assignments.dataResourceIdField,\n                    operator: \"eq\",\n                    value: id\n                }).select(function(assignment) {\n                    resourceValue += assignment.get(that.assignments.dataValueField);\n                });\n\n                return resourceValue;\n            };\n\n            for (var i = 0, length = resources.length; i < length; i++) {\n                resource = resources[i];\n                result.push({\n                    id: resource.get(\"id\"),\n                    name: resource.get(that.resources.dataTextField),\n                    format: resource.get(that.resources.dataFormatField) || PERCENTAGE_FORMAT,\n                    value: valuePerResource(resource.id)\n                });\n            }\n\n            return result;\n        },\n\n        _syncDataSource: function() {\n            this._preventRefresh = false;\n            this._requestStart();\n            this.dataSource.sync();\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _progress: function(toggle) {\n            kendo.ui.progress(this.element, toggle);\n        },\n\n        _scrollable: function() {\n            var that = this;\n            var ganttStyles = Gantt.styles;\n            var contentSelector = DOT + ganttStyles.gridContent;\n            var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n            var timelineHeader = this.timeline.element.find(headerSelector);\n            var timelineContent = this.timeline.element.find(contentSelector);\n            var treeListHeader = this.list.element.find(headerSelector);\n            var treeListContent = this.list.element.find(contentSelector);\n\n            if (mobileOS) {\n                treeListContent.css(\"overflow-y\", \"auto\");\n            }\n\n            timelineContent.on(\"scroll\", function() {\n                that.scrollTop = this.scrollTop;\n                kendo.scrollLeft(timelineHeader, this.scrollLeft);\n                treeListContent.scrollTop(this.scrollTop);\n            });\n\n            treeListContent\n                .on(\"scroll\", function() {\n                    kendo.scrollLeft(treeListHeader, this.scrollLeft);\n                })\n                .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, function(e) {\n                    var scrollTop = timelineContent.scrollTop();\n                    var delta = kendo.wheelDeltaY(e);\n\n                    if (delta) {\n                        e.preventDefault();\n                        //In Firefox DOMMouseScroll event cannot be canceled\n                        $(e.currentTarget).one(\"wheel\" + NS, false);\n\n                        timelineContent.scrollTop(scrollTop + (-delta));\n                    }\n                });\n        },\n\n        _navigatable: function() {\n            var that = this;\n            var navigatable = this.options.navigatable;\n            var editable = this.options.editable;\n            var ganttStyles = Gantt.styles;\n            var contentSelector = DOT + ganttStyles.gridContent;\n            var listWrapper = DOT + ganttStyles.listWrapper;\n            var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n            var headerTable = this.list.element.find(headerSelector).find(\"table\");\n            var contentTable = this.list.element.find(contentSelector).find(\"table\");\n            var tables = headerTable.add(contentTable);\n            var attr = selector();\n            var deleteAction = function() {\n                var editable = that.options.editable;\n\n                if (!editable || editable.destroy === false || that.list.editor) {\n                    return;\n                }\n\n                var selectedTask = that.select();\n                var uid = kendo.attr(\"uid\");\n\n                if (selectedTask.length) {\n                    that.removeTask(selectedTask.attr(uid));\n                }\n            };\n\n            $(this.wrapper)\n                .on(\"mousedown\" + NS, listWrapper + \" tr\" + attr, function(e) {\n                    var isInput = $(e.target).is(\":button,a,:input,a>.k-icon,.k-svg-icon,k-svg-icon,svg,path,textarea,span.k-icon:not(.k-i-none),span.k-svg-icon:not(.k-svg-i-none),span.k-link,.k-input,.k-multiselect-wrap,.k-input-value-text,.k-input-inner\");\n\n                    if (e.ctrlKey) {\n                        return;\n                    }\n\n\n                    if ((navigatable || editable) && !isInput) {\n                        that._focusTimeout = setTimeout(function() {\n                            focusTable(that.list.content.find(\"table\"), true);\n                        }, 2);\n                    }\n                })\n                .on(\"keydown\" + NS, function(e) {\n                    var key = e.keyCode;\n                    var that = this;\n                    var uid;\n                    var cell;\n                    var target = $(e.target);\n                    var focusedIndex;\n                    var focusSequence = [\n                        that.toolbar,\n                        that.layout.find(\".k-splitbar\"),\n                        that.layout.find(\".k-gantt-treelist\"),\n                        that.layout.find(\".k-gantt-timeline-pane\")\n                    ];\n\n                    that._tabPressed = false;\n\n                    if (that.footer) {\n                        focusSequence.push(that.footer);\n                    }\n\n                    for (var i = 0; i < focusSequence.length; i++) {\n                        if ($.contains(focusSequence[i][0], e.target) || focusSequence[i][0] === e.target) {\n                            focusedIndex = i;\n                            break;\n                        }\n                    }\n\n                    if (key === keys.F10) {\n                        that.toolbar.find(\"[tabindex=0]:visible\").first().addClass(ganttStyles.focused).trigger(\"focus\");\n                        e.preventDefault();\n                    } else if (key == keys.TAB) {\n                        if (focusedIndex == 2) {\n                            that._tabPressed = true;\n                        }\n                        if (e.shiftKey) {\n                            for (i = focusedIndex - 1; i >= 0; i--) {\n                                if (!focusSequence[i].hasClass(\"k-hidden\")) {\n                                    uid = target.attr(\"data-uid\");\n                                    if (i === 2 && uid) {\n                                        cell = that.list.content.find(\"tr[data-uid='\" + uid + \"']\").find(\"td\").last();\n                                        that.list.current(cell);\n                                        focusTable(that.list.content.find(\"table\"), true);\n                                    } else {\n                                        if (focusSequence[i].is(\":kendoFocusable\")) {\n                                            focusSequence[i].trigger(\"focus\");\n                                        } else {\n                                            focusSequence[i].find(\"[tabindex=0]:visible\").trigger(\"focus\");\n                                        }\n                                    }\n                                    e.preventDefault();\n                                    break;\n                                }\n                            }\n                        } else {\n                            for (i = focusedIndex + 1; i < focusSequence.length; i++) {\n                                if (!focusSequence[i].hasClass(\"k-hidden\")) {\n                                    if (focusSequence[i].is(\":kendoFocusable\")) {\n                                        focusSequence[i].trigger(\"focus\");\n                                    } else {\n                                        focusSequence[i].find(\"[tabindex=0]:visible\").trigger(\"focus\");\n                                    }\n                                    e.preventDefault();\n                                  break;\n                                }\n                            }\n                        }\n                    }\n\n                }.bind(this));\n\n            if (navigatable) {\n                contentTable\n                    .on(\"keydown\" + NS, function(e) {\n                        var key = e.keyCode;\n                        if (e.keyCode == keys.DELETE) {\n                            deleteAction();\n                        } else if (key >= 49 && key <= 57 && e.target.tagName.toLowerCase() !== \"input\") {\n                           that.view(that.timeline._viewByIndex(key - 49));\n                        }\n                    });\n\n                return;\n            }\n\n            tables\n                .on(\"focus\" + NS, function() {\n                    $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                })\n                .on(\"blur\" + NS, function() {\n\n                    if (this == headerTable) {\n                        $(this).attr(TABINDEX, -1);\n                    }\n                });\n        },\n\n\n        _dataBind: function() {\n            var that = this;\n\n            if (that.options.autoBind) {\n                this._preventRefresh = true;\n                this._preventDependencyRefresh = true;\n\n                var promises = $.map([\n                    this.dataSource,\n                    this.dependencies,\n                    this.resources.dataSource,\n                    this.assignments.dataSource\n                ],\n                function(dataSource) {\n                    return dataSource.fetch();\n                });\n\n                $.when.apply(null, promises)\n                    .done(function() {\n                        that._preventRefresh = false;\n                        that._preventDependencyRefresh = false;\n                        that.refresh();\n                    });\n            }\n        },\n\n        _resize: function() {\n            this._adjustDimensions();\n            this.timeline.view()._adjustHeight();\n            this.timeline.view()._renderCurrentTime();\n            this.list._adjustHeight();\n        },\n\n        _togglePlannedTasks: function(e) {\n            var timeline = this.timeline;\n\n            if (!this.trigger(\"togglePlannedTasks\", { showPlannedTasks: !timeline.options.showPlannedTasks })) {\n                this.wrapper.toggleClass(ganttStyles.plannedTasks);\n                timeline._setPlanned(!timeline.options.showPlannedTasks);\n                timeline._render(this.dataSource.taskTree());\n                timeline._renderDependencies(this.dependencies.view());\n            } else {\n                e.preventDefault();\n            }\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Gantt.fn);\n\n        Gantt.fn._drawPDF = function() {\n            var ganttStyles = Gantt.styles;\n            // Get the width of the treelist portion.\n            var listTableWidth = this.wrapper.find(DOT + ganttStyles.list + \" \" + DOT + ganttStyles.gridContent + \">table\").width();\n            // Get the height of the treelist portion.\n            var listTableHeight = this.wrapper.find(DOT + ganttStyles.list + \" \" + DOT + ganttStyles.gridContent + \">table\").height();\n            // Get the combined height of all toolbars.\n            var toolbarsHeight = this.wrapper.find(DOT + ganttStyles.toolbar.toolbar).outerHeight() * this.wrapper.find(DOT + ganttStyles.toolbar.toolbar).length;\n            // Get the width of the timeline portion.\n            var timelineTableWidth = this.wrapper.find(DOT + ganttStyles.timeline + \" \" + DOT + ganttStyles.gridContent + \" table\").width();\n            var content = this.wrapper.clone();\n\n            content.find(DOT + ganttStyles.list).css(\"height\", listTableHeight + toolbarsHeight);\n            content.find(DOT + ganttStyles.splitter).css(\"width\", timelineTableWidth + listTableWidth);\n            content.find(DOT + ganttStyles.splitter).css(\"height\", listTableHeight + toolbarsHeight);\n\n            return this._drawPDFShadow({\n                content: content\n            }, {\n                avoidLinks: this.options.pdf.avoidLinks\n            });\n        };\n    }\n\n    kendo.ui.plugin(Gantt);\n\n    extend(true, Gantt, { styles: ganttStyles });\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { __meta__, kendo$1 as default };\n"]}