{"version":3,"file":"kendo.dropdowntree.js","names":["valueMapperOptions","initLoader","$","undefined$1","subGroup","filter","kendo","window","ui","keys","DISABLED","SELECT","CHECKED","INDETERMINATE","TreeView","node","result","children","length","Tree","extend","init","element","options","dropdowntree","that","this","fn","call","_isMultipleSelection","wrapper","on","CLICK","_clickSelectedItem","bind","_checkOnSelect","e","isDefaultPrevented","dataItem","set","checked","_setCheckedValue","value","_click","one","currentTarget","_trigger","defaultrefresh","i","action","items","parentNode","loadOnDemand","checkChildren","checkboxes","_skip","field","level","_updateNodes","findByUid","uid","_progress","bubble","_appendItems","index","_remove","_refreshChildren","_refreshRoot","expanded","load","find","attr","trigger","_treeViewDataBound","sender","updateIndeterminate","_previousVisible","lastChild","prev","root","last","_expanded","parent","checkAll","is","filterInput","_keydown","target","key","keyCode","focused","current","checkbox","first","rtl","support","isRtl","RIGHT","LEFT","_nextVisible","hasClass","expand","collapse","_enabled","DOWN","UP","altKey","HOME","END","ENTER","SPACEBAR","prop","data","_checkboxChange","ESC","_closePopup","TAB","preventDefault","select","scrollTo","close","refresh","skipUpdateOnBind","_checkValue","selected","_selectValue","_dropdowntree","jQuery","__meta__","id","name","category","description","depends","html","encode","htmlEncode","mediaQuery","Widget","ObservableArray","ObservableObject","activeElement","_activeElement","ns","HIDDENCLASS","WIDTH","browser","outerWidth","_outerWidth","DOT","READONLY","STATEDISABLED","ARIA_DISABLED","FOCUSED","HOVEREVENTS","TABINDEX","OPEN","CLOSE","CHANGE","quotRegExp","CHIP","getterFunction","Array","isArray","count","levels","map","x","d","_level","Math","min","getter","DropDownTree","_selection","_getSelection","_focusInputHandler","_focusInput","_initial","val","_values","_noInitialValue","_isNullorUndefined","_valueMethodCalled","_isArrayOfObjects","autoBind","dataValueField","slice","bigScreenMQL","smallScreenMQL","adaptiveMode","onChange","popup","isFunction","fullscreen","mediaQueryList","matches","_bindLoader","_inputTemplate","_accessors","_setTreeViewOptions","_dataSource","_initWrapper","_applyCssClasses","_placeholder","_tabindex","tree","tabIndex","list","append","_header","_noData","_footer","_reset","_popup","destroy","remove","treeview","_filterHeader","_treeview","_renderFooter","_checkAll","_enable","_toggleCloseVisibility","_aria","_clearButton","text","_textAccessor","placeholder","_preselect","parents","enable","label","_label","valueMapper","requireValueMapper","notify","_initLoader","labelOptions","isPlainObject","content","Label","widget","floatCheck","_floatCheck","_inputLabel","visible","_refreshFloatingLabel","floatingLabel","treeviewOptions","dataImageUrlField","dataSpriteCssClassField","dataTextField","dataUrlField","size","template","rootDataSource","dataSource","_requestStartHandler","_showBusy","_requestEndHandler","_hideBusy","_errorHandler","HierarchicalDataSource","create","_popupOpen","wrap","_altname","MultipleSelection","SingleSelection","setDataSource","_isDataSourceSet","_tags","setValue","empty","span","show","_multipleTags","includes","animation","autoClose","autoWidth","clearButton","delay","enabled","enforceMinLength","height","ignoreCase","messages","singleTag","clear","deleteTag","noData","minLength","noDataTemplate","checkAllTemplate","tagMode","valuePrimitive","footerTemplate","headerTemplate","valueTemplate","filterLabel","fillMode","rounded","events","focus","readonly","_editable","disable","toggle","open","_toggle","_isFilterEnabled","_search","fetch","_allowOpening","_hovered","search","word","clearTimeout","_typingTimeout","_getFilter","_filtering","_mapValuesToId","values","schema","model","Error","item","hasValue","_useValueMapper","response","deferred","Deferred","_deferred","_handleValueMapperData","done","_loadItem","get","resolve","operator","flatView","_renderNoData","setOptions","console","warn","css","_unwrapFloating","off","_clear","tagList","unbind","_form","_resetHandler","_useValueMapperWithValue","_setValue","_filter","loweredText","toLowerCase","_selectItemByText","role","_activeId","guid","_ariaLabel","header","prepend","hide","appendTo","instance","footer","disabled","_adjustListWidth","computedStyle","computedWidth","width","style","getComputedStyle","parseFloat","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","fontFamily","minWidth","whiteSpace","formId","form","closest","setTimeout","_hasActionSheet","addClass","Popup","anchor","_openHandler","_closeHandler","autosize","deactivate","activate","document","body","ActionSheet","adaptive","hideOverflowContent","closeButton","renderButton","icon","focusOnActivate","toggleClass","_currentValue","currentValue","_value","indexOfValue","isMultiple","indexOf","grep","_tagUid","itemToAdd","toJSON","push","itemToRemove","idx","_treeViewCheckAllCheck","splice","_preventChangeTrigger","position","_updateSelectedOptions","tagName","selectedItems","_option","_text","dataValue","dataText","option","replace","_accessor","_clearClick","stopPropagation","_clearTextAndValue","shouldTrigger","_clearValue","_clearInput","_clearText","_assignInstance","assign","split","removeClass","textField","valueField","_accessorInput","clearTitle","insertAfter","isReadOnly","valueDoesNotEqualPlaceHolder","_hideClear","_showClear","_prev","_deselectItem","rootItem","subItems","_checkLoadedItems","rootItems","_valueComparer","_checkLoadedItem","_getAllChecked","_checkCheckAll","_uncheckCheckAll","checkAllCheckbox","_allItemsAreChecked","_allItemsAreUnchecked","filterTemplate","iconClass","_disableCheckChildren","title","_filterChange","insertBefore","renderCheckBox","_changeCheckAll","_keydownCheckAll","_disabledCheckedItems","_disabledUnCheckedItems","isChecked","_updateCheckAll","_toggleCheckAllItems","edge","_clickCheckAll","_dfs","_traverceChildren","_uncheckItemByUid","_uncheckItemEqualsUid","_itemEqualsText","_selectItemByValue","_itemEqualsValue","_checkItemByValue","dataItems","_checkItemEqualsValue","itemText","itemValue","newValue","_allCheckedItems","_getAllCheckedItems","_childrenOptions","_checkAllCheckItem","add","dropDownWrapper","removeAttr","_focusinHandler","_focusoutHandler","_toggleHover","_wrapperClick","_removeTagClick","_prevent","_focused","type","preventScroll","_ie11PreventScrollOnFocus","version","_toggleResize","isFilterInputActive","isWrapperActive","tagItem","isPopupVisible","_focusPrevTag","_focusNextTag","_focusFirstTag","_focusLastTag","DELETE","_removeTag","BACKSPACE","_clearFilter","activedescendant","next","_clearDisabledTag","firstTag","lastTag","fields","lastIndex","plugin","cssProperties","registerPrefix","registerValues","roundedValues","concat","Class","view","_wrapper","_span","DOMelement","cssText","className","accesskey","unselectable","SELECTOR","shape","_arrow","_arrowIcon","selectedNode","dropdowntreeHasValue","triggerChange","tempItem","_tagTemplate","_tagList","valueToSelect","tagTemplate","renderChip","themeColor","removable","removeIcon","removableAttr","tagCollection","renderChipList","selectable","viewModel","observable","multipleTag","tags","_refreshTagListAria","oldValues","_removeValues","removedValues","_getNewValues","j","tagsArray","_findTag","tempItemValue","kendo$1"],"sources":["kendo.dropdowntree.js"],"mappings":"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","ignoreList":[],"sourcesContent":["import './kendo.treeview.js';\nimport './kendo.popup.js';\nimport './kendo.actionsheet.js';\nimport './kendo.binder.js';\nimport './kendo.html.chip.js';\nimport './kendo.html.chiplist.js';\nimport './kendo.html.button.js';\nimport './kendo.html.input.js';\nimport './kendo.label.js';\nimport './kendo.icons.js';\nimport { v as valueMapperOptions } from './kendo.valueMapper.chunk.js';\nimport { i as initLoader } from './kendo.dropdowns-loader.chunk.js';\n\n(function($, undefined$1) {\n\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        keys = kendo.keys,\n        DISABLED = \"k-disabled\",\n        SELECT = \"select\",\n        CHECKED = \"checked\",\n        DATABOUND = \"dataBound\",\n        CLICK = \"click\",\n        NS = \".kendoTreeView\",\n        INDETERMINATE = \"indeterminate\",\n        NAVIGATE = \"navigate\",\n        subGroup,\n        TreeView = ui.TreeView;\n\n        function contentChild(filter) {\n            return function(node) {\n                var result = node.children(\".k-animation-container\");\n\n                if (!result.length) {\n                    result = node;\n                }\n\n                return result.children(filter);\n            };\n        }\n\n        subGroup = contentChild(\".k-treeview-group\");\n\n    var Tree = TreeView.extend({\n        init: function(element, options, dropdowntree) {\n            var that = this;\n\n            that.dropdowntree = dropdowntree;\n\n            TreeView.fn.init.call(that, element, options);\n            if (that.dropdowntree._isMultipleSelection()) {\n                that.wrapper.on(CLICK + NS, '.k-treeview-leaf.k-selected', that._clickSelectedItem.bind(that));\n            }\n        },\n\n        _checkOnSelect: function(e) {\n            if (!e.isDefaultPrevented()) {\n                var dataItem = this.dataItem(e.node);\n\n                dataItem.set(\"checked\", !dataItem.checked);\n            }\n        },\n\n        _setCheckedValue: function(node, value) {\n            node.set(CHECKED, value);\n        },\n\n        _click: function(e) {\n            var that = this;\n\n            if (that.dropdowntree._isMultipleSelection()) {\n                that.one(\"select\", that._checkOnSelect);\n            }\n            TreeView.fn._click.call(that, e);\n        },\n\n        _clickSelectedItem: function(e) {\n            var that = this,\n            node = $(e.currentTarget);\n\n            that.one(\"select\", that._checkOnSelect);\n            if (!that._trigger(SELECT, node)) {\n                that.dataItem(node).set(\"selected\", false);\n            }\n        },\n\n        defaultrefresh: function(e) {\n            var that = this;\n            var node = e.node;\n            var action = e.action;\n            var items = e.items;\n            var parentNode = this.wrapper;\n            var options = this.options;\n            var loadOnDemand = options.loadOnDemand;\n            var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n            var i;\n\n            if (this._skip) {\n                return;\n            }\n\n            if (e.field) {\n                if (!items[0] || !items[0].level) {\n                    return;\n                }\n\n                return this._updateNodes(items, e.field);\n            }\n\n            if (node) {\n                parentNode = this.findByUid(node.uid);\n                this._progress(parentNode, false);\n            }\n\n            if (checkChildren && action != \"remove\") {\n                var bubble = false;\n\n                for (i = 0; i < items.length; i++) {\n                    if (\"checked\" in items[i]) {\n                        bubble = true;\n                        break;\n                    }\n                }\n\n                if (!bubble && node && node.checked) {\n                    for (i = 0; i < items.length; i++) {\n                        items[i].checked = true;\n                    }\n                }\n            }\n\n            if (action == \"add\") {\n                this._appendItems(e.index, items, parentNode);\n            } else if (action == \"remove\") {\n                this._remove(this.findByUid(items[0].uid), false);\n            } else if (action == \"itemchange\") {\n                this._updateNodes(items);\n            } else if (action == \"itemloaded\") {\n                this._refreshChildren(parentNode, items, e.index);\n            } else {\n                this._refreshRoot(items);\n            }\n\n            if (action != \"remove\") {\n                for (i = 0; i < items.length; i++) {\n                    if (!loadOnDemand || items[i].expanded) {\n                        items[i].load();\n                    }\n                }\n            }\n\n            that.wrapper.find(\">ul\").attr(\"role\", \"tree\");\n\n            this.trigger(DATABOUND, { node: node ? parentNode : undefined$1 });\n            this.dropdowntree._treeViewDataBound({ node: node ? parentNode : undefined$1, sender: this });\n            if (this.options.checkboxes.checkChildren) {\n                this.updateIndeterminate();\n            }\n        },\n\n        _previousVisible: function(node) {\n            var that = this,\n                lastChild,\n                result;\n\n            if (!node.length || node.prev().length) {\n                if (node.length) {\n                    result = node.prev();\n                } else {\n                    result = that.root.children().last();\n                }\n\n                while (that._expanded(result)) {\n                    lastChild = subGroup(result).children().last();\n\n                    if (!lastChild.length) {\n                        break;\n                    }\n\n                    result = lastChild;\n                }\n            } else {\n                result = that.parent(node) || node;\n\n                if (!result.length) {\n                    if (that.dropdowntree.checkAll && that.dropdowntree.checkAll.is(\":visible\")) {\n                        that.dropdowntree.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n                    } else if (that.dropdowntree.filterInput) {\n                        that.dropdowntree.filterInput.trigger(\"focus\");\n                    } else {\n                        that.dropdowntree.wrapper.trigger(\"focus\");\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                target,\n                focused = that.current(),\n                expanded = that._expanded(focused),\n                checkbox = focused.find(\".k-checkbox-wrap\").first().find(\":checkbox\"),\n                rtl = kendo.support.isRtl(that.element);\n\n            if (e.target != e.currentTarget) {\n                return;\n            }\n\n            if ((!rtl && key == keys.RIGHT) || (rtl && key == keys.LEFT)) {\n                if (expanded) {\n                    target = that._nextVisible(focused);\n                } else if (!focused.find(\".k-treeview-leaf\").first().hasClass(DISABLED)) {\n                    that.expand(focused);\n                }\n            } else if ((!rtl && key == keys.LEFT) || (rtl && key == keys.RIGHT)) {\n                if (expanded && !focused.find(\".k-treeview-leaf\").first().hasClass(DISABLED)) {\n                    that.collapse(focused);\n                } else {\n                    target = that.parent(focused);\n\n                    if (!that._enabled(target)) {\n                        target = undefined$1;\n                    }\n                }\n            } else if (key == keys.DOWN) {\n                target = that._nextVisible(focused);\n            } else if (key == keys.UP && !e.altKey) {\n                target = that._previousVisible(focused);\n            } else if (key == keys.HOME) {\n                target = that._nextVisible($());\n            } else if (key == keys.END) {\n                target = that._previousVisible($());\n            } else if (key == keys.ENTER && !focused.find(\".k-treeview-leaf\").first().hasClass(DISABLED)) {\n                if (!focused.find(\".k-treeview-leaf\").first().hasClass(\"k-selected\")) {\n                    if (!that._trigger(SELECT, focused)) {\n                        that.select(focused);\n                    }\n                }\n            } else if (key == keys.SPACEBAR && checkbox.length && !focused.find(\".k-treeview-leaf\").first().hasClass(DISABLED)) {\n                checkbox.prop(CHECKED, !checkbox.prop(CHECKED))\n                    .data(INDETERMINATE, false)\n                    .prop(INDETERMINATE, false);\n\n                that._checkboxChange({ target: checkbox });\n\n                target = focused;\n            } else if ((e.altKey && key === keys.UP) || key === keys.ESC) {\n                that._closePopup();\n            } else if ( key === keys.TAB) {\n                e.preventDefault();\n                that._closePopup();\n            }\n\n            if (target) {\n                e.preventDefault();\n\n                if (focused[0] != target[0]) {\n                    that._trigger(NAVIGATE, target);\n                    that.current(target);\n                    that.scrollTo(target);\n                }\n            }\n        },\n\n        _closePopup: function() {\n            this.dropdowntree.close();\n            this.dropdowntree.wrapper.trigger(\"focus\");\n        },\n\n        refresh: function(e) {\n            this.defaultrefresh(e);\n\n            if (this.dropdowntree.options.skipUpdateOnBind) {\n                return;\n            }\n\n            if (e.action === \"itemchange\") {\n                if (this.dropdowntree._isMultipleSelection()) {\n                    if (e.field === \"checked\") {\n                        this.dropdowntree._checkValue(e.items[0]);\n                    }\n                } else if (e.field !== \"checked\" && e.field !== \"expanded\" && e.items[0].selected) {\n                    this.dropdowntree._selectValue(e.items[0]);\n                }\n            } else {\n                this.dropdowntree.refresh(e);\n            }\n        }\n\n    });\n\n    kendo.ui._dropdowntree = Tree;\n\n})(window.kendo.jQuery);\n\nconst __meta__ = {\n    id: \"dropdowntree\",\n    name: \"DropDownTree\",\n    category: \"web\",\n    description: \"The DropDownTree widget displays a hierarchy of items and allows the selection of single or multiple items.\",\n    depends: [\"treeview\", \"popup\", \"binder\", \"html.chip\", \"html.chiplist\", \"html.button\", \"html.input\", \"label\", \"icons\", \"actionsheet\", \"valueMapper.chunk\", \"dropdowns-loader.chunk\"]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        encode = kendo.htmlEncode,\n        mediaQuery = kendo.mediaQuery,\n        Widget = ui.Widget,\n        TreeView = ui._dropdowntree,\n        ObservableArray = kendo.data.ObservableArray,\n        ObservableObject = kendo.data.ObservableObject,\n        extend = $.extend,\n        activeElement = kendo._activeElement,\n        ns = \".kendoDropDownTree\",\n        keys = kendo.keys,\n        support = kendo.support,\n        HIDDENCLASS = \"k-hidden\",\n        WIDTH = \"width\",\n        browser = support.browser,\n        outerWidth = kendo._outerWidth,\n        DOT = \".\",\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_DISABLED = \"aria-disabled\",\n        HOVER = \"k-hover\",\n        FOCUSED = \"k-focus\",\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        TABINDEX = \"tabindex\",\n        CLICK = \"click\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CHANGE = \"change\",\n        quotRegExp = /\"/g,\n\n        CHIP = \".k-chip\";\n\n    function getterFunction(field) {\n        if (Array.isArray(field)) {\n            var count = field.length;\n            var levels = $.map(field, function(x) {\n                return function(d) { return d[x];};\n            });\n\n            return function(dataItem) {\n                var level = dataItem._level;\n\n                if (!level && level !== 0) {\n                    return;\n                }\n\n                return levels[Math.min(level, count - 1)](dataItem);\n            };\n        } else {\n            return kendo.getter(field);\n        }\n    }\n\n    var DropDownTree = kendo.ui.Widget.extend( {\n        init: function(element, options) {\n            var that = this;\n            that.ns = ns;\n\n            kendo.ui.Widget.fn.init.call(that, element, options);\n            that._selection = that._getSelection();\n            that._focusInputHandler = that._focusInput.bind(that);\n            that._initial = that.element.val();\n            that._values = [];\n\n            var value = this.options.value;\n\n            if (value === null || !value.length) {\n                this._noInitialValue = true;\n            }\n\n            if (!this._isNullorUndefined(value)) {\n                this._valueMethodCalled = true;\n                value = this._isArrayOfObjects(value) && that.options.autoBind ? value.map(x=>x[that.options.dataValueField]) : value;\n                this._values = Array.isArray(value) ? value.slice(0) : [value];\n            }\n\n            that.bigScreenMQL = mediaQuery(\"large\");\n            that.smallScreenMQL = mediaQuery(\"small\");\n            if (that.options.adaptiveMode == \"auto\") {\n                that.smallScreenMQL.onChange(function() {\n                    if (that.popup && kendo.isFunction(that.popup.fullscreen)) {\n                        that.popup.fullscreen(that.smallScreenMQL.mediaQueryList.matches);\n                    }\n                });\n            }\n\n            this._bindLoader();\n            this._inputTemplate();\n\n            this._accessors();\n            this._setTreeViewOptions(this.options);\n            this._dataSource();\n            this._selection._initWrapper();\n            this._applyCssClasses();\n            this._placeholder(true);\n            this._tabindex();\n\n            this.wrapper.data(TABINDEX, this.wrapper.attr(TABINDEX));\n\n            this.tree = $('<div/>')\n            .attr({\n                tabIndex: -1,\n                \"aria-hidden\": true\n            });\n\n            this.list = $(\"<div/>\")\n                .append(this.tree);\n\n            this._header();\n            this._noData();\n            this._footer();\n            this._reset();\n            this._popup();\n\n            if (that.options.adaptiveMode == \"auto\") {\n                that.bigScreenMQL.onChange(() => {\n                    that.list = $(\"<div class='k-list-container'/>\")\n                        .append(that.tree);\n                    that._header.bind(that)();\n                    that._noData.bind(that)();\n                    that._footer.bind(that)();\n                    that._reset.bind(that)();\n\n                    if (that.popup) {\n                        that.popup.destroy();\n                        that.popup.element.remove();\n                        that.popup = null;\n                    }\n                    if (that.treeview) {\n                        that.treeview.destroy();\n                    }\n\n                    that._popup.bind(that)();\n                    that._filterHeader.bind(that)();\n                    that._treeview.bind(that)();\n\n                    that._renderFooter.bind(that)();\n\n                    that._checkAll.bind(that)();\n                    that._enable.bind(that)();\n                    that._toggleCloseVisibility.bind(that)();\n\n                    that._aria.bind(that)();\n                });\n            }\n\n            this._clearButton();\n            this._filterHeader();\n            this._treeview();\n\n            this._renderFooter();\n\n            this._checkAll();\n            this._enable();\n            this._toggleCloseVisibility();\n\n            if (!this.options.autoBind) {\n                var text = options.text || \"\";\n                if (!this._isNullorUndefined(options.value)) {\n                    this._preselect(options.value);\n                } else if (text) {\n                    this._textAccessor(text);\n                } else if (options.placeholder) {\n                    this._placeholder(true);\n                }\n            }\n\n            var disabled = $(this.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                this.enable(false);\n            }\n            this._valueMethodCalled = false;\n\n            if (this.options.label) {\n                this._label();\n            }\n            if (this.options.loadOnDemand && this.options.loadOnDemand.valueMapper && this.options.value) {\n                this.one('dataBound', () => this.requireValueMapper(this.options));\n            }\n            this._aria();\n\n            kendo.notify(this);\n        },\n\n        _bindLoader: function() {\n            const that = this;\n\n            that._initLoader = initLoader.bind(that);\n            that._initLoader();\n        },\n\n        _label: function() {\n            var that = this;\n            var options = that.options;\n            var labelOptions = $.isPlainObject(options.label) ? options.label : {\n                content: options.label\n            };\n\n            that.label = new kendo.ui.Label(null, $.extend({}, labelOptions, {\n                widget: that,\n                floatCheck: that._floatCheck.bind(that)\n            }));\n\n            that._inputLabel = that.label.element;\n        },\n\n        _floatCheck: function() {\n            var hasValue = (this.value() && !this._isMultipleSelection()) || this.value().length || this.text();\n            return !hasValue && !this.popup.visible();\n        },\n\n        _refreshFloatingLabel: function() {\n            var that = this;\n\n            if (that.label && that.label.floatingLabel) {\n                that.label.floatingLabel.refresh();\n            }\n        },\n\n        _preselect: function(data, value) {\n            this._selection._preselect(data, value);\n        },\n\n        _setTreeViewOptions: function(options) {\n            var treeviewOptions = {\n                autoBind: options.autoBind,\n                checkboxes: options.checkboxes,\n                dataImageUrlField: options.dataImageUrlField,\n                dataSpriteCssClassField: options.dataSpriteCssClassField,\n                dataTextField: options.dataTextField,\n                dataUrlField: options.dataUrlField,\n                loadOnDemand: options.loadOnDemand,\n                size: options.size\n            };\n\n            this.options.treeview = $.extend({}, treeviewOptions, this.options.treeview);\n\n            if (options.template) {\n                this.options.treeview.template = options.template;\n            }\n\n            if (options.size) {\n                this.options.treeview.size = options.size;\n            }\n        },\n\n        _dataSource: function() {\n            const that = this;\n            const rootDataSource = that.options.dataSource;\n            that._requestStartHandler = that._showBusy;\n            that._requestEndHandler = that._hideBusy;\n            that._errorHandler = function() {\n                that._hideBusy();\n            };\n\n            that.dataSource = kendo.data.HierarchicalDataSource.create(rootDataSource).bind(\"progress\", that._requestStartHandler)\n            .bind(\"error\", that._errorHandler).bind(\"requestEnd\", that._requestEndHandler);\n\n            if (rootDataSource) {\n                $.extend(that.options.treeview,{\n                    dataSource: that.dataSource\n                });\n            }\n        },\n\n        _popupOpen: function() {\n            var popup = this.popup;\n            popup.wrapper = kendo.wrap(popup.element);\n        },\n\n        _getSelection: function() {\n            if (this._isMultipleSelection()) {\n                this.options._altname = \"MultiSelectTree\";\n                return new ui.DropDownTree.MultipleSelection(this);\n            } else {\n                return new ui.DropDownTree.SingleSelection(this);\n            }\n        },\n\n        setDataSource: function(dataSource) {\n            this._isDataSourceSet = true;\n            if (this._tags) {\n                this._noInitialValue = true;\n                this.setValue([]);\n                this._tags.empty();\n                this.span.show();\n                this._multipleTags.empty();\n            }\n            this.dataSource = dataSource;\n            this.treeview.setDataSource(dataSource);\n            this._isDataSourceSet = false;\n        },\n\n        _isMultipleSelection: function() {\n            return this.options && (this.options.treeview.checkboxes || this.options.checkboxes);\n        },\n\n        _isArrayOfObjects: function(value) {\n            return Array.isArray(value) && value.map(x=> typeof x == \"object\").includes(true);\n        },\n\n        options: {\n            name: \"DropDownTree\",\n            adaptiveMode: \"none\",\n            animation: {},\n            autoBind: true,\n            autoClose: true,\n            autoWidth: false,\n            clearButton: true,\n            dataTextField: \"\",\n            dataValueField: \"\",\n            dataImageUrlField: \"\",\n            dataSpriteCssClassField: \"\",\n            dataUrlField: \"\",\n            delay: 500,\n            enabled: true,\n            enforceMinLength: false,\n            filter: \"none\",\n            height: 200,\n            ignoreCase: true,\n            index: 0,\n            loadOnDemand: false,\n            messages: {\n                \"singleTag\": \"item(s) selected\",\n                \"clear\": \"clear\",\n                \"deleteTag\": \"delete\",\n                \"noData\": \"No data found.\"\n            },\n            minLength: 1,\n            checkboxes: false,\n            noDataTemplate: true,\n            placeholder: \"\",\n            checkAll: false,\n            checkAllTemplate: () => \"Check all\",\n            tagMode: \"multiple\",\n            template: null,\n            text: null,\n            treeview: {},\n            valuePrimitive: false,\n            footerTemplate: () => \"\",\n            headerTemplate: () => \"\",\n            value: null,\n            valueTemplate: null,\n            popup: null,\n            filterLabel: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\",\n            label: null\n        },\n\n        events: [\n            \"open\",\n            \"close\",\n            \"dataBound\",\n            CHANGE,\n            \"select\",\n            \"filtering\"\n        ],\n\n        focus: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        dataItem: function(node) {\n            return this.treeview.dataItem(node);\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined$1 ? true : readonly,\n                disable: false\n            });\n            this._toggleCloseVisibility();\n\n            if (this.label && this.label.floatingLabel) {\n                this.label.floatingLabel.readonly(readonly === undefined$1 ? true : readonly);\n            }\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined$1 ? true : enable)\n            });\n            this._toggleCloseVisibility();\n\n            if (this.label && this.label.floatingLabel) {\n                this.label.floatingLabel.enable(enable = enable === undefined$1 ? true : enable);\n            }\n        },\n\n        toggle: function(open) {\n            this._toggle(open);\n        },\n\n        open: function() {\n            var popup = this.popup;\n\n            if (!this.options.autoBind && !this.dataSource.data().length) {\n                this.treeview._progress(true);\n                if (this._isFilterEnabled()) {\n                    this._search();\n                } else {\n                    this.dataSource.fetch();\n                }\n            }\n\n            if (popup.visible() || !this._allowOpening()) {\n                return;\n            }\n\n            popup.one(\"activate\", this._focusInputHandler);\n            popup._hovered = true;\n            popup.open();\n        },\n\n        close: function() {\n            this.popup.close();\n        },\n\n        search: function(word) {\n            var options = this.options;\n            var filter;\n            clearTimeout(this._typingTimeout);\n\n            if ((!options.enforceMinLength && !word.length) || word.length >= options.minLength) {\n                filter = this._getFilter(word);\n                if (this.trigger(\"filtering\", { filter: filter }) ||\n                 Array.isArray(this.options.dataTextField)) {\n                    return;\n                }\n\n                this._filtering = true;\n                this.treeview.dataSource.filter(filter);\n            }\n        },\n\n        _mapValuesToId: function(values) {\n            const that = this;\n\n            if (typeof that.dataSource.options.schema.model === 'function') {\n                throw new Error(\"The valueMapper needs dataSource.schema\");\n            }\n            const field = that.dataSource.options.schema.model.id;\n\n            return values.map((item) => item[field]);\n        },\n\n        requireValueMapper: function(options, value) {\n            const that = this;\n            let hasValue = value ? value : options.value;\n            hasValue = hasValue && (hasValue instanceof Array ? hasValue : [hasValue]);\n\n            if (hasValue && options.loadOnDemand && typeof options.loadOnDemand.valueMapper !== \"function\") {\n                throw new Error(\"ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function\");\n            }\n\n            if (hasValue.length) {\n                let index = 0;\n                that.options.loadOnDemand.valueMapper(valueMapperOptions(that.options, hasValue, that._useValueMapper.bind(that, hasValue, index)));\n\n            }\n        },\n\n        _useValueMapper: function(data, index, response) {\n            const that = this;\n            const deferred = $.Deferred();\n            that._deferred = deferred;\n\n            that._handleValueMapperData(index, response);\n\n            deferred.done(() => {\n                index++;\n                if (index < data.length) {\n                    that._useValueMapper(data, index, response);\n                }\n            });\n        },\n\n        _handleValueMapperData: function(index, data) {\n            const that = this;\n\n            const response = data[index] instanceof Array ? data[index] : data;\n            if (!response || !response.length) {\n                return;\n            }\n\n                let idIndex = 0;\n                that._loadItem(response, idIndex);\n        },\n\n        _loadItem: function(data, index) {\n            const that = this;\n            const node = that.dataSource.get(data[index]);\n                if (node) {\n                    node.load().done(() => {\n                        index++;\n                        if (index < data.length - 1) {\n                            that._loadItem(data, index);\n                        } else {\n                            that._deferred.resolve();\n                        }\n                    });\n                }\n        },\n\n        _getFilter: function(word) {\n            return {\n                field: this.options.dataTextField,\n                operator: this.options.filter,\n                value: word,\n                ignoreCase: this.options.ignoreCase\n              };\n        },\n\n        refresh: function() {\n            var data = this.treeview.dataSource.flatView();\n            this._renderFooter();\n            this._renderNoData();\n            if (this.filterInput && this.checkAll) {\n                this.checkAll.toggle(!this.filterInput.val().length);\n            }\n\n            this.tree.toggle(!!data.length);\n            $(this.noData).toggle(!data.length);\n        },\n\n        setOptions: function(options) {\n            if (this.options.checkboxes != options.checkboxes) {\n                delete options.checkboxes;\n                window.console.warn('setOptions method can not be used to set the checkboxes option in DropDownTree');\n            }\n\n            Widget.fn.setOptions.call(this, options);\n\n            this._setTreeViewOptions(options);\n            this._dataSource();\n            if (this.options.treeview || options.size) {\n                this.treeview.destroy();\n                this._treeview();\n            }\n\n            if (options.height && this.tree) {\n                this.tree.css('max-height', options.height);\n            }\n\n            this._header();\n            this._noData();\n            this._footer();\n\n            this._renderFooter();\n            this._renderNoData();\n            if (this.span && (this._isMultipleSelection() || this.span.hasClass(\"k-readonly\"))) {\n                this._placeholder(true);\n            }\n            this._inputTemplate();\n            this._accessors();\n            this._filterHeader();\n            this._checkAll();\n            this._enable();\n            if (options && (options.enable || options.enabled)) {\n                this.enable(true);\n            }\n            this._clearButton();\n\n            if (options === undefined$1 || options === null) {\n                options = {};\n            }\n\n            if (options.label && this._inputLabel) {\n                this.label.setOptions(options.label);\n            } else if (options.label === false) {\n                this.label._unwrapFloating();\n                this._inputLabel.remove();\n                delete this._inputLabel;\n            } else if (options.label) {\n                this._label();\n            }\n\n            this._aria();\n        },\n\n        destroy: function() {\n            kendo.ui.Widget.fn.destroy.call(this);\n            if (this.treeview) {\n                this.treeview.destroy();\n            }\n            this.popup.destroy();\n\n            this.wrapper.off(ns);\n            this._clear.off(ns);\n            if (this.filterInput) {\n                this.filterInput.off(ns);\n            }\n\n            if (this.tagList) {\n                this.tagList.off(ns);\n            }\n\n            if (this.bigScreenMQL) {\n                this.bigScreenMQL.destroy();\n            }\n\n            if (this.smallScreenMQL) {\n                this.smallScreenMQL.destroy();\n            }\n\n            kendo.unbind(this.tagList);\n            if (this.options.checkAll && this.checkAll) {\n                this.checkAll.off(ns);\n            }\n\n            if (this._form) {\n                this._form.off(\"reset\", this._resetHandler);\n            }\n\n            if (this.label) {\n                this.label.destroy();\n            }\n        },\n\n        setValue: function(value) {\n            value = Array.isArray(value) || value instanceof ObservableArray ? value.slice(0) : [value];\n\n            this._values = value;\n        },\n\n        items: function() {\n            return this.treeview.items();\n        },\n\n        _useValueMapperWithValue: function(value) {\n            const that = this;\n            let values = value instanceof Array ? value : [value];\n\n            if (typeof values[0] === 'object') {\n                values = that._mapValuesToId(values);\n            }\n            that.requireValueMapper(this.options, values);\n            that._deferred.done(() => {\n                that._selection._setValue(values);\n            });\n        },\n\n        value: function(value) {\n            const that = this;\n            const loadOnDemand = that.options.loadOnDemand;\n            if (value) {\n                if (that.filterInput && that.dataSource._filter) {\n                    that._filtering = true;\n                    that.dataSource.filter({});\n                } else if (!that.dataSource.data().length || !that.treeview.dataSource.data().length) {\n                    if (!loadOnDemand) {\n                        that.treeview.one('loadCompleted', function() {\n                            that._selection._setValue(value);\n                        });\n\n                        if (!that.options.autoBind && that.options.valuePrimitive) {\n                            that.dataSource.fetch();\n                        }\n                    } else if (loadOnDemand.valueMapper) {\n                        that.one('dataBound', () => {\n                            that._useValueMapperWithValue(value);\n                        });\n                    } else {\n                        that.dataSource.fetch(function() {\n                            that._selection._setValue(value);\n                        });\n                    }\n\n                    return;\n                } else if (loadOnDemand && loadOnDemand.valueMapper) {\n                    that._useValueMapperWithValue(value);\n                return;\n                }\n            }\n\n            return that._selection._setValue(value);\n        },\n\n        text: function(text) {\n            var loweredText;\n            var ignoreCase = this.options.ignoreCase;\n\n            text = text === null ? \"\" : text;\n\n            if (text !== undefined$1 && !this._isMultipleSelection()) {\n                if (typeof text !== \"string\") {\n                    this._textAccessor(text);\n                    return;\n                }\n\n                loweredText = ignoreCase ? text : text.toLowerCase();\n\n                this._selectItemByText(loweredText);\n\n                this._textAccessor(loweredText);\n                this._refreshFloatingLabel();\n            } else {\n                return this._textAccessor();\n            }\n\n        },\n\n        _aria: function() {\n            var input = this.wrapper.find(\"span.k-input-inner\");\n\n            this.wrapper.attr({\n                \"aria-haspopup\": \"tree\",\n                \"aria-expanded\": false,\n                \"aria-controls\": this.treeview.element.attr(\"id\"),\n                \"role\": \"combobox\"\n            });\n\n            this._activeId = kendo.guid();\n            this._ariaLabel(this.wrapper);\n\n            if (this.filterInput && this.options.filterLabel) {\n                this.filterInput.attr(\"aria-label\", this.options.filterLabel);\n            }\n\n            if (this.options.checkboxes) {\n                this.wrapper.attr({\n                    \"aria-describedby\": this.tagList[0].id\n                });\n                this.tagList.attr({\n                    \"role\": \"listbox\",\n                    \"aria-orientation\": \"horizontal\",\n                    \"aria-multiselectable\": true\n                });\n                this._ariaLabel(this.tagList);\n            }\n        },\n\n        _header: function() {\n            var list = this;\n            var header = $(list.header);\n            var template = list.options.headerTemplate;\n\n            kendo.destroy(header);\n            header.remove();\n\n            if (!template) {\n                list.header = null;\n                return;\n            }\n\n            var headerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n            header = $(headerTemplate({}));\n\n            list.header = header[0] ? header : null;\n            list.list.prepend(header);\n        },\n\n        _noData: function() {\n            var list = this;\n            var noData = $(list.noData);\n            var template = list.options.noDataTemplate === true ? encode(list.options.messages.noData) : list.options.noDataTemplate;\n\n            kendo.destroy(noData);\n            noData.remove();\n\n            if (!template) {\n                list.noData = null;\n                return;\n            }\n\n            list.noData = $('<div class=\"k-no-data\"></div>').hide().appendTo(list.list);\n            list.noDataTemplate = typeof template !== \"function\" ? kendo.template(() => template) : template;\n        },\n\n        _renderNoData: function() {\n            var list = this;\n            var noData = list.noData;\n\n            if (!noData) {\n                return;\n            }\n\n            noData.html(list.noDataTemplate({ instance: list }));\n        },\n\n        _footer: function() {\n            var list = this;\n            var footer = $(list.footer);\n            var template = list.options.footerTemplate;\n\n            kendo.destroy(footer);\n            footer.remove();\n\n            if (!template) {\n                list.footer = null;\n                return;\n            }\n\n            list.footer = $('<div class=\"k-footer\"></div>').appendTo(list.list);\n            list.footerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _renderFooter: function() {\n            var list = this;\n            var footer = list.footer;\n\n            if (!footer) {\n                return;\n            }\n\n            footer.html(list.footerTemplate({ instance: list }));\n        },\n\n        _enable: function() {\n            var that = this,\n                options = that.options,\n                disabled = that.element.is(\"[disabled]\");\n\n            if (options.enable !== undefined$1) {\n                options.enabled = options.enable;\n            }\n\n            if (!options.enabled || disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(that.element.is(\"[readonly]\"));\n            }\n        },\n\n        _adjustListWidth: function() {\n            var that = this,\n                list = that.list,\n                width = list[0].style.width,\n                wrapper = that.wrapper,\n                computedStyle, computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = parseFloat(computedStyle && computedStyle.width) || outerWidth(wrapper);\n\n            if (computedStyle && browser.msie) { // getComputedStyle returns different box in IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: that.options.autoWidth ? \"auto\" : width,\n                minWidth: width,\n                whiteSpace: that.options.autoWidth ? \"nowrap\" : \"normal\"\n            })\n            .data(WIDTH, width);\n\n            return true;\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    setTimeout(function() {\n                        that.value(that._initial);\n                    });\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _hasActionSheet: function() {\n            return this.options.adaptiveMode === \"auto\" && !this.bigScreenMQL.mediaQueryList.matches;\n        },\n\n        _popup: function() {\n            var that = this;\n            var list = this;\n\n            if (that.options.checkboxes) {\n                if (that.options.checkAll) {\n                    that.list.attr(\"role\", \"application\");\n                }\n\n                that.list.addClass(\"k-multiselecttree-popup\");\n            } else {\n                that.list.addClass(\"k-dropdowntree-popup\");\n            }\n\n            if (list.options.adaptiveMode == \"auto\" && !list.bigScreenMQL.mediaQueryList.matches) {\n                $(document.body).append(list.list);\n                list.popup = new ui.ActionSheet(list.list, {\n                    adaptive: true,\n                    hideOverflowContent: true,\n                    headerTemplate: (options) =>\n                        `<div class=\"k-text-center k-actionsheet-titlebar\" >` +\n                            '<div class=\"k-actionsheet-titlebar-group k-hbox\">' +\n                                `<div  class=\"k-actionsheet-title\">` +\n                                    `<div class=\"k-text-center\">${list.label ? list.label.element.text() : list.options.label || list.options.placeholder || \"Select\"}</div>` +\n                                    (list.options.placeholder && (list.label || list.options.label) ? `<div class=\"k-actionsheet-subtitle k-text-center\">${list.options.placeholder || \"\"}</div>` : \"\") +\n                                '</div>' +\n                                (options.closeButton ?\n                                '<div class=\"k-actionsheet-actions\">' +\n                                    kendo.html.renderButton(`<button tabindex=\"-1\" ${kendo.attr(\"ref-actionsheet-close-button\")}></button>`, { icon: \"x\", fillMode: \"flat\", size: \"large\" }) +\n                                '</div>'\n                                : \"\") +\n                                '</div>' +\n                            (this._isFilterEnabled() ? `<div class=\"k-actionsheet-titlebar-group k-actionsheet-filter\"></div>` : '') +\n                        '</div>',\n                    closeButton: true,\n                    focusOnActivate: false,\n                    fullscreen: list.smallScreenMQL.mediaQueryList.matches,\n                    popup: extend({}, list.options.popup, {\n                        anchor: list.wrapper,\n                        open: list._openHandler.bind(list),\n                        close: list._closeHandler.bind(list),\n                        animation: list.options.animation,\n                        isRtl: support.isRtl(list.wrapper),\n                        autosize: list.options.autoWidth,\n                    }),\n                    deactivate: () => {\n                        this._refreshFloatingLabel();\n                    },\n                    activate: () => {\n                        this._refreshFloatingLabel();\n                    }\n                });\n            } else {\n                list.popup = new ui.Popup(list.list, extend({}, list.options.popup, {\n                    anchor: list.wrapper,\n                    open: list._openHandler.bind(list),\n                    close: list._closeHandler.bind(list),\n                    animation: list.options.animation,\n                    isRtl: support.isRtl(list.wrapper),\n                    autosize: list.options.autoWidth,\n                    deactivate: () => {\n                        this._refreshFloatingLabel();\n                    },\n                    activate: () => {\n                        this._refreshFloatingLabel();\n                    }\n                }));\n\n                list.popup.one(\"open\", list._popupOpen.bind(list));\n            }\n        },\n\n        _allowOpening: function() {\n            return this.options.noDataTemplate || this.treeview.dataSource.flatView().length;\n        },\n\n        _placeholder: function(show) {\n            if (this.span) {\n                this.span.toggleClass(\"k-readonly\", show).text(show ? this.options.placeholder : \"\");\n            }\n        },\n\n        _currentValue: function(dataItem) {\n            var currentValue = this._value(dataItem);\n            if (!currentValue && currentValue !== 0) {\n                currentValue = dataItem;\n            }\n\n            return currentValue;\n        },\n\n        _checkValue: function(dataItem) {\n            var value = \"\";\n            var indexOfValue = -1;\n            var currentValue = this.value();\n            var isMultiple = this.options.tagMode === \"multiple\";\n\n            if (dataItem || dataItem === 0) {\n                if (dataItem.level) {\n                    dataItem._level = dataItem.level();\n                }\n\n                value = this._currentValue(dataItem);\n\n                indexOfValue = currentValue.indexOf(value);\n            }\n\n            if (dataItem.checked) {\n                var alreadyAddedTag = $.grep(this._tags, function( item ) {\n                    return item.uid === dataItem._tagUid;\n                });\n\n                if (alreadyAddedTag.length) {\n                    return;\n                }\n\n                var itemToAdd = new ObservableObject(dataItem.toJSON());\n                dataItem._tagUid = itemToAdd.uid;\n                this._tags.push(itemToAdd);\n\n                if (this._tags.length === 1) {\n                    this.span.hide();\n\n                    if (!isMultiple) {\n                        this._multipleTags.push(itemToAdd);\n                    }\n                }\n\n                if (indexOfValue === -1) {\n                    currentValue.push(value);\n                    this.setValue(currentValue);\n                }\n            } else {\n                var itemToRemove = this._tags.find(function(item) {\n                    return item.uid === dataItem._tagUid;\n                });\n\n                var idx = this._tags.indexOf(itemToRemove);\n\n                if (idx !== -1) {\n                    this._tags.splice(idx, 1);\n                } else {\n                    this._treeViewCheckAllCheck(dataItem);\n                    return;\n                }\n\n                if (this._tags.length === 0) {\n                    this.span.show();\n                    if (!isMultiple) {\n                        this._multipleTags.splice(0, 1);\n                    }\n                }\n                if (indexOfValue !== -1) {\n                    currentValue.splice(indexOfValue, 1);\n                    this.setValue(currentValue);\n                }\n            }\n\n            this._treeViewCheckAllCheck(dataItem);\n            if (!this._preventChangeTrigger && !this._valueMethodCalled && !this._noInitialValue) {\n                this.trigger(CHANGE);\n            }\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n\n            this.popup.position();\n            this._toggleCloseVisibility();\n            this._updateSelectedOptions();\n        },\n\n        _updateSelectedOptions: function() {\n            if (this.element[0].tagName.toLowerCase() !== 'select') {\n                return;\n            }\n\n            var selectedItems = this._tags;\n            var options = '';\n            var dataItem = null;\n            var value = null;\n\n            if (selectedItems.length) {\n                for (var idx = 0; idx < selectedItems.length; idx++) {\n                    dataItem = selectedItems[idx];\n\n                    value = this._value(dataItem);\n                    options += this._option(value, this._text(dataItem), true);\n                }\n            }\n\n            this.element.html(options);\n        },\n\n        _option: function(dataValue, dataText, selected) {\n            var option = \"<option\";\n\n            if (dataValue !== undefined$1) {\n                dataValue += \"\";\n\n                if (dataValue.indexOf('\"') !== -1) {\n                    dataValue = dataValue.replace(quotRegExp, \"&quot;\");\n                }\n\n                option += ' value=\"' + dataValue + '\"';\n            }\n\n            if (selected) {\n                option += ' selected';\n            }\n\n            option += \">\";\n\n            if (dataText !== undefined$1) {\n                option += kendo.htmlEncode(dataText);\n            }\n\n            return option += \"</option>\";\n        },\n\n        _selectValue: function(dataItem) {\n            var value = \"\";\n            var text = \"\";\n\n            if (dataItem || dataItem === 0) {\n                if (dataItem.level) {\n                    dataItem._level = dataItem.level();\n                }\n                text = this._text(dataItem) || dataItem;\n                value = this._currentValue(dataItem);\n            }\n\n            if (value === null) {\n                value = \"\";\n            }\n            this.setValue(value);\n            this._textAccessor(text, dataItem);\n            this._accessor(value);\n\n            if (!this._preventChangeTrigger && !this._valueMethodCalled) {\n                this.trigger(CHANGE);\n            }\n            this._valueMethodCalled = false;\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n\n            this.popup.position();\n            this._toggleCloseVisibility();\n        },\n\n        _clearClick: function(e) {\n            e.stopPropagation();\n            this.wrapper.trigger(\"focus\");\n            this._clearTextAndValue();\n        },\n\n        _clearTextAndValue: function() {\n            var shouldTrigger = this._selection._clearValue();\n\n            this.setValue([]);\n            this._clearInput();\n            this._clearText();\n            this.popup.position();\n            this._toggleCloseVisibility();\n            this._refreshFloatingLabel();\n\n            if (shouldTrigger) {\n                this.trigger(CHANGE);\n            }\n        },\n\n        _clearText: function() {\n            if (this.options.placeholder) {\n                this._placeholder(true);\n            } else {\n                if (this.span) {\n                    this.span.html(\"\");\n                }\n            }\n        },\n\n        _inputTemplate: function() {\n            var template = this.options.valueTemplate;\n\n            if (!template) {\n                template = (data) => encode(this._text(data));\n            } else {\n                template = kendo.template(template);\n            }\n\n            this.valueTemplate = template;\n        },\n\n        _assignInstance: function(text, value) {\n            var dataTextField = this.options.dataTextField;\n            var dataItem = {};\n\n            if (dataTextField) {\n                assign(dataItem, dataTextField.split(DOT), text);\n                assign(dataItem, this.options.dataValueField.split(DOT), value);\n                dataItem = new ObservableObject(dataItem);\n            } else {\n                dataItem = text;\n            }\n\n            return dataItem;\n        },\n\n        _textAccessor: function(text, dataItem) {\n            var valueTemplate = this.valueTemplate;\n            var span = this.span;\n\n            if (text === undefined$1) {\n                return span.text();\n            }\n\n            span.removeClass(\"k-readonly\");\n\n            if (!dataItem && ($.isPlainObject(text) || text instanceof ObservableObject)) {\n                dataItem = text;\n            }\n\n            if (!dataItem) {\n                dataItem = this._assignInstance(text, this._accessor());\n            }\n\n            var getElements = function() {\n                return {\n                    elements: span.get(),\n                    data: [ { dataItem: dataItem } ]\n                };\n            };\n\n            try {\n                span.html(valueTemplate(dataItem));\n            } catch (e) {\n                //dataItem has missing fields required in custom template\n                if (span) {\n                    span.html(\"\");\n                }\n            }\n        },\n\n        _accessors: function() {\n            var element = this.element;\n            var options = this.options;\n            var textField = element.attr(kendo.attr(\"text-field\"));\n            var valueField = element.attr(kendo.attr(\"value-field\"));\n\n            if (!options.dataTextField && textField) {\n                options.dataTextField = textField;\n            }\n\n            if (!options.dataValueField && valueField) {\n                options.dataValueField = valueField;\n            }\n\n            options.dataTextField = options.dataTextField || \"text\";\n            options.dataValueField = options.dataValueField || \"value\";\n\n            this._text = getterFunction(options.dataTextField);\n            this._value = getterFunction(options.dataValueField);\n        },\n\n        _accessor: function(value, idx) {\n            return this._accessorInput(value, idx);\n        },\n\n        _accessorInput: function(value) {\n            var element = this.element[0];\n\n            if (value === undefined$1) {\n                return element.value;\n            } else {\n                if (value === null) {\n                    value = \"\";\n                }\n                element.value = value;\n            }\n        },\n\n        _clearInput: function() {\n            var element = this.element[0];\n            element.value = \"\";\n        },\n\n        _clearButton: function() {\n            var clearTitle = encode(this.options.messages.clear);\n\n            if (!this._clear) {\n                this._clear = $('<span unselectable=\"on\" class=\"k-clear-value\" title=\"' + clearTitle + '\">' + kendo.ui.icon(\"x\") + '</span>').attr({\n                    \"tabIndex\": -1\n                });\n            }\n\n            if (this.options.clearButton) {\n                this._clear.insertAfter(this.span.parent());\n            } else {\n                if (!this.options.clearButton) {\n                    this._clear.remove();\n                }\n            }\n        },\n\n        _toggleCloseVisibility: function() {\n            var isReadOnly = this.element.attr(READONLY);\n            var hasValue = (this.value() && !this._isMultipleSelection()) || this.value().length;\n            var valueDoesNotEqualPlaceHolder = this.element.val() && this.element.val() !== this.options.placeholder;\n\n            if ((!isReadOnly && (hasValue || valueDoesNotEqualPlaceHolder))) {\n                this._showClear();\n            } else {\n                this._hideClear();\n            }\n        },\n\n        _showClear: function() {\n            if (this._clear) {\n                this._clear.removeClass(HIDDENCLASS);\n            }\n        },\n\n        _hideClear: function() {\n            if (this._clear) {\n                this._clear.addClass(HIDDENCLASS);\n            }\n        },\n\n        _openHandler: function(e) {\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", true);\n                 this.tree.attr(\"aria-hidden\", false);\n            }\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", false);\n                 this.tree.attr(\"aria-hidden\", true);\n            }\n        },\n\n        _treeview: function() {\n            var that = this;\n\n            if (that.options.adaptiveMode != \"auto\" && that.options.height) {\n                that.tree.css('max-height',that.options.height);\n            }\n            that.tree.attr('id', kendo.guid());\n            that.treeview = new TreeView(that.tree, extend({ size: that.options.size }, that.options.treeview), that);\n            that.dataSource = that.treeview.dataSource;\n\n            that.treeview.bind(\"select\",function(e) {\n                that.trigger(\"select\", e);\n            });\n        },\n\n        _treeViewDataBound: function(e) {\n            if (e.node && this._prev && this._prev.length) {\n                e.sender.expand(e.node);\n            }\n\n            if (this._filtering) {\n                if (!e.node) {\n                    this._filtering = false;\n                }\n\n                if (!this._isMultipleSelection()) {\n                    this._deselectItem(e);\n                }\n                return;\n            }\n\n            if (!this.treeview) {\n                this.treeview = e.sender;\n            }\n\n            if (!e.node) {\n                var rootItems = e.sender.dataSource.data();\n\n                this._checkLoadedItems(rootItems);\n                if (this._noInitialValue) {\n                    this._noInitialValue = false;\n                }\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    var subItems = rootItem.children.data();\n                    this._checkLoadedItems(subItems);\n                }\n            }\n                this.trigger(\"dataBound\", e);\n        },\n\n        _deselectItem: function(e) {\n            var items = [];\n            if (!e.node) {\n                items = e.sender.dataSource.data();\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    items = rootItem.children.data();\n                }\n            }\n\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].selected &&\n                    !this._valueComparer(items[i], this.value())) {\n                    items[i].set(\"selected\", false);\n                }\n            }\n        },\n\n        _checkLoadedItems: function(items) {\n            var value = this.value();\n\n            if (!items) {\n                return;\n            }\n\n            for (var idx = 0; idx < items.length; idx++) {\n                this._selection._checkLoadedItem(items[idx], value);\n            }\n        },\n\n        _treeViewCheckAllCheck: function(dataItem) {\n            if (this.options.checkAll && this.checkAll) {\n                this._getAllChecked();\n\n                if (dataItem.checked) {\n                    this._checkCheckAll();\n                } else {\n                    this._uncheckCheckAll();\n                }\n            }\n        },\n\n        _checkCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreChecked) {\n                checkAllCheckbox.prop('checked', true)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _uncheckCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreUnchecked) {\n                checkAllCheckbox.prop('checked', false)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _filterHeader: function() {\n            var filterTemplate = '<div class=\"k-list-filter\">' +\n                '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\" type=\"text\" autocomplete=\"off\">' +\n                    kendo.ui.icon({ icon: \"search\", iconClass: \"k-input-icon\" }) +\n                '</span>' +\n            '</div>';\n\n            if (this.filterInput) {\n                this.filterInput\n                    .off(ns)\n                    .parent()\n                    .remove();\n\n                this.filterInput = null;\n            }\n\n            if (this._isFilterEnabled()) {\n                this._disableCheckChildren();\n\n                this.filterInput = $('<input class=\"k-input-inner\" type=\"text\" />')\n                    .attr({\n                        placeholder: this.element.attr(\"placeholder\"),\n                        title: this.element.attr(\"title\"),\n                        role: \"searchbox\",\n                        \"aria-haspopup\": \"tree\",\n                        \"aria-autocomplete\": \"list\"\n                    });\n\n                this.filterInput.on(\"input\" , this._filterChange.bind(this));\n\n                if (this._hasActionSheet()) {\n                    $(filterTemplate)\n                    .appendTo(this.popup.wrapper.find(\".k-actionsheet-filter\"))\n                    .find(\".k-textbox\")\n                    .append(this.filterInput);\n                } else {\n                    $(filterTemplate)\n                    .insertBefore(this.tree)\n                    .find(\".k-textbox\")\n                    .append(this.filterInput);\n                }\n            }\n        },\n\n        _filterChange: function() {\n            if (this.filterInput) {\n                this._search();\n            }\n        },\n\n        _disableCheckChildren: function() {\n            if (this._isMultipleSelection() && this.options.treeview.checkboxes && this.options.treeview.checkboxes.checkChildren) {\n                this.options.treeview.checkboxes.checkChildren = false;\n            }\n        },\n\n        _checkAll: function() {\n            if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox-label, .k-checkbox\")\n                    .off(ns);\n                this.checkAll.remove();\n\n                this.checkAll = null;\n            }\n\n            if (this._isMultipleSelection() && this.options.checkAll) {\n                var checkAllCheckbox = html.renderCheckBox(extend({}, this.options, {\n                    label: \"Check All\",\n                    rounded: \"medium\"\n                }));\n                this.checkAll = $('<div class=\"k-check-all\">' + checkAllCheckbox + '</div>').insertBefore(this.tree);\n                this.checkAll.find(\".k-checkbox-label\").html(kendo.template(this.options.checkAllTemplate)({ instance: this }));\n                this.checkAll.find(\".k-checkbox\")\n                                .on(\"change\" + ns, this._changeCheckAll.bind(this))\n                                .on(\"keydown\" + ns, this._keydownCheckAll.bind(this));\n                this._disabledCheckedItems = [];\n                this._disabledUnCheckedItems = [];\n\n                this._getAllChecked();\n\n                if (!this._allItemsAreUnchecked) {\n                    this._checkCheckAll();\n                }\n            }\n        },\n\n        _changeCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(isChecked);\n        },\n\n        _updateCheckAll: function(isChecked) {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            this._toggleCheckAllItems(isChecked);\n            checkAllCheckbox.prop('checked', isChecked);\n            if (this._disabledCheckedItems.length && this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', true);\n            } else if (this._disabledCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', !isChecked);\n            } else if (this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', isChecked);\n            } else {\n                checkAllCheckbox.prop('indeterminate', false);\n            }\n            this._disabledCheckedItems = [];\n            this._disabledUnCheckedItems = [];\n        },\n\n        _keydownCheckAll: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n\n            if ((altKey && key === keys.UP) || key === keys.ESC || key === keys.TAB) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.UP) {\n                if (this.filterInput) {\n                    this.filterInput.trigger(\"focus\");\n                } else {\n                    this.wrapper.trigger(\"focus\");\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.DOWN) {\n                if (this.tree && this.tree.is(\":visible\")) {\n                    this.tree.trigger(\"focus\");\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.SPACEBAR && (browser.msie || browser.edge)) {\n                this._clickCheckAll();\n                e.preventDefault();\n            }\n        },\n\n        _clickCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(!isChecked);\n\n            checkAllCheckbox.trigger(\"focus\");\n\n        },\n        //treeview\n        _dfs: function(items, action, prop) {\n            for (var idx = 0; idx < items.length; idx++) {\n                if (!this[action](items[idx], prop)) {\n                    break;\n                }\n                this._traverceChildren(items[idx], action, prop);\n            }\n        },\n\n        _uncheckItemByUid: function(uid) {\n            this._dfs(this.dataSource.data(), '_uncheckItemEqualsUid', uid);\n        },\n\n        _uncheckItemEqualsUid: function(item, uid) {\n            if (item.enabled !== false && item._tagUid == uid) {\n                item.set(\"checked\", false);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByText: function(text) {\n            this._dfs(this.dataSource.data(), '_itemEqualsText', text);\n        },\n\n        _itemEqualsText: function(item, text) {\n            if (item.enabled !== false && this._text(item) === text) {\n                this.treeview.select(this.treeview.findByUid(item.uid));\n                this._selectValue(item);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByValue: function(value) {\n            this._dfs(this.dataSource.data(), '_itemEqualsValue', value);\n        },\n\n        _itemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n\n                this.treeview.select(this.treeview.findByUid(item.uid));\n\n                return false;\n            }\n            return true;\n        },\n\n        _checkItemByValue: function(value) {\n            var items = this.treeview.dataItems();\n            for (var idx = 0; idx < value.length; idx++) {\n                this._dfs(items, '_checkItemEqualsValue', value[idx]);\n            }\n        },\n\n        _checkItemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n                    item.set(\"checked\", true);\n                return false;\n            }\n            return true;\n        },\n\n        _valueComparer: function(item, value) {\n            var itemValue = this._value(item);\n            var itemText;\n\n            if (!this._isNullorUndefined(itemValue)) {\n                if (this._isNullorUndefined(value)) {\n                    return false;\n                }\n\n                var newValue = this._value(value);\n\n                if (newValue) {\n                    return itemValue == newValue;\n                } else {\n                    return itemValue == value;\n                }\n            }\n\n            itemText = this._text(item);\n            if (itemText) {\n                if (this._text(value)) {\n                    return itemText == this._text(value);\n                } else {\n                    return itemText == value;\n                }\n            }\n\n            return false;\n        },\n\n        _isNullorUndefined: function(value) {\n            return value === undefined$1 || value === null;\n        },\n\n        _getAllChecked: function() {\n            this._allCheckedItems = [];\n            this._allItemsAreChecked = true;\n            this._allItemsAreUnchecked = true;\n\n            this._dfs(this.dataSource.data(), '_getAllCheckedItems');\n\n            return this._allCheckedItems;\n        },\n\n        _getAllCheckedItems: function(item) {\n            if (this._allItemsAreChecked) {\n                this._allItemsAreChecked = item.checked;\n            }\n\n            if (this._allItemsAreUnchecked) {\n                this._allItemsAreUnchecked = !item.checked;\n            }\n\n            if (item.checked) {\n                this._allCheckedItems.push(item);\n            }\n            return true;\n        },\n\n        _traverceChildren: function(item, action, prop) {\n            var childrenField = (item._childrenOptions && item._childrenOptions.schema) ? item._childrenOptions.schema.data : null;\n            var subItems = item[childrenField] || item.items || item.children;\n\n            if (!subItems) {\n                return;\n            }\n\n            this._dfs(subItems, action, prop);\n        },\n\n        _toggleCheckAllItems: function(checked) {\n            this._dfs(this.dataSource.data(), '_checkAllCheckItem', checked);\n        },\n\n        _checkAllCheckItem: function(item, checked) {\n            if (item.enabled === false) {\n                if (item.checked) {\n                    this._disabledCheckedItems.push(item);\n                } else {\n                    this._disabledUnCheckedItems.push(item);\n                }\n            } else {\n                item.set(\"checked\", checked);\n            }\n            return true;\n        },\n\n        _isFilterEnabled: function() {\n            var filter = this.options.filter;\n            return filter && filter !== \"none\";\n        },\n\n        _editable: function(options) {\n            var that = this;\n            var element = that.element;\n            var disable = options.disable;\n            var readonly = options.readonly;\n            var wrapper = that.wrapper.add(that.filterInput).off(ns);\n            var dropDownWrapper = that.wrapper.off(HOVEREVENTS);\n            if (that._isMultipleSelection()) {\n                that.tagList.off(CLICK + ns);\n            }\n            if (!readonly && !disable) {\n                element.prop(DISABLED, false).prop(READONLY, false);\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                that._clear.on(\"click\" + ns, that._clearClick.bind(that));\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX))\n                    .attr(ARIA_DISABLED, false)\n                    .on(\"keydown\" + ns, that._keydown.bind(that))\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n\n                that.wrapper.on(CLICK + ns, that._wrapperClick.bind(that));\n\n                if (this._isMultipleSelection()) {\n                    that.tagList.on(CLICK + ns, \"div.k-chip\", function(e) {\n                        $(e.currentTarget).addClass(FOCUSED);\n                    });\n\n                    that.tagList.on(CLICK + ns, \".k-chip-remove-action .k-icon\", function(e) {\n                        that._removeTagClick(e);\n                    });\n                }\n            } else if (disable) {\n                wrapper.removeAttr(TABINDEX);\n                dropDownWrapper\n                    .addClass(STATEDISABLED);\n            } else {\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX));\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED);\n\n                wrapper\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n            }\n\n            element.attr(DISABLED, disable)\n                   .attr(READONLY, readonly);\n\n            wrapper.attr(ARIA_DISABLED, disable);\n        },\n\n        _focusinHandler: function() {\n            this.wrapper.addClass(FOCUSED);\n            this._prevent = false;\n        },\n\n        _focusoutHandler: function() {\n            var that = this;\n\n            if (this._isMultipleSelection()) {\n                this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED);\n            }\n            if (!that._prevent) {\n                this.wrapper.removeClass(FOCUSED);\n                that._prevent = true;\n                that.element.trigger(\"blur\");\n            }\n        },\n\n        _toggle: function(open) {\n            open = open !== undefined$1 ? open : !this.popup.visible();\n\n            this[open ? OPEN : CLOSE]();\n        },\n\n        _wrapperClick: function(e) {\n            e.preventDefault();\n\n            this.popup.unbind(\"activate\", this._focusInputHandler);\n            this._focused = this.wrapper;\n            this._prevent = false;\n            this._toggle();\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n        },\n\n        _focusInput: function() {\n            if (this.filterInput) {\n                this.filterInput.trigger(\"focus\");\n            } else if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n            } else if (this.tree.is(\":visible\")) {\n                this.tree[0].focus({ preventScroll: true });\n                this._ie11PreventScrollOnFocus();\n            }\n        },\n\n        _ie11PreventScrollOnFocus: function() {\n            if (browser.msie && browser.version == 11) {\n                var popup = this.popup;\n                popup._toggleResize(false);\n                setTimeout(function() {\n                    popup._toggleResize(true);\n                },50);\n            }\n        },\n\n        _keydown: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n            var isFilterInputActive;\n            var isWrapperActive;\n            var focused, tagItem;\n\n            var isPopupVisible = this.popup.visible();\n\n            if (this.filterInput) {\n                isFilterInputActive = this.filterInput[0] === activeElement();\n            }\n\n            if (this.wrapper) {\n                isWrapperActive = this.wrapper[0] === activeElement();\n            }\n\n            if (isWrapperActive) {\n                if (key === keys.ESC) {\n                    this._clearTextAndValue();\n                    e.preventDefault();\n                    return;\n                }\n\n                if (this._isMultipleSelection()) {\n                    if (key === keys.LEFT) {\n                        this._focusPrevTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.RIGHT) {\n                        this._focusNextTag();\n                          e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.HOME) {\n                        this._focusFirstTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.END) {\n                        this._focusLastTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.DELETE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if (focused.length) {\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.BACKSPACE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if (focused.length) {\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        } else {\n                            focused = this._focusLastTag();\n                            if (focused.length) {\n                                tagItem = this._tags[focused.index()];\n                                this._removeTag(tagItem);\n                            }\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n                }\n            }\n\n\n            if (isFilterInputActive) {\n                if (key === keys.ESC) {\n                    this._clearFilter();\n                }\n\n                if ((key === keys.UP) && !altKey) {\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                }\n\n                if (browser.msie && browser.version < 10) {\n                    if (key === keys.BACKSPACE || key === keys.DELETE) {\n                        this._search();\n                    }\n                }\n\n                if (key === keys.TAB) {\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                    return;\n                }\n            }\n\n            if ((altKey && key === keys.UP) || key === keys.ESC) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.ENTER && this._typingTimeout && this.filterInput && isPopupVisible) {\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.SPACEBAR && !isFilterInputActive) {\n                this._toggle(!isPopupVisible);\n                e.preventDefault();\n            }\n\n            if ((altKey && key === keys.DOWN) && !isPopupVisible) {\n                this.open();\n                e.preventDefault();\n            }\n\n            if ((key === keys.DOWN) && isPopupVisible) {\n                if (this.filterInput && !isFilterInputActive) {\n                    this.filterInput.trigger(\"focus\");\n                } else if (this.checkAll && this.checkAll.is(\":visible\")) {\n                    this.checkAll.find('input').trigger(\"focus\");\n                } else if (this.tree.is(\":visible\")) {\n                    this.tree[0].focus({ preventScroll: true });\n                    this._ie11PreventScrollOnFocus();\n                }\n                e.preventDefault();\n            }\n\n            if (key === keys.TAB && isPopupVisible) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n            }\n        },\n\n        _focusPrevTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .prev(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusLastTag();\n            }\n        },\n\n        _focusNextTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .next(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusFirstTag();\n            }\n        },\n\n        _focusFirstTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var firstTag = this.tagList.children(CHIP).first()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return firstTag;\n        },\n\n        _focusLastTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var lastTag = this.tagList.children(CHIP).last()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return lastTag;\n        },\n\n        _clearDisabledTag: function() {\n            this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED).removeAttr(\"id\");\n        },\n\n        _search: function() {\n            var that = this;\n            clearTimeout(that._typingTimeout);\n\n            that._typingTimeout = setTimeout(function() {\n                var value = that.filterInput.val();\n\n                if (that._prev !== value) {\n                    that._prev = value;\n                    that.search(value);\n                }\n\n                that._typingTimeout = null;\n            }, that.options.delay);\n        },\n\n        _clearFilter: function() {\n            if (this.filterInput.val().length) {\n                this.filterInput.val(\"\");\n                this._prev = \"\";\n                this._filtering = true;\n                this.treeview.dataSource.filter({});\n            }\n        },\n\n        _removeTagClick: function(e) {\n            e.stopPropagation();\n            var tagItem = this._tags[$(e.currentTarget.closest(CHIP)).index()];\n            this._removeTag(tagItem);\n        },\n\n        _removeTag: function(tagItem) {\n           if (!tagItem) {\n                return;\n           }\n\n           var uid = tagItem.uid;\n           this._uncheckItemByUid(uid);\n        }\n    });\n\n    function assign(instance, fields, value) {\n        var idx = 0,\n            lastIndex = fields.length - 1,\n            field;\n\n        for (; idx < lastIndex; ++idx) {\n            field = fields[idx];\n\n            if (!(field in instance)) {\n                instance[field] = {};\n            }\n\n            instance = instance[field];\n        }\n\n        instance[fields[lastIndex]] = value;\n    }\n\n    ui.plugin(DropDownTree);\n\n    kendo.cssProperties.registerPrefix(\"DropDownTree\", \"k-picker-\");\n\n    kendo.cssProperties.registerValues(\"DropDownTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    kendo.cssProperties.registerPrefix(\"MultiSelectTree\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"MultiSelectTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    var SingleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            this._wrapper();\n            this._span();\n        },\n\n        _preselect: function(data) {\n            var dropdowntree = this._dropdowntree;\n\n            dropdowntree._selectValue(data);\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                DOMelement = element[0],\n                wrapper;\n\n            wrapper = element.parent();\n\n            if (!wrapper.is(\"span.k-dropdowntree\")) {\n                wrapper = element.wrap(\"<span />\").parent();\n                wrapper[0].style.cssText = DOMelement.style.cssText;\n                wrapper[0].title = DOMelement.title;\n            }\n\n            dropdowntree._focused = dropdowntree.wrapper = wrapper\n                .addClass(\"k-dropdowntree k-picker\")\n                .addClass(DOMelement.className)\n                .removeClass('input-validation-error')\n                .removeClass('k-invalid')\n                .css(\"display\", \"\")\n                .attr({\n                    accesskey: element.attr(\"accesskey\"),\n                    unselectable: \"on\"\n                });\n\n            element.hide().removeAttr(\"accesskey\");\n        },\n\n        _span: function() {\n            var dropdowntree = this._dropdowntree,\n                wrapper = dropdowntree.wrapper,\n                SELECTOR = \"span.k-input-value-text\",\n                span;\n\n            span = wrapper.find(SELECTOR);\n\n            if (!span[0]) {\n                wrapper.append('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>' +\n                                html.renderButton('<button unselectable=\"on\" class=\"k-input-button\" aria-label=\"select\" tabindex=\"-1\"></button>', extend({}, dropdowntree.options, {\n                                    icon: \"caret-alt-down\",\n                                    shape: \"none\",\n                                    rounded: \"none\"\n                                })))\n                       .append(dropdowntree.element);\n\n                span = wrapper.find(SELECTOR);\n            }\n\n            dropdowntree.span = span;\n            dropdowntree._arrow = wrapper.find(\".k-input-button\");\n            dropdowntree._arrowIcon = dropdowntree._arrow.find(\".k-icon,.k-svg-icon\");\n        },\n\n        _setValue: function(value) {\n            var dropdowntree = this._dropdowntree;\n            var currentValue;\n\n            if (value === undefined$1 || value === null) {\n                currentValue = dropdowntree._values.slice()[0];\n                value = (typeof currentValue === \"object\") ? currentValue : dropdowntree._accessor() || currentValue;\n                return value === undefined$1 || value === null ? \"\" : value;\n            }\n            dropdowntree._valueMethodCalled = true;\n            if (value.length === 0) {\n                dropdowntree._clearTextAndValue();\n                dropdowntree._valueMethodCalled = false;\n                return;\n            }\n\n            dropdowntree._selectItemByValue(value);\n            dropdowntree._toggleCloseVisibility();\n            dropdowntree._refreshFloatingLabel();\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var selectedNode = dropdowntree.treeview.select();\n            var dropdowntreeHasValue = dropdowntree._values.length;\n            var triggerChange = false;\n            if (dropdowntree.treeview.dataItem(selectedNode)) {\n                dropdowntree.treeview.dataItem(selectedNode).set('selected', false);\n                triggerChange = true;\n            } else if (dropdowntreeHasValue > 0) {\n                triggerChange = true;\n            }\n\n            if (!dropdowntree._valueMethodCalled && triggerChange) {\n                return true;\n            }\n\n            return false;\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (!dropdowntree._isNullorUndefined(value) && value !== \"\") {\n                if (dropdowntree._valueComparer(tempItem, value)) {\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"selected\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                } else if (tempItem.selected) {\n                    dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n                }\n\n            } else if (!value && tempItem.selected) {\n                dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n            }\n        }\n    });\n\n    var MultipleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            var dropdowntree = this._dropdowntree;\n\n            this._tagTemplate();\n            dropdowntree.element.attr(\"multiple\", \"multiple\").hide();\n            this._wrapper();\n            dropdowntree._tags = new ObservableArray([]);\n            dropdowntree._multipleTags = new ObservableArray([]);\n            this._tagList();\n            dropdowntree.span = $('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>').appendTo(dropdowntree.wrapper).find(\".k-input-value-text\");\n        },\n\n        _preselect: function(data, value) {\n            var dropdowntree = this._dropdowntree;\n            var valueToSelect = value || dropdowntree.options.value;\n\n            if (!Array.isArray(data) && !(data instanceof kendo.data.ObservableArray)) {\n                data = [data];\n            }\n\n            if ($.isPlainObject(data[0]) || data[0] instanceof kendo.data.ObservableObject || !dropdowntree.options.dataValueField) {\n                dropdowntree.dataSource.data(data);\n\n                dropdowntree.value(valueToSelect);\n            }\n        },\n\n        _tagTemplate: function() {\n            var dropdowntree = this._dropdowntree;\n            var options = dropdowntree.options;\n            var tagTemplate = options.valueTemplate;\n            var isMultiple = options.tagMode === \"multiple\";\n            var singleTag = encode(options.messages.singleTag);\n\n            tagTemplate = tagTemplate ? kendo.template(tagTemplate) : dropdowntree.valueTemplate;\n\n            dropdowntree.valueTemplate = function(data) {\n                return html.renderChip('<span ' +\n                    'class=\"' + ((data.enabled === false) ? \"k-disabled\" : \"\") + '\"' +\n                    ((data.enabled === false) ? 'aria-disabled=\"true\"' : '') +\n                    '>' +\n                    '</span>', $.extend({}, options, {\n                            fillMode: \"solid\",\n                            themeColor: \"base\",\n                            rounded: \"medium\",\n                            attr: {\n                                unselectable: \"on\",\n                                \"aria-keyshortcuts\": \"Enter Delete\",\n                                role: \"option\"\n                            },\n                            text: (isMultiple ? tagTemplate(data) : ('<span unselectable=\"on\" data-bind=\"text: tags.length\"></span>' +\n                            '<span unselectable=\"on\">&nbsp;' + singleTag + '</span>' )),\n                            removable: isMultiple,\n                            removeIcon: \"x-circle\",\n                            removableAttr: {\n                                unselectable: \"on\",\n                                \"aria-hidden\": true,\n                                \"aria-label\": dropdowntree.options.messages.deleteTag,\n                                title: dropdowntree.options.messages.deleteTag\n                            }\n                        }));\n            };\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                wrapper = element.parent(\".k-multiselecttree\");\n\n            if (!wrapper[0]) {\n                wrapper = element.wrap('<span class=\"k-multiselecttree k-input\" unselectable=\"on\" />').parent();\n                wrapper[0].style.cssText = element[0].style.cssText;\n                wrapper[0].title = element[0].title;\n            }\n\n            dropdowntree.wrapper = wrapper.addClass(element[0].className).css(\"display\", \"\");\n        },\n\n        _tagList: function() {\n            var dropdowntree = this._dropdowntree,\n                tagList = dropdowntree.wrapper.children(\"div.k-input-values\");\n\n            if (!tagList[0]) {\n                var isMultiple = dropdowntree.options.tagMode === \"multiple\";\n                var tagCollection = isMultiple ? \"tags\" : \"multipleTag\";\n\n                tagList = $(html.renderChipList('<div unselectable=\"on\" class=\"k-input-values k-selection-multiple\" data-template=\"tagTemplate\" data-bind=\"source: ' + tagCollection + '\" />', $.extend({ selectable: \"none\" }, dropdowntree.options))).appendTo(dropdowntree.wrapper);\n            }\n\n            dropdowntree.tagList = tagList;\n            dropdowntree.tagList.attr('id', kendo.guid() + \"_tagList\");\n            dropdowntree.wrapper.attr(\"aria-controls\", dropdowntree.tagList.attr('id'));\n            var viewModel = kendo.observable({\n                multipleTag: dropdowntree._multipleTags,\n                tags: dropdowntree._tags,\n                tagTemplate: dropdowntree.valueTemplate\n            });\n            kendo.bind(dropdowntree.tagList, viewModel);\n            dropdowntree.tagList.attr(\"data-stop\", true);\n        },\n\n        _refreshTagListAria: function() {\n            var that = this;\n            if (that.tagList) {\n                html.renderChipList(that.tagList, $.extend({ selectable: that.tagList.items().length === 0 ? \"none\" : \"multiple\" }, that.options));\n            }\n        },\n\n        _setValue: function(value) {\n            var that = this;\n            var dropdowntree = this._dropdowntree;\n            var oldValues = dropdowntree._values;\n            if (value === undefined$1 || value === null) {\n                return dropdowntree._values.slice();\n            }\n\n            dropdowntree.setValue(value);\n            dropdowntree._valueMethodCalled = true;\n            if (value.length) {\n                this._removeValues(oldValues, value);\n\n                dropdowntree._checkItemByValue(value);\n            } else {\n                dropdowntree._clearTextAndValue();\n            }\n\n            dropdowntree._valueMethodCalled = false;\n            dropdowntree._toggleCloseVisibility();\n            that._refreshTagListAria();\n            dropdowntree._refreshFloatingLabel();\n        },\n\n        _removeValues: function(oldValues, value) {\n            var dropdowntree = this._dropdowntree;\n            var removedValues = this._getNewValues(oldValues, value);\n\n            for (var idx = 0; idx < removedValues.length; idx++) {\n                for (var j = 0; j < dropdowntree._tags.length; j++) {\n                    if (dropdowntree._valueComparer(dropdowntree._tags[j],removedValues[idx])) {\n                        dropdowntree._uncheckItemByUid(dropdowntree._tags[j].uid);\n                    }\n                }\n            }\n        },\n\n        _getNewValues: function(oldValues, value) {\n            var removedValues = [];\n\n            for (var idx = 0; idx < oldValues.length; idx++) {\n                if (value.indexOf(oldValues[idx]) === -1) {\n                    removedValues.push(oldValues[idx]);\n                }\n            }\n\n            return removedValues;\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var tagsArray = dropdowntree._tags.slice();\n\n            for (var idx = 0; idx < tagsArray.length; idx++) {\n                var uid = tagsArray[idx].uid;\n                dropdowntree._preventChangeTrigger = true;\n                dropdowntree._uncheckItemByUid(uid);\n            }\n\n            if (tagsArray.length) {\n                dropdowntree._preventChangeTrigger = false;\n                if (!dropdowntree._valueMethodCalled) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (dropdowntree._noInitialValue && tempItem.checked) {\n                dropdowntree._checkValue(tempItem);\n                return;\n            }\n\n            if ((value.length || this._isDataSourceSet) &&\n                (value.indexOf(dropdowntree._currentValue(tempItem)) !== -1 || value.indexOf(tempItem)) !== -1 &&\n                !this._findTag(dropdowntree._currentValue(tempItem))) {\n                if (tempItem.checked) {\n                    dropdowntree._checkValue(tempItem);\n                } else {\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"checked\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                }\n            }\n        },\n\n        _findTag: function(tempItemValue) {\n            var dropdowntree = this._dropdowntree;\n\n            return dropdowntree._tags.find(function(item) {\n                return dropdowntree._valueComparer(item, tempItemValue);\n            });\n        }\n    });\n\n    kendo.ui.DropDownTree.SingleSelection = SingleSelection;\n    kendo.ui.DropDownTree.MultipleSelection = MultipleSelection;\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { __meta__, kendo$1 as default };\n"]}